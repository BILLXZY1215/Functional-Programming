<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Module: Control.Monad</title>
<!-- 2017-03-04 sÃ¡b 14:19 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="arch" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href='/theme/style.css' rel='stylesheet'>

<script type="text/javascript" src="/theme/org-info.js">
/**
 *
 * @source: /theme/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in /theme/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in /theme/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "3");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Module: Control.Monad</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Control.Monad - Monad Combinators</a>
<ul>
<li><a href="#sec-1-1">1.1. join</a></li>
<li><a href="#sec-1-2">1.2. liftM</a></li>
<li><a href="#sec-1-3">1.3. liftM2</a></li>
<li><a href="#sec-1-4">1.4. mapM</a></li>
<li><a href="#sec-1-5">1.5. mapM_</a></li>
<li><a href="#sec-1-6">1.6. forM</a></li>
<li><a href="#sec-1-7">1.7. forM_</a></li>
<li><a href="#sec-1-8">1.8. replicateM</a></li>
<li><a href="#sec-1-9">1.9. replicateM_</a></li>
<li><a href="#sec-1-10">1.10. sequence</a></li>
<li><a href="#sec-1-11">1.11. sequence_</a></li>
<li><a href="#sec-1-12">1.12. foldM</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Control.Monad - Monad Combinators</h2>
<div class="outline-text-2" id="text-1">
<p>
This module provides functions to manipulate monads. 
</p>

<p>
<a href="https://hackage.haskell.org/package/base-4.8.2.0/docs/Control-Monad.html">Module Documentation</a> 
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> join</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-definition">join</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> m (m a) <span class="org-haskell-operator">-&gt;</span> m a 
<span class="org-haskell-definition">join</span> mma <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span> 
   ma <span class="org-haskell-operator">&lt;-</span> mma 
   a  <span class="org-haskell-operator">&lt;-</span> ma 
   return a

<span class="org-haskell-definition">join</span> mma <span class="org-haskell-operator">=</span> 
  mma <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> ma <span class="org-haskell-operator">-&gt;</span> 
  ma  <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> a  <span class="org-haskell-operator">-&gt;</span>
    return a
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t join
<span class="org-haskell-definition">join</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> m (m a) <span class="org-haskell-operator">-&gt;</span> m a
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> join <span class="org-haskell-definition">$</span> <span class="org-haskell-type">Just</span> (<span class="org-haskell-type">Just</span> 10)
<span class="org-haskell-constructor">Just</span> 10
<span class="org-haskell-operator">&gt;</span> join <span class="org-haskell-definition">$</span> <span class="org-haskell-constructor">Just</span> <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-comment-delimiter">-- </span><span class="org-comment">Equals to concat when applied to lists </span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">join</span>  [[1, 2], [3], [4, 5, 6]]
[1,2,3,4,5,6]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">concat</span>  [[1, 2], [3], [4, 5, 6]]
[1,2,3,4,5,6]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">join</span> (<span class="org-haskell-constructor">Right</span> (<span class="org-haskell-constructor">Right</span> <span class="org-string">"It is right"</span>))
<span class="org-haskell-constructor">Right</span> <span class="org-string">"It is right"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">join</span> (<span class="org-haskell-constructor">Right</span> (<span class="org-haskell-constructor">Left</span> <span class="org-string">"It is wrong"</span>))
<span class="org-haskell-constructor">Left</span> <span class="org-string">"It is wrong"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">join</span> (<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">Right</span> <span class="org-string">"It is right"</span>))
<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">Right</span> <span class="org-string">"It is right"</span>)
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">join</span> (<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">Left</span> <span class="org-string">"It is right"</span>))
<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">Left</span> <span class="org-string">"It is right"</span>)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad.Identity</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">Identity</span> 100
<span class="org-haskell-constructor">Identity</span> 100
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">join</span> (<span class="org-haskell-constructor">Identity</span> (<span class="org-haskell-constructor">Identity</span> 20))
<span class="org-haskell-constructor">Identity</span> 20
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> liftM</h3>
<div class="outline-text-3" id="text-1-2">
<p>
liftM is equivalent to fmap. Apply a function to monad 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-definition">liftM</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> b) <span class="org-haskell-operator">-&gt;</span> m a <span class="org-haskell-operator">-&gt;</span> m b <span class="org-haskell-operator">=</span>
<span class="org-haskell-definition">liftM</span>  f ma  <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>  
  a <span class="org-haskell-operator">&lt;-</span> ma
  return <span class="org-haskell-operator">$</span> f a
</pre>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">fmap</span> (<span class="org-haskell-operator">+</span>1) [1, 2, 3, 4]
[2,3,4,5]
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">fmap</span> (<span class="org-haskell-operator">+</span>1) (<span class="org-haskell-constructor">Just</span> 10)
<span class="org-haskell-constructor">Just</span> 11
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">fmap</span> (<span class="org-haskell-operator">+</span>1) <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> (<span class="org-haskell-operator">+</span>1) [1, 2, 3, 4]
[2,3,4,5]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> (<span class="org-haskell-operator">+</span>1) (<span class="org-haskell-constructor">Just</span> 10)
<span class="org-haskell-constructor">Just</span> 11
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> (<span class="org-haskell-operator">+</span>1) <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> lines <span class="org-haskell-operator">$</span> readFile <span class="org-string">"/etc/lsb-release"</span>
[<span class="org-string">"DISTRIB_ID=Ubuntu"</span>,<span class="org-string">"DISTRIB_RELEASE=15.04"</span>,<span class="org-string">"DISTRIB_CODENAME=vivid"</span>,<span class="org-string">"DISTRIB_DESCRIPTION=\"Ubuntu 15.04\""</span>]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> length <span class="org-haskell-operator">$</span> liftM lines <span class="org-haskell-operator">$</span> readFile <span class="org-string">"/etc/lsb-release"</span>
4
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> (length <span class="org-haskell-operator">.</span> lines ) <span class="org-haskell-operator">$</span> readFile <span class="org-string">"/etc/lsb-release"</span>
4
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> (length <span class="org-haskell-operator">.</span> lines ) <span class="org-haskell-operator">.</span> readFile <span class="org-haskell-operator">$</span> <span class="org-string">"/etc/lsb-release"</span>
4
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> countLinesOfFile <span class="org-haskell-operator">=</span> liftM (length <span class="org-haskell-operator">.</span> lines ) <span class="org-haskell-operator">.</span> readFile
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">countLinesOfFile</span>  <span class="org-string">"/etc/lsb-release"</span>
4
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad.Identity</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> (<span class="org-haskell-operator">+</span>10) (<span class="org-haskell-constructor">Identity</span> 20)
<span class="org-haskell-constructor">Identity</span> 30
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> liftM2</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Apply a function to two monads. 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-definition">liftM2</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> b <span class="org-haskell-operator">-&gt;</span> c) <span class="org-haskell-operator">-&gt;</span> m a <span class="org-haskell-operator">-&gt;</span> m b <span class="org-haskell-operator">-&gt;</span> m c
<span class="org-haskell-definition">liftM2</span> f ma mb <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span> 
  a <span class="org-haskell-operator">&lt;-</span> ma 
  b <span class="org-haskell-operator">&lt;-</span> mb 
  return (f a b)

<span class="org-haskell-definition">liftM2</span> f ma mb <span class="org-haskell-operator">=</span> 
  ma <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span>a <span class="org-haskell-operator">-&gt;</span>
  mb <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span>b <span class="org-haskell-operator">-&gt;</span> 
  return (f a b)
</pre>
</div>

<p>
Examples:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) (<span class="org-haskell-constructor">Just</span> 3) (<span class="org-haskell-constructor">Just</span> 4)
<span class="org-haskell-constructor">Just</span> 7
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) (<span class="org-haskell-constructor">Just</span> 3) <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) <span class="org-haskell-constructor">Nothing</span>  <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) (<span class="org-haskell-constructor">Right</span> 10) (<span class="org-haskell-constructor">Right</span> 20)
<span class="org-haskell-constructor">Right</span> 30
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) (<span class="org-haskell-constructor">Right</span> 10) (<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error parser failed"</span>)
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error parser failed"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) (<span class="org-haskell-constructor">Left</span> <span class="org-string">"Invalid number"</span>) (<span class="org-haskell-constructor">Right</span> 20)
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Invalid number"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) (<span class="org-haskell-constructor">Left</span> <span class="org-string">"Invalid number"</span>) (<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error parser failed"</span>)
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Invalid number"</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) [1, 2, 3, 4] [9, 8, 10]
[10,9,11,11,10,12,12,11,13,13,12,14]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Identity.Monad</span>
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM2</span> (<span class="org-haskell-operator">+</span>) (<span class="org-haskell-constructor">Identity</span> 20) (<span class="org-haskell-constructor">Identity</span> 30)
<span class="org-haskell-constructor">Identity</span> 50
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> mapM</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Map each element of a structure to a monadic action, evaluate these
actions from left to right, and collect the results. For a version
that ignores the results see mapM_. (documentation) 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.6.3 </span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-definition">mapM</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> [a] <span class="org-haskell-operator">-&gt;</span> m [b]
<span class="org-haskell-definition">mapM</span> f ts <span class="org-haskell-operator">=</span> sequence (map f ts)

<span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.10.2 </span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-definition">mapM</span> <span class="org-haskell-operator">::</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> t a <span class="org-haskell-operator">-&gt;</span> m (t b)
<span class="org-haskell-definition">mapM</span> f ts <span class="org-haskell-operator">=</span> sequence (fmap f ts)
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.Maybe</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">M</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">System.Environment</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">E</span>


<span class="org-comment-delimiter">-- </span><span class="org-comment">Signature in Haskell 7.6.3</span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t mapM
<span class="org-haskell-definition">mapM</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> [a] <span class="org-haskell-operator">-&gt;</span> m [b]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t E.lookupEnv 
E<span class="org-haskell-definition">.</span>lookupEnv <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> (<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">String</span>)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">-- </span><span class="org-comment">Singature in Haskell 7.10.2 (mapM is generalized). </span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t mapM
<span class="org-haskell-definition">mapM</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Monad</span> m, <span class="org-haskell-type">Traversable</span> t) <span class="org-haskell-operator">=&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> t a <span class="org-haskell-operator">-&gt;</span> m (t b)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM</span> E.lookupEnv [<span class="org-string">"HOME"</span>, <span class="org-string">"a1"</span>, <span class="org-string">"b1"</span>, <span class="org-string">"LANGUAGE"</span>, <span class="org-string">"PYTHONPATH"</span>]
[<span class="org-haskell-constructor">Just</span> <span class="org-string">"/home/tux"</span>,<span class="org-haskell-constructor">Nothing</span>,<span class="org-haskell-constructor">Nothing</span>,<span class="org-haskell-constructor">Just</span> <span class="org-string">"en_US"</span>,<span class="org-haskell-constructor">Just</span> <span class="org-string">"/home/tux/lib"</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t M.catMaybes 
M<span class="org-haskell-definition">.</span>catMaybes <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">Maybe</span> a] <span class="org-haskell-operator">-&gt;</span> [a]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">fmap</span> M.catMaybes  <span class="org-haskell-operator">$</span> mapM E.lookupEnv [<span class="org-string">"HOME"</span>, <span class="org-string">"a1"</span>, <span class="org-string">"b1"</span>, <span class="org-string">"LANGUAGE"</span>, <span class="org-string">"PYTHONPATH"</span>]
[<span class="org-string">"/home/tux"</span>,<span class="org-string">"en_US"</span>,<span class="org-string">"/home/tux/lib"</span>]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t fmap M.catMaybes  <span class="org-haskell-operator">$</span> mapM E.lookupEnv [<span class="org-string">"HOME"</span>, <span class="org-string">"a1"</span>, <span class="org-string">"b1"</span>, <span class="org-string">"LANGUAGE"</span>, <span class="org-string">"PYTHONPATH"</span>]
<span class="org-haskell-definition">fmap</span> M.catMaybes  <span class="org-haskell-operator">$</span> mapM E.lookupEnv [<span class="org-string">"HOME"</span>, <span class="org-string">"a1"</span>, <span class="org-string">"b1"</span>, <span class="org-string">"LANGUAGE"</span>, <span class="org-string">"PYTHONPATH"</span>]
  <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> [<span class="org-haskell-type">String</span>]
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> selector <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">if</span> x <span class="org-haskell-operator">&gt;</span> 10 <span class="org-haskell-keyword">then</span> <span class="org-haskell-constructor">Just</span> (3 <span class="org-haskell-operator">+</span> x) <span class="org-haskell-keyword">else</span> <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t selector 
<span class="org-haskell-definition">selector</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Num</span> a, <span class="org-haskell-type">Ord</span> a) <span class="org-haskell-operator">=&gt;</span> a <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Maybe</span> a
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM</span> selector (<span class="org-haskell-type">Just</span> 20)
<span class="org-haskell-constructor">Just</span> (<span class="org-haskell-constructor">Just</span> 23)
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM</span> selector <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-constructor">Just</span> <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM</span> selector (<span class="org-haskell-constructor">Just</span> 3)
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM</span> selector [1, 2, 3, 4]
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM</span> selector [ 20, 30, 40]
<span class="org-haskell-constructor">Just</span> [23,33,43]
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> mapM_</h3>
<div class="outline-text-3" id="text-1-5">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.6.3</span>
<span class="org-haskell-definition">mapM_</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> [a] <span class="org-haskell-operator">-&gt;</span> m <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">mapM_</span> fn ta <span class="org-haskell-operator">=</span> sequence_ <span class="org-haskell-operator">$</span> map fn ta 

<span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.10.2  - Generalized version of old mapM_</span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-definition">mapM_</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Monad</span> m, <span class="org-haskell-type">Foldable</span> t) <span class="org-haskell-operator">=&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> t a <span class="org-haskell-operator">-&gt;</span> m <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">matM_</span> fn ta <span class="org-haskell-operator">=</span>  sequence_ <span class="org-haskell-operator">$</span> fmap fn ta
</pre>
</div>


<p>
Example: 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> putStrLn [<span class="org-string">"line 1"</span>, <span class="org-string">"line 3"</span>, <span class="org-string">"line 4"</span>]
<span class="org-haskell-definition">line</span> 1
<span class="org-haskell-definition">line</span> 3
<span class="org-haskell-definition">line</span> 4
<span class="org-haskell-operator">&gt;</span>  


<span class="org-comment-delimiter">-- </span><span class="org-comment">Lines bellow only Haskell 7.10.2 and compatible. </span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> putStrLn (<span class="org-haskell-constructor">Just</span> <span class="org-string">"line"</span>)
line
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> putStrLn <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> putStrLn (<span class="org-haskell-constructor">Right</span> <span class="org-string">"line"</span>)
line
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> putStrLn (<span class="org-haskell-constructor">Left</span> <span class="org-string">"error BSOD 0x01002234"</span>)
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> sequence_ <span class="org-haskell-definition">$</span> fmap putStrLn (<span class="org-haskell-constructor">Just</span> <span class="org-string">"line"</span>)
line
<span class="org-haskell-operator">&gt;</span> sequence_ <span class="org-haskell-definition">$</span> fmap putStrLn <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> sequence_ <span class="org-haskell-definition">$</span> fmap putStrLn [<span class="org-string">"line 1"</span>, <span class="org-string">"line 2"</span>, <span class="org-string">"line 3"</span>]
<span class="org-haskell-definition">line</span> 1
<span class="org-haskell-definition">line</span> 2
<span class="org-haskell-definition">line</span> 3
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> forM</h3>
<div class="outline-text-3" id="text-1-6">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.10.2  </span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-definition">forM</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Monad</span> m, <span class="org-haskell-type">Traversable</span> t) <span class="org-haskell-operator">=&gt;</span> t a <span class="org-haskell-operator">-&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> m (t b)
<span class="org-haskell-definition">forM</span> <span class="org-haskell-operator">=</span> flip mapM
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM</span>  [<span class="org-string">"HOME"</span>, <span class="org-string">"LANGUAGE"</span>, <span class="org-string">"LC_TIME"</span>, <span class="org-string">"dummy"</span>] E.lookupEnv  
[<span class="org-haskell-constructor">Just</span> <span class="org-string">"/home/tux"</span>,<span class="org-haskell-constructor">Just</span> <span class="org-string">"en_US"</span>,<span class="org-haskell-constructor">Just</span> <span class="org-string">"pt_BR.UTF-8"</span>,<span class="org-haskell-constructor">Nothing</span>]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t forM  [<span class="org-string">"HOME"</span>, <span class="org-string">"LANGUAGE"</span>, <span class="org-string">"LC_TIME"</span>, <span class="org-string">"dummy"</span>] E.lookupEnv  
<span class="org-haskell-definition">forM</span>  [<span class="org-string">"HOME"</span>, <span class="org-string">"LANGUAGE"</span>, <span class="org-string">"LC_TIME"</span>, <span class="org-string">"dummy"</span>] E.lookupEnv
  <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> [<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">String</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM</span>  [<span class="org-string">"/etc/issue.net"</span>, <span class="org-string">"/etc/issue"</span>, <span class="org-string">"/proc/cmdline"</span>] readFile
[<span class="org-string">"Ubuntu 15.04\n"</span>,<span class="org-string">"Ubuntu 15.04 \\n \\l\n\n"</span>,<span class="org-string">"BOOT_IMAGE=/boot/vmlinuz-3.19.0-39-generic ..."</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM</span>   (<span class="org-haskell-constructor">Just</span> <span class="org-string">"/etc/issue.net"</span>) readFile  
<span class="org-haskell-constructor">Just</span> <span class="org-string">"Ubuntu 15.04\n"</span>
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t forM   (<span class="org-haskell-constructor">Just</span> <span class="org-string">"/etc/issue.net"</span>) readFile  
<span class="org-haskell-definition">forM</span>   (<span class="org-haskell-constructor">Just</span> <span class="org-string">"/etc/issue.net"</span>) readFile <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> (<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">String</span>)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM</span>  <span class="org-haskell-type">Nothing</span> readFile  
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM</span> (<span class="org-haskell-constructor">Right</span> <span class="org-string">"/etc/issue.net"</span>) readFile  
<span class="org-haskell-constructor">Right</span> <span class="org-string">"Ubuntu 15.04\n"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM</span> (<span class="org-haskell-constructor">Left</span> <span class="org-string">"Fatal kernel error! System shutdown!!"</span>) readFile  
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Fatal kernel error! System shutdown!!"</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> forM_</h3>
<div class="outline-text-3" id="text-1-7">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.6.3 </span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-definition">forM_</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Monad</span> m, <span class="org-haskell-type">Foldable</span> t) <span class="org-haskell-operator">=&gt;</span> t a <span class="org-haskell-operator">-&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> m <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">forM_</span> <span class="org-haskell-operator">=</span> flip mapM_

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM_</span> [1, 2, 3, 4, 5] <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> n <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-haskell-operator">$</span> show n
1
2
3
4
5
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM_</span> [1, 2, 3, 4, 5] ( <span class="org-haskell-operator">\</span> n <span class="org-haskell-operator">-&gt;</span> putStrLn ( show n))
1
2
3
4
5
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM_</span> (<span class="org-haskell-constructor">Just</span> 10) <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> n <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-haskell-operator">$</span> show n
10
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM_</span> <span class="org-haskell-constructor">Nothing</span> <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> n <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-haskell-operator">$</span> show n
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM_</span> (<span class="org-haskell-constructor">Right</span> 1000) <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> n <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-haskell-operator">$</span> show n
1000
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM_</span> (<span class="org-haskell-constructor">Left</span> <span class="org-string">"Fatal Kernel Error"</span>) <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> n <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-haskell-operator">$</span> show n
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>


<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-haskell"></pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> replicateM</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Replicate a monad n times getting the results.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-definition">replicateM</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">Int</span> <span class="org-haskell-operator">-&gt;</span> m a <span class="org-haskell-operator">-&gt;</span> m [a]
<span class="org-haskell-definition">replicateM</span> n x    <span class="org-haskell-operator">=</span> sequence (replicate n x)
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">replicateM</span> 4 (<span class="org-haskell-constructor">Just</span> 3)
<span class="org-haskell-constructor">Just</span> [3,3,3,3]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">replicateM</span> 4 <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">replicateM</span> 3 (<span class="org-haskell-constructor">Right</span> 2)
<span class="org-haskell-constructor">Right</span> [2,2,2]
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">replicateM</span> 3 (<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: 0x902323EABC"</span>)
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: 0x902323EABC"</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">replicateM</span> 3 [1, 2]
[[1,1,1],[1,1,2],[1,2,1],[1,2,2],[2,1,1],[2,1,2],[2,2,1],[2,2,2]]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t replicateM 3 getLine
<span class="org-haskell-definition">replicateM</span> 3 getLine <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> [<span class="org-haskell-type">String</span>]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">replicateM</span> 3 getLine
line1
line2
line3
[<span class="org-string">"line1"</span>,<span class="org-string">"line2"</span>,<span class="org-string">"line3"</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> lines <span class="org-haskell-operator">&lt;-</span> replicateM 3 getLine
line1
line2
line3
<span class="org-haskell-operator">&gt;</span> lines
[<span class="org-string">"line1"</span>,<span class="org-string">"line2"</span>,<span class="org-string">"line3"</span>]
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t lines
<span class="org-haskell-definition">lines</span> <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">String</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad.Identity</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">replicateM</span> 6 (<span class="org-haskell-constructor">Identity</span> 2)
<span class="org-haskell-constructor">Identity</span> [2,2,2,2,2,2]
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> replicateM_</h3>
<div class="outline-text-3" id="text-1-9">
<p>
Like replicateM, but throw away the result.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-definition">replicateM_</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">Int</span> <span class="org-haskell-operator">-&gt;</span> m a <span class="org-haskell-operator">-&gt;</span> m <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">replicateM_</span> n x   <span class="org-haskell-operator">=</span> sequence_ (replicate n x)
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">replicateM_</span> 3 (putStrLn <span class="org-string">"hello world"</span>)
<span class="org-haskell-definition">hello</span> world
<span class="org-haskell-definition">hello</span> world
<span class="org-haskell-definition">hello</span> world
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t replicateM_ 3 (putStrLn <span class="org-string">"hello world"</span>)
<span class="org-haskell-definition">replicateM_</span> 3 (putStrLn <span class="org-string">"hello world"</span>) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10"><span class="section-number-3">1.10</span> sequence</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Evaluate each monadic action in the structure from left to right, and
collect the results. For a version that ignores the results see
sequence_.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-comment-delimiter">-- </span><span class="org-comment">Implementation Haskell 7.6.3</span>
<span class="org-comment-delimiter">-- </span>
<span class="org-comment-delimiter">-- </span><span class="org-comment">Source: http://kodu.ut.ee/~varmo/FP2007/slides/loeng13.pdf</span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-definition">sequence</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> [m a] <span class="org-haskell-operator">-&gt;</span> m [a]
<span class="org-haskell-definition">sequence</span> <span class="org-haskell-operator">=</span> foldr mcons (return <span class="org-haskell-constructor">[]</span>)
    <span class="org-haskell-keyword">where</span> 
       mcons p q <span class="org-haskell-operator">=</span> 
          p <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> 
          q <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span>y <span class="org-haskell-operator">-&gt;</span> 
           return (x<span class="org-haskell-constructor">:</span>y)
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.6.3 </span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t sequence
<span class="org-haskell-definition">sequence</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> [m a] <span class="org-haskell-operator">-&gt;</span> m [a]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.10.2 </span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t sequence
<span class="org-haskell-definition">sequence</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Monad</span> m, <span class="org-haskell-type">Traversable</span> t) <span class="org-haskell-operator">=&gt;</span> t (m a) <span class="org-haskell-operator">-&gt;</span> m (t a)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [[1], [2, 3, 4], <span class="org-haskell-constructor">[]</span>, [4], <span class="org-haskell-constructor">[]</span>, <span class="org-haskell-constructor">[]</span>, [20, 30]]
<span class="org-haskell-constructor">[]</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [[1], [2, 3, 4],  [4],  [20, 30]]
[[1,2,4,20],[1,2,4,30],[1,3,4,20],[1,3,4,30],[1,4,4,20],[1,4,4,30]]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [[2, 3, 4],  [4],  [20, 30]]
[[2,4,20],[2,4,30],[3,4,20],[3,4,30],[4,4,20],[4,4,30]]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.6.3 (Sequence only works for lists)</span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> (<span class="org-haskell-constructor">Just</span> [1, 2, 3, 4])

<span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>8<span class="org-haskell-constructor">:</span>11<span class="org-haskell-constructor">:</span>
    <span class="org-haskell-constructor">Couldn't</span> match expected <span class="org-haskell-keyword">type</span> `[m0 a0]'
                with actual <span class="org-haskell-keyword">type</span> `<span class="org-haskell-type">Maybe</span> [t0]'
    <span class="org-haskell-constructor">In</span> the return <span class="org-haskell-keyword">type</span> <span class="org-haskell-keyword">of</span> a call <span class="org-haskell-keyword">of</span> `<span class="org-haskell-constructor">Just'</span>

<span class="org-comment-delimiter">--</span><span class="org-comment">- Haskell 7.10.2 (Sequence was generalized)</span>
<span class="org-comment-delimiter">--</span><span class="org-comment">-</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> (<span class="org-haskell-constructor">Just</span> [1, 2, 3, 4])
[<span class="org-haskell-constructor">Just</span> 1,<span class="org-haskell-constructor">Just</span> 2,<span class="org-haskell-constructor">Just</span> 3,<span class="org-haskell-constructor">Just</span> 4]
<span class="org-haskell-operator">&gt;</span> 



<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [<span class="org-haskell-constructor">Just</span> 1, <span class="org-haskell-constructor">Just</span> 2, <span class="org-haskell-constructor">Just</span> 3, <span class="org-haskell-constructor">Just</span> 4] 
<span class="org-haskell-constructor">Just</span> [1,2,3,4]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [<span class="org-haskell-constructor">Just</span> 1, <span class="org-haskell-constructor">Just</span> 2, <span class="org-haskell-constructor">Just</span> 3, <span class="org-haskell-constructor">Nothing</span>, <span class="org-haskell-constructor">Just</span> 4, <span class="org-haskell-constructor">Nothing</span>] 
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [<span class="org-haskell-constructor">Right</span> 1, <span class="org-haskell-constructor">Right</span> 2, <span class="org-haskell-constructor">Right</span> 3, <span class="org-haskell-constructor">Right</span> 4]
<span class="org-haskell-constructor">Right</span> [1,2,3,4] 
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [<span class="org-haskell-constructor">Right</span> 10, <span class="org-haskell-constructor">Left</span> <span class="org-string">"Error 0"</span>, <span class="org-haskell-constructor">Left</span> <span class="org-string">"Error 1"</span>, <span class="org-haskell-constructor">Left</span> <span class="org-string">"Error 2"</span>] 
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error 0"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [<span class="org-haskell-constructor">Right</span> 10, <span class="org-haskell-constructor">Right</span> 20, <span class="org-haskell-constructor">Left</span> <span class="org-string">"Error 1"</span>, <span class="org-haskell-constructor">Right</span> 4] 
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error 1"</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t [putStrLn <span class="org-string">"line1"</span>, putStrLn <span class="org-string">"line2"</span>, putStrLn <span class="org-string">"line3"</span>]
[putStrLn <span class="org-string">"line1"</span>, putStrLn <span class="org-string">"line2"</span>, putStrLn <span class="org-string">"line3"</span>] <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [putStrLn <span class="org-string">"line1"</span>, putStrLn <span class="org-string">"line2"</span>, putStrLn <span class="org-string">"line3"</span>]
line1
line2
line3
[<span class="org-haskell-constructor">()</span>,<span class="org-haskell-constructor">()</span>,<span class="org-haskell-constructor">()</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> inputNunmber <span class="org-haskell-operator">=</span> getLine <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> str <span class="org-haskell-operator">-&gt;</span> return <span class="org-haskell-operator">$</span> (read str <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integer</span>)
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t inputNunmber 
<span class="org-haskell-definition">inputNunmber</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">Integer</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> actions <span class="org-haskell-operator">=</span> [inputNunmber, inputNunmber, inputNunmber]
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t actions 
<span class="org-haskell-definition">actions</span> <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">IO</span> <span class="org-haskell-type">Integer</span>]
<span class="org-haskell-operator">&gt;</span> 

 <span class="org-comment-delimiter">-- </span><span class="org-comment">Only works in the repl (&lt;-) to extract content from IO Monad.</span>

<span class="org-haskell-operator">&gt;</span> out <span class="org-haskell-operator">&lt;-</span> sequence actions 
23
100
200
<span class="org-haskell-operator">&gt;</span> out
[23,100,200]
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t out
<span class="org-haskell-definition">out</span> <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">Integer</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> actions 
200
30
50
[200,30,50]
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t sequence actions 
<span class="org-haskell-definition">sequence</span> actions <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> [<span class="org-haskell-type">Integer</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad.Identity</span>
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence</span> [<span class="org-haskell-constructor">Identity</span> 20, <span class="org-haskell-constructor">Identity</span> 10, <span class="org-haskell-constructor">Identity</span> 30]
<span class="org-haskell-constructor">Identity</span> [20,10,30]
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-11" class="outline-3">
<h3 id="sec-1-11"><span class="section-number-3">1.11</span> sequence_</h3>
<div class="outline-text-3" id="text-1-11">
<p>
Evaluate each monadic action in the structure from left to right, and
ignore the results. For a version that doesn't ignore the results see
sequence. (documentation).
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.6.3. Most of texts and lectures notes refers </span>
<span class="org-comment-delimiter">-- </span><span class="org-comment">to the old implementation of sequence_. </span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-definition">sequence_</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> [m a] <span class="org-haskell-operator">-&gt;</span> m <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">sequence_</span> <span class="org-haskell-operator">=</span> foldr (<span class="org-haskell-operator">&gt;&gt;</span>) (return <span class="org-haskell-constructor">()</span>)

<span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.10.2</span>
<span class="org-haskell-definition">sequence_</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Monad</span> m, <span class="org-haskell-type">Foldable</span> t) <span class="org-haskell-operator">=&gt;</span> t (m a) <span class="org-haskell-operator">-&gt;</span> m <span class="org-haskell-constructor">()</span>
</pre>
</div>

<p>
Examples:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

(<span class="org-haskell-definition">&gt;&gt;</span>) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> m a <span class="org-haskell-operator">-&gt;</span> m b <span class="org-haskell-operator">-&gt;</span> m b
(<span class="org-haskell-definition">&gt;&gt;</span>) ma mb <span class="org-haskell-operator">=</span> 
     ma <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">-&gt;</span>  mb 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">putStrLn</span> <span class="org-string">"hello world"</span> <span class="org-haskell-operator">&gt;&gt;</span> putStrLn <span class="org-string">"Hola mundo"</span>
<span class="org-haskell-definition">hello</span> world
<span class="org-haskell-constructor">Hola</span> mundo
<span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">--  </span><span class="org-comment">Haskell 7.10.2 and Haskell 7.6.3 </span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">sequence_</span> [putStrLn <span class="org-string">"Line 1"</span>, putStrLn <span class="org-string">"Line 2"</span>, putStrLn <span class="org-string">"Line 3"</span>]
<span class="org-haskell-constructor">Line</span> 1
<span class="org-haskell-constructor">Line</span> 2
<span class="org-haskell-constructor">Line</span> 3
<span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">--  </span><span class="org-comment">Haskell 7.10.2 only. </span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-operator">&gt;</span> sequence_ <span class="org-haskell-definition">$</span> <span class="org-haskell-constructor">Just</span> (putStrLn <span class="org-string">"Hello world"</span>)
<span class="org-haskell-constructor">Hello</span> world
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t sequence_ <span class="org-haskell-operator">$</span> <span class="org-haskell-constructor">Just</span> (putStrLn <span class="org-string">"Hello world"</span>)
sequence_ <span class="org-haskell-definition">$</span> <span class="org-haskell-constructor">Just</span> (putStrLn <span class="org-string">"Hello world"</span>) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> sequence_ <span class="org-haskell-definition">$</span> <span class="org-haskell-type">Just</span> ([1, 2, 3, 4, 5])
[<span class="org-haskell-constructor">()</span>,<span class="org-haskell-constructor">()</span>,<span class="org-haskell-constructor">()</span>,<span class="org-haskell-constructor">()</span>,<span class="org-haskell-constructor">()</span>]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> sequence_ <span class="org-haskell-definition">$</span> <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-12" class="outline-3">
<h3 id="sec-1-12"><span class="section-number-3">1.12</span> foldM</h3>
<div class="outline-text-3" id="text-1-12">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.6.3</span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-definition">foldM</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> b <span class="org-haskell-operator">-&gt;</span> m a) <span class="org-haskell-operator">-&gt;</span> a <span class="org-haskell-operator">-&gt;</span> [b] <span class="org-haskell-operator">-&gt;</span> m a
<span class="org-haskell-definition">foldM</span> f a <span class="org-haskell-constructor">[]</span>     <span class="org-haskell-operator">=</span> return a 
<span class="org-haskell-definition">foldM</span> f a (x<span class="org-haskell-constructor">:</span>xs) <span class="org-haskell-operator">=</span>  f a x <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> fax <span class="org-haskell-operator">-&gt;</span> foldM f fax xs

<span class="org-comment-delimiter">-- </span><span class="org-comment">Haskell 7.10.2 </span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-definition">foldM</span>  <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Monad</span> m, <span class="org-haskell-type">Foldable</span> t) <span class="org-haskell-operator">=&gt;</span> (b <span class="org-haskell-operator">-&gt;</span> a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> b <span class="org-haskell-operator">-&gt;</span> t a <span class="org-haskell-operator">-&gt;</span> m b
<span class="org-haskell-definition">foldM</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">???</span>


<span class="org-comment-delimiter">-- </span><span class="org-comment">foldM Intutition </span>

<span class="org-haskell-definition">foldM</span> f acc0  [x0, x1, x2, <span class="org-haskell-operator">...</span> xn] <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>  acc1 <span class="org-haskell-operator">&lt;-</span> f acc0 x0 
                                         acc2 <span class="org-haskell-operator">&lt;-</span> f acc1 x1 
                                         acc3 <span class="org-haskell-operator">&lt;-</span> f acc2 x2
                                         <span class="org-haskell-operator">...</span>
                                         f an xn
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Identity.Monad</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">foldM</span> (<span class="org-haskell-operator">\</span>acc x <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Identity</span> (10 <span class="org-haskell-operator">*</span> acc <span class="org-haskell-operator">+</span> x)) 0 [1, 2, 3, 4, 5]
<span class="org-haskell-constructor">Identity</span> 12345
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">foldM</span> (<span class="org-haskell-operator">\</span>acc x <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Just</span> (10 <span class="org-haskell-operator">*</span> acc <span class="org-haskell-operator">+</span> x)) 0 [1, 2, 3, 4, 5]
<span class="org-haskell-constructor">Just</span> 12345
<span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">-- </span><span class="org-comment">If the functions returns Nothing, the whole computation fails:</span>
<span class="org-comment-delimiter">-- </span><span class="org-comment">returns Nothing </span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">foldM</span> (<span class="org-haskell-operator">\</span>acc x <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">if</span> x <span class="org-haskell-operator">&gt;</span> 3 <span class="org-haskell-keyword">then</span> <span class="org-haskell-constructor">Nothing</span> <span class="org-haskell-keyword">else</span> <span class="org-haskell-constructor">Just</span> (10 <span class="org-haskell-operator">*</span> acc <span class="org-haskell-operator">+</span> x)) 0 [1, 2, 3, 4, 5]
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">foldM</span> (<span class="org-haskell-operator">\</span>acc x <span class="org-haskell-operator">-&gt;</span> return (10 <span class="org-haskell-operator">*</span> acc <span class="org-haskell-operator">+</span> x) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">Integer</span>) 0 [1, 2, 3, 4, 5]
12345
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t foldM (<span class="org-haskell-operator">\</span>acc x <span class="org-haskell-operator">-&gt;</span> return (10 <span class="org-haskell-operator">*</span> acc <span class="org-haskell-operator">+</span> x) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">Integer</span>) 0 [1, 2, 3, 4, 5]
<span class="org-haskell-definition">foldM</span> (<span class="org-haskell-operator">\</span>acc x <span class="org-haskell-operator">-&gt;</span> return (10 <span class="org-haskell-operator">*</span> acc <span class="org-haskell-operator">+</span> x) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">Integer</span>) 0 [1, 2, 3, 4, 5]
  <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">Integer</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: arch</p>
<p class="date">Created: 2017-03-04 sÃ¡b 14:19</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>