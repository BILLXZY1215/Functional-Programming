<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Exception Handling</title>
<!-- 2017-03-05 dom 08:16 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Caio Rodrigues" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href='/theme/style.css' rel='stylesheet'>
<link href="/Functional-Programming/theme/style.css" rel="stylesheet">

<script type="text/javascript" src="/theme/org-info.js">
/**
 *
 * @source: /theme/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in /theme/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in /theme/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "4");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Exception Handling</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Exception Handling</a>
<ul>
<li><a href="#sec-1-1">1.1. Overview</a></li>
<li><a href="#sec-1-2">1.2. Avoiding Exceptions in Pure functions</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. Overview</a></li>
<li><a href="#sec-1-2-2">1.2.2. Avoiding Exception in partial functions</a></li>
<li><a href="#sec-1-2-3">1.2.3. Avoid exception in data validation</a></li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Catching Exceptions</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. Overview</a></li>
<li><a href="#sec-1-3-2">1.3.2. Examples of Exceptions:</a></li>
<li><a href="#sec-1-3-3">1.3.3. Catching Exceptions with catch</a>
<ul>
<li><a href="#sec-1-3-3-1">1.3.3.1. Overview</a></li>
<li><a href="#sec-1-3-3-2">1.3.3.2. Catching all exceptions</a></li>
<li><a href="#sec-1-3-3-3">1.3.3.3. Narrowing Exceptions</a></li>
<li><a href="#sec-1-3-3-4">1.3.3.4. Narrowing IO Exceptions</a></li>
</ul>
</li>
<li><a href="#sec-1-3-4">1.3.4. Catching Exceptions with catchIOError</a></li>
<li><a href="#sec-1-3-5">1.3.5. Catching Exceptions using the function catches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<lu> 
  <li><a href="/Functional-Programming/index.html">Index</a></li>
  <li><a href="https://github.com/caiorss/Functional-Programming">Repository</a></li>
</lu>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Exception Handling</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Overview</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Exceptions are events that happens during run-time that disrupts the
normal flow of execution. The common sources of exceptions are
partial functions (functions not defined to all its domain),
user-thrown exceptions and IO. 
</p>

<p>
The Haskell static typing system by itself frees the developer from
"NullPointer Exceptions" and "value error" exceptions that happens
when the code tries to sum a string and int in untyped languages. The
compiler notifies the developer that it happened not allowing the code
to run or go on production before it is solved.  
</p>


<ul class="org-ul">
<li>The type system avoids <span class="underline">value error exceptions</span> and <span class="underline">null pointer
exceptions</span> avoiding unpleasant surprise at run-time. 
</li>

<li>Maybe or Option type avoids null checking and Null pointer
exceptions and raising exceptions for invalid data.
</li>

<li>Either type is similar to Maybe, however it allows to report the
failure or what is wrong with input.
</li>

<li>Summarizing: The strong static typing system will help to avoid
many hours of debugging trying to find where the null pointer
exception or value error exception comes from, customer complaints
and headaches.
</li>
</ul>

<p>
See also: 
</p>

<ul class="org-ul">
<li><a href="https://ro-che.info/articles/2015-05-02-smarter-validation">Smarter validation</a>
</li>

<li><a href="http://fsharpforfunandprofit.com/posts/recipe-part2/">Railway oriented programming | F# for fun and profit</a>
</li>

<li><a href="http://martinfowler.com/articles/replaceThrowWithNotification.html">Replacing Throwing Exceptions with Notification in Validations</a>
</li>

<li><a href="http://softwareengineering.stackexchange.com/questions/150837/maybe-monad-vs-exceptions?noredirect=1&lq=1">language agnostic - Maybe monad vs exceptions - Software
Engineering Stack Exchange</a>
</li>

<li><a href="http://codemonkeyism.com/some-thoughts-on-error-handling/">Some Thoughts on Error Handling - @codemonkeyism</a>
</li>

<li id="[[<a href="https://blogs.janestreet.com/making-something-out-of-nothing-or-why-none-is-better-than-nan-and-null/][Making">https://blogs.janestreet.com/making-something-out-of-nothing-or-why-none-is-better-than-nan-and-null/][Making</a> something out of nothing (or, why None is better than NaN and NULL)">Jane Street Tech Blogs]]
</li>

<li><a href="http://robotlolita.me/2013/12/08/a-monad-in-practicality-first-class-failures.html">A Monad in Practicality: First-Class Failures - Quils in Space</a>
</li>

<li><a href="https://hackage.haskell.org/package/validation-0.5.3/docs/Data-Validation.html">Data.Validation</a>
</li>

<li><a href="https://hackage.haskell.org/package/either-4.4.1.1/docs/Data-Either-Validation.html">Data.Either.Validation</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Avoiding Exceptions in Pure functions</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
For pure functions and functions that performs validation like
valideDateOfBirth the best way is to indicate that the function may
fail making it explicit on the type system using Maybe or Either
returning <code>Nothing</code> for Maybe type or <code>Left &lt;error-type&gt;</code> for Either
type.
</p>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Avoiding Exception in partial functions</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
Examples of <span class="underline">partial functions</span>: 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">head</span> [10, 20, 30] 
10
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Num</span> a <span class="org-haskell-operator">=&gt;</span> a
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">head</span> <span class="org-haskell-constructor">[]</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> Prelude.head<span class="org-haskell-type">:</span> empty list
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">div</span> 100 0 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">read</span> <span class="org-string">"100"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span> 
100
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">read</span> <span class="org-string">"-100"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span> 
<span class="org-haskell-operator">-</span>100
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">read</span> <span class="org-string">"noise"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> Prelude.read<span class="org-haskell-type">:</span> no parse
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
Example: Avoiding exceptions using Maybe (Option type) or Either:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">headSafe</span> <span class="org-haskell-operator">::</span> [a] <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Maybe</span> a
<span class="org-haskell-definition">headSafe</span> <span class="org-haskell-constructor">[]</span>     <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">Nothing</span> 
<span class="org-haskell-definition">headSafe</span> (x<span class="org-haskell-constructor">:</span><span class="org-haskell-keyword">_</span>)  <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">Just</span> x
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">headSafe</span> [1, 2, 3, 4, 5]
<span class="org-haskell-constructor">Just</span> 1
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Num</span> a <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">Maybe</span> a
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">headSafe</span> <span class="org-haskell-constructor">[]</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> a
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t headSafe
<span class="org-haskell-definition">headSafe</span> <span class="org-haskell-operator">::</span> [a] <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Maybe</span> a
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-type">:</span>t div 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">div</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integral</span> a <span class="org-haskell-operator">=&gt;</span> a <span class="org-haskell-operator">-&gt;</span> a <span class="org-haskell-operator">-&gt;</span> a
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">divSafe</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integral</span> a <span class="org-haskell-operator">=&gt;</span> a <span class="org-haskell-operator">-&gt;</span> a <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Maybe</span> a
<span class="org-haskell-definition">divSafe</span> x 0 <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-definition">divSafe</span> x y <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">Just</span> (div x y)
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">divSafe</span> 100 20 
<span class="org-haskell-constructor">Just</span> 5
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integral</span> a <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">Maybe</span> a
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">divSafe</span> 100 0 
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integral</span> a <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">Maybe</span> a
<span class="org-haskell-operator">&gt;</span>

<span class="org-comment-delimiter">-- </span><span class="org-comment">Use readMaybe instead of read </span>
<span class="org-comment-delimiter">-- </span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Text.Read</span> (readMaybe)
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readMaybe</span> <span class="org-string">"Just 200"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> (<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>)
<span class="org-haskell-constructor">Just</span> (<span class="org-haskell-constructor">Just</span> 200)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> (<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>)
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readMaybe</span> <span class="org-string">"Nothing"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> (<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>)
<span class="org-haskell-constructor">Just</span> <span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> (<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>)
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readMaybe</span> <span class="org-string">"Notasdasdas"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> (<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>)
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> (<span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readMaybe</span> <span class="org-string">"[1, 2, 3, 4, 5]"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> [<span class="org-haskell-type">Int</span>] 
<span class="org-haskell-constructor">Just</span> [1,2,3,4,5]
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> [<span class="org-haskell-type">Int</span>]

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readMaybe</span> <span class="org-string">"garbage"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> [<span class="org-haskell-type">Int</span>] 
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> [<span class="org-haskell-type">Int</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readMaybe</span> <span class="org-string">"[100.0, 200.0, 300.0]"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> [<span class="org-haskell-type">Double</span>] 
<span class="org-haskell-constructor">Just</span> [100.0,200.0,300.0]
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> [<span class="org-haskell-type">Double</span>]
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readMaybe</span> <span class="org-string">", 200.0, 300.0]"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> [<span class="org-haskell-type">Double</span>] 
<span class="org-haskell-constructor">Nothing</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> [<span class="org-haskell-type">Double</span>]
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Avoid exception in data validation</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Example functions that performs data validation or user validation: 
</p>

<p>
For function that performs data validation it is better to return the
result as an Maybe or Either type instead of raise an Exception. Maybe
is better for functions that only have one possible failure or is not
necessary to know the type of failure. The Either type is useful to
report error, failure information or invalid data. 
</p>


<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Text.Read</span> (readMabye)

<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">validateAge</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Int</span>  
<span class="org-haskell-definition">validateAge</span> input <span class="org-haskell-operator">=</span>
  <span class="org-haskell-keyword">case</span> readMaybe input <span class="org-haskell-keyword">of</span>
    <span class="org-haskell-constructor">Nothing</span>  <span class="org-haskell-operator">-&gt;</span> error <span class="org-string">"Invalid age. Not a number"</span>
    <span class="org-haskell-constructor">Just</span> age <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">case</span> age <span class="org-haskell-keyword">of</span> 
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&lt;</span> 0    <span class="org-haskell-operator">-&gt;</span> error <span class="org-string">"Error: Invalid age. It must be greater than zero."</span>
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&lt;=</span> 18  <span class="org-haskell-operator">-&gt;</span> error <span class="org-string">"Error: Bellow legal age to sign the contract."</span>
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&gt;</span> 200  <span class="org-haskell-operator">-&gt;</span> error <span class="org-string">"Error: Invalid age. Impossible age."</span>
                <span class="org-haskell-keyword">_</span>              <span class="org-haskell-operator">-&gt;</span> age   
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"asdfa"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-constructor">Invalid</span> age<span class="org-haskell-operator">.</span> <span class="org-haskell-constructor">Not</span> a number
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>1083<span class="org-haskell-constructor">:</span>17 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci54</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"-100"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-constructor">Error:</span> <span class="org-haskell-constructor">Invalid</span> age<span class="org-haskell-operator">.</span> <span class="org-haskell-constructor">It</span> must be greater than zero<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>1085<span class="org-haskell-constructor">:</span>35 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci54</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"16"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-constructor">Error:</span> <span class="org-haskell-constructor">Bellow</span> legal age to sign the contract<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>1086<span class="org-haskell-constructor">:</span>35 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci54</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"300"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-constructor">Error:</span> <span class="org-haskell-constructor">Invalid</span> age<span class="org-haskell-operator">.</span> <span class="org-haskell-constructor">Impossible</span> age<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>1087<span class="org-haskell-constructor">:</span>35 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci54</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"30"</span> 
30
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"20"</span> 
20
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"35"</span>  
35
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>


<p>
This function can be refactored to: 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Text.Read</span> (readMabye)

<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">validateAge</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>  
<span class="org-haskell-definition">validateAge</span> input <span class="org-haskell-operator">=</span>
  <span class="org-haskell-keyword">case</span> readMaybe input <span class="org-haskell-keyword">of</span>
    <span class="org-haskell-constructor">Nothing</span>  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-string">"Invalid input. Not a number"</span>
    <span class="org-haskell-constructor">Just</span> age <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">case</span> age <span class="org-haskell-keyword">of</span> 
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&lt;</span> 0    <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. It must be greater than zero."</span>
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&lt;=</span> 18  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Bellow legal age to sign the contract."</span>
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&gt;</span> 200  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. Impossible age."</span>
                <span class="org-haskell-keyword">_</span>              <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Right</span> age   
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"-100"</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. It must be greater than zero."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"16"</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Bellow legal age to sign the contract."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"300"</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. Impossible age."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"400"</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. Impossible age."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"20"</span>
<span class="org-haskell-constructor">Right</span> 20
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"19"</span>
<span class="org-haskell-constructor">Right</span> 19
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> print <span class="org-haskell-operator">$</span> map validateAge [<span class="org-string">"safsdf"</span>, <span class="org-string">"-100"</span>, <span class="org-string">"garbage"</span>, <span class="org-string">"400"</span>, <span class="org-string">"7"</span>, <span class="org-string">"15"</span>, <span class="org-string">"20"</span>, <span class="org-string">"25"</span>]
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Invalid input. Not a number"</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. It must be greater than zero."</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Invalid input. Not a number"</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. Impossible age."</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Bellow legal age to sign the contract."</span>
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Bellow legal age to sign the contract."</span>
<span class="org-haskell-constructor">Right</span> 20
<span class="org-haskell-constructor">Right</span> 25
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
Algebraic data types are more friendly to pattern matching than
strings. So the code above could be refactored to: 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Text.Read</span> (readMabye)

<span class="org-haskell-constructor">:</span>{ 
<span class="org-haskell-keyword">data</span> <span class="org-haskell-type">AgeError</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">AgeInvalidInput</span>
              <span class="org-haskell-operator">|</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>
              <span class="org-haskell-operator">|</span> <span class="org-haskell-constructor">AgeImpossible</span>
              <span class="org-haskell-keyword">deriving</span> (<span class="org-haskell-constructor">Eq</span>, <span class="org-haskell-constructor">Show</span>, <span class="org-haskell-constructor">Read</span>)
<span class="org-haskell-constructor">:</span>}


<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">validateAge</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">AgeError</span> <span class="org-haskell-type">Int</span>  
<span class="org-haskell-definition">validateAge</span> input <span class="org-haskell-operator">=</span>
  <span class="org-haskell-keyword">case</span> readMaybe input <span class="org-haskell-keyword">of</span>
    <span class="org-haskell-constructor">Nothing</span>  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeInvalidInput</span>
    <span class="org-haskell-constructor">Just</span> age <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">case</span> age <span class="org-haskell-keyword">of</span> 
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&lt;</span> 0    <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeImpossible</span>
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&lt;=</span> 18  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>
                <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&gt;</span> 200  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeImpossible</span>
                <span class="org-haskell-keyword">_</span>              <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Right</span> age   
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">map</span> (<span class="org-haskell-operator">\</span>input <span class="org-haskell-operator">-&gt;</span> (input, validateAge input)) [<span class="org-string">"safsdf"</span>, <span class="org-string">"-100"</span>, <span class="org-string">"garbage"</span>, <span class="org-string">"400"</span>, <span class="org-string">"7"</span>, <span class="org-string">"15"</span>, <span class="org-string">"20"</span>, <span class="org-string">"25"</span>]
[(<span class="org-string">"safsdf"</span>,<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeInvalidInput</span>),(<span class="org-string">"-100"</span>,<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeImpossible</span>),(<span class="org-string">"garbage"</span>,<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeInvalidInput</span>),
 (<span class="org-string">"400"</span>,<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeImpossible</span>),(<span class="org-string">"7"</span>,<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>),
 (<span class="org-string">"15"</span>,<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>),(<span class="org-string">"20"</span>,<span class="org-haskell-constructor">Right</span> 20),
 (<span class="org-string">"25"</span>,<span class="org-haskell-constructor">Right</span> 25)]
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> [([<span class="org-haskell-type">Char</span>], <span class="org-haskell-type">Either</span> <span class="org-haskell-type">AgeError</span> <span class="org-haskell-type">Int</span>)]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> print <span class="org-haskell-operator">$</span> map validateAge [<span class="org-string">"safsdf"</span>, <span class="org-string">"-100"</span>, <span class="org-string">"garbage"</span>, <span class="org-string">"400"</span>, <span class="org-string">"7"</span>, <span class="org-string">"15"</span>, <span class="org-string">"20"</span>, <span class="org-string">"25"</span>]
<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeInvalidInput</span>
<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeImpossible</span>
<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeInvalidInput</span>
<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeImpossible</span>
<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>
<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>
<span class="org-haskell-constructor">Right</span> 20
<span class="org-haskell-constructor">Right</span> 25
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">showAgeError</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">AgeError</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">String</span>
<span class="org-haskell-definition">showAgeError</span> age <span class="org-haskell-operator">=</span>
   <span class="org-haskell-keyword">case</span> age <span class="org-haskell-keyword">of</span>
     <span class="org-haskell-constructor">AgeBellowLegalAge</span> <span class="org-haskell-operator">-&gt;</span>  <span class="org-string">"Error: Bellow legal age to sign the contract."</span>
     <span class="org-haskell-constructor">AgeImpossible</span>     <span class="org-haskell-operator">-&gt;</span>  <span class="org-string">"Error: Invalid age. Impossible age."</span>
     <span class="org-haskell-constructor">AgeInvalidInput</span>    <span class="org-haskell-operator">-&gt;</span>  <span class="org-string">"Invalid input. Not a number"</span>
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">showAgeError</span> <span class="org-haskell-constructor">AgeImpossible</span>
<span class="org-string">"Error: Invalid age. Impossible age."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">showAgeError</span> <span class="org-haskell-type">AgeInvalidInput</span>
<span class="org-string">"Invalid input. Not a number"</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">showAgeError</span> <span class="org-haskell-type">AgeImpossible</span>
<span class="org-string">"Error: Invalid age. Impossible age."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span>
<span class="org-haskell-operator">&gt;</span>


<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">mapLeft</span> <span class="org-haskell-operator">::</span> (e <span class="org-haskell-operator">-&gt;</span> b) <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> e a <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> b a
<span class="org-haskell-definition">mapLeft</span> fn value <span class="org-haskell-operator">=</span>
  <span class="org-haskell-keyword">case</span> value <span class="org-haskell-keyword">of</span>
    <span class="org-haskell-constructor">Right</span> a <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Right</span> a
    <span class="org-haskell-constructor">Left</span>  e <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> (fn e)
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapLeft</span> showAgeError <span class="org-haskell-operator">$</span> validateAge <span class="org-string">"20000"</span> 
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. Impossible age."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapLeft</span> showAgeError <span class="org-haskell-operator">$</span> validateAge <span class="org-string">"-100"</span> 
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Invalid age. Impossible age."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapLeft</span> showAgeError <span class="org-haskell-operator">$</span> validateAge <span class="org-string">"10"</span> 
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Bellow legal age to sign the contract."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapLeft</span> showAgeError <span class="org-haskell-operator">$</span> validateAge <span class="org-string">"15"</span> 
<span class="org-haskell-constructor">Left</span> <span class="org-string">"Error: Bellow legal age to sign the contract."</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapLeft</span> showAgeError <span class="org-haskell-operator">$</span> validateAge <span class="org-string">"25"</span> 
<span class="org-haskell-constructor">Right</span> 25
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapLeft</span> showAgeError <span class="org-haskell-operator">$</span> validateAge <span class="org-string">"36"</span> 
<span class="org-haskell-constructor">Right</span> 36
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">String</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
Refactoring the function to validate multiple data: 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Text.Read</span> (readMabye)

<span class="org-haskell-constructor">:</span>{ 
<span class="org-haskell-keyword">data</span> <span class="org-haskell-type">AgeError</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">AgeInvalidInput</span>
              <span class="org-haskell-operator">|</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>
              <span class="org-haskell-operator">|</span> <span class="org-haskell-constructor">AgeImpossible</span>
              <span class="org-haskell-keyword">deriving</span> (<span class="org-haskell-constructor">Eq</span>, <span class="org-haskell-constructor">Show</span>, <span class="org-haskell-constructor">Read</span>)
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-keyword">type</span> <span class="org-haskell-type">UserData</span> <span class="org-haskell-operator">=</span> (<span class="org-haskell-type">String</span>, <span class="org-haskell-type">Int</span>)


<span class="org-haskell-type">:</span>{
<span class="org-haskell-keyword">data</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">UserAgeError</span> <span class="org-haskell-constructor">AgeError</span>
                   <span class="org-haskell-operator">|</span> <span class="org-haskell-constructor">UserNameError</span>
                   <span class="org-haskell-keyword">deriving</span>(<span class="org-haskell-constructor">Eq</span>, <span class="org-haskell-constructor">Show</span>, <span class="org-haskell-constructor">Read</span>)
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">mapLeft</span> <span class="org-haskell-operator">::</span> (e <span class="org-haskell-operator">-&gt;</span> b) <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> e a <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> b a
<span class="org-haskell-definition">mapLeft</span> fn value <span class="org-haskell-operator">=</span>
  <span class="org-haskell-keyword">case</span> value <span class="org-haskell-keyword">of</span>
    <span class="org-haskell-constructor">Right</span> a <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Right</span> a
    <span class="org-haskell-constructor">Left</span>  e <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> (fn e)
<span class="org-haskell-constructor">:</span>}


<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">validateAge</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">Int</span>  
<span class="org-haskell-definition">validateAge</span> input <span class="org-haskell-operator">=</span> mapLeft <span class="org-haskell-constructor">UserAgeError</span> <span class="org-haskell-operator">$</span> validateAgeAux input 
  <span class="org-haskell-keyword">where</span>
    validateAgeAux input <span class="org-haskell-operator">=</span> 
      <span class="org-haskell-keyword">case</span> readMaybe input <span class="org-haskell-keyword">of</span>
        <span class="org-haskell-constructor">Nothing</span>  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeInvalidInput</span>
        <span class="org-haskell-constructor">Just</span> age <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">case</span> age <span class="org-haskell-keyword">of</span> 
                    <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&lt;</span> 0    <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeImpossible</span>
                    <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&lt;=</span> 18  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>
                    <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> age <span class="org-haskell-operator">&gt;</span> 200  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">AgeImpossible</span>
                    <span class="org-haskell-keyword">_</span>              <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Right</span> age   
<span class="org-haskell-constructor">:</span>}


<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">validateName</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">String</span>   
<span class="org-haskell-definition">validateName</span> name <span class="org-haskell-operator">=</span>
  <span class="org-haskell-keyword">case</span> name <span class="org-haskell-keyword">of</span>
    <span class="org-string">""</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Left</span> <span class="org-haskell-operator">$</span> <span class="org-haskell-constructor">UserNameError</span>
    <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-constructor">Right</span> name
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">validateUser</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">UserData</span>
<span class="org-haskell-definition">validateUser</span> name age <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
  userName <span class="org-haskell-operator">&lt;-</span> validateName name
  userAge  <span class="org-haskell-operator">&lt;-</span> validateAge age
  return (userName, userAge)
<span class="org-haskell-constructor">:</span>}


<span class="org-comment-delimiter">-- </span><span class="org-comment">Testing: </span>
<span class="org-comment-delimiter">--</span><span class="org-comment">------------------</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"-200"</span> 
<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">UserAgeError</span> <span class="org-haskell-constructor">AgeImpossible</span>)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"1000"</span> 
<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">UserAgeError</span> <span class="org-haskell-constructor">AgeImpossible</span>)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"30"</span> 
<span class="org-haskell-constructor">Right</span> 30
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"25"</span> 
<span class="org-haskell-constructor">Right</span> 25
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"16"</span> 
<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">UserAgeError</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">Int</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateAge</span> <span class="org-string">"25"</span> 
<span class="org-haskell-constructor">Right</span> 25
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateName</span> <span class="org-string">""</span> 
<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">UserNameError</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">String</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateName</span> <span class="org-string">"John"</span> 
<span class="org-haskell-constructor">Right</span> <span class="org-string">"John"</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">String</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateUser</span> <span class="org-string">"John"</span> <span class="org-string">"300"</span> 
<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">UserAgeError</span> <span class="org-haskell-constructor">AgeImpossible</span>)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">UserData</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateUser</span> <span class="org-string">"John"</span> <span class="org-string">"15"</span> 
<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">UserAgeError</span> <span class="org-haskell-constructor">AgeBellowLegalAge</span>)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">UserData</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateUser</span> <span class="org-string">"John"</span> <span class="org-string">"-100"</span> 
<span class="org-haskell-constructor">Left</span> (<span class="org-haskell-constructor">UserAgeError</span> <span class="org-haskell-constructor">AgeImpossible</span>)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">UserData</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateUser</span> <span class="org-string">""</span> <span class="org-string">"-100"</span> 
<span class="org-haskell-constructor">Left</span> <span class="org-haskell-constructor">UserNameError</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">UserData</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">validateUser</span> <span class="org-string">"John"</span> <span class="org-string">"20"</span> 
<span class="org-haskell-constructor">Right</span> (<span class="org-string">"John"</span>,20)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Either</span> <span class="org-haskell-type">UserDataError</span> <span class="org-haskell-type">UserData</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Catching Exceptions</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
The haskell modules <a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/Control-Exception.html">Control.Exception</a> and <a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/System-IO-Error.html#t:IOError">System.IO.Error</a> provides
functions and type constructors to deal with exceptions. 
</p>

<p>
Exceptions can only be caught inside IO Monad. 
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Function</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">Signature</th>
<th scope="col" class="left">Summary / Short Description.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/Control-Exception.html"><b>Control.Exception</b></a></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">throw</td>
<td class="left">::</td>
<td class="left">Exception e =&gt; e -&gt; a</td>
<td class="left">Throw an exception.</td>
</tr>

<tr>
<td class="left">throwIO</td>
<td class="left">::</td>
<td class="left">Exception e =&gt; e -&gt; IO a</td>
<td class="left">A variant of throw that can only be used within the IO monad.</td>
</tr>

<tr>
<td class="left">catch</td>
<td class="left">::</td>
<td class="left">Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a</td>
<td class="left">Catch exceptions.</td>
</tr>

<tr>
<td class="left">try</td>
<td class="left">::</td>
<td class="left">Exception e =&gt; IO a -&gt; IO (Either e a)</td>
<td class="left">Similar to catch, but returns an Either.</td>
</tr>

<tr>
<td class="left">handle</td>
<td class="left">::</td>
<td class="left">Exception e =&gt; (e -&gt; IO a) -&gt; IO a -&gt; IO a</td>
<td class="left">A version of catch with the arguments swapped around.</td>
</tr>

<tr>
<td class="left">finally</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">evaluate</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/System-IO-Error.html"><b>System.IO.Error</b></a></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">ioError</td>
<td class="left">::</td>
<td class="left">IOError -&gt; IO a</td>
<td class="left">Raise an IOError in the IO monad.</td>
</tr>

<tr>
<td class="left">catchIOError</td>
<td class="left">::</td>
<td class="left">IO a -&gt; (IOError -&gt; IO a) -&gt; IO a</td>
<td class="left">Like the fuction catch, however catchs only IO exceptions.</td>
</tr>

<tr>
<td class="left">tryIOError</td>
<td class="left">::</td>
<td class="left">IO a -&gt; IO (Either IOError a)</td>
<td class="left">Like the function try, however only aplicable to IO exceptions.</td>
</tr>

<tr>
<td class="left">userError</td>
<td class="left">::</td>
<td class="left">String -&gt; IOError</td>
<td class="left">Construct an IOError value with a string describing the error.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">isAlreadyExistsError</td>
<td class="left">::</td>
<td class="left">IOError -&gt; Bool</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">isDoesNotExistError</td>
<td class="left">::</td>
<td class="left">IOError -&gt; Bool</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">isAlreadyInUseError</td>
<td class="left">::</td>
<td class="left">IOError -&gt; Bool</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">isFullError</td>
<td class="left">::</td>
<td class="left">IOError -&gt; Bool</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">isEOFError</td>
<td class="left">::</td>
<td class="left">IOError -&gt; Bool</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">isIllegalOperation</td>
<td class="left">::</td>
<td class="left">IOError -&gt; Bool</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">isPermissionError</td>
<td class="left">::</td>
<td class="left">IOError -&gt; Bool</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">isUserError</td>
<td class="left">::</td>
<td class="left">IOError -&gt; Bool</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>System.IO.Error predicates</b>
</p>

<p>
Notes: 
</p>

<ul class="org-ul">
<li>There are no predicate functions for all IO exception types. 
</li>

<li>The exception type constructor are not exposed, so the only way to
get the type of io exception is by using the predicates functions
available at module <a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/System-IO-Error.html">System.IO.Error</a>.
</li>
</ul>


<p>
See module: <a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/System-IO-Error.html">System.IO.Error</a> for more details.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Exception type</th>
<th scope="col" class="left">Predicate</th>
<th scope="col" class="left">Exception message</th>
<th scope="col" class="left">Cause:</th>
</tr>

<tr>
<th scope="col" class="left">(abstract)</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">or exception string</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">AlreadyExists</td>
<td class="left">isAlreadyExistsError</td>
<td class="left">already exists</td>
<td class="left">File or directory already exists.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">NoSuchThing</td>
<td class="left">isDoesNotExistError</td>
<td class="left">does not exist</td>
<td class="left">File, directory or enviroment variable</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">doesn't exists.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">ResourceBusy</td>
<td class="left">?</td>
<td class="left">resource busy</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">ResourceExhausted</td>
<td class="left">?</td>
<td class="left">resource exhausted</td>
<td class="left">Insufficient resources are available</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">to perform the operation.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">EOF</td>
<td class="left">isEOFError</td>
<td class="left">end of file</td>
<td class="left">Reached end of file while trying to read</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">some line or character.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">IllegalOperation</td>
<td class="left">isIllegalOperation</td>
<td class="left">illegal operation</td>
<td class="left">The implementation does not support system calls.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">PermissionDenied</td>
<td class="left">isPermissionError</td>
<td class="left">permission denied</td>
<td class="left">The process has insufficient privileges to</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">perform the operation.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">UserError</td>
<td class="left">isUserError</td>
<td class="left">user error</td>
<td class="left">Exception thrown by user.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">HardwareFault</td>
<td class="left">?</td>
<td class="left">hardware fault</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">InappropriateType</td>
<td class="left">?</td>
<td class="left">inappropriate type</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">Interrupted</td>
<td class="left">?</td>
<td class="left">interrupted</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">InvalidArgument</td>
<td class="left">?</td>
<td class="left">invalid argument</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">OtherError</td>
<td class="left">?</td>
<td class="left">failed</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">ProtocolError</td>
<td class="left">?</td>
<td class="left">protocol error</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">ResourceVanished</td>
<td class="left">?</td>
<td class="left">resource vanished</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">SystemError</td>
<td class="left">?</td>
<td class="left">system error</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">TimeExpired</td>
<td class="left">?</td>
<td class="left">timeout</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">UnsatisfiedConstraints</td>
<td class="left">?</td>
<td class="left">unsatisfied constraints &#x2013; ultra-precise!</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">UnsupportedOperation</td>
<td class="left">?</td>
<td class="left">unsupported operation</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Arithmetic Exceptions: (Module: <a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/Control-Exception.html">Control.Exception</a>)
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Type Constructor</th>
<th scope="col" class="left">Exception Message</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Overflow</td>
<td class="left">arithmetic overflow</td>
</tr>

<tr>
<td class="left">Underflow</td>
<td class="left">arithmetic underflow</td>
</tr>

<tr>
<td class="left">LossOfPrecision</td>
<td class="left">loss of precision</td>
</tr>

<tr>
<td class="left">DivideByZero</td>
<td class="left">divide by zero</td>
</tr>

<tr>
<td class="left">Denormal</td>
<td class="left">denormal</td>
</tr>

<tr>
<td class="left">RatioZeroDenominator</td>
<td class="left">Ratio has zero denominator</td>
</tr>
</tbody>
</table>


<p>
<b>Exception Hierarchy:</b>
</p>

<p>
Exception
</p>

<ul class="org-ul">
<li>SomeException - Root of all exceptions 
<ul class="org-ul">
<li>IOError / IOException  
</li>
<li>AsyncException
<ul class="org-ul">
<li>StackOverflow
</li>
<li>HeapOverflow
</li>
<li>ThreadKilled
</li>
<li>ThreadKilled
</li>
</ul>
</li>
<li>ArithException
<ul class="org-ul">
<li>Overflow
</li>
<li>Underflow
</li>
<li>LossOfPrecision
</li>
<li>DivideByZeror
</li>
<li>Denormal
</li>
<li>RatioZeroDenominator
</li>
</ul>
</li>
<li>ArrayException
</li>
<li>AssertionFailed
</li>
</ul>
</li>
</ul>


<p>
See also: 
</p>

<ul class="org-ul">
<li><a href="https://www.schoolofhaskell.com/user/commercial/content/exceptions-best-practices">Exceptions Best Practices - School of Haskell | School of Haskell</a>
</li>

<li><a href="https://www.schoolofhaskell.com/user/snoyberg/general-haskell/exceptions/catching-all-exceptions">Catching all exceptions - School of Haskell | School of Haskell</a>
</li>

<li><a href="https://en.wikibooks.org/wiki/Haskell/Libraries/IO">Haskell/Libraries/IO - Wikibooks, open books for an open world</a>
</li>

<li><a href="http://blog.ezyang.com/2011/08/8-ways-to-report-errors-in-haskell-revisited/">8 ways to report errors in Haskell revisited : Inside 736-131</a> 
</li>

<li><a href="http://www.randomhacks.net/2007/03/10/haskell-8-ways-to-report-errors/">8 ways to report errors in Haskell | Random Hacks</a>
</li>

<li><a href="https://wiki.haskell.org/Exception">Exception - HaskellWiki</a>
</li>

<li><a href="http://drunkcoding.tumblr.com/post/692076953/catching-exceptions-in-haskell">Coding like a drunk - Catching Exceptions in Haskell</a>
</li>
</ul>


<p>
Papers:
</p>

<ul class="org-ul">
<li>Marlow, S. - <b>An Extensible Dynamically-Typed Hierarchy of
Exceptions</b>. Available at
<a href="http://community.haskell.org/~simonmar/papers/ext-exceptions.pdf">http://community.haskell.org/~simonmar/papers/ext-exceptions.pdf</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Examples of Exceptions:</h4>
<div class="outline-text-4" id="text-1-3-2">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">div</span> 10 0 

<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">div</span> 10 0 
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">head</span> <span class="org-haskell-constructor">[]</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> Prelude.head<span class="org-haskell-constructor">:</span> empty list
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> x <span class="org-haskell-operator">=</span> undefined <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span> 
<span class="org-haskell-definition">x</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> x 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> Prelude.undefined
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at libraries<span class="org-haskell-operator">/</span>base<span class="org-haskell-operator">/</span><span class="org-haskell-constructor">GHC</span><span class="org-haskell-operator">/</span>Err.hs<span class="org-haskell-constructor">:</span>79<span class="org-haskell-constructor">:</span>14 <span class="org-haskell-keyword">in</span> base<span class="org-haskell-constructor">:GHC.Err</span>
  undefined, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>1741<span class="org-haskell-constructor">:</span>9 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci116</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readFile</span> <span class="org-string">"/etc/issue"</span> 
<span class="org-string">"Manjaro Linux \\r  (\\n) (\\l)\n\n\n"</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readFile</span> <span class="org-string">"/etc/issuesada"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>issuesada<span class="org-haskell-type">:</span> openFile<span class="org-haskell-type">:</span> does not exist (<span class="org-haskell-type">No</span> such file or directory)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readFile</span> <span class="org-string">"/etc/shadow"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>shadow<span class="org-haskell-type">:</span> openFile<span class="org-haskell-type">:</span> permission denied (<span class="org-haskell-type">Permission</span> denied)
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readFile</span> <span class="org-string">"/etc/"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-type">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">readFile</span> <span class="org-string">"/etcsad/"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>etcsad<span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-type">:</span> does not exist (<span class="org-haskell-type">No</span> such file or directory)
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">System.Directory</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">D</span>

<span class="org-haskell-operator">&gt;</span> D<span class="org-haskell-definition">.</span>createDirectory <span class="org-string">"/etc/fstab/my-directory"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>fstab<span class="org-haskell-operator">/</span>my<span class="org-haskell-operator">-</span>directory<span class="org-haskell-constructor">:</span> createDirectory<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (<span class="org-haskell-type">Not</span> a directory)

<span class="org-haskell-operator">&gt;</span> D<span class="org-haskell-definition">.</span>createDirectory <span class="org-string">"/dev/sda1/dummy"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>dev<span class="org-haskell-operator">/</span>sda1<span class="org-haskell-operator">/</span>dummy<span class="org-haskell-type">:</span> createDirectory<span class="org-haskell-type">:</span> inappropriate <span class="org-haskell-keyword">type</span> (<span class="org-haskell-type">Not</span> a directory)

<span class="org-haskell-operator">&gt;</span> D<span class="org-haskell-definition">.</span>createDirectory <span class="org-string">"/i dont have permission"</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>i dont have permission<span class="org-haskell-type">:</span> createDirectory<span class="org-haskell-type">:</span> permission denied (<span class="org-haskell-type">Permission</span> denied)
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> Catching Exceptions with catch</h4>
<div class="outline-text-4" id="text-1-3-3">
</div><div id="outline-container-sec-1-3-3-1" class="outline-5">
<h5 id="sec-1-3-3-1"><span class="section-number-5">1.3.3.1</span> Overview</h5>
<div class="outline-text-5" id="text-1-3-3-1">
<ul class="org-ul">
<li><code>catch &lt;computation which may fail&gt; &lt;exception handler&gt;</code> 
</li>
<li id="=catch">Exception e <code>&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a</code>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3-3-2" class="outline-5">
<h5 id="sec-1-3-3-2"><span class="section-number-5">1.3.3.2</span> Catching all exceptions</h5>
<div class="outline-text-5" id="text-1-3-3-2">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Exception</span> 
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Typeable</span> (typeOf)

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t catch
<span class="org-haskell-definition">catch</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Exception</span> e <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">IO</span> a <span class="org-haskell-operator">-&gt;</span> (e <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> a) <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> a
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t catch (return <span class="org-haskell-operator">$</span> <span class="org-haskell-type">Just</span> <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-type">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print  e <span class="org-haskell-operator">&gt;&gt;</span> return <span class="org-haskell-type">Nothing</span>)
<span class="org-haskell-definition">catch</span> (return <span class="org-haskell-operator">$</span> <span class="org-haskell-constructor">Just</span> <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-constructor">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print  e <span class="org-haskell-operator">&gt;&gt;</span> return <span class="org-haskell-constructor">Nothing</span>)
  <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integral</span> a <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">IO</span> (<span class="org-haskell-type">Maybe</span> a)


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">catch</span> (return <span class="org-haskell-operator">$</span> <span class="org-haskell-type">Just</span> <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-type">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print  e <span class="org-haskell-operator">&gt;&gt;</span> return <span class="org-haskell-type">Nothing</span>)
<span class="org-haskell-constructor">Just</span> <span class="org-haskell-definition">***</span> <span class="org-haskell-constructor">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t catch (return <span class="org-haskell-operator">$</span> <span class="org-haskell-constructor">Just</span> <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-constructor">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print  e <span class="org-haskell-operator">&gt;&gt;</span> return <span class="org-haskell-constructor">Nothing</span>)
<span class="org-haskell-definition">catch</span> (return <span class="org-haskell-operator">$</span> <span class="org-haskell-constructor">Just</span> <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-constructor">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print  e <span class="org-haskell-operator">&gt;&gt;</span> return <span class="org-haskell-constructor">Nothing</span>)
  <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integral</span> a <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">IO</span> (<span class="org-haskell-type">Maybe</span> a)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">catch</span> (print <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-type">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print <span class="org-haskell-operator">$</span> e)
<span class="org-haskell-definition">divide</span> by zero
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t catch (print <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-type">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print <span class="org-haskell-operator">$</span> e)
<span class="org-haskell-definition">catch</span> (print <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-constructor">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print <span class="org-haskell-operator">$</span> e) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">catch</span> (print <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-type">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print <span class="org-haskell-operator">$</span> typeOf e)
<span class="org-haskell-constructor">ArithException</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t catch (print <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-type">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print <span class="org-haskell-operator">$</span> typeOf e)
<span class="org-haskell-definition">catch</span> (print <span class="org-haskell-operator">$</span> div 10 0) (<span class="org-haskell-operator">\</span>(<span class="org-haskell-constructor">SomeException</span> e) <span class="org-haskell-operator">-&gt;</span> print <span class="org-haskell-operator">$</span> typeOf e)
  <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">testExceptionType</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">testExceptionType</span> thunk <span class="org-haskell-operator">=</span>  catch thunk handler
  <span class="org-haskell-keyword">where</span>
    <span class="org-comment-delimiter">-- </span><span class="org-comment">Catch All Exceptions -- It is not recommended in real life.</span>
    handler <span class="org-haskell-operator">::</span> <span class="org-haskell-type">SomeException</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
    handler (<span class="org-haskell-constructor">SomeException</span> e) <span class="org-haskell-operator">=</span> putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"I caught an exception.\nMessage =  "</span> <span class="org-haskell-operator">++</span> show e <span class="org-haskell-operator">++</span> <span class="org-string">"\nType of exception = "</span> <span class="org-haskell-operator">++</span> show (typeOf e)
<span class="org-haskell-constructor">:</span>}  


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (print <span class="org-haskell-operator">$</span> div 10 0)
<span class="org-haskell-constructor">I</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  divide by zero
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">ArithException</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (error <span class="org-string">"Fatal kernel error"</span>)
<span class="org-haskell-constructor">I</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  <span class="org-haskell-constructor">Fatal</span> kernel error
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>82<span class="org-haskell-constructor">:</span>20 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci13</span>
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">ErrorCall</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (readFile <span class="org-string">"/etc/shadow"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">I</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>shadow<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> permission denied (<span class="org-haskell-constructor">Permission</span> denied)
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">IOException</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (readFile <span class="org-string">"/etc/"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">I</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">IOException</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (readFile <span class="org-string">"/"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">I</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  <span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">IOException</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (ioError <span class="org-haskell-operator">$</span> userError <span class="org-string">"I am throwing an Exception"</span>)
<span class="org-haskell-constructor">I</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  user error (<span class="org-haskell-constructor">I</span> am throwing an <span class="org-haskell-constructor">Exception</span>)
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">IOException</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (print <span class="org-haskell-operator">$</span> head [1, 2, 3])
1
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (print <span class="org-haskell-operator">$</span> head <span class="org-haskell-constructor">[]</span>)
<span class="org-haskell-constructor">I</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  Prelude.head<span class="org-haskell-constructor">:</span> empty list
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">ErrorCall</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>   


  <span class="org-haskell-operator">&gt;</span> testExceptionType (putStrLn <span class="org-string">"Insert a line"</span> <span class="org-haskell-operator">&gt;&gt;</span> getLine <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Insert</span> a line
<span class="org-haskell-definition">some</span> line
<span class="org-haskell-definition">some</span> line
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>

<span class="org-comment-delimiter">-- </span><span class="org-comment">User enter Ctrl + C to cancel the current input.</span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (putStrLn <span class="org-string">"Insert a line"</span> <span class="org-haskell-operator">&gt;&gt;</span> getLine <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Insert</span> a line
<span class="org-haskell-operator">^</span><span class="org-haskell-constructor">CI</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  user interrupt
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">SomeAsyncException</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> x <span class="org-haskell-operator">=</span> undefined <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> 
<span class="org-haskell-definition">x</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testExceptionType</span> (putStrLn x)
<span class="org-haskell-constructor">I</span> caught an exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> <span class="org-haskell-operator">=</span>  Prelude.undefined
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at libraries<span class="org-haskell-operator">/</span>base<span class="org-haskell-operator">/</span><span class="org-haskell-constructor">GHC</span><span class="org-haskell-operator">/</span>Err.hs<span class="org-haskell-constructor">:</span>79<span class="org-haskell-constructor">:</span>14 <span class="org-haskell-keyword">in</span> base<span class="org-haskell-constructor">:GHC.Err</span>
  undefined, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>103<span class="org-haskell-constructor">:</span>9 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci21</span>
<span class="org-haskell-constructor">Type</span> <span class="org-haskell-keyword">of</span> exception <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">ErrorCall</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-3-3" class="outline-5">
<h5 id="sec-1-3-3-3"><span class="section-number-5">1.3.3.3</span> Narrowing Exceptions</h5>
<div class="outline-text-5" id="text-1-3-3-3">
<p>
Catches only arithmetic exceptions while ignoring other types of
exceptions. 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">testException</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">testException</span> ioAction <span class="org-haskell-operator">=</span>  catch ioAction handler
    <span class="org-haskell-keyword">where</span>
      handler <span class="org-haskell-operator">::</span> <span class="org-haskell-type">ArithException</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
      handler e <span class="org-haskell-operator">=</span>  putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"I got an Arithmetic exception which message is = "</span> <span class="org-haskell-operator">++</span> show e
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testException</span> (print <span class="org-haskell-operator">$</span> div 100 10)
10
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">{-</span><span class="org-comment">- It only will handle Arithmetic exception ignoring all other types of Exceptions. -}</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testException</span> (print <span class="org-haskell-operator">$</span> div 100 0)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">Arithmetic</span> exception which message is <span class="org-haskell-operator">=</span> divide by zero
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testException</span> (error <span class="org-string">"Unrecoverable exception."</span>)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-type">Unrecoverable</span> exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-type">CallStack</span> (from <span class="org-haskell-type">HasCallStack</span>)<span class="org-haskell-type">:</span>
  error, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>60<span class="org-haskell-constructor">:</span>16 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci9</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testException</span> (readFile <span class="org-string">"/etc/DoesntExist"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span><span class="org-haskell-constructor">DoesntExist:</span> openFile<span class="org-haskell-constructor">:</span> does not exist (<span class="org-haskell-constructor">No</span> such file or directory)
<span class="org-haskell-operator">&gt;</span> 


<span class="org-comment-delimiter">{- </span><span class="org-comment">Narrow Arithmetic Exceptions -}</span><span class="org-haskell-operator">^</span>

<span class="org-haskell-constructor">:</span>{  
<span class="org-haskell-definition">testArithExceptions</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">testArithExceptions</span> thunk <span class="org-haskell-operator">=</span> catch thunk handler
  <span class="org-haskell-keyword">where</span>
    handler <span class="org-haskell-operator">::</span> <span class="org-haskell-type">ArithException</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
    handler e <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">case</span> e <span class="org-haskell-keyword">of</span>
                <span class="org-haskell-constructor">Overflow</span>     <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"I got an Arithmetic / Overflow Exception"</span>
                <span class="org-haskell-constructor">Underflow</span>    <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"I got an Arithmetic / Underflow Exception"</span>
                <span class="org-haskell-constructor">DivideByZero</span> <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"I got an Arithmetic exception / DvideByZero."</span>
                <span class="org-haskell-keyword">_</span>            <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"FIXME: I don't know how to handle this exception."</span>
<span class="org-haskell-constructor">:</span>}                

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (print <span class="org-haskell-operator">$</span> 1000 <span class="org-haskell-operator">`div`</span> 10)
100
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (print <span class="org-haskell-operator">$</span> 1000 <span class="org-haskell-operator">`div`</span> 0)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">Arithmetic</span> exception <span class="org-haskell-operator">/</span> DvideByZero.
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (throw <span class="org-haskell-type">DivideByZero</span> )
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">Arithmetic</span> exception <span class="org-haskell-operator">/</span> DvideByZero.
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (throw <span class="org-haskell-type">Overflow</span>)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">Arithmetic</span> <span class="org-haskell-operator">/</span> <span class="org-haskell-constructor">Overflow</span> <span class="org-haskell-constructor">Exception</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (throw <span class="org-haskell-type">Underflow</span>)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">Arithmetic</span> <span class="org-haskell-operator">/</span> <span class="org-haskell-constructor">Underflow</span> <span class="org-haskell-constructor">Exception</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (throw <span class="org-haskell-type">LossOfPrecision</span> )
<span class="org-haskell-constructor">FIXME</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">I</span> don't know how to handle this exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (throw <span class="org-haskell-type">RatioZeroDenominator</span>)
<span class="org-haskell-constructor">FIXME</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">I</span> don't know how to handle this exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (readFile <span class="org-string">"/etc/issue"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Manjaro</span> <span class="org-haskell-constructor">Linux</span> <span class="org-haskell-operator">\</span>r  (<span class="org-haskell-operator">\</span>n) (<span class="org-haskell-operator">\</span>l)



<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (readFile <span class="org-string">"/etc/issuesad"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>issuesad<span class="org-haskell-type">:</span> openFile<span class="org-haskell-type">:</span> does not exist (<span class="org-haskell-type">No</span> such file or directory)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testArithExceptions</span> (readFile <span class="org-string">"/etc/shadow"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>shadow<span class="org-haskell-type">:</span> openFile<span class="org-haskell-type">:</span> permission denied (<span class="org-haskell-type">Permission</span> denied)
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">testIOExceptions</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">testIOExceptions</span> thunk <span class="org-haskell-operator">=</span> catch thunk handler
  <span class="org-haskell-keyword">where</span>
    <span class="org-comment-delimiter">-- </span><span class="org-comment">IOError is an alias to IOException</span>
    handler <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IOError</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
    handler e <span class="org-haskell-operator">=</span> putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"I got an IO exception.\nMessage is ="</span> <span class="org-haskell-operator">++</span> show e
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testIOExceptions</span> (readFile <span class="org-string">"/proc/version"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Linux</span> version 4.4<span class="org-haskell-operator">.</span>21<span class="org-haskell-operator">-</span>1<span class="org-haskell-operator">-</span><span class="org-haskell-constructor">MANJARO</span> (builduser<span class="org-haskell-operator">@</span>manjaro) (gcc version 6.2<span class="org-haskell-operator">.</span>1 20160830 (<span class="org-haskell-constructor">GCC</span>) ) <span class="org-haskell-operator">#</span>1 <span class="org-haskell-constructor">SMP</span> <span class="org-haskell-constructor">PREEMPT</span> <span class="org-haskell-constructor">Thu</span> <span class="org-haskell-constructor">Sep</span> 15 19<span class="org-haskell-constructor">:</span>16<span class="org-haskell-constructor">:</span>23 <span class="org-haskell-constructor">UTC</span> 2016

<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testIOExceptions</span> (readFile <span class="org-string">"/proc/91"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">IO</span> exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> is <span class="org-haskell-operator">=/</span><span class="org-haskell-keyword">proc</span><span class="org-haskell-operator">/</span>91<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testIOExceptions</span> (readFile <span class="org-string">"/proc/"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">IO</span> exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> is <span class="org-haskell-operator">=/</span><span class="org-haskell-keyword">proc</span><span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testIOExceptions</span> (readFile <span class="org-string">"/etc/shadow"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">IO</span> exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-constructor">Message</span> is <span class="org-haskell-operator">=/</span>etc<span class="org-haskell-operator">/</span>shadow<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> permission denied (<span class="org-haskell-constructor">Permission</span> denied)
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testIOExceptions</span> (error <span class="org-string">"Raising an error"</span>)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-type">Raising</span> an error
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>221<span class="org-haskell-constructor">:</span>19 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci39</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testIOExceptions</span> (throw <span class="org-haskell-constructor">DivideByZero</span> )
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testIOExceptions</span> (print <span class="org-haskell-operator">$</span> div 10 0)
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testIOExceptions</span> (putStr undefined )
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> Prelude.undefined
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at libraries<span class="org-haskell-operator">/</span>base<span class="org-haskell-operator">/</span><span class="org-haskell-constructor">GHC</span><span class="org-haskell-operator">/</span>Err.hs<span class="org-haskell-constructor">:</span>79<span class="org-haskell-constructor">:</span>14 <span class="org-haskell-keyword">in</span> base<span class="org-haskell-constructor">:GHC.Err</span>
  undefined, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>235<span class="org-haskell-constructor">:</span>26 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci40</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-3-4" class="outline-5">
<h5 id="sec-1-3-3-4"><span class="section-number-5">1.3.3.4</span> Narrowing IO Exceptions</h5>
<div class="outline-text-5" id="text-1-3-3-4">
<p>
The IO Exception type is an opaque type or abstract type which the
implementation or type constructors are not exposed like
ArithException, therefore the only way to find the type of IO
exception is by using IO Exception predicates available at
<a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/System-IO-Error.html">System.IO.Error</a> module. 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Exception</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.IO.Error</span>

<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t catch
<span class="org-haskell-definition">catch</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Exception</span> e <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">IO</span> a <span class="org-haskell-operator">-&gt;</span> (e <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> a) <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> a
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t throw
<span class="org-haskell-definition">throw</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Exception</span> e <span class="org-haskell-operator">=&gt;</span> e <span class="org-haskell-operator">-&gt;</span> a
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t throwIO
<span class="org-haskell-definition">throwIO</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Exception</span> e <span class="org-haskell-operator">=&gt;</span> e <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> a
<span class="org-haskell-operator">&gt;</span> 


<span class="org-comment-delimiter">{- </span><span class="org-comment">IOError is an alias for IO Exception -}</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>info <span class="org-haskell-type">IOError</span> 
<span class="org-haskell-keyword">type</span> <span class="org-haskell-type">IOError</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-type">IOException</span>      <span class="org-comment-delimiter">-- </span><span class="org-comment">Defined in &#8216;GHC.IO.Exception&#8217;</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t ioError 
<span class="org-haskell-definition">ioError</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IOError</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> a
<span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">-- </span><span class="org-comment">Pasting it in the repl:</span>
<span class="org-comment-delimiter">{- </span><span class="org-comment">The function ioError is used to throw a non-caught Exception inside an Exception handler.</span>
<span class="org-comment">   because this exception handler catches all IO exceptions;</span>
<span class="org-comment">-}</span>  
<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">catch</span> (readFile <span class="org-string">"/etc/"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
      (<span class="org-haskell-operator">\</span>e <span class="org-haskell-operator">-&gt;</span>  <span class="org-haskell-keyword">case</span> e <span class="org-haskell-keyword">of</span>
              <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">|</span> isAlreadyExistsError e <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: File alredy exists"</span>
              <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">|</span> isEOFError e           <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: End of file"</span>
              <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">|</span> isUserError e          <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: User raised an exception"</span>
              <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">|</span> isPermissionError e    <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: We don't have permission to read this file"</span>
              <span class="org-haskell-keyword">_</span>                           <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Uncaught exception"</span> <span class="org-haskell-operator">&gt;&gt;</span> ioError e
       )
<span class="org-haskell-constructor">:</span>}



<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>{
<span class="org-haskell-operator">-</span> catch (readFile <span class="org-string">"/etc/"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-operator">-</span>       (<span class="org-haskell-operator">\</span>e <span class="org-haskell-operator">-&gt;</span>  <span class="org-haskell-keyword">case</span> e <span class="org-haskell-keyword">of</span>
<span class="org-haskell-operator">-</span>               <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">|</span> isAlreadyExistsError e <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: File alredy exists"</span>
<span class="org-haskell-operator">-</span>               <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">|</span> isEOFError e           <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: End of file"</span>
<span class="org-haskell-operator">-</span>               <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">|</span> isUserError e          <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: User raised an exception"</span>
<span class="org-haskell-operator">-</span>               <span class="org-haskell-keyword">_</span>  <span class="org-haskell-operator">|</span> isPermissionError e    <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: We don't have permission to read this file"</span>
<span class="org-haskell-operator">-</span>               <span class="org-haskell-keyword">_</span>                           <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Uncaught exception"</span> <span class="org-haskell-operator">&gt;&gt;</span> ioError e
<span class="org-haskell-operator">-</span>        )
<span class="org-haskell-operator">-</span> <span class="org-haskell-constructor">:</span>}
<span class="org-haskell-constructor">Uncaught</span> exception
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-operator">&gt;</span> 



<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">ioExceptionTester</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>   
<span class="org-haskell-definition">ioExceptionTester</span> thunk <span class="org-haskell-operator">=</span> catch thunk handler 
  <span class="org-haskell-keyword">where</span>
    handler <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IOError</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
    handler e <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>  
      putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Exception message = "</span> <span class="org-haskell-operator">++</span> show e 
      <span class="org-haskell-keyword">case</span> e <span class="org-haskell-keyword">of</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isAlreadyExistsError e <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: Already Exists"</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isDoesNotExistError e  <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: Doesn't exists"</span>               
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isEOFError e           <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: End of file"</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isIllegalOperation e   <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: Illegal operation"</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isPermissionError e    <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: Permission error"</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isUserError e          <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: User error"</span>              
        <span class="org-haskell-keyword">_</span>                          <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">do</span> putStrLn <span class="org-string">"Error: I can't handler this type of error."</span>
                                         ioError e <span class="org-comment-delimiter">-- </span><span class="org-comment">Raise uncaught exception </span>
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/etc/issue"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Manjaro</span> <span class="org-haskell-constructor">Linux</span> <span class="org-haskell-operator">\</span>r  (<span class="org-haskell-operator">\</span>n) (<span class="org-haskell-operator">\</span>l)



<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/etc/issuesddfs"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>issuesddfs<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> does not exist (<span class="org-haskell-constructor">No</span> such file or directory)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Doesn't</span> exists
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/etc/"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">I</span> can't handler this <span class="org-haskell-keyword">type</span> <span class="org-haskell-keyword">of</span> error<span class="org-haskell-operator">.</span>
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/etc/shadow"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>shadow<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> permission denied (<span class="org-haskell-constructor">Permission</span> denied)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Permission</span> error
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">System.Directory</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">D</span>
D<span class="org-haskell-definition">.</span>createDirectory <span class="org-haskell-operator">::</span> <span class="org-haskell-type">FilePath</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>


<span class="org-haskell-operator">&gt;</span> D<span class="org-haskell-definition">.</span>createDirectory <span class="org-string">"/test"</span>
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> <span class="org-haskell-operator">/</span>test<span class="org-haskell-type">:</span> createDirectory<span class="org-haskell-type">:</span> permission denied (<span class="org-haskell-type">Permission</span> denied)
<span class="org-haskell-operator">&gt;</span>


<span class="org-haskell-operator">&gt;</span> ioExceptionTester <span class="org-haskell-definition">$</span> D.createDirectory <span class="org-string">"/test"</span>
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>test<span class="org-haskell-constructor">:</span> createDirectory<span class="org-haskell-constructor">:</span> permission denied (<span class="org-haskell-constructor">Permission</span> denied)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Permission</span> error
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>   

<span class="org-haskell-operator">&gt;</span> ioExceptionTester <span class="org-haskell-definition">$</span> D.createDirectory <span class="org-string">"/tmp/test"</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> ioExceptionTester <span class="org-haskell-definition">$</span> D.createDirectory <span class="org-string">"/tmp/test"</span>
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>tmp<span class="org-haskell-operator">/</span>test<span class="org-haskell-constructor">:</span> createDirectory<span class="org-haskell-constructor">:</span> already exists (<span class="org-haskell-constructor">File</span> exists)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Already</span> <span class="org-haskell-constructor">Exists</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> ioExceptionTester <span class="org-haskell-definition">$</span> D.createDirectory <span class="org-string">"/dev/test"</span>
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>dev<span class="org-haskell-operator">/</span>test<span class="org-haskell-constructor">:</span> createDirectory<span class="org-haskell-constructor">:</span> permission denied (<span class="org-haskell-constructor">Permission</span> denied)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Permission</span> error
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> ioExceptionTester <span class="org-haskell-definition">$</span> D.createDirectory <span class="org-string">"/dev/sda1"</span>
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>dev<span class="org-haskell-operator">/</span>sda1<span class="org-haskell-constructor">:</span> createDirectory<span class="org-haskell-constructor">:</span> already exists (<span class="org-haskell-constructor">File</span> exists)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Already</span> <span class="org-haskell-constructor">Exists</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> ioExceptionTester <span class="org-haskell-definition">$</span> throw (userError <span class="org-string">"I am raising an Error"</span>)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> user error (<span class="org-haskell-constructor">I</span> am raising an <span class="org-haskell-constructor">Error</span>)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">User</span> error
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>   

<span class="org-comment-delimiter">{-</span><span class="org-comment">-============= It doesn't catch non IO exceptions ============== -}</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (print <span class="org-haskell-operator">$</span> div 10 0)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (putStrLn undefined)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> Prelude.undefined
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at libraries<span class="org-haskell-operator">/</span>base<span class="org-haskell-operator">/</span><span class="org-haskell-constructor">GHC</span><span class="org-haskell-operator">/</span>Err.hs<span class="org-haskell-constructor">:</span>79<span class="org-haskell-constructor">:</span>14 <span class="org-haskell-keyword">in</span> base<span class="org-haskell-constructor">:GHC.Err</span>
  undefined, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>310<span class="org-haskell-constructor">:</span>29 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci41</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span>  ioExceptionTester (print (read <span class="org-string">"100"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>))
100
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (print (read <span class="org-string">"10asd0"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>))
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> Prelude.read<span class="org-haskell-type">:</span> no parse
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> ioExceptionTester <span class="org-haskell-definition">$</span> throw <span class="org-haskell-type">Underflow</span>
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> arithmetic underflow
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>   
<span class="org-haskell-operator">&gt;</span> ioExceptionTester <span class="org-haskell-definition">$</span> throw <span class="org-haskell-type">DivideByZero</span> 
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> divide by zero

<span class="org-comment-delimiter">--</span><span class="org-comment">- Async Exception - User interrupt </span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (putStrLn <span class="org-string">"Enter something"</span> <span class="org-haskell-operator">&gt;&gt;</span> getLine <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Enter</span> something
<span class="org-haskell-operator">^</span>CInterrupted.
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-4" class="outline-4">
<h4 id="sec-1-3-4"><span class="section-number-4">1.3.4</span> Catching Exceptions with catchIOError</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
The function <code>catchIOError :: IO a -&gt; (IOError -&gt; IO a) -&gt; IO a</code> from
module <a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/System-IO-Error.html">System.IO.Error</a> is similar to the function catch, however it
only handles IOError(alias to IOExceptions). 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Exception</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.IO.Error</span> 

<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">ioExceptionTester</span> thunk <span class="org-haskell-operator">=</span> catchIOError thunk handler 
  <span class="org-haskell-keyword">where</span>
    handler e <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>  
      putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Exception message = "</span> <span class="org-haskell-operator">++</span> show e 
      <span class="org-haskell-keyword">case</span> e <span class="org-haskell-keyword">of</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isAlreadyExistsError e <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: Already Exists"</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isDoesNotExistError e  <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: Doesn't exists"</span>               
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isEOFError e           <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: End of file"</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isIllegalOperation e   <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: Illegal operation"</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isPermissionError e    <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: Permission error"</span>
        <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">|</span> isUserError e          <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"Error: User error"</span>              
        <span class="org-haskell-keyword">_</span>                          <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">do</span> putStrLn <span class="org-string">"Error: I can't handler this type of error."</span>
                                         ioError e <span class="org-comment-delimiter">-- </span><span class="org-comment">Raise uncaught exception </span>
<span class="org-haskell-constructor">:</span>}


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/etc/issue"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Manjaro</span> <span class="org-haskell-constructor">Linux</span> <span class="org-haskell-operator">\</span>r  (<span class="org-haskell-operator">\</span>n) (<span class="org-haskell-operator">\</span>l)



<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/etc/issueasd"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>issueasd<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> does not exist (<span class="org-haskell-constructor">No</span> such file or directory)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Doesn't</span> exists
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/etc/"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">I</span> can't handler this <span class="org-haskell-keyword">type</span> <span class="org-haskell-keyword">of</span> error<span class="org-haskell-operator">.</span>
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/:</span> openFile<span class="org-haskell-constructor">:</span> inappropriate <span class="org-haskell-keyword">type</span> (is a directory)
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/dev/sda1"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>dev<span class="org-haskell-operator">/</span>sda1<span class="org-haskell-constructor">:</span> hGetContents<span class="org-haskell-constructor">:</span> invalid argument (invalid byte sequence)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">I</span> can't handler this <span class="org-haskell-keyword">type</span> <span class="org-haskell-keyword">of</span> error<span class="org-haskell-operator">.</span>
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-operator">/</span>dev<span class="org-haskell-operator">/</span>sda1<span class="org-haskell-constructor">:</span> hGetContents<span class="org-haskell-constructor">:</span> invalid argument (invalid byte sequence)
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/dev/tty0"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>dev<span class="org-haskell-operator">/</span>tty0<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> permission denied (<span class="org-haskell-constructor">Permission</span> denied)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Permission</span> error
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/dev/shadow"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>dev<span class="org-haskell-operator">/</span>shadow<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> does not exist (<span class="org-haskell-constructor">No</span> such file or directory)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Doesn't</span> exists
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (readFile <span class="org-string">"/etc/shadow"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>shadow<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> permission denied (<span class="org-haskell-constructor">Permission</span> denied)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">Permission</span> error
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (throw <span class="org-haskell-operator">$</span> userError <span class="org-string">"I raised an Exception"</span>)
<span class="org-haskell-constructor">Exception</span> message <span class="org-haskell-operator">=</span> user error (<span class="org-haskell-constructor">I</span> raised an <span class="org-haskell-constructor">Exception</span>)
<span class="org-haskell-constructor">Error</span><span class="org-haskell-definition">:</span> <span class="org-haskell-constructor">User</span> error
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-comment-delimiter">{- </span><span class="org-comment">===== The exceptions below aren't caught by catchIOError ========== -}</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (print <span class="org-haskell-operator">$</span> div 10 0)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (print <span class="org-haskell-operator">$</span> div 10 0)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> divide by zero
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> x <span class="org-haskell-operator">=</span> undefined
<span class="org-haskell-operator">-</span> 
<span class="org-haskell-definition">x</span> <span class="org-haskell-operator">::</span> a
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (print <span class="org-haskell-operator">$</span> x)
<span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> Prelude.undefined
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at libraries<span class="org-haskell-operator">/</span>base<span class="org-haskell-operator">/</span><span class="org-haskell-constructor">GHC</span><span class="org-haskell-operator">/</span>Err.hs<span class="org-haskell-constructor">:</span>79<span class="org-haskell-constructor">:</span>14 <span class="org-haskell-keyword">in</span> base<span class="org-haskell-constructor">:GHC.Err</span>
  undefined, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>51<span class="org-haskell-constructor">:</span>5 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci4</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (error <span class="org-string">"Some error"</span>)
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-constructor">Some</span> error
<span class="org-haskell-constructor">CallStack</span> (from <span class="org-haskell-constructor">HasCallStack</span>)<span class="org-haskell-constructor">:</span>
  error, called at <span class="org-haskell-operator">&lt;</span>interactive<span class="org-haskell-operator">&gt;:</span>55<span class="org-haskell-constructor">:</span>20 <span class="org-haskell-keyword">in</span> interactive<span class="org-haskell-constructor">:Ghci5</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (throw <span class="org-haskell-constructor">DivideByZero</span> )
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> divide by zero


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">ioExceptionTester</span> (throw <span class="org-haskell-constructor">Underflow</span>  )
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> arithmetic underflow
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3-5" class="outline-4">
<h4 id="sec-1-3-5"><span class="section-number-4">1.3.5</span> Catching Exceptions using the function catches</h4>
<div class="outline-text-4" id="text-1-3-5">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.IO.Error</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Exception</span>
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>set <span class="org-haskell-operator">-</span><span class="org-haskell-constructor">XScopedTypeVariables</span>
<span class="org-haskell-operator">&gt;</span>   

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t catches
<span class="org-haskell-definition">catches</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> a <span class="org-haskell-operator">-&gt;</span> [<span class="org-haskell-type">Handler</span> a] <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> a
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>info <span class="org-haskell-type">Handler</span> 
<span class="org-haskell-keyword">data</span> <span class="org-haskell-type">Handler</span> a <span class="org-haskell-keyword">where</span>
  <span class="org-haskell-constructor">Handler</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Exception</span> e <span class="org-haskell-operator">=&gt;</span> (e <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> a) <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Handler</span> a
        <span class="org-comment-delimiter">-- </span><span class="org-comment">Defined in &#8216;Control.Exception&#8217;</span>
<span class="org-haskell-keyword">instance</span> <span class="org-haskell-type">Functor</span> <span class="org-haskell-type">Handler</span> <span class="org-comment-delimiter">-- </span><span class="org-comment">Defined in &#8216;Control.Exception&#8217;</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-keyword">let</span> arithmeticHandler <span class="org-haskell-operator">=</span> putStrLn <span class="org-string">"Error I got an Arithmetic exception."</span>

<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">ioExceptionHandler</span> e
  <span class="org-haskell-operator">|</span> isAlreadyExistsError e <span class="org-haskell-operator">=</span> putStrLn <span class="org-string">"IO Exception - Already exists error"</span>
  <span class="org-haskell-operator">|</span> isUserError e          <span class="org-haskell-operator">=</span> putStrLn <span class="org-string">"IO Exception - User Error"</span>
  <span class="org-haskell-operator">|</span> otherwise              <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span> putStrLn <span class="org-string">"IO Exception - I don't know how to handle this exception"</span>
                                throw e 
<span class="org-haskell-constructor">:</span>}
<span class="org-haskell-definition">ioExceptionHandler</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IOError</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">testCatches</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-definition">testCatches</span> thunk <span class="org-haskell-operator">=</span> catches thunk handlers
  <span class="org-haskell-keyword">where</span> handlers <span class="org-haskell-operator">=</span> [  <span class="org-haskell-constructor">Handler</span> <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> (e <span class="org-haskell-operator">::</span> <span class="org-haskell-type">ArithException</span>) <span class="org-haskell-operator">-&gt;</span> arithmeticHandler
                    , <span class="org-haskell-constructor">Handler</span> <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> (e <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IOError</span>)        <span class="org-haskell-operator">-&gt;</span> ioExceptionHandler e                                         
                    , <span class="org-haskell-constructor">Handler</span> <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> (e <span class="org-haskell-operator">::</span> <span class="org-haskell-type">ErrorCall</span>)      <span class="org-haskell-operator">-&gt;</span> putStrLn <span class="org-string">"I got an ErrorCall exception"</span>
                    , <span class="org-haskell-constructor">Handler</span> <span class="org-haskell-operator">$</span> <span class="org-haskell-operator">\</span> (e <span class="org-haskell-operator">::</span> <span class="org-haskell-type">SomeException</span>)  <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-keyword">do</span> putStrLn <span class="org-string">"I don't know how to handle this exception"</span>
                                                              throw e
                   ]

<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testCatches</span> (throw <span class="org-haskell-constructor">DivideByZero</span>)
<span class="org-haskell-constructor">Error</span> <span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">Arithmetic</span> exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testCatches</span> (throw <span class="org-haskell-type">Overflow</span> )
<span class="org-haskell-constructor">Error</span> <span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">Arithmetic</span> exception<span class="org-haskell-operator">.</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testCatches</span> (<span class="org-haskell-keyword">let</span> x <span class="org-haskell-operator">=</span> undefined <span class="org-haskell-keyword">in</span> print x)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">ErrorCall</span> exception
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testCatches</span> (error <span class="org-string">"Some Error"</span>)
<span class="org-haskell-constructor">I</span> got an <span class="org-haskell-constructor">ErrorCall</span> exception
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testCatches</span> (readFile <span class="org-string">"/etc/issue"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">Manjaro</span> <span class="org-haskell-constructor">Linux</span> <span class="org-haskell-operator">\</span>r  (<span class="org-haskell-operator">\</span>n) (<span class="org-haskell-operator">\</span>l)



<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testCatches</span> (readFile <span class="org-string">"/etc/issuesf"</span> <span class="org-haskell-operator">&gt;&gt;=</span> putStrLn)
<span class="org-haskell-constructor">IO</span> <span class="org-haskell-constructor">Exception</span> <span class="org-haskell-operator">-</span> <span class="org-haskell-constructor">I</span> don't know how to handle this exception
<span class="org-haskell-operator">***</span> <span class="org-haskell-constructor">Exception:</span> <span class="org-haskell-operator">/</span>etc<span class="org-haskell-operator">/</span>issuesf<span class="org-haskell-constructor">:</span> openFile<span class="org-haskell-constructor">:</span> does not exist (<span class="org-haskell-constructor">No</span> such file or directory)
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">testCatches</span> (throw <span class="org-haskell-operator">$</span> userError <span class="org-string">"throw my exception"</span>)
<span class="org-haskell-constructor">IO</span> <span class="org-haskell-constructor">Exception</span> <span class="org-haskell-operator">-</span> <span class="org-haskell-constructor">User</span> <span class="org-haskell-constructor">Error</span>
<span class="org-haskell-definition">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Caio Rodrigues</p>
<p class="date">Created: 2017-03-05 dom 08:16</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>