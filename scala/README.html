<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Functional and OOP Programming in Scala</title>
<!-- 2018-05-07 Mon 10:14 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="nobody" />
<meta  name="description" content="fp oop functional object oriented scala java jvm platform"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="/Functional-Programming/theme/style.css" rel="stylesheet">
<script src="/Functional-Programming/theme/org-nav-theme.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Functional and OOP Programming in Scala</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Scala</a>
<ul>
<li><a href="#sec-1-1">1.1. Overview</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1. Features</a></li>
<li><a href="#sec-1-1-2">1.1.2. Getting Scala</a></li>
<li><a href="#sec-1-1-3">1.1.3. File Extensions</a></li>
</ul>
</li>
<li><a href="#sec-1-2">1.2. Tooling</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. Overview</a></li>
<li><a href="#sec-1-2-2">1.2.2. REPL - Scala Shell</a>
<ul>
<li><a href="#sec-1-2-2-1">1.2.2.1. REPL Commands</a></li>
<li><a href="#sec-1-2-2-2">1.2.2.2. Running Scala Scripts</a></li>
</ul>
</li>
<li><a href="#sec-1-2-3">1.2.3. Scalac - Scala compiler</a>
<ul>
<li><a href="#sec-1-2-3-1">1.2.3.1. Sample scala program</a></li>
<li><a href="#sec-1-2-3-2">1.2.3.2. Compiling</a></li>
<li><a href="#sec-1-2-3-3">1.2.3.3. Compiling to a jar file</a></li>
<li><a href="#sec-1-2-3-4">1.2.3.4. See also</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Basic Syntax</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. Comments</a></li>
<li><a href="#sec-1-3-2">1.3.2. Values and Variables Declaration</a></li>
<li><a href="#sec-1-3-3">1.3.3. Import Java and Scala Libraries</a></li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. Functions</a>
<ul>
<li><a href="#sec-1-4-1">1.4.1. Function Definition</a></li>
<li><a href="#sec-1-4-2">1.4.2. Anonymous Functions / Lambda Functions or Function Literals</a></li>
<li><a href="#sec-1-4-3">1.4.3. Curried Functions</a></li>
<li><a href="#sec-1-4-4">1.4.4. Closures</a>
<ul>
<li><a href="#sec-1-4-4-1">1.4.4.1. Simple closure example</a></li>
<li><a href="#sec-1-4-4-2">1.4.4.2. Stateful functions</a></li>
<li><a href="#sec-1-4-4-3">1.4.4.3. Emulating Objects with closures</a></li>
</ul>
</li>
<li><a href="#sec-1-4-5">1.4.5. Nested Functions</a></li>
<li><a href="#sec-1-4-6">1.4.6. Function Composition</a></li>
<li><a href="#sec-1-4-7">1.4.7. Higher Order Functions</a></li>
<li><a href="#sec-1-4-8">1.4.8. Polymorphic Functions</a>
<ul>
<li><a href="#sec-1-4-8-1">1.4.8.1. Generic Functions - functions with type parameters</a></li>
<li><a href="#sec-1-4-8-2">1.4.8.2. Functions with multiple signatures</a></li>
</ul>
</li>
<li><a href="#sec-1-4-9">1.4.9. Storing Functions in Data Structures</a></li>
<li><a href="#sec-1-4-10">1.4.10. Function with variable number of arguments</a></li>
<li><a href="#sec-1-4-11">1.4.11. Functions with default parameters</a></li>
<li><a href="#sec-1-4-12">1.4.12. Functions with call-by-name parameters</a>
<ul>
<li><a href="#sec-1-4-12-1">1.4.12.1. call-by-value or pass-by-value</a></li>
<li><a href="#sec-1-4-12-2">1.4.12.2. call-by-name or pass-by-name</a></li>
<li><a href="#sec-1-4-12-3">1.4.12.3. Custom control structures with call-by-name</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. Imperative Constructs</a>
<ul>
<li><a href="#sec-1-5-1">1.5.1. While loop</a></li>
<li><a href="#sec-1-5-2">1.5.2. For-loop</a></li>
</ul>
</li>
<li><a href="#sec-1-6">1.6. String Manipulation</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1. Basic string operations</a></li>
<li><a href="#sec-1-6-2">1.6.2. String Interpolation</a>
<ul>
<li><a href="#sec-1-6-2-1">1.6.2.1. Example 1</a></li>
<li><a href="#sec-1-6-2-2">1.6.2.2. Example 2</a></li>
</ul>
</li>
<li><a href="#sec-1-6-3">1.6.3. String conversion</a></li>
<li><a href="#sec-1-6-4">1.6.4. Regex - Regular Expressions</a>
<ul>
<li><a href="#sec-1-6-4-1">1.6.4.1. Pattern Matching Regex</a></li>
<li><a href="#sec-1-6-4-2">1.6.4.2. Extracting Regex</a></li>
<li><a href="#sec-1-6-4-3">1.6.4.3. Find all strings that matching a regex</a></li>
<li><a href="#sec-1-6-4-4">1.6.4.4. Replace text</a></li>
<li><a href="#sec-1-6-4-5">1.6.4.5. Regex use case for extracting color from string</a></li>
<li><a href="#sec-1-6-4-6">1.6.4.6. Documentation and References</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-7">1.7. Collections</a>
<ul>
<li><a href="#sec-1-7-1">1.7.1. Overview</a></li>
<li><a href="#sec-1-7-2">1.7.2. Immutable Collections</a>
<ul>
<li><a href="#sec-1-7-2-1">1.7.2.1. Tuples</a></li>
<li><a href="#sec-1-7-2-2">1.7.2.2. List</a></li>
<li><a href="#sec-1-7-2-3">1.7.2.3. Maps</a></li>
</ul>
</li>
<li><a href="#sec-1-7-3">1.7.3. Mutable Collections</a>
<ul>
<li><a href="#sec-1-7-3-1">1.7.3.1. Array</a></li>
<li><a href="#sec-1-7-3-2">1.7.3.2. Mutable List</a></li>
<li><a href="#sec-1-7-3-3">1.7.3.3. Mutable Maps&#xa0;&#xa0;&#xa0;<span class="tag"><span class="collection">collection</span>&#xa0;<span class="map">map</span>&#xa0;<span class="hash">hash</span></span></a></li>
</ul>
</li>
<li><a href="#sec-1-7-4">1.7.4. Seq Trait/Interface</a></li>
</ul>
</li>
<li><a href="#sec-1-8">1.8. Case classes and pattern matching</a></li>
<li><a href="#sec-1-9">1.9. Pattern Matching</a>
<ul>
<li><a href="#sec-1-9-1">1.9.1. Pattern matching numbers</a></li>
<li><a href="#sec-1-9-2">1.9.2. Pattern matching with strings.</a></li>
<li><a href="#sec-1-9-3">1.9.3. Pattern with number and case-classes.</a></li>
<li><a href="#sec-1-9-4">1.9.4. Pattern matching with conditional.</a></li>
<li><a href="#sec-1-9-5">1.9.5. Recursive functions</a></li>
<li><a href="#sec-1-9-6">1.9.6. Destructuring</a>
<ul>
<li><a href="#sec-1-9-6-1">1.9.6.1. Destructuring tuples</a></li>
<li><a href="#sec-1-9-6-2">1.9.6.2. Destructuring List, Arrays and other collections</a></li>
<li><a href="#sec-1-9-6-3">1.9.6.3. Destructuring case classes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-10">1.10. Option type</a>
<ul>
<li><a href="#sec-1-10-1">1.10.1. Overview</a></li>
<li><a href="#sec-1-10-2">1.10.2. Basic operations</a></li>
<li><a href="#sec-1-10-3">1.10.3. Pattern matching</a></li>
<li><a href="#sec-1-10-4">1.10.4. Option type as a collection</a></li>
<li><a href="#sec-1-10-5">1.10.5. For-loop</a></li>
<li><a href="#sec-1-10-6">1.10.6. For-comprehensions</a></li>
<li><a href="#sec-1-10-7">1.10.7. Avoiding null checking and null pointer exceptions</a></li>
</ul>
</li>
<li><a href="#sec-1-11">1.11. Exception Handling with try-catch</a>
<ul>
<li><a href="#sec-1-11-1">1.11.1. Overview</a></li>
<li><a href="#sec-1-11-2">1.11.2. Throwing Exceptions</a></li>
<li><a href="#sec-1-11-3">1.11.3. Catching exceptions without finally block.</a></li>
<li><a href="#sec-1-11-4">1.11.4. References</a></li>
</ul>
</li>
<li><a href="#sec-1-12">1.12. Exception Handling with Try (scala.utils.Try)</a>
<ul>
<li><a href="#sec-1-12-1">1.12.1. Overview</a></li>
<li><a href="#sec-1-12-2">1.12.2. Examples</a>
<ul>
<li><a href="#sec-1-12-2-1">1.12.2.1. Example 1: basic operations.</a></li>
<li><a href="#sec-1-12-2-2">1.12.2.2. Example 2: for-comprehensions.</a></li>
<li><a href="#sec-1-12-2-3">1.12.2.3. Example 3: Pattern matching result.</a></li>
<li><a href="#sec-1-12-2-4">1.12.2.4. Example 4: Pattern matching specific exceptions.</a></li>
<li><a href="#sec-1-12-2-5">1.12.2.5. Example 5: Try with http request</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-13">1.13. For comprehensions and Monads</a>
<ul>
<li><a href="#sec-1-13-1">1.13.1. Scala For-comprehensions and Haskell do-notation</a>
<ul>
<li><a href="#sec-1-13-1-1">1.13.1.1. For-loop</a></li>
<li><a href="#sec-1-13-1-2">1.13.1.2. For-yield</a></li>
</ul>
</li>
<li><a href="#sec-1-13-2">1.13.2. Options for comprehensions</a></li>
<li><a href="#sec-1-13-3">1.13.3. Identity Monad Implementation</a></li>
<li><a href="#sec-1-13-4">1.13.4. Maybe/Option implementation</a></li>
<li><a href="#sec-1-13-5">1.13.5. IO Monad Implementation</a></li>
<li><a href="#sec-1-13-6">1.13.6. Reader Monad Implementation</a></li>
<li><a href="#sec-1-13-7">1.13.7. References</a></li>
</ul>
</li>
<li><a href="#sec-1-14">1.14. OOP - Object Oriented Programming</a>
<ul>
<li><a href="#sec-1-14-1">1.14.1. Everything is an object</a></li>
<li><a href="#sec-1-14-2">1.14.2. Singleton Object</a></li>
<li><a href="#sec-1-14-3">1.14.3. Case classes as records</a></li>
<li><a href="#sec-1-14-4">1.14.4. Special Methods - Apply and Update</a>
<ul>
<li><a href="#sec-1-14-4-1">1.14.4.1. Apply method - Callable objects</a></li>
<li><a href="#sec-1-14-4-2">1.14.4.2. Callable object comparison with closures</a></li>
<li><a href="#sec-1-14-4-3">1.14.4.3. Update method</a></li>
<li><a href="#sec-1-14-4-4">1.14.4.4. Implementing C#-like properties</a></li>
</ul>
</li>
<li><a href="#sec-1-14-5">1.14.5. Creating a Class</a></li>
<li><a href="#sec-1-14-6">1.14.6. Inheritance</a></li>
<li><a href="#sec-1-14-7">1.14.7. Class with higher order methods</a></li>
<li><a href="#sec-1-14-8">1.14.8. "Operator overloading"</a></li>
<li><a href="#sec-1-14-9">1.14.9. Abstract Classs</a></li>
<li><a href="#sec-1-14-10">1.14.10. Traits</a></li>
</ul>
</li>
<li><a href="#sec-1-15">1.15. OO - Design Patterns</a>
<ul>
<li><a href="#sec-1-15-1">1.15.1. Overview</a></li>
<li><a href="#sec-1-15-2">1.15.2. Creational Design Patterns</a>
<ul>
<li><a href="#sec-1-15-2-1">1.15.2.1. Singleton Design Pattern</a></li>
<li><a href="#sec-1-15-2-2">1.15.2.2. Simple factory pattern</a></li>
<li><a href="#sec-1-15-2-3">1.15.2.3. Factory pattern with factory method</a></li>
<li><a href="#sec-1-15-2-4">1.15.2.4. Static Factory Method</a></li>
</ul>
</li>
<li><a href="#sec-1-15-3">1.15.3. Behavioral Patterns</a>
<ul>
<li><a href="#sec-1-15-3-1">1.15.3.1. Strategy Pattern</a></li>
<li><a href="#sec-1-15-3-2">1.15.3.2. Template Method</a></li>
<li><a href="#sec-1-15-3-3">1.15.3.3. Iterator Pattern</a></li>
<li><a href="#sec-1-15-3-4">1.15.3.4. Command Design Pattern</a></li>
<li><a href="#sec-1-15-3-5">1.15.3.5. Observer / Publisher Subscriber</a></li>
<li><a href="#sec-1-15-3-6">1.15.3.6. Model View Controller - MVC</a></li>
<li><a href="#sec-1-15-3-7">1.15.3.7. Model View Presenter with Passive View - MVP</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-16">1.16. Scala Implicit</a>
<ul>
<li><a href="#sec-1-16-1">1.16.1. Use Cases</a></li>
<li><a href="#sec-1-16-2">1.16.2. Implicit type conversion</a>
<ul>
<li><a href="#sec-1-16-2-1">1.16.2.1. Overview</a></li>
<li><a href="#sec-1-16-2-2">1.16.2.2. Converting Tuple to LocalDate</a></li>
</ul>
</li>
<li><a href="#sec-1-16-3">1.16.3. Implicit conversions of Functions to Single-Method Interfaces</a>
<ul>
<li><a href="#sec-1-16-3-1">1.16.3.1. Overview</a></li>
<li><a href="#sec-1-16-3-2">1.16.3.2. Converting Functions to Java Swing Event Listener</a></li>
<li><a href="#sec-1-16-3-3">1.16.3.3. Converting code block to Runnable</a></li>
</ul>
</li>
<li><a href="#sec-1-16-4">1.16.4. Class Extension</a>
<ul>
<li><a href="#sec-1-16-4-1">1.16.4.1. Overview</a></li>
<li><a href="#sec-1-16-4-2">1.16.4.2. String class extension to parse Dates</a></li>
<li><a href="#sec-1-16-4-3">1.16.4.3. Extension to print elements.</a></li>
<li><a href="#sec-1-16-4-4">1.16.4.4. Reverse function application</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-17">1.17. C# Delegates in Scala</a>
<ul>
<li><a href="#sec-1-17-1">1.17.1. Delegates in C#</a></li>
<li><a href="#sec-1-17-2">1.17.2. Delegates in Scala</a></li>
<li><a href="#sec-1-17-3">1.17.3. Multicast Delegate</a></li>
<li><a href="#sec-1-17-4">1.17.4. References and further reading</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-2">2. Java Interoperability</a>
<ul>
<li><a href="#sec-2-1">2.1. Show Java Properties</a></li>
<li><a href="#sec-2-2">2.2. Java Reflection</a>
<ul>
<li><a href="#sec-2-2-1">2.2.1. Show Class Method given a class name</a></li>
<li><a href="#sec-2-2-2">2.2.2. Show Object Methods</a></li>
<li><a href="#sec-2-2-3">2.2.3. Show Object Public Methods</a></li>
<li><a href="#sec-2-2-4">2.2.4. Show Object's Public Method Names</a></li>
</ul>
</li>
<li><a href="#sec-2-3">2.3. GUI - Graphical User Interface (Java Swing)</a>
<ul>
<li><a href="#sec-2-3-1">2.3.1. Messagebox</a></li>
<li><a href="#sec-2-3-2">2.3.2. Password Dialog</a></li>
<li><a href="#sec-2-3-3">2.3.3. List View Dialog</a></li>
<li><a href="#sec-2-3-4">2.3.4. Text View Dialog</a></li>
<li><a href="#sec-2-3-5">2.3.5. Clock Display</a></li>
</ul>
</li>
<li><a href="#sec-2-4">2.4. Http Get Request</a></li>
<li><a href="#sec-2-5">2.5. Using a jar files or java library</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Bookmarks and Resources</a>
<ul>
<li><a href="#sec-3-1">3.1. Scala API Documentation</a></li>
<li><a href="#sec-3-2">3.2. Learning Resources</a></li>
<li><a href="#sec-3-3">3.3. Java and Scala Libraries</a>
<ul>
<li><a href="#sec-3-3-1">3.3.1. Scala Libraries</a></li>
<li><a href="#sec-3-3-2">3.3.2. Java Libraries</a></li>
<li><a href="#sec-3-3-3">3.3.3. Sites to find Libraries</a></li>
</ul>
</li>
<li><a href="#sec-3-4">3.4. Community</a></li>
<li><a href="#sec-3-5">3.5. Reports</a></li>
<li><a href="#sec-3-6">3.6. Presentations</a></li>
</ul>
</li>
</ul>
</div>
</div>
<lu> 
  <li><a href="/Functional-Programming/index.html">Index</a></li>
  <li><a href="https://github.com/caiorss/Functional-Programming">Repository</a></li>
</lu>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Scala</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Overview</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> Features</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
Scala is a statically typed, functional, object oriented and
imperative language created by <a href="https://en.wikipedia.org/wiki/Martin_Odersky">Martin Odersky</a> , or multi-paradigm
programming language that runs in JVM - Java Virtual Machine that
allows type-safe programming with high productivity.
</p>

<p>
Features:
</p>

<ul class="org-ul">
<li><span class="underline">Interactive</span> - Scala REPL allows the user to do exploratory design and
test the Java API interactively.
</li>

<li><span class="underline">Scripting language</span> Scala has a fast initialization time what makes
it suitable for scripting.
</li>

<li><span class="underline">Java Integration</span> As a JVM language Scala allows reuse of all Java
libraries and integration with old code bases.
</li>

<li>Multi Paradigm:

<ul class="org-ul">
<li>Imperative
</li>

<li>Object Oriented
</li>

<li>Functional
</li>
</ul>
</li>

<li>Functional Programming Features

<ul class="org-ul">
<li>Lambda function (aka anonymous function) 
</li>

<li>Provides short syntax for curried functions
</li>

<li><span class="underline">Higher order methods</span>. Functions can be passed as arguments to methods.
</li>

<li><span class="underline">Type Inference</span>. It frees the developer from declaring typing for
all values and functions in a similar way to Haskell, although
Scala requires some type anotations.
</li>

<li><span class="underline">Algebraic Data Types</span>. AGDT is useful for represeting AST -
Abstract Syntax Trees; write parsers and compilers and perform
symbolic computations.
</li>

<li><span class="underline">Pattern Matching</span>
</li>

<li><span class="underline">Tail Call Optimization</span>. TCO makes tail-recursive functions not
consume stack frames avoiding stack overflows.
</li>
</ul>
</li>
</ul>

<p>
Notes: 
</p>

<ul class="org-ul">
<li>Scala is also useful to learn quickly about Java API since it is
interactive.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> Getting Scala</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
See: <a href="https://www.scala-lang.org/download/">Download | The Scala Programming Language</a>
</p>
</div>
</div>

<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> File Extensions</h4>
<div class="outline-text-4" id="text-1-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Extension</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">.scala</td>
<td class="left">Scala source code or script</td>
</tr>

<tr>
<td class="left">.java</td>
<td class="left">Java source code</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">.class</td>
<td class="left">Java bytecode or compile code</td>
</tr>

<tr>
<td class="left">.jar</td>
<td class="left">Java application</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Tooling</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-2-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Program</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><b>Scala tools</b></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">scala</td>
<td class="left">Scala REPL or interactive shell like python or ipython.</td>
</tr>

<tr>
<td class="left">scalac</td>
<td class="left">Scala compiler.</td>
</tr>

<tr>
<td class="left">scaladoc</td>
<td class="left">Documentation builder similar to Javadoc.</td>
</tr>

<tr>
<td class="left">sbt</td>
<td class="left">Simple Building Tool. Or scala building tool similar to Maven, but less verbose.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><b>Java tools</b></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">java</td>
<td class="left">Java runtime.</td>
</tr>

<tr>
<td class="left">javac</td>
<td class="left">Java compiler.</td>
</tr>

<tr>
<td class="left">javadoc</td>
<td class="left">java documentation builder.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Other Tools:
</p>

<ul class="org-ul">
<li><a href="http://www.scala-sbt.org/">Scala SBT</a> - SBT Building Tool
</li>

<li><a href="http://ammonite.io/">Ammonite REPL</a> - Ammonite REPL is an enhanced Scala REPL with syntax
highlighting, multi-line editing and more.
</li>

<li><a href="https://www.guardsquare.com/en/proguard">Proguard</a> - Tool for shrinking, optmizing and obfuscating Java
Applications. It also can reduce the size of jar files and make the
initialization time faster.
</li>

<li><a href="http://launch4j.sourceforge.net/index.html">Launch4j - Cross-platform Java executable wrapper</a>
</li>

<li>IDEs

<ul class="org-ul">
<li>Eclipse
</li>

<li>Intelij
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> REPL - Scala Shell</h4>
<div class="outline-text-4" id="text-1-2-2">
</div><div id="outline-container-sec-1-2-2-1" class="outline-5">
<h5 id="sec-1-2-2-1"><span class="section-number-5">1.2.2.1</span> REPL Commands</h5>
<div class="outline-text-5" id="text-1-2-2-1">
<p>
The Scala REPL or Scala shell allows exploratory design and
interactive lerarning about the Java API.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">:help</td>
<td class="left">Show help</td>
</tr>

<tr>
<td class="left">:paste</td>
<td class="left">Paste a block of code and enter Ctrl+D.</td>
</tr>

<tr>
<td class="left">:paste <code>&lt;path-to-file&gt;</code></td>
<td class="left">Load a file.</td>
</tr>

<tr>
<td class="left">:load <code>&lt;path-to-file&gt;</code></td>
<td class="left">Load a Scala file into the repl.</td>
</tr>

<tr>
<td class="left">:require <code>&lt;path-to-*.jar&gt;</code></td>
<td class="left">Load a Jar file into the REPL.</td>
</tr>

<tr>
<td class="left">:history</td>
<td class="left">Show command history</td>
</tr>

<tr>
<td class="left">:reset</td>
<td class="left">Reset repl to its initial state.</td>
</tr>

<tr>
<td class="left">:silent</td>
<td class="left">Enable/disable automatic printing of results.</td>
</tr>

<tr>
<td class="left">:quit or Ctrl + c</td>
<td class="left">Exit REPL</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Scala REPL:
</p>


<div class="figure">
<p><a href="images/scala-repl-shell1.png"><img src="images/scala-repl-shell1.png" alt="scala-repl-shell1.png" /></a>
</p>
</div>

<p>
Example: Load a scala script  in the repl. File: <a href="src/clockDisplayGui.scala"><a href="src/clockDisplayGui.scala">src/clockDisplayGui.scala</a></a>
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">:</span><span class="org-type">load</span> clockDisplayGui.scala
<span class="org-constant">Loading</span> clockDisplayGui.scala...
<span class="org-function-name">runTimer</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>interval<span class="org-keyword">:</span> <span class="org-type">Int</span>, taskFn<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span>java.util.<span class="org-constant">Timer</span>
<span class="org-function-name">currentTime</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span><span class="org-constant">String</span>
<span class="org-function-name">frame</span><span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span> <span class="org-keyword">=</span> javax.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">[</span>frame0,<span class="org-constant">0</span>,<span class="org-constant">0</span>,<span class="org-constant">0x0</span>,invalid,hidden,layout<span class="org-keyword">=</span>java.awt.<span class="org-constant">BorderLayout</span>,title<span class="org-keyword">=</span><span class="org-constant">Java</span> <span class="org-constant">Clock</span> <span class="org-constant">App</span>,resizable,normal,defaultCloseOperation<span class="org-keyword">=</span><span class="org-constant">HIDE_ON_CLOSE</span>,rootPane<span class="org-keyword">=</span>javax.swing.<span class="org-constant">JRootPane</span><span class="org-rainbow-delimiters-depth-2">[</span>,<span class="org-constant">0</span>,<span class="org-constant">0</span>,<span class="org-constant">0x0</span>,invalid,layout<span class="org-keyword">=</span>javax.swing.<span class="org-constant">JRootPane</span>$RootLayout,alignmentX<span class="org-keyword">=</span><span class="org-constant">0.0</span>,alignmentY<span class="org-keyword">=</span><span class="org-constant">0.0</span>,border<span class="org-keyword">=</span>,flags<span class="org-keyword">=</span><span class="org-constant">16777673</span>,maximumSize<span class="org-keyword">=</span>,minimumSize<span class="org-keyword">=</span>,preferredSize<span class="org-keyword">=</span><span class="org-rainbow-delimiters-depth-2">]</span>,rootPaneCheckingEnabled<span class="org-keyword">=</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">label</span><span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JLabel</span> <span class="org-keyword">=</span> javax.swing.<span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-1">[</span>,<span class="org-constant">0</span>,<span class="org-constant">0</span>,<span class="org-constant">0x0</span>,invalid,alignmentX<span class="org-keyword">=</span><span class="org-constant">0.0</span>,alignmentY<span class="org-keyword">=</span><span class="org-constant">0.0</span>,border<span class="org-keyword">=</span>,flags<span class="org-keyword">=</span><span class="org-constant">8388608</span>,maximumSize<span class="org-keyword">=</span>,minimumSize<span class="org-keyword">=</span>,preferredSize<span class="org-keyword">=</span>,defaultIcon<span class="org-keyword">=</span>,disabledIcon<span class="org-keyword">=</span>,horizontalAlignment<span class="org-keyword">=</span><span class="org-constant">LEADING</span>,horizontalTextPosition<span class="org-keyword">=</span><span class="org-constant">TRAILING</span>,iconTextGap<span class="org-keyword">=</span><span class="org-constant">4</span>,labelFor<span class="org-keyword">=</span>,text<span class="org-keyword">=</span>,verticalAlignment<span class="org-keyword">=</span><span class="org-constant">CENTER</span>,verticalTextPosition<span class="org-keyword">=</span><span class="org-constant">CENTER</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">java</span>.awt.<span class="org-constant">Component</span> <span class="org-keyword">=</span> javax.swing.<span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-1">[</span>,<span class="org-constant">0</span>,<span class="org-constant">0</span>,<span class="org-constant">0x0</span>,invalid,alignmentX<span class="org-keyword">=</span><span class="org-constant">0.0</span>,alignmentY<span class="org-keyword">=</span><span class="org-constant">0.0</span>,border<span class="org-keyword">=</span>,flags<span class="org-keyword">=</span><span class="org-constant">8388608</span>,maximumSize<span class="org-keyword">=</span>,minimumSize<span class="org-keyword">=</span>,preferredSize<span class="org-keyword">=</span>,defaultIcon<span class="org-keyword">=</span>,disabledIcon<span class="org-keyword">=</span>,horizontalAlignment<span class="org-keyword">=</span><span class="org-constant">LEADING</span>,horizontalTextPosition<span class="org-keyword">=</span><span class="org-constant">TRAILING</span>,iconTextGap<span class="org-keyword">=</span><span class="org-constant">4</span>,labelFor<span class="org-keyword">=</span>,text<span class="org-keyword">=</span>,verticalAlignment<span class="org-keyword">=</span><span class="org-constant">CENTER</span>,verticalTextPosition<span class="org-keyword">=</span><span class="org-constant">CENTER</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Timer</span> <span class="org-keyword">=</span> java.util.<span class="org-constant">Timer</span><span class="org-keyword">@</span><span class="org-constant">455</span>b6df1

ob_scala_eol
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-2-2" class="outline-5">
<h5 id="sec-1-2-2-2"><a id="ID-8fee2473-9ca4-45f5-b316-84febb5dcb1e" name="ID-8fee2473-9ca4-45f5-b316-84febb5dcb1e"></a><span class="section-number-5">1.2.2.2</span> Running Scala Scripts</h5>
<div class="outline-text-5" id="text-1-2-2-2">
</div>
<ol class="org-ol"><li><a id="sec-1-2-2-2-1" name="sec-1-2-2-2-1"></a>Sample script<br  /><div class="outline-text-6" id="text-1-2-2-2-1">
<ul class="org-ul">
<li>file: <a href="src/scalaScript.scala"><a href="src/scalaScript.scala">src/scalaScript.scala</a></a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JPanel</span>, <span class="org-constant">JTextArea</span><span class="org-rainbow-delimiters-depth-1">}</span>

println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Sample scala script"</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">300</span>, <span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setDefaultCloseOperation<span class="org-rainbow-delimiters-depth-1">(</span>javax.swing.<span class="org-constant">JFrame</span>.<span class="org-constant">EXIT_ON_CLOSE</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">tarea</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JTextArea</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">val</span> <span class="org-variable-name">scroll</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JScrollPane</span><span class="org-rainbow-delimiters-depth-1">(</span>tarea<span class="org-rainbow-delimiters-depth-1">)</span>
frame.add<span class="org-rainbow-delimiters-depth-1">(</span>scroll<span class="org-rainbow-delimiters-depth-1">)</span>
frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>

tarea.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world Scala Script"</span><span class="org-rainbow-delimiters-depth-1">)</span>
tarea.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">Hello world! (en)"</span><span class="org-rainbow-delimiters-depth-1">)</span>
tarea.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">Hola mundo!  (es)"</span><span class="org-rainbow-delimiters-depth-1">)</span>
tarea.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">Ola mundo!   (pt)"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-1-2-2-2-2" name="sec-1-2-2-2-2"></a>Running script from command line:<br  /><div class="outline-text-6" id="text-1-2-2-2-2">
<div class="org-src-container">

<pre class="src src-sh">$ scala scalaScript.scala 
Hello world Scala

ob_scala_eol
</pre>
</div>

<p>
Screenshot: 
</p>


<div class="figure">
<p><a href="images/scalaScriptRunning.png"><img src="images/scalaScriptRunning.png" alt="scalaScriptRunning.png" /></a>
</p>
</div>
</div>
</li>

<li><a id="sec-1-2-2-2-3" name="sec-1-2-2-2-3"></a>Running the script command line with faster initialization.<br  /><div class="outline-text-6" id="text-1-2-2-2-3">
<ul class="org-ul">
<li><code>scala -save scalaScript.scala</code> 
</li>
</ul>

<p>
It will run the script and compile it to scalaScript.jar that will
speed up the initialization when the scala program is invoked again.
</p>

<div class="org-src-container">

<pre class="src src-sh">$ scala -save scalaScript.scala 
Hello world Scala

$ file scalaScript.jar 
<span class="org-function-name">scalaScript.jar</span>: Java archive data (JAR)

$ unzip -l scalaScript.jar 
<span class="org-function-name">Archive</span>:  scalaScript.jar
  Length      Date    Time    Name
---------  ---------- -----   ----
       75  2017-06-30 16:02   META-INF/MANIFEST.MF
     1691  2017-06-30 16:02   Main$<span class="org-variable-name">$anon</span>$<span class="org-variable-name">1</span>.class
      570  2017-06-30 16:02   Main$.class
      556  2017-06-30 16:02   Main.class
---------                     -------
     2892                     4 files

<span class="org-comment-delimiter"># </span><span class="org-comment">Next initialization is faster. </span>
$ scala scalaScript.scala 
Hello world Scala

ob_scala_eol

<span class="org-comment-delimiter"># </span><span class="org-comment">The generated jar file can be executed directly.</span>
$ scala scalaScript.jar
Hello world Scala

ob_scala_eol

<span class="org-comment-delimiter"># </span><span class="org-comment">It be executed directly with java and Scala runtime library.</span>
$ java -cp /home/archbox/opt/scala-2.11.8/lib/scala-library.jar:scalaScript.jar Main 
Hello world Scala

ob_scala_eol
</pre>
</div>
</div>
</li>

<li><a id="sec-1-2-2-2-4" name="sec-1-2-2-2-4"></a>Running script from scala REPL.<br  /><div class="outline-text-6" id="text-1-2-2-2-4">
<div class="org-src-container">

<pre class="src src-sh">$ scala
Welcome to Scala 2.11.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_20)<span class="org-builtin">.</span>
Type<span class="org-keyword"> in</span> expressions for evaluation. Or try :help.

scala&gt; :paste scalaScript.scala
Pasting file scalaScript.scala...
Hello world Scala

scala&gt; println(tarea.getText())
Hello world Scala Script
Hello world! (en)
Hola mundo!  (es)
Ola mundo!   (pt)

Write something more. 

Scala allows to write apps with GUIs fast!!

Like<span class="org-keyword"> in</span> Smalltalk,<span class="org-keyword"> in</span> Scala all objects 
and functions are right at your fingers.

scala&gt; tarea.setText(<span class="org-string">"Hello world Java Swing"</span>)

scala&gt;
</pre>
</div>
</div>
</li>

<li><a id="sec-1-2-2-2-5" name="sec-1-2-2-2-5"></a><a id="ID-0116b6d8-cf29-43db-8ecb-b3217ed78472" name="ID-0116b6d8-cf29-43db-8ecb-b3217ed78472"></a>Scala script as Unix executable<br  /><div class="outline-text-6" id="text-1-2-2-2-5">

<p>
Scala scripts can be executed as ordinary *nix shell scripts like bash
scripts with ./scala-script.scala
</p>

<p>
Example:
</p>

<p>
file: <a href="src/scalaNix.scala"><a href="src/scalaNix.scala">src/scalaNix.scala</a></a> - This script shows all arguments passed
by the user and displays a file in GUI (Graphical User Interface)
passed as first argument arg(0).
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment">#!/bin/sh</span>
exec scala -save <span class="org-string">"$0"</span> <span class="org-string">"$@"</span>
!#

<span class="org-comment-delimiter">// </span><span class="org-comment">Display text in a GUI</span>
<span class="org-keyword">def</span> <span class="org-function-name">displayText</span><span class="org-rainbow-delimiters-depth-1">(</span>text<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JTextArea</span>, <span class="org-constant">JScrollPane</span><span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">tarea</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JTextArea</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-2">()</span>
  frame.add<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">new</span> <span class="org-type">JScrollPane</span><span class="org-rainbow-delimiters-depth-3">(</span>tarea<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  frame.setSize<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">400</span>, <span class="org-constant">500</span><span class="org-rainbow-delimiters-depth-2">)</span>
  frame.setVisible<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
  frame.setDefaultCloseOperation<span class="org-rainbow-delimiters-depth-2">(</span>javax.swing.<span class="org-constant">WindowConstants</span>.<span class="org-constant">EXIT_ON_CLOSE</span><span class="org-rainbow-delimiters-depth-2">)</span>
  tarea.setText<span class="org-rainbow-delimiters-depth-2">(</span>text<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">readFile</span><span class="org-rainbow-delimiters-depth-1">(</span>file<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">src</span> <span class="org-keyword">=</span> scala.io.<span class="org-constant">Source</span>.fromFile<span class="org-rainbow-delimiters-depth-2">(</span>file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">txt</span> <span class="org-keyword">=</span> src.mkString
  src.close<span class="org-rainbow-delimiters-depth-2">()</span>
  txt
<span class="org-rainbow-delimiters-depth-1">}</span>

println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Testing Scala script"</span><span class="org-rainbow-delimiters-depth-1">)</span>

println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Arguments passed by user"</span><span class="org-rainbow-delimiters-depth-1">)</span>

args.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">){</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, a<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"arg[</span><span class="org-variable-name">${acc}</span><span class="org-string">] = </span><span class="org-variable-name">${a}</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  acc + <span class="org-constant">1</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


displayText<span class="org-rainbow-delimiters-depth-1">(</span>readFile<span class="org-rainbow-delimiters-depth-2">(</span>args<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Running it: It will display the file <a href="file:///etc/protocols">file:///etc/protocols</a> in a
Linux-based distribution passed as first argument arg(0).
</p>

<div class="org-src-container">

<pre class="src src-sh">$ src/scalaNix.scala /etc/protocols arg1 arg2 arg3 arg4

Testing Scala script
Arguments passed by user
arg[0] = /etc/protocols
arg[1] = arg1
arg[2] = arg2
arg[3] = arg3
arg[4] = arg4
</pre>
</div>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><a id="ID-19e4e984-865a-4dd8-be13-7cc406aa2cca" name="ID-19e4e984-865a-4dd8-be13-7cc406aa2cca"></a><span class="section-number-4">1.2.3</span> Scalac - Scala compiler</h4>
<div class="outline-text-4" id="text-1-2-3">
</div>
<div id="outline-container-sec-1-2-3-1" class="outline-5">
<h5 id="sec-1-2-3-1"><span class="section-number-5">1.2.3.1</span> Sample scala program</h5>
<div class="outline-text-5" id="text-1-2-3-1">
<ul class="org-ul">
<li>file: <a href="src/scalaProgram.scala"><a href="src/scalaProgram.scala">src/scalaProgram.scala</a></a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">package</span> <span class="org-string">scalaApp</span>

<span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JPanel</span>, <span class="org-constant">JTextArea</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">object</span> <span class="org-constant">Main</span><span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">def</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-2">(</span>arrgs<span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">){</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Hello world Scala"</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Sample scala script"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    frame.setSize<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">300</span>, <span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-3">)</span>
    frame.setDefaultCloseOperation<span class="org-rainbow-delimiters-depth-3">(</span>javax.swing.<span class="org-constant">JFrame</span>.<span class="org-constant">EXIT_ON_CLOSE</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-keyword">val</span> <span class="org-variable-name">tarea</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JTextArea</span><span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">scroll</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JScrollPane</span><span class="org-rainbow-delimiters-depth-3">(</span>tarea<span class="org-rainbow-delimiters-depth-3">)</span>
    frame.add<span class="org-rainbow-delimiters-depth-3">(</span>scroll<span class="org-rainbow-delimiters-depth-3">)</span>
    frame.setVisible<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-3">)</span>

    tarea.append<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Hello world Scala Script"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    tarea.append<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">Hello world! (en)"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    tarea.append<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">Hola mundo!  (es)"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    tarea.append<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">Ola mundo!   (pt)"</span><span class="org-rainbow-delimiters-depth-3">)</span>

  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3-2" class="outline-5">
<h5 id="sec-1-2-3-2"><span class="section-number-5">1.2.3.2</span> Compiling</h5>
<div class="outline-text-5" id="text-1-2-3-2">
<p>
Compiling: 
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Compile </span>
$ scalac scalaProgram.scala 

<span class="org-comment-delimiter"># </span><span class="org-comment">Inspect generated files.</span>
$ ls scalaApp/
 Main.class  <span class="org-string">'Main$.class'</span>

$ file scalaApp/Main.class 
<span class="org-function-name">scalaApp/Main.class</span>: compiled Java class data, version 50.0 (Java 1.6)
</pre>
</div>

<p>
Running with scala: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ scala scalaApp.Main 
Hello world Scala
</pre>
</div>

<p>
Running directly with java:
</p>

<div class="org-src-container">

<pre class="src src-sh">$ java -cp .:/home/archbox/opt/scala-2.11.8/lib/scala-library.jar scalaApp.Main
Hello world Scala
</pre>
</div>

<p>
Screenshot: 
</p>


<div class="figure">
<p><a href="images/scalaScriptRunning.png"><img src="images/scalaScriptRunning.png" alt="scalaScriptRunning.png" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3-3" class="outline-5">
<h5 id="sec-1-2-3-3"><span class="section-number-5">1.2.3.3</span> Compiling to a jar file</h5>
<div class="outline-text-5" id="text-1-2-3-3">
<p>
Compiling:
</p>

<div class="org-src-container">

<pre class="src src-sh">$ scalac scalaProgram.scala -d scalaApp.jar 

<span class="org-comment-delimiter"># </span><span class="org-comment">Inspect generated file.</span>
$ file scalaApp.jar 
<span class="org-function-name">scalaApp.jar</span>: Java archive data (JAR)

<span class="org-comment-delimiter"># </span><span class="org-comment">View package contents with jar tool.</span>
$ jar tf scalaApp.jar 
META-INF/MANIFEST.MF
scalaApp/Main.class
scalaApp/Main$.class

<span class="org-comment-delimiter"># </span><span class="org-comment">View package contents with unzip tool.</span>
$ unzip -l scalaApp.jar 
<span class="org-function-name">Archive</span>:  scalaApp.jar
  Length      Date    Time    Name
---------  ---------- -----   ----
       84  2017-06-30 16:50   META-INF/MANIFEST.MF
      586  2017-06-30 16:50   scalaApp/Main.class
     1369  2017-06-30 16:50   scalaApp/Main$.class
---------                     -------
     2039                     3 files
</pre>
</div>

<p>
Running with scala: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ scala scalaApp.jar 
Hello world Scala
</pre>
</div>

<p>
Running with java: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ java -cp scalaApp.jar:/home/archbox/opt/scala-2.11.8/lib/scala-library.jar scalaApp.Main
Hello world Scala
</pre>
</div>

<p>
or 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ cp /home/archbox/opt/scala-2.11.8/lib/scala-library.jar .
$ java -cp scalaApp.jar:scala-library.jar scalaApp.Main
Hello world Scala
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2-3-4" class="outline-5">
<h5 id="sec-1-2-3-4"><span class="section-number-5">1.2.3.4</span> See also</h5>
<div class="outline-text-5" id="text-1-2-3-4">
<ul class="org-ul">
<li><a href="https://docs.oracle.com/javase/tutorial/deployment/jar/appman.html">Setting an Application's Entry Point (The Java™ Tutorials &gt; Deployment &gt; Packaging Programs in JAR Files)</a> 
</li>

<li><a href="https://docs.oracle.com/javase/tutorial/deployment/jar/">Lesson: Packaging Programs in JAR Files (The Java™ Tutorials &gt; Deployment)</a>
</li>

<li><a href="https://docs.oracle.com/javase/tutorial/deployment/jar/build.html">Creating a JAR File (The Java™ Tutorials &gt; Deployment &gt; Packaging Programs in JAR Files)</a>
</li>

<li><a href="http://www.javaworld.com/article/2857714/learn-java/manipulating-jars-wars-and-ears-on-the-command-line.html">Manipulating JARs, WARs, and EARs on the command line | JavaWorld</a> 
</li>

<li><a href="https://coderwall.com/p/ssuaxa/how-to-make-a-jar-file-linux-executable">How to make a JAR file Linux executable (Example)</a> 
</li>

<li><a href="https://netbeans.org/kb/articles/javase-deploy.html">Packaging and Deploying Desktop Java Applications</a>
</li>

<li><a href="http://xmodulo.com/create-desktop-shortcut-launcher-linux.html">How to create desktop shortcut or launcher on Linux - Xmodulo</a>
</li>

<li><a href="http://launch4j.sourceforge.net/index.html">Launch4j - Cross-platform Java executable wrapper</a> 
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Basic Syntax</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Comments</h4>
<div class="outline-text-4" id="text-1-3-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Single line comment</span>

<span class="org-comment-delimiter">/*</span>
<span class="org-comment">Multiline Comment</span>

<span class="org-comment">*/</span>

<span class="org-doc">/**</span>
<span class="org-doc">  * Documentation comment.</span>
<span class="org-doc">  *</span>
<span class="org-doc">  */</span>
</pre>
</div>

<p>
Cooment with Scala-Doc markup. It allows Scaladoc to extract the
documentation from comment and produce an html documentation such as
Doxygen for C or C++ and Javadoc for Java do.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-doc">/** This function computes the distance from origin (0, 0) to point (x, y)</span>
<span class="org-doc">  *</span>
<span class="org-doc">  *  Usage Example:</span>
<span class="org-doc">  *</span>
<span class="org-doc">  *  {{{</span>
<span class="org-doc">  *     scala&gt; distancePoint(30.0, 40.0)</span>
<span class="org-doc">  *     res11: Double = 50.0</span>
<span class="org-doc">  *  }}}</span>
<span class="org-doc">  *</span>
<span class="org-doc">  *  @param x  - X coordinate of point</span>
<span class="org-doc">  *  @param y  - Y coordinate of point</span>
<span class="org-doc">  *  @return  Distance from origin to point (x, y)</span>
<span class="org-doc">  */</span>
<span class="org-keyword">def</span> <span class="org-function-name">distancePoint</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-constant">Math</span>.sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x * x + y * y<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Values and Variables Declaration</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
<b>Value</b>
</p>

<p>
It is not possible to reassign values.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">x</span> <span class="org-keyword">=</span> <span class="org-constant">10.2323</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.2323</span>

scala&gt; x <span class="org-keyword">=</span> <span class="org-constant">1.5354</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">12</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> reassignment to <span class="org-keyword">val</span>
       x <span class="org-keyword">=</span> <span class="org-constant">1.5354</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">a</span> <span class="org-keyword">=</span> <span class="org-string">"hello world"</span>
<span class="org-function-name">a</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> hello world

  <span class="org-comment-delimiter">// </span><span class="org-comment">Scala has multi-line string, unlike Java.</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">s</span> <span class="org-keyword">=</span> <span class="org-string">"""Hello world</span>
<span class="org-string">  Scala</span>
<span class="org-string">  String</span>
<span class="org-string">  """</span>
</pre>
</div>

<p>
It is not possible to change a <span class="underline">reference to object stored</span> in a
value. For instance, the reference to the object of class/type JFrame
with title "Hello World" cannot be changed, although the the object
can be changed.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">frame</span><span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span> <span class="org-keyword">=</span> javax.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">[</span>frame0,<span class="org-constant">0</span>,<span class="org-constant">27</span>,<span class="org-constant">0x0</span>,invalid,hidden ...<span class="org-rainbow-delimiters-depth-1">]</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--- Try to change the reference stored in the value.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">frame2</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">frame2</span><span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span> <span class="org-keyword">=</span> javax.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">[</span>frame1,<span class="org-constant">0</span>,<span class="org-constant">27</span> ...<span class="org-rainbow-delimiters-depth-1">]</span>

scala&gt; frame <span class="org-keyword">=</span> frame2
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> reassignment to <span class="org-keyword">val</span>
       frame <span class="org-keyword">=</span> frame2

<span class="org-comment-delimiter">// </span><span class="org-comment">A copy of the object previously defined is not created,</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">only the reference (pointer) of this object is copied.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">frameCopy</span> <span class="org-keyword">=</span> frame
<span class="org-function-name">frameCopy</span><span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span> <span class="org-keyword">=</span> javax.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">[</span>frame3,<span class="org-constant">0</span>,<span class="org-constant">2</span> ... ..

scala&gt; frame.getTitle
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Hello</span> world

scala&gt; frameCopy.getTitle
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Hello</span> world

scala&gt; frame.setTitle<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Scalability and growth"</span><span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; frameCopy.setTitle<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Scalability and growth"</span><span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; frame.getTitle
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Scalability</span> and growth

scala&gt; frame.setTitle<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Scalable scalable scalable ..."</span><span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; frameCopy.getTitle
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Scalable</span> scalable scalable ...

<span class="org-comment-delimiter">// </span><span class="org-comment">Eq - Method checks for reference equality. So, if the references (pointer to object) to</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">objects are equal, then the return value should be true.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; frameCopy eq frame
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; frameCopy.eq<span class="org-rainbow-delimiters-depth-2">(</span>frame<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; frame.eq<span class="org-rainbow-delimiters-depth-2">(</span>frameCopy<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>
</pre>
</div>

<p>
Values declared with explicit type annotation:
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.03</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.03</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">y</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-string">"hello world"</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">11</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> <span class="org-keyword">type</span> mismatch;
 found   <span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 required<span class="org-keyword">:</span> <span class="org-type">Double</span>
       <span class="org-keyword">val</span> <span class="org-variable-name">y</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-string">"hello world"</span>
                       ^

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">point</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span>, <span class="org-constant">200</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">point</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span>,<span class="org-constant">200</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">point2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">-100.34</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">11</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> <span class="org-keyword">type</span> mismatch;
 found   <span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-100.34</span><span class="org-rainbow-delimiters-depth-1">)</span>
 required<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-keyword">val</span> <span class="org-variable-name">point2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">-100.34</span>


scala&gt; <span class="org-keyword">type</span> <span class="org-constant">Action</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
defined <span class="org-keyword">type</span> alias <span class="org-constant">Action</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">act1</span><span class="org-keyword">:</span> <span class="org-type">Action</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Print to screen1"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">act1</span><span class="org-keyword">:</span> <span class="org-type">Action</span> <span class="org-keyword">=</span> $$Lambda$1109/<span class="org-constant">363103401</span><span class="org-preprocessor">@b56c222</span>

scala&gt; printer1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello world Scala is super scalable!!"</span><span class="org-rainbow-delimiters-depth-1">)</span>
hello world <span class="org-constant">Scala</span> is <span class="org-keyword">super</span> scalable!!
</pre>
</div>


<p>
<b>Variable</b>
</p>

<p>
Unlike a value, a variable allows reassignment and change the
reference to the pointed object.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">x</span> <span class="org-keyword">=</span> <span class="org-constant">10.2334</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.2334</span>

scala&gt; x <span class="org-keyword">=</span> <span class="org-constant">4.5</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.5</span>

scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">s</span> <span class="org-keyword">=</span> <span class="org-string">"Hello"</span>
<span class="org-function-name">s</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Hello</span>

scala&gt; s <span class="org-keyword">=</span> <span class="org-string">"world"</span>
<span class="org-function-name">s</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> world

scala&gt;
</pre>
</div>

<p>
Variables can be declared with type annotation too:
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; x <span class="org-keyword">=</span> <span class="org-constant">2</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.0</span>

scala&gt; x <span class="org-keyword">=</span> <span class="org-constant">45.43</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">45.43</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Declare a variable holding a reference to a function</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">with default NULL value.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">WARNING. Null should be used with caution.</span>
scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">action</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>
<span class="org-function-name">action</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

scala&gt; action<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"testing Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>
java.lang.<span class="org-constant">NullPointerException</span>
  ... <span class="org-constant">28</span> elided

scala&gt; action <span class="org-keyword">=</span> s <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Message = "</span> + s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">action</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1171/<span class="org-constant">1365490452</span><span class="org-keyword">@</span><span class="org-constant">2865</span>c8db

scala&gt; action<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"testing Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Message</span> <span class="org-keyword">=</span> testing <span class="org-constant">Scala</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Print to stderr - Store reference to method (.println) of System.err object.</span>
scala&gt; action <span class="org-keyword">=</span> <span class="org-constant">System</span>.err.println
<span class="org-function-name">action</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1172/<span class="org-constant">1358395794</span><span class="org-keyword">@</span><span class="org-constant">2f</span>533bd1

scala&gt; action<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"testing Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>
testing <span class="org-constant">Scala</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> Import Java and Scala Libraries</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
Import everythign from namespace java.io. Equivalent to java statement (import java.io.*).
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> java.io.<span class="org-keyword">_</span>
<span class="org-keyword">import</span> java.io.<span class="org-keyword">_</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fd</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">FileWriter</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/tmp/testfile.txt"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">fd</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">FileWriter</span> <span class="org-keyword">=</span> java.io.<span class="org-constant">FileWriter</span><span class="org-keyword">@</span><span class="org-constant">1</span>eceaded

scala&gt; fd.write<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; fd.close<span class="org-rainbow-delimiters-depth-1">()</span>
</pre>
</div>

<p>
Import multiple classes
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> javax.swing.<span class="org-constant">JFrame</span>
<span class="org-keyword">import</span> javax.swing.<span class="org-constant">JFrame</span>

scala&gt; <span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JPanel</span>, <span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JPanel</span>, <span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">300</span>, <span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
or
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">300</span>, <span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Import members / functions from a static class. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">import</span> <span class="org-constant">Math</span>.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">PI</span>, sin, cos, tan, exp<span class="org-rainbow-delimiters-depth-1">}</span> 
<span class="org-keyword">import</span> <span class="org-constant">Math</span>.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">PI</span>, sin, cos, tan, exp<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">@</span> <span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.<span class="org-constant">PI</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1.2246467991473532E-16</span>

<span class="org-keyword">@</span> sin<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">PI</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1.2246467991473532E-16</span>

<span class="org-keyword">@</span> cos<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">PI</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">-1.0</span>

<span class="org-keyword">@</span> exp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-2.0</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.1353352832366127</span>
</pre>
</div>

<p>
or 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> <span class="org-constant">Math</span>.<span class="org-keyword">_</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Import everything </span>
<span class="org-keyword">import</span> <span class="org-constant">Math</span>.<span class="org-keyword">_</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Or: Import all static methods of class java.lang.Math to use them as functions.</span>
scala&gt; <span class="org-keyword">import</span> java.lang.<span class="org-constant">Math</span>.<span class="org-keyword">_</span>
<span class="org-keyword">import</span> java.lang.<span class="org-constant">Math</span>.<span class="org-keyword">_</span>

scala&gt; sin <span class="org-keyword">_</span>
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> $$Lambda$1197/<span class="org-constant">1482753855</span><span class="org-keyword">@</span><span class="org-constant">56352274</span>

scala&gt; cos <span class="org-keyword">_</span>
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> $$Lambda$1198/<span class="org-constant">1338109470</span><span class="org-keyword">@</span><span class="org-constant">64d</span>eb236

scala&gt; sin<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">PI</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1.2246467991473532E-16</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">30</span>, <span class="org-constant">45</span>, <span class="org-constant">60</span>, <span class="org-constant">90</span>, <span class="org-constant">180</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">{</span>x <span class="org-keyword">=&gt;</span> sin<span class="org-rainbow-delimiters-depth-2">(</span>x * <span class="org-constant">PI</span> / <span class="org-constant">180.0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span> foreach println
<span class="org-constant">0.49999999999999994</span>
<span class="org-constant">0.7071067811865475</span>
<span class="org-constant">0.8660254037844386</span>
<span class="org-constant">1.0</span>
<span class="org-constant">1.2246467991473532E-16</span>
</pre>
</div>

<p>
Import from singletons / objects 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">object</span> <span class="org-constant">Module</span><span class="org-rainbow-delimiters-depth-1">{</span> 
    <span class="org-keyword">def</span> <span class="org-function-name">fn</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> x * <span class="org-constant">3</span>
    <span class="org-keyword">def</span> <span class="org-function-name">fxy</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">Int</span>, b<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> a + b 
    <span class="org-keyword">val</span> <span class="org-variable-name">gravity</span> <span class="org-keyword">=</span> <span class="org-constant">9.81</span> 
  <span class="org-rainbow-delimiters-depth-1">}</span> 
defined <span class="org-keyword">object</span> <span class="org-constant">Module</span>

<span class="org-keyword">@</span> <span class="org-constant">Module</span>.fn<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">12</span>

<span class="org-keyword">@</span> <span class="org-constant">Module</span>.fxy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">22</span>

<span class="org-keyword">@</span> <span class="org-keyword">import</span> <span class="org-constant">Module</span>.<span class="org-rainbow-delimiters-depth-1">{</span>fn, fxy<span class="org-rainbow-delimiters-depth-1">}</span> 
<span class="org-keyword">import</span> <span class="org-constant">Module</span>.<span class="org-rainbow-delimiters-depth-1">{</span>fn, fxy<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">@</span> fn<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">12</span>

<span class="org-keyword">@</span> fxy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">22</span>
</pre>
</div>

<p>
<b>Method Syntax</b>
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Math</span>.log10<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span>

scala&gt; <span class="org-constant">Math</span> log10 <span class="org-constant">1000</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">100.0</span>, <span class="org-constant">1000.0</span>, <span class="org-constant">10000.0</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.log10<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>, <span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">100.0</span>, <span class="org-constant">1000.0</span>, <span class="org-constant">10000.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-constant">Math</span>.log10
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>, <span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Functions</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> Function Definition</h4>
<div class="outline-text-4" id="text-1-4-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">prod</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> x * y

scala&gt; prod<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>


<span class="org-keyword">def</span> <span class="org-function-name">fun</span><span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Int</span>, b<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> <span class="org-constant">3</span> * a + b
  <span class="org-keyword">val</span> <span class="org-variable-name">d</span> <span class="org-keyword">=</span> b - a
  c * d <span class="org-comment-delimiter">// </span><span class="org-comment">The return value is the last value</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-doc">/**</span>
<span class="org-doc">   a = 4 and b = 5</span>
<span class="org-doc">   c = 3 * a + b = 3 * 4 + 5 = 17</span>
<span class="org-doc">   d = b - a     = 5 - 4 = 1</span>

<span class="org-doc">Return value:</span>
<span class="org-doc">   c * d = 17 * 1</span>

<span class="org-doc">--------------- */</span>
scala&gt; fun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">17</span>


<span class="org-keyword">def</span> <span class="org-function-name">showFiles</span><span class="org-rainbow-delimiters-depth-1">(</span>path<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">file</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-2">(</span>path<span class="org-rainbow-delimiters-depth-2">)</span>
  file.listFiles.foreach<span class="org-rainbow-delimiters-depth-2">(</span>println<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Pasting in the REPL</span>
scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">showFiles</span><span class="org-rainbow-delimiters-depth-1">(</span>path<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">val</span> <span class="org-variable-name">file</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-2">(</span>path<span class="org-rainbow-delimiters-depth-2">)</span>
     |   file.listFiles.foreach<span class="org-rainbow-delimiters-depth-2">(</span>println<span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">showFiles</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>path<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Unit</span>


scala&gt; showFiles<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-1">)</span>
/home
/<span class="org-keyword">var</span>
/bin
/usr
/root
/<span class="org-constant">Applications</span>
/proc
/boot
/dev
... ...
</pre>
</div>


<div class="org-src-container">

<pre class="src src-scala"></pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> Anonymous Functions / Lambda Functions or Function Literals</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
Simple Anonymous Functions
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mulBy10</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x * <span class="org-constant">10</span>
<span class="org-function-name">mulBy10</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; mulBy10<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res25</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">50</span>

scala&gt;

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">add</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x + y
<span class="org-function-name">addV1</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> &lt;function2&gt;

scala&gt; add<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res26</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">30.0</span>
</pre>
</div>

<p>
Multi line anonymous functions
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">val</span> <span class="org-variable-name">func</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">m</span> <span class="org-keyword">=</span> a * b
  <span class="org-keyword">val</span> <span class="org-variable-name">n</span> <span class="org-keyword">=</span> a * a * <span class="org-constant">3</span> - <span class="org-constant">4.5</span> * b
  <span class="org-rainbow-delimiters-depth-2">(</span>m, n, m + n<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">func</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">val</span> <span class="org-variable-name">m</span> <span class="org-keyword">=</span> a * b
     |   <span class="org-keyword">val</span> <span class="org-variable-name">n</span> <span class="org-keyword">=</span> a * a * <span class="org-constant">3</span> - <span class="org-constant">4.5</span> * b
     |   <span class="org-rainbow-delimiters-depth-2">(</span>m, n, m + n<span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">func</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> &lt;function2&gt;

scala&gt; func<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">15.0</span>,<span class="org-constant">4.5</span>,<span class="org-constant">19.5</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; func<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>, <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res29</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">12.0</span>,<span class="org-constant">34.5</span>,<span class="org-constant">46.5</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-3" class="outline-4">
<h4 id="sec-1-4-3"><span class="section-number-4">1.4.3</span> Curried Functions</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
Function in non-curried form (Tuple):
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">mulxy</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> x * y
<span class="org-function-name">mulxy</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Int</span>

scala&gt; mulxy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res37</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">12</span>


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>mulxy<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>, <span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res38</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">6</span>, <span class="org-constant">9</span>, <span class="org-constant">12</span>, <span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>mulxy<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res39</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>, <span class="org-constant">8</span>, <span class="org-constant">12</span>, <span class="org-constant">16</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Function in Curried Form:
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">mulxy</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> x * y
<span class="org-function-name">mulxy</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)(</span>y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Int</span>

scala&gt; mulxy <span class="org-keyword">_</span>
<span class="org-function-name">res89</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; mulxy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">_</span>
<span class="org-function-name">res88</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; mulxy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res90</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">12</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>mulxy<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res91</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">15</span>, <span class="org-constant">20</span>, <span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span> map mulxy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res38</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">15</span>, <span class="org-constant">20</span>, <span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Curried anonymous functions
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mulNonCurried</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x * y
<span class="org-function-name">mulNonCurried</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function2&gt;

scala&gt; mulNonCurried<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mulCurried</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span>y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x * y
<span class="org-function-name">mulCurried</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; mulCurried<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; mulCurried<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>mulCurried<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res34</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>, <span class="org-constant">8</span>, <span class="org-constant">12</span>, <span class="org-constant">16</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>  map mulCurried<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res35</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>, <span class="org-constant">8</span>, <span class="org-constant">12</span>, <span class="org-constant">16</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-4" class="outline-4">
<h4 id="sec-1-4-4"><span class="section-number-4">1.4.4</span> Closures</h4>
<div class="outline-text-4" id="text-1-4-4">
</div><div id="outline-container-sec-1-4-4-1" class="outline-5">
<h5 id="sec-1-4-4-1"><span class="section-number-5">1.4.4.1</span> Simple closure example</h5>
<div class="outline-text-5" id="text-1-4-4-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">makeMultiplier</span><span class="org-rainbow-delimiters-depth-1">(</span>factor<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">m</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>factor + <span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-2">)</span> * factor
  <span class="org-keyword">val</span> <span class="org-variable-name">n</span> <span class="org-keyword">=</span> factor / <span class="org-constant">100.0</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x * m + n
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">makeMultiplier</span><span class="org-rainbow-delimiters-depth-1">(</span>factor<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">val</span> <span class="org-variable-name">m</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>factor + <span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-2">)</span> * factor
     |   <span class="org-keyword">val</span> <span class="org-variable-name">n</span> <span class="org-keyword">=</span> factor / <span class="org-constant">100.0</span>
     |   <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x * m + n
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">makeMultiplier</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>factor<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fn1</span> <span class="org-keyword">=</span> makeMultiplier<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">fn1</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fn2</span> <span class="org-keyword">=</span> makeMultiplier<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">fn2</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; fn1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res40</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">12.03</span>

scala&gt; fn1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res41</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">24.03</span>

scala&gt; fn2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.04</span>

scala&gt; fn1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res43</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">24.03</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-4-2" class="outline-5">
<h5 id="sec-1-4-4-2"><span class="section-number-5">1.4.4.2</span> Stateful functions</h5>
<div class="outline-text-5" id="text-1-4-4-2">
<p>
Example 1
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Version 1</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">def</span> <span class="org-function-name">makeIncrementer1</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">inc</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">c</span>   <span class="org-keyword">=</span> counter
    counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span>
    c
  <span class="org-rainbow-delimiters-depth-2">}</span>

  inc
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">makeIncrementer1</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
     |   <span class="org-keyword">val</span> <span class="org-variable-name">inc</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     |     <span class="org-keyword">val</span> <span class="org-variable-name">c</span>   <span class="org-keyword">=</span> counter
     |     counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span>
     |     c
     |   <span class="org-rainbow-delimiters-depth-2">}</span>
     |
     |   inc
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">makeIncrementer1</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">inc</span> <span class="org-keyword">=</span> makeIncrementer1<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">inc</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res25</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res26</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">inc2</span> <span class="org-keyword">=</span> makeIncrementer1<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">inc2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; inc2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; inc2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; inc2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res29</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; inc2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

... ...


<span class="org-comment-delimiter">// </span><span class="org-comment">Version 2</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">def</span> <span class="org-function-name">makeIncrementer2</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
  <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">c</span>   <span class="org-keyword">=</span> counter
    counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span>
    c
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">makeIncrementer2</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
     |   <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     |     <span class="org-keyword">val</span> <span class="org-variable-name">c</span>   <span class="org-keyword">=</span> counter
     |     counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span>
     |     c
     |   <span class="org-rainbow-delimiters-depth-2">}</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">makeIncrementer2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">inc3</span> <span class="org-keyword">=</span> makeIncrementer
makeIncrementer1   makeIncrementer2

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">inc3</span> <span class="org-keyword">=</span> makeIncrementer2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">inc3</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; inc3<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res31</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; inc3<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; inc3<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">inc4</span> <span class="org-keyword">=</span> makeIncrementer2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">inc4</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; inc4<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res34</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; inc4<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res35</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; inc4<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res36</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

...
</pre>
</div>

<p>
Example 2
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">makeCounter</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">inc</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> counter
    counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span>
    c
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">dec</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> counter
    counter <span class="org-keyword">=</span> counter - <span class="org-constant">1</span>
    c
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>inc, dec<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">makeCounter</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
     |
     |   <span class="org-keyword">val</span> <span class="org-variable-name">inc</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     |     <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> counter
     |     counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span>
     |     c
     |   <span class="org-rainbow-delimiters-depth-2">}</span>
     |
     |   <span class="org-keyword">val</span> <span class="org-variable-name">dec</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     |     <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> counter
     |     counter <span class="org-keyword">=</span> counter - <span class="org-constant">1</span>
     |     c
     |   <span class="org-rainbow-delimiters-depth-2">}</span>
     |
     |   <span class="org-rainbow-delimiters-depth-2">(</span>inc, dec<span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">makeCounter</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()(</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>, <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">inc</span>, <span class="org-variable-name">dec</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> makeCounter<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">inc</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;
<span class="org-function-name">dec</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res50</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; dec<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res51</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

scala&gt; dec<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res52</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; dec<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res53</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; dec<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res54</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res55</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">-1</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res56</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; inc<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res57</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-4-3" class="outline-5">
<h5 id="sec-1-4-4-3"><span class="section-number-5">1.4.4.3</span> Emulating Objects with closures</h5>
<div class="outline-text-5" id="text-1-4-4-3">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Record of functions</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Counter</span><span class="org-rainbow-delimiters-depth-1">(</span>
      increment<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
     ,decrement<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
     ,get<span class="org-keyword">:</span>       <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>
<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">The internal state counter can only be accessed using the "methods" or</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">functions increment, decrement and get.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">def</span> <span class="org-function-name">newCounter</span><span class="org-rainbow-delimiters-depth-1">(</span>init<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> init
  <span class="org-constant">Counter</span><span class="org-rainbow-delimiters-depth-2">(</span>
       <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span> counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-3">}</span>
      ,<span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span> counter <span class="org-keyword">=</span> counter - <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-3">}</span>
      ,<span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> counter
   <span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> newCounter<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">c</span><span class="org-keyword">:</span> <span class="org-type">Counter</span> <span class="org-keyword">=</span> <span class="org-constant">Counter</span><span class="org-rainbow-delimiters-depth-1">(</span>&lt;function0&gt;,&lt;function0&gt;,&lt;function0&gt;<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; c.increment <span class="org-keyword">_</span>
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; c.decrement <span class="org-keyword">_</span>
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; c.get
get   getClass

scala&gt; c.get <span class="org-keyword">_</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; c.increment<span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; c.increment<span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; c.increment<span class="org-rainbow-delimiters-depth-1">()</span> ; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

scala&gt; c.increment<span class="org-rainbow-delimiters-depth-1">()</span> ; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>

scala&gt; c.increment<span class="org-rainbow-delimiters-depth-1">()</span> ; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">5</span>

scala&gt; c.decrement<span class="org-rainbow-delimiters-depth-1">()</span> ; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>

scala&gt; c.decrement<span class="org-rainbow-delimiters-depth-1">()</span> ; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

scala&gt; c.decrement<span class="org-rainbow-delimiters-depth-1">()</span> ; c.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-5" class="outline-4">
<h4 id="sec-1-4-5"><span class="section-number-4">1.4.5</span> Nested Functions</h4>
<div class="outline-text-4" id="text-1-4-5">
<p>
As Scala has closures or lexical scope, it is possible to define
functions inside functions which avoids code repetition and polluting
the local scope.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-doc">/**  Pretty print a collection of tuples as a table. </span>
<span class="org-doc">  Parameters: </span>
<span class="org-doc">  @rows     - Collection of tuples to be printed.  </span>
<span class="org-doc">  @title    - Tuple containing the titles of left and right side. </span>
<span class="org-doc">  @line     - Flag that if set to true, prints a new line between each row.</span>
<span class="org-doc">  @margin   - Margin from left side of screen as number of spaces.</span>
<span class="org-doc">  @sep      - Number of spaces between left side and right side </span>
<span class="org-doc">  @maxRside - Maximum number of characters to printed on right side.</span>
<span class="org-doc">  */</span> 
<span class="org-keyword">def</span> <span class="org-function-name">printTupleAsTable</span><span class="org-rainbow-delimiters-depth-1">(</span>
  rows<span class="org-keyword">:</span>   <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">String</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">]</span>,
  title<span class="org-keyword">:</span>  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">String</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span>, <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  line<span class="org-keyword">:</span>   <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>,
  margin<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>,
  sep<span class="org-keyword">:</span>    <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>,
  maxRside<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">100</span>
<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">def</span> <span class="org-function-name">printRow</span><span class="org-rainbow-delimiters-depth-2">(</span>wmax1<span class="org-keyword">:</span> <span class="org-type">Int</span>, clamp<span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>row<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">String</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">lside</span>, <span class="org-variable-name">rside</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> row

    <span class="org-comment-delimiter">// </span><span class="org-comment">print left margin </span>
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-3">(</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">0</span> to margin<span class="org-rainbow-delimiters-depth-3">)</span> print<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">' '</span><span class="org-rainbow-delimiters-depth-3">)</span>

    print<span class="org-rainbow-delimiters-depth-3">(</span>lside<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Print spaces </span>
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-3">(</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">0</span> to wmax1 - lside.length + sep<span class="org-rainbow-delimiters-depth-3">)</span> print<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">' '</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>rside.length &lt;= maxRside<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span>rside<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">else</span> <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>clamp<span class="org-rainbow-delimiters-depth-3">){</span>
      <span class="org-keyword">val</span> <span class="org-variable-name">dots</span> <span class="org-keyword">=</span> <span class="org-string">"..."</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span>rside.take<span class="org-rainbow-delimiters-depth-5">(</span>maxRside - dots.length<span class="org-rainbow-delimiters-depth-5">)</span> + dots<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span>rside.take<span class="org-rainbow-delimiters-depth-5">(</span>maxRside<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Print line between rows </span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>line<span class="org-rainbow-delimiters-depth-3">)</span> println<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">printDashes</span><span class="org-rainbow-delimiters-depth-2">(</span>wmax1<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    printRow<span class="org-rainbow-delimiters-depth-3">(</span>wmax1, <span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-3">)(</span><span class="org-string">"-"</span> * wmax1, <span class="org-string">"-"</span> * maxRside<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">val</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">title1</span>, <span class="org-variable-name">title2</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> title

  <span class="org-comment-delimiter">// </span><span class="org-comment">Maximum length of left side column </span>
  <span class="org-keyword">val</span> <span class="org-variable-name">wmax1</span> <span class="org-keyword">=</span> title1.length max rows.map<span class="org-rainbow-delimiters-depth-2">(</span>row <span class="org-keyword">=&gt;</span> row._1.length<span class="org-rainbow-delimiters-depth-2">)</span>.max

  printRow<span class="org-rainbow-delimiters-depth-2">(</span>wmax1<span class="org-rainbow-delimiters-depth-2">)(</span>title<span class="org-rainbow-delimiters-depth-2">)</span>
  printDashes<span class="org-rainbow-delimiters-depth-2">(</span>wmax1<span class="org-rainbow-delimiters-depth-2">)</span>
  rows foreach printRow<span class="org-rainbow-delimiters-depth-2">(</span>wmax1<span class="org-rainbow-delimiters-depth-2">)</span>
  printDashes<span class="org-rainbow-delimiters-depth-2">(</span>wmax1<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> scala.collection.<span class="org-constant">JavaConverters</span>.<span class="org-keyword">_</span>

scala&gt; <span class="org-constant">System</span>.getProperties.asScala.toSeq foreach println
<span class="org-rainbow-delimiters-depth-1">(</span>env.emacs,<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>java.runtime.name,<span class="org-constant">OpenJDK</span> <span class="org-constant">Runtime</span> <span class="org-constant">Environment</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>sun.boot.library.path,/usr/lib/jvm/java-8-openjdk/jre/lib/amd64<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>java.vm.version,<span class="org-constant">25.141</span>-b15<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>java.vm.vendor,<span class="org-constant">Oracle</span> <span class="org-constant">Corporation</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>java.vendor.url,http<span class="org-keyword">:</span><span class="org-comment-delimiter">//</span><span class="org-comment">java.oracle.com/)</span>
<span class="org-rainbow-delimiters-depth-2">(</span>path.separator,<span class="org-keyword">:</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span>java.vm.name,<span class="org-constant">OpenJDK</span> <span class="org-constant">64</span>-<span class="org-constant">Bit</span> <span class="org-constant">Server</span> <span class="org-constant">VM</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span>file.encoding.pkg,sun.io<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span>user.country,<span class="org-constant">US</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span>sun.java.launcher,<span class="org-constant">SUN_STANDARD</span><span class="org-rainbow-delimiters-depth-2">)</span>
... ... ... ... ... ... ... ... ... ... ... ... ... ... 


scala&gt; printTupleAsTable<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">System</span>.getProperties.asScala.toSeq, title <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Java Property"</span>, <span class="org-string">"Value"</span><span class="org-rainbow-delimiters-depth-3">)</span>, maxRside <span class="org-keyword">=</span> <span class="org-constant">60</span><span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-constant">Java</span> <span class="org-constant">Property</span>                     <span class="org-constant">Value</span>
 -----------------------------     ------------------------------------------------------------
 env.emacs                         
 java.runtime.name                 <span class="org-constant">OpenJDK</span> <span class="org-constant">Runtime</span> <span class="org-constant">Environment</span>
 sun.boot.library.path             /usr/lib/jvm/java-8-openjdk/jre/lib/amd64
 java.vm.version                   <span class="org-constant">25.141</span>-b15
 java.vm.vendor                    <span class="org-constant">Oracle</span> <span class="org-constant">Corporation</span>
 java.vendor.url                   http<span class="org-keyword">:</span><span class="org-comment-delimiter">//</span><span class="org-comment">java.oracle.com/</span>
 path.separator                    <span class="org-keyword">:</span>
 java.vm.name                      <span class="org-constant">OpenJDK</span> <span class="org-constant">64</span>-<span class="org-constant">Bit</span> <span class="org-constant">Server</span> <span class="org-constant">VM</span>
 file.encoding.pkg                 sun.io
 user.country                      <span class="org-constant">US</span>
 sun.java.launcher                 <span class="org-constant">SUN_STANDARD</span>
 sun.os.patch.level                unknown
 java.vm.specification.name        <span class="org-constant">Java</span> <span class="org-constant">Virtual</span> <span class="org-constant">Machine</span> <span class="org-constant">Specification</span>
 user.dir                          /home/archbox/test

... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... .

 java.vm.info                      mixed mode
 java.version                      <span class="org-constant">1.8.0</span>_141
 java.ext.dirs                     /usr/lib/jvm/java-8-openjdk/jre/lib/ext:/usr/java/<span class="org-keyword">package</span>...
 sun.boot.<span class="org-keyword">class</span>.path               /usr/lib/jvm/java-8-openjdk/jre/lib/resources.jar:/usr/li...
 java.vendor                       <span class="org-constant">Oracle</span> <span class="org-constant">Corporation</span>
 file.separator                    /
 java.vendor.url.bug               http<span class="org-keyword">:</span><span class="org-comment-delimiter">//</span><span class="org-comment">bugreport.sun.com/bugreport/</span>
 sun.io.unicode.encoding           <span class="org-constant">UnicodeLittle</span>
 sun.cpu.endian                    little
 sun.cpu.isalist                   
 -----------------------------     ------------------------------------------------------------



printTupleAsTable<span class="org-rainbow-delimiters-depth-2">(</span>
  rows <span class="org-keyword">=</span> <span class="org-constant">System</span>.getenv.asScala.toSeq,
  title <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Environment Variables"</span>, <span class="org-string">"Value"</span><span class="org-rainbow-delimiters-depth-3">)</span>,
  margin <span class="org-keyword">=</span> <span class="org-constant">5</span>,
  maxRside <span class="org-keyword">=</span> <span class="org-constant">60</span>
<span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; printTupleAsTable<span class="org-rainbow-delimiters-depth-2">(</span>
     |   rows <span class="org-keyword">=</span> <span class="org-constant">System</span>.getenv.asScala.toSeq,
     |   title <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Environment Variables"</span>, <span class="org-string">"Value"</span><span class="org-rainbow-delimiters-depth-3">)</span>,
     |   margin <span class="org-keyword">=</span> <span class="org-constant">5</span>,
     |   maxRside <span class="org-keyword">=</span> <span class="org-constant">60</span>
     | <span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-constant">Environment</span> <span class="org-constant">Variables</span>        <span class="org-constant">Value</span>
      ------------------------     ------------------------------------------------------------
      <span class="org-constant">PATH</span>                         /usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/defa...
      <span class="org-constant">XAUTHORITY</span>                   /home/archbox/.<span class="org-constant">Xauthority</span>
      <span class="org-constant">LC_MEASUREMENT</span>               pt_BR.<span class="org-constant">UTF</span>-8
      <span class="org-constant">LC_TELEPHONE</span>                 pt_BR.<span class="org-constant">UTF</span>-8
      <span class="org-constant">GDMSESSION</span>                   xfce
      <span class="org-constant">XDG_DATA_DIRS</span>                /usr/local/share:/usr/share
      <span class="org-constant">LC_TIME</span>                      pt_BR.<span class="org-constant">UTF</span>-8
      <span class="org-constant">DBUS_SESSION_BUS_ADDRESS</span>     unix<span class="org-keyword">:</span><span class="org-type">path</span>=/run/user/<span class="org-constant">1001</span>/bus
      <span class="org-constant">XDG_CURRENT_DESKTOP</span>          <span class="org-constant">XFCE</span>
      <span class="org-constant">MAIL</span>                         /<span class="org-keyword">var</span>/spool/mail/archbox
      <span class="org-constant">SSH_AGENT_PID</span>                <span class="org-constant">29199</span>
      <span class="org-constant">MOZ_PLUGIN_PATH</span>              /usr/lib/mozilla/plugins
      <span class="org-constant">COLORTERM</span>                    truecolor
      <span class="org-constant">SESSION_MANAGER</span>              local/ghostpc:@/tmp/.<span class="org-constant">ICE</span>-unix/<span class="org-constant">29194</span>,unix/ghostpc:/tmp/.<span class="org-constant">IC</span>...
      <span class="org-constant">LC_PAPER</span>                     pt_BR.<span class="org-constant">UTF</span>-8
      <span class="org-constant">LOGNAME</span>                      archbox
      <span class="org-constant">PWD</span>                          /home/archbox/test

     ... .... ...   ... .... ...   ... .... ...   ... .... ...   ... .... ...   ... .... ...

      <span class="org-constant">EDITOR</span>                       emacs -<span class="org-constant">Q</span> -nw --no-site -eval "<span class="org-rainbow-delimiters-depth-2">(</span>progn <span class="org-rainbow-delimiters-depth-3">(</span>setq  inhibit-start...
      <span class="org-constant">NLSPATH</span>                      /usr/dt/lib/nls/msg/%<span class="org-constant">L</span>/%<span class="org-constant">N</span>.cat
      <span class="org-constant">QT_QPA_PLATFORMTHEME</span>         qt5ct
      <span class="org-constant">XDG_RUNTIME_DIR</span>              /run/user/<span class="org-constant">1001</span>
      <span class="org-constant">XDG_VTNR</span>                     <span class="org-constant">7</span>
      <span class="org-constant">HOME</span>                         /home/archbox
      ------------------------     ------------------------------------------------------------
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-6" class="outline-4">
<h4 id="sec-1-4-6"><span class="section-number-4">1.4.6</span> Function Composition</h4>
<div class="outline-text-4" id="text-1-4-6">
<p>
<b>Math Composition</b>
</p>

<p>
Computes f.compose(g) = f°g (x) = f(g(x))
</p>

<ul class="org-ul">
<li>f°g (3) = f(g(3)) = f(2*3) = f(6) = 6 + 10 = 16 ok.
</li>
</ul>


<pre class="example">
                      f ° g = f(g(x))
   ....................................................
   .  ___________________      ___________________    .
   .  |                 |      |                 |    .
   .  |                 |      |                 |    .
 --+-&gt;+ g(x) = x * 2    +--&gt;---+  f(x) = x + 10  +----+--&gt;
4  .  | g(4) = 8        |  8   |  f(8) = 18      |    . 18
   .  |_________________|      +-----------------+    .
   .                                                  .
   ....................................................

      ................
      .              .
 4 --&gt;+  (f ° g) (x) +--&gt; 18
      .  f(g(x))     .
      ................
</pre>


<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">f</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x + <span class="org-constant">10</span>
<span class="org-function-name">f</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">g</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x * <span class="org-constant">2</span>
<span class="org-function-name">g</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">comp1</span> <span class="org-keyword">=</span> f.compose<span class="org-rainbow-delimiters-depth-1">(</span>g<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">comp1</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;


scala&gt; comp1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res70</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">16</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>comp1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res71</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">12</span>, <span class="org-constant">14</span>, <span class="org-constant">16</span>, <span class="org-constant">18</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;


<span class="org-comment-delimiter">/// </span><span class="org-comment">It could also be:</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">comp11</span> <span class="org-keyword">=</span> f compose g
<span class="org-function-name">comp11</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>comp11<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res72</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">12</span>, <span class="org-constant">14</span>, <span class="org-constant">16</span>, <span class="org-constant">18</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<p>
<b>Reverse Composition</b> (andThen)
</p>

<ul class="org-ul">
<li>f.andThen(g) = f &gt;&gt; g = g(f(x))
</li>
<li>(f andThen g)(4) = (f &gt;&gt; g)(4) = g(f(4)) = g(14) = 28 . Ok.
</li>
</ul>

<pre class="example">
                      f &gt;&gt; g = g ° f = g(f(x))
   ....................................................
   .   ___________________      ___________________   .
   .  |                 |      |                 |    .
   .  |                 |      |                 |    .
 ----&gt;+ f(x) = x + 10   +--&gt;---+  g(x) = x * 2   +----+--&gt;
4  .  | f(4) = 14       |  14  |  g(14) = 28     |    . 28
   .  |_________________|      +-----------------+    .
   .                                                  .
   ....................................................


      .................
      .               .
 4 --&gt;+  (f &gt;&gt; g) (x) +--&gt; 28
      .  g(f(x))      .
      .................
</pre>


<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">f</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x + <span class="org-constant">10</span>
<span class="org-function-name">f</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">g</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x * <span class="org-constant">2</span>
<span class="org-function-name">g</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">f_rcomp_g</span> <span class="org-keyword">=</span> f andThen g
<span class="org-function-name">f_rcomp_g</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; f_rcomp_g <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res76</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">28</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Or</span>
scala&gt; f.andThen<span class="org-rainbow-delimiters-depth-1">(</span>g<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res77</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">28</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-7" class="outline-4">
<h4 id="sec-1-4-7"><span class="section-number-4">1.4.7</span> Higher Order Functions</h4>
<div class="outline-text-4" id="text-1-4-7">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">sumFn1</span><span class="org-rainbow-delimiters-depth-1">(</span>f<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>, g<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>, x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> f<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> + g<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">sumFn1</span><span class="org-rainbow-delimiters-depth-1">(</span>f<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>, g<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> f<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> + g<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">sumFn</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>f<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>, g<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Int</span>


scala&gt;  sumFn1<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">4</span>, a <span class="org-keyword">=&gt;</span> a + <span class="org-constant">5</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res46</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">25</span>

scala&gt;  sumFn1<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">4</span>, a <span class="org-keyword">=&gt;</span> a + <span class="org-constant">5</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">30</span>

scala&gt;  sumFn1<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * x, a <span class="org-keyword">=&gt;</span> a + <span class="org-constant">5</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">35</span>


<span class="org-keyword">def</span> <span class="org-function-name">sumFn2</span><span class="org-rainbow-delimiters-depth-1">(</span>f<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span>, g<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> f<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> + g<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; f1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>

scala&gt; f1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res50</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">30</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">f2</span> <span class="org-keyword">=</span> sumFn2<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * x, a <span class="org-keyword">=&gt;</span> a + a<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">f2</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; f2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res51</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; f2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res52</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">35</span>



<span class="org-keyword">def</span> <span class="org-function-name">iterFiles</span><span class="org-rainbow-delimiters-depth-1">(</span>fn<span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>path<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">f</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-2">(</span>path<span class="org-rainbow-delimiters-depth-2">)</span>
  f.listFiles<span class="org-rainbow-delimiters-depth-2">()</span>.foreach<span class="org-rainbow-delimiters-depth-2">(</span>file <span class="org-keyword">=&gt;</span> fn<span class="org-rainbow-delimiters-depth-3">(</span>file.toString<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; iterFiles<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-1">)</span>
/home
/<span class="org-keyword">var</span>
/bin
/usr
/root
/<span class="org-constant">Applications</span>
/proc
/boot
/dev
  ...

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">showFiles</span> <span class="org-keyword">=</span> iterFiles<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">showFiles</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function1&gt;


scala&gt; showFiles<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/etc"</span><span class="org-rainbow-delimiters-depth-1">)</span>
/etc/systemd
/etc/motd
/etc/gemrc
/etc/adobe
/etc/ld.so.cache
/etc/environment
/etc/libreoffice
/etc/rc_keymaps
/etc/sensors3.conf
... ...
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-8" class="outline-4">
<h4 id="sec-1-4-8"><span class="section-number-4">1.4.8</span> Polymorphic Functions</h4>
<div class="outline-text-4" id="text-1-4-8">
</div><div id="outline-container-sec-1-4-8-1" class="outline-5">
<h5 id="sec-1-4-8-1"><span class="section-number-5">1.4.8.1</span> Generic Functions - functions with type parameters</h5>
<div class="outline-text-5" id="text-1-4-8-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">identity</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> x

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">identity</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> x
<span class="org-function-name">identity</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">A</span>

scala&gt; identity<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">100</span>

scala&gt; identity<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">300</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Some</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">300</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; identity<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Hello</span> world


<span class="org-keyword">def</span> <span class="org-function-name">constantly</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span>, <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-1">](</span>a<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>b<span class="org-keyword">:</span> <span class="org-type">B</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> a

scala&gt; constantly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Any</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; constantly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-string">"Hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">100</span>

scala&gt; constantly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">100</span>

scala&gt; constantly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">100</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>a<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> a.toString
<span class="org-function-name">show</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>a<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">String</span>


scala&gt; show<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">340.343</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">340.343</span>

scala&gt; show<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; show<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-8-2" class="outline-5">
<h5 id="sec-1-4-8-2"><span class="section-number-5">1.4.8.2</span> Functions with multiple signatures</h5>
<div class="outline-text-5" id="text-1-4-8-2">
<p>
Multiple functions can share the same name with different signatures
if they don't have any default parameter.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">Dialog</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">def</span> <span class="org-function-name">showAlert</span><span class="org-rainbow-delimiters-depth-2">(</span>message<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">){</span>
    javax.swing.<span class="org-constant">JOptionPane</span>.showMessageDialog<span class="org-rainbow-delimiters-depth-3">(</span>
         <span class="org-constant">null</span>
        ,message
        ,<span class="org-string">"Alert"</span>
        ,javax.swing.<span class="org-constant">JOptionPane</span>.<span class="org-constant">WARNING_MESSAGE</span>
     <span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>  

  <span class="org-keyword">def</span> <span class="org-function-name">showAlert</span><span class="org-rainbow-delimiters-depth-2">(</span>title<span class="org-keyword">:</span> <span class="org-type">String</span>, message<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">){</span>
    javax.swing.<span class="org-constant">JOptionPane</span>.showMessageDialog<span class="org-rainbow-delimiters-depth-3">(</span>
         <span class="org-constant">null</span>
        ,message
        ,title
        ,javax.swing.<span class="org-constant">JOptionPane</span>.<span class="org-constant">WARNING_MESSAGE</span>
     <span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Example: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Dialog</span>.showAlert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Error: Network failure. Could not fetch data"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">Dialog</span>.showAlert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Error report"</span>, <span class="org-string">"Error: Network failure. Could not fetch data"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-9" class="outline-4">
<h4 id="sec-1-4-9"><span class="section-number-4">1.4.9</span> Storing Functions in Data Structures</h4>
<div class="outline-text-4" id="text-1-4-9">
<p>
As in any language with first class functions, functions can be stored
in data structures such as lists, arrays, maps and also stored in objects. 
</p>

<ul class="org-ul">
<li>Storing functions in variables: 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">printer</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> s <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">printer</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1031/<span class="org-constant">1414431049</span><span class="org-keyword">@</span><span class="org-constant">7f</span>b66650

scala&gt; printer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test printer"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; printer <span class="org-keyword">=</span> println
<span class="org-function-name">printer</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1060/<span class="org-constant">1256918571</span><span class="org-keyword">@</span><span class="org-constant">648</span>c5fb3

scala&gt; printer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test printer"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Test</span> printer

<span class="org-comment-delimiter">// </span><span class="org-comment">Print to stdout</span>
scala&gt; printer <span class="org-keyword">=</span> <span class="org-constant">System</span>.err.println
<span class="org-function-name">printer</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1092/<span class="org-constant">1353172779</span><span class="org-keyword">@</span><span class="org-constant">54</span>c11750

scala&gt; printer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test printer"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Test</span> printer
</pre>
</div>

<ul class="org-ul">
<li>References to methods can also be stored in variables of function
type. In this example, the variable action stores a reference to
the method _.showInventory of an instance of the class
ProductInventory. 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">action</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">action</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>

scala&gt; action<span class="org-rainbow-delimiters-depth-1">()</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">printMe</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Print me right now"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">printMe</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>

scala&gt; action <span class="org-keyword">=</span> printMe
<span class="org-function-name">action</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> 

scala&gt; action<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Print</span> me right now

<span class="org-keyword">object</span> <span class="org-constant">Utils</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">showLinuxRootFiles</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span>f <span class="org-keyword">&lt;-</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-3">)</span>.listFiles<span class="org-rainbow-delimiters-depth-2">)</span>
      println<span class="org-rainbow-delimiters-depth-2">(</span>f<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; action <span class="org-keyword">=</span> <span class="org-constant">Utils</span>.showLinuxRootFiles <span class="org-keyword">_</span>
<span class="org-function-name">action</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> 

scala&gt; action<span class="org-rainbow-delimiters-depth-1">()</span>
/etc
/tmp
/sbin
/sys
/opt
/media
/boot
 ... ... ... ... ... ... ... ...


<span class="org-keyword">class</span> <span class="org-type">ProductInventory</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">lst</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">ArrayList</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span>

  <span class="org-keyword">def</span> <span class="org-function-name">addProduct</span><span class="org-rainbow-delimiters-depth-2">(</span>product<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Logger -&gt; Added "</span> + product<span class="org-rainbow-delimiters-depth-3">)</span>    
    lst.add<span class="org-rainbow-delimiters-depth-3">(</span>product<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">showInventory</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    lst.forEach<span class="org-rainbow-delimiters-depth-2">{</span> p <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Product = "</span> + p<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>



scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">myShopInventory</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ProductInventory</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">myShopInventory</span><span class="org-keyword">:</span> <span class="org-type">ProductInventory</span> <span class="org-keyword">=</span> <span class="org-constant">ProductInventory</span><span class="org-keyword">@</span><span class="org-constant">5</span>a6dbab7

scala&gt; myShopInventory.addProduct<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Orange"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Logger</span> -&gt; <span class="org-constant">Added</span> <span class="org-constant">Orange</span>
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; myShopInventory.addProduct<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Apple"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Logger</span> -&gt; <span class="org-constant">Added</span> <span class="org-constant">Apple</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; myShopInventory.addProduct<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Coffee beans"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Logger</span> -&gt; <span class="org-constant">Added</span> <span class="org-constant">Coffee</span> beans
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; myShopInventory.showInventory<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Orange</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Apple</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Coffee</span> beans

scala&gt; action <span class="org-keyword">=</span> myShopInventory.showInventory <span class="org-keyword">_</span>
<span class="org-function-name">action</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1369/<span class="org-constant">801054059</span><span class="org-keyword">@</span><span class="org-constant">4f</span>4a6252

scala&gt; action<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Orange</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Apple</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Coffee</span> beans

scala&gt; myShopInventory.addProduct<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Strawberry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Logger</span> -&gt; <span class="org-constant">Added</span> <span class="org-constant">Strawberry</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; action<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Orange</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Apple</span>
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Coffee</span> beans
<span class="org-constant">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Strawberry</span>
</pre>
</div>

<ul class="org-ul">
<li>Store functions in arrays, hash maps (dictionaries) and lists: 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Dummy - do anything </span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">action0</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">action0</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1375/<span class="org-constant">1357073725</span><span class="org-keyword">@</span><span class="org-constant">74d</span>df6f8

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">action1</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Get product from inventory"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">action1</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1373/<span class="org-constant">1589324702</span><span class="org-keyword">@</span><span class="org-constant">6</span>bfa9cf5

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">action2</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Order more replacement parts from the manufacturer X inc."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">action2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1374/<span class="org-constant">180387583</span><span class="org-keyword">@</span><span class="org-constant">1</span>c9eb283

<span class="org-keyword">def</span> <span class="org-function-name">action3</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> 
  println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Check company's balance sheet."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">class</span> <span class="org-type">CompanyData</span><span class="org-rainbow-delimiters-depth-1">(</span>name<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">def</span> <span class="org-function-name">printStatements</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Print Balance Sheet of company       = "</span> + name<span class="org-rainbow-delimiters-depth-3">)</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Print Cash Flow statement of company = "</span> + name<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">company</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">CompanyData</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"XZYZW Solution. Inc."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">company</span><span class="org-keyword">:</span> <span class="org-type">CompanyData</span> <span class="org-keyword">=</span> <span class="org-constant">CompanyData</span><span class="org-keyword">@</span><span class="org-constant">249318e7</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">------ Register functions --------------- //</span>

scala&gt; <span class="org-keyword">import</span> scala.collection.mutable.<span class="org-constant">ListBuffer</span>
<span class="org-keyword">import</span> scala.collection.mutable.<span class="org-constant">ListBuffer</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">actionList</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">]()</span>
<span class="org-function-name">actionList</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.mutable.<span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; actionList.append<span class="org-rainbow-delimiters-depth-1">(</span>action0<span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; actionList.append<span class="org-rainbow-delimiters-depth-1">(</span>action1<span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; actionList.append<span class="org-rainbow-delimiters-depth-1">(</span>action2<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>act <span class="org-keyword">&lt;-</span> actionList<span class="org-rainbow-delimiters-depth-1">)</span> act<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Get</span> product from inventory
<span class="org-constant">Order</span> more replacement parts from the fanufacterer <span class="org-constant">X</span> inc.

actionList.append<span class="org-rainbow-delimiters-depth-1">(</span>action3 <span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>act <span class="org-keyword">&lt;-</span> actionList<span class="org-rainbow-delimiters-depth-1">)</span> act<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Get</span> product from inventory
<span class="org-constant">Order</span> more replacement parts from the fanufacterer <span class="org-constant">X</span> inc.
<span class="org-constant">Check</span> company<span class="org-string">'s</span> balance sheet.

<span class="org-comment-delimiter">// </span><span class="org-comment">Register method to be called </span>
scala&gt; actionList.append<span class="org-rainbow-delimiters-depth-1">(</span>company.printStatements <span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>act <span class="org-keyword">&lt;-</span> actionList<span class="org-rainbow-delimiters-depth-1">)</span> act<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Get</span> product from inventory
<span class="org-constant">Order</span> more replacement parts from the fanufacterer <span class="org-constant">X</span> inc.
<span class="org-constant">Check</span> company<span class="org-string">'s</span> balance sheet.
<span class="org-constant">Print</span> <span class="org-constant">Balance</span> <span class="org-constant">Sheet</span> of company       <span class="org-keyword">=</span> <span class="org-constant">XZYZW</span> <span class="org-constant">Solution</span>. <span class="org-constant">Inc</span>.
<span class="org-constant">Print</span> <span class="org-constant">Cash</span> <span class="org-constant">Flow</span> statement of company <span class="org-keyword">=</span> <span class="org-constant">XZYZW</span> <span class="org-constant">Solution</span>. <span class="org-constant">Inc</span>.
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-10" class="outline-4">
<h4 id="sec-1-4-10"><span class="section-number-4">1.4.10</span> Function with variable number of arguments</h4>
<div class="outline-text-4" id="text-1-4-10">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">varfun</span><span class="org-rainbow-delimiters-depth-1">(</span>inputs<span class="org-keyword">:</span> <span class="org-type">String</span>*<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I got the parameters: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  inputs.foreach<span class="org-rainbow-delimiters-depth-2">(</span>println<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; varfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello"</span>, <span class="org-string">"World"</span>, <span class="org-string">"Scala"</span>, <span class="org-string">"Rocks"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">I</span> got the parameters<span class="org-keyword">:</span>
<span class="org-constant">Hello</span>
<span class="org-constant">World</span>
<span class="org-constant">Scala</span>
<span class="org-constant">Rocks</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-11" class="outline-4">
<h4 id="sec-1-4-11"><span class="section-number-4">1.4.11</span> Functions with default parameters</h4>
<div class="outline-text-4" id="text-1-4-11">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-doc">/** Free fall speed v(t) = g * t, g in m/s^2 */</span>
<span class="org-keyword">def</span> <span class="org-function-name">freeFallSpeed</span><span class="org-rainbow-delimiters-depth-1">(</span>time<span class="org-keyword">:</span> <span class="org-type">Double</span>, gravity<span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">9.81</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> time * gravity

scala&gt; freeFallSpeed<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">9.81</span>

scala&gt; freeFallSpeed<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res31</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">19.62</span>

scala&gt; freeFallSpeed<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>, <span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.0</span>

scala&gt; freeFallSpeed<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>, <span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">40.0</span>

scala&gt; freeFallSpeed<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>, gravity <span class="org-keyword">=</span> <span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res35</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.0</span>

scala&gt; freeFallSpeed<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>, gravity <span class="org-keyword">=</span> <span class="org-constant">15.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res36</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">30.0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-12" class="outline-4">
<h4 id="sec-1-4-12"><span class="section-number-4">1.4.12</span> Functions with call-by-name parameters</h4>
<div class="outline-text-4" id="text-1-4-12">
</div><div id="outline-container-sec-1-4-12-1" class="outline-5">
<h5 id="sec-1-4-12-1"><span class="section-number-5">1.4.12.1</span> call-by-value or pass-by-value</h5>
<div class="outline-text-5" id="text-1-4-12-1">
<p>
In Scala function parameters are passed by value by default. They are
evaluated before function application. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">rnd</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Random</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">rnd</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Random</span> <span class="org-keyword">=</span> java.util.<span class="org-constant">Random</span><span class="org-keyword">@</span><span class="org-constant">3198594d</span>

<span class="org-keyword">def</span> <span class="org-function-name">passByValue</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>x, x, x<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByValue<span class="org-rainbow-delimiters-depth-1">(</span>rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res31</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span>, <span class="org-constant">2</span>, <span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByValue<span class="org-rainbow-delimiters-depth-1">(</span>rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">1</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; rnd.nextInt<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; rnd.nextInt<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

scala&gt; rnd.nextInt<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4-12-2" class="outline-5">
<h5 id="sec-1-4-12-2"><span class="section-number-5">1.4.12.2</span> call-by-name or pass-by-name</h5>
<div class="outline-text-5" id="text-1-4-12-2">
<p>
In the call-by-name evaluation strategy the function parameter passed
by name is not evaluated before the function application such as in
the pass-by-value strategy and they are evaluated every time they are
referenced. 
</p>

<p>
Example 1: The parameter x is passed-by-name and it is evaluated every
time it appears in the function body as the expression <code>rnd.nextInt(10)</code>.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">passByName</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>x, x, x<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByName<span class="org-rainbow-delimiters-depth-1">(</span>rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7</span>, <span class="org-constant">8</span>, <span class="org-constant">7</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByName<span class="org-rainbow-delimiters-depth-1">(</span>rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res34</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">6</span>, <span class="org-constant">4</span>, <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByName<span class="org-rainbow-delimiters-depth-1">{</span>rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res35</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7</span>, <span class="org-constant">4</span>, <span class="org-constant">8</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByName<span class="org-rainbow-delimiters-depth-1">{</span>rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res36</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span>, <span class="org-constant">9</span>, <span class="org-constant">8</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
It is equivalent to: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">passByNameSimulation</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-2">()</span>, x<span class="org-rainbow-delimiters-depth-2">()</span>, x<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByNameSimulation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res37</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7</span>, <span class="org-constant">4</span>, <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByNameSimulation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res38</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span>, <span class="org-constant">6</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; passByNameSimulation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> rnd.nextInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res39</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">0</span>, <span class="org-constant">7</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Example 2: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">do3Times</span><span class="org-rainbow-delimiters-depth-1">(</span>fn<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">){</span> fn ; fn ; fn <span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; do3Times<span class="org-rainbow-delimiters-depth-1">{</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Hello</span> world
<span class="org-constant">Hello</span> world
<span class="org-constant">Hello</span> world
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-12-3" class="outline-5">
<h5 id="sec-1-4-12-3"><span class="section-number-5">1.4.12.3</span> Custom control structures with call-by-name</h5>
<div class="outline-text-5" id="text-1-4-12-3">
<p>
Pass-by-name parameters are useful for implementing functions that
works like custom control structures and to pass code blocks as
function parameters.
</p>

<p>
Example 1: Some custom "control structures".
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">dotimes</span><span class="org-rainbow-delimiters-depth-1">(</span>n<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)(</span>fn<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">(</span>i <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to n<span class="org-rainbow-delimiters-depth-2">)</span> fn
<span class="org-rainbow-delimiters-depth-1">}</span>

dotimes<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">){</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Scala is amazing."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Scala's super powers.</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; dotimes<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">){</span>
     |   println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Scala is amazing."</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |   println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Scala's super powers.</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Scala</span> is amazing.
<span class="org-constant">Scala</span><span class="org-string">'s</span> <span class="org-keyword">super</span> powers.

<span class="org-constant">Scala</span> is amazing.
<span class="org-constant">Scala</span><span class="org-string">'s</span> <span class="org-keyword">super</span> powers.

<span class="org-constant">Scala</span> is amazing.
<span class="org-constant">Scala</span><span class="org-string">'s</span> <span class="org-keyword">super</span> powers.


<span class="org-keyword">def</span> <span class="org-function-name">doWhile</span><span class="org-rainbow-delimiters-depth-1">(</span>cond<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Boolean</span><span class="org-rainbow-delimiters-depth-1">)(</span>fn<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">){</span>
  fn 
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>cond<span class="org-rainbow-delimiters-depth-2">)</span> doWhile<span class="org-rainbow-delimiters-depth-2">{</span>cond<span class="org-rainbow-delimiters-depth-2">}{</span>fn<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">x</span> <span class="org-keyword">=</span> <span class="org-constant">5</span>
doWhile<span class="org-rainbow-delimiters-depth-1">(</span>x &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">){</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x = "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span>
  x <span class="org-keyword">=</span> x - <span class="org-constant">1</span> 
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">x</span> <span class="org-keyword">=</span> <span class="org-constant">5</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">5</span>

scala&gt; doWhile<span class="org-rainbow-delimiters-depth-1">(</span>x &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">){</span>
     |   println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x = "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span>
     |   x <span class="org-keyword">=</span> x - <span class="org-constant">1</span> 
     | <span class="org-rainbow-delimiters-depth-1">}</span>
x <span class="org-keyword">=</span> <span class="org-constant">5</span>
x <span class="org-keyword">=</span> <span class="org-constant">4</span>
x <span class="org-keyword">=</span> <span class="org-constant">3</span>
x <span class="org-keyword">=</span> <span class="org-constant">2</span>
x <span class="org-keyword">=</span> <span class="org-constant">1</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">delay in mili seconds. </span>
<span class="org-keyword">def</span> <span class="org-function-name">doAfterDelay</span><span class="org-rainbow-delimiters-depth-1">(</span>delay<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)(</span>action<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  java.lang.<span class="org-constant">Thread</span>.sleep<span class="org-rainbow-delimiters-depth-2">(</span>delay<span class="org-rainbow-delimiters-depth-2">)</span>
  action
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; doAfterDelay<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2000</span><span class="org-rainbow-delimiters-depth-1">){</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"2 seconds delay"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">2</span> seconds delay


<span class="org-keyword">def</span> <span class="org-function-name">loopDelay</span><span class="org-rainbow-delimiters-depth-1">(</span>delay<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)(</span>action<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  java.lang.<span class="org-constant">Thread</span>.sleep<span class="org-rainbow-delimiters-depth-2">(</span>delay<span class="org-rainbow-delimiters-depth-2">)</span>
  action
  loopDelay<span class="org-rainbow-delimiters-depth-2">(</span>delay<span class="org-rainbow-delimiters-depth-2">){</span>action<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; loopDelay<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-1">){</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Print it forever every 1 second"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span> 
<span class="org-constant">Print</span> it forever every <span class="org-constant">1</span> second
<span class="org-constant">Print</span> it forever every <span class="org-constant">1</span> second
<span class="org-constant">Print</span> it forever every <span class="org-constant">1</span> second
<span class="org-constant">Print</span> it forever every <span class="org-constant">1</span> second

... ... ...
</pre>
</div>

<p>
Example 2: Passing code blocks as java swing event handlers.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-doc">/** Function that when executed removes the event handler */</span>
<span class="org-keyword">type</span> <span class="org-constant">Dispose</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>

<span class="org-doc">/** Subscribes to button click event */</span>
<span class="org-keyword">def</span> <span class="org-function-name">onButtonClick</span><span class="org-rainbow-delimiters-depth-1">(</span>button<span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JButton</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>handler<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">:</span> <span class="org-type">Dispose</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">listener</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-3">(</span>evt<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionEvent</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      handler
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
  button.addActionListener<span class="org-rainbow-delimiters-depth-2">(</span>listener<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Returns function that when executed disposes the event handler </span>
  <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> button.removeActionListener<span class="org-rainbow-delimiters-depth-2">(</span>listener<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">n</span> <span class="org-keyword">=</span> <span class="org-constant">0</span> 

<span class="org-keyword">val</span> <span class="org-variable-name">frame</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Click on the button"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">panel</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JPanel</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">val</span> <span class="org-variable-name">button</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JButton</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Click me right now!"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">label</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-string">"I was clicked </span><span class="org-variable-name">${n}</span><span class="org-string"> times."</span><span class="org-rainbow-delimiters-depth-1">)</span>

panel.add<span class="org-rainbow-delimiters-depth-1">(</span>button<span class="org-rainbow-delimiters-depth-1">)</span>
panel.add<span class="org-rainbow-delimiters-depth-1">(</span>label<span class="org-rainbow-delimiters-depth-1">)</span>
frame.add<span class="org-rainbow-delimiters-depth-1">(</span>panel<span class="org-rainbow-delimiters-depth-1">)</span>
frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">300</span>, <span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-keyword">val</span> <span class="org-variable-name">dispose1</span> <span class="org-keyword">=</span> onButtonClick<span class="org-rainbow-delimiters-depth-1">(</span>button<span class="org-rainbow-delimiters-depth-1">){</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"The user clicked the button </span><span class="org-variable-name">${n}</span><span class="org-string"> times."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  label.setText<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"I was clicked </span><span class="org-variable-name">${n}</span><span class="org-string"> times."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  n <span class="org-keyword">=</span> n + <span class="org-constant">1</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">dispose1</span> <span class="org-keyword">=</span> onButtonClick<span class="org-rainbow-delimiters-depth-1">(</span>button<span class="org-rainbow-delimiters-depth-1">){</span>
     |   println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"The user clicked the button </span><span class="org-variable-name">${n}</span><span class="org-string"> times."</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |   label.setText<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"I was clicked </span><span class="org-variable-name">${n}</span><span class="org-string"> times."</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |   n <span class="org-keyword">=</span> n + <span class="org-constant">1</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">dispose1</span><span class="org-keyword">:</span> <span class="org-type">Dispose</span> <span class="org-keyword">=</span> &lt;function0&gt;

<span class="org-comment-delimiter">// </span><span class="org-comment">Run dispose1 to remove event handler.</span>
scala&gt; dispose1<span class="org-rainbow-delimiters-depth-1">()</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Imperative Constructs</h3>
<div class="outline-text-3" id="text-1-5">
</div><div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> While loop</h4>
<div class="outline-text-4" id="text-1-5-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">i</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
<span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span>i &lt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">){</span>
   println <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"i = "</span> + i<span class="org-rainbow-delimiters-depth-2">)</span>
   i <span class="org-keyword">=</span> i + <span class="org-constant">1</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">i</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
<span class="org-function-name">i</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span>i &lt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">){</span>
     |    println <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"i = "</span> + i<span class="org-rainbow-delimiters-depth-2">)</span>
     |    i <span class="org-keyword">=</span> i + <span class="org-constant">1</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
i <span class="org-keyword">=</span> <span class="org-constant">0</span>
i <span class="org-keyword">=</span> <span class="org-constant">1</span>
i <span class="org-keyword">=</span> <span class="org-constant">2</span>
i <span class="org-keyword">=</span> <span class="org-constant">3</span>
i <span class="org-keyword">=</span> <span class="org-constant">4</span>
i <span class="org-keyword">=</span> <span class="org-constant">5</span>
i <span class="org-keyword">=</span> <span class="org-constant">6</span>
i <span class="org-keyword">=</span> <span class="org-constant">7</span>
i <span class="org-keyword">=</span> <span class="org-constant">8</span>
i <span class="org-keyword">=</span> <span class="org-constant">9</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> For-loop</h4>
<div class="outline-text-4" id="text-1-5-2">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>i <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span>i<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>
<span class="org-constant">6</span>
<span class="org-constant">7</span>
<span class="org-constant">8</span>
<span class="org-constant">9</span>
<span class="org-constant">10</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>i <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"i = "</span> + i<span class="org-rainbow-delimiters-depth-1">)</span>
i <span class="org-keyword">=</span> <span class="org-constant">1</span>
i <span class="org-keyword">=</span> <span class="org-constant">2</span>
i <span class="org-keyword">=</span> <span class="org-constant">3</span>
i <span class="org-keyword">=</span> <span class="org-constant">4</span>
i <span class="org-keyword">=</span> <span class="org-constant">5</span>
i <span class="org-keyword">=</span> <span class="org-constant">6</span>
i <span class="org-keyword">=</span> <span class="org-constant">7</span>
i <span class="org-keyword">=</span> <span class="org-constant">8</span>
i <span class="org-keyword">=</span> <span class="org-constant">9</span>
i <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>file <span class="org-keyword">&lt;-</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-3">)</span>.listFiles<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span>file<span class="org-rainbow-delimiters-depth-1">)</span>
/home
/<span class="org-keyword">var</span>
/bin
/usr
/root
/<span class="org-constant">Applications</span>
/proc
/boot
/dev
/opt
/etc
/mnt
/tmp
/run
/desktopfs-pkgs.txt
/lib
/.manjaro-tools
/srv
/lib64
/rootfs-pkgs.txt
/sys
/sbin
/lost+found
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> String Manipulation</h3>
<div class="outline-text-3" id="text-1-6">
</div><div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Basic string operations</h4>
<div class="outline-text-4" id="text-1-6-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">s</span> <span class="org-keyword">=</span> <span class="org-string">"  Hello world scala  "</span>  
<span class="org-function-name">s</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"  Hello world scala  "</span>
</pre>
</div>

<p>
<b>Get string length</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> s.size 
<span class="org-function-name">res41</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">21</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> s size 
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">21</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> s.length 
<span class="org-function-name">res43</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">21</span>

<span class="org-keyword">@</span> s length 
<span class="org-function-name">res44</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">21</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
<b>Concatenate string</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-string">"Hello"</span> + <span class="org-string">" "</span> + <span class="org-string">"world"</span> + <span class="org-string">" "</span> + <span class="org-string">"scala"</span> 
<span class="org-function-name">res45</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"Hello world scala"</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
<b>Trim</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> s  
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"  Hello world scala  "</span>
<span class="org-keyword">@</span> s trim 
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"Hello world scala"</span>
<span class="org-keyword">@</span> s.trim<span class="org-rainbow-delimiters-depth-1">()</span> 
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"Hello world scala"</span>
<span class="org-keyword">@</span> s trim  
<span class="org-function-name">res50</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"Hello world scala"</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
<b>Replace string</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> s.replace<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"scala"</span>, <span class="org-string">"haskell"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res46</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"  Hello world haskell  "</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
<b>Upper and lower case</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> s.toUpperCase 
<span class="org-function-name">res60</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"  HELLO WORLD SCALA  "</span>

<span class="org-keyword">@</span> s.toLowerCase 
<span class="org-function-name">res61</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"  hello world scala  "</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
<b>Check if string starts with prefix</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-string">"hello world"</span>.startsWith<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res65</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> <span class="org-string">"hello world"</span> startsWith <span class="org-string">"hello"</span> 
<span class="org-function-name">res66</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
<b>Check if string ends with suffix</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-string">"hello world"</span>.endsWith<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res67</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> <span class="org-string">"hello world"</span>.endsWith<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res68</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> <span class="org-string">"hello world"</span> endsWith <span class="org-string">"world"</span> 
<span class="org-function-name">res69</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
<b>String equality test</b>
</p>

<p>
Equality checkign (==) is not type-safe due to interoperability with
Java. Some libraries such as Scalaz provides a type-safe equality
check operator (<code>=</code>).
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Operator (==) is not type-safe: </span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">@</span> <span class="org-string">"hello"</span> == <span class="org-string">"world"</span> 
<span class="org-function-name">res51</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>
<span class="org-keyword">@</span> <span class="org-string">"hello"</span> == <span class="org-string">"hello"</span> 
<span class="org-function-name">res52</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">This inconsistent operation type checks.</span>
<span class="org-keyword">@</span> <span class="org-string">"hello"</span> == <span class="org-constant">100</span> 
<span class="org-function-name">res53</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>
<span class="org-keyword">@</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> String Interpolation</h4>
<div class="outline-text-4" id="text-1-6-2">
</div><div id="outline-container-sec-1-6-2-1" class="outline-5">
<h5 id="sec-1-6-2-1"><span class="section-number-5">1.6.2.1</span> Example 1</h5>
<div class="outline-text-5" id="text-1-6-2-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-string">"the value of square root of %.3f is equal to %.3f"</span>.format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span>, <span class="org-constant">Math</span>.sqrt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res70</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"the value of square root of 10.000 is equal to 3.162"</span>
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"the value of square root of %.3f is equal to %.3f</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, <span class="org-constant">10.0</span>, <span class="org-constant">Math</span>.sqrt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> 
the value of square root of <span class="org-constant">10.000</span> is equal to <span class="org-constant">3.162</span>

<span class="org-keyword">@</span> <span class="org-string">"Sum of array = %d"</span>.format<span class="org-rainbow-delimiters-depth-1">(</span>sum<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res78</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"Sum of array = 10"</span>
<span class="org-keyword">@</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-2-2" class="outline-5">
<h5 id="sec-1-6-2-2"><span class="section-number-5">1.6.2.2</span> Example 2</h5>
<div class="outline-text-5" id="text-1-6-2-2">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">xs</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">xs</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">str</span> <span class="org-keyword">=</span> <span class="org-string">"hello world"</span> 
<span class="org-function-name">str</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"hello world"</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> s<span class="org-string">"xs = </span><span class="org-variable-name">${xs}</span><span class="org-string"> ; sum(xs) = </span><span class="org-variable-name">${xs sum}</span><span class="org-string"> ; str = '</span><span class="org-variable-name">${str}</span><span class="org-string">' ; size(str) = </span><span class="org-variable-name">${str size}</span><span class="org-string"> "</span> 
<span class="org-function-name">res86</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"xs = List(1, 2, 3, 4, 5) ; sum(xs) = 15 ; str = 'hello world' ; size(str) = 11 "</span>
<span class="org-keyword">@</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-6-3" class="outline-4">
<h4 id="sec-1-6-3"><span class="section-number-4">1.6.3</span> String conversion</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
String to Boolean 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-string">"true"</span>.toBoolean
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; <span class="org-string">"false"</span>.toBoolean
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>

scala&gt; <span class="org-string">"f"</span>.toBoolean
<span class="org-function-name">java.lang.IllegalArgumentException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"f"</span>
  at scala.collection.immutable.<span class="org-constant">StringLike</span>.parseBoolean<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">StringLike</span>.scala<span class="org-keyword">:</span><span class="org-constant">324</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
String to signed Byte (8 bits from -128 to 127)
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-string">"-128"</span>.toByte
<span class="org-function-name">res37</span><span class="org-keyword">:</span> <span class="org-type">Byte</span> <span class="org-keyword">=</span> <span class="org-constant">-128</span>

scala&gt; <span class="org-string">"127"</span>.toByte
<span class="org-function-name">res38</span><span class="org-keyword">:</span> <span class="org-type">Byte</span> <span class="org-keyword">=</span> <span class="org-constant">127</span>

scala&gt; <span class="org-string">"128"</span>.toByte
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">Value</span> out of range. <span class="org-constant">Value</span><span class="org-keyword">:</span><span class="org-string">"128"</span> <span class="org-constant">Radix</span><span class="org-keyword">:</span><span class="org-constant">10</span>
  at java.lang.<span class="org-constant">Byte</span>.parseByte<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Byte</span>.java<span class="org-keyword">:</span><span class="org-constant">151</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-string">"1df28"</span>.toByte
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"1df28"</span>
  at java.lang.<span class="org-constant">NumberFormatException</span>.forInputString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">NumberFormatException</span>.java<span class="org-keyword">:</span><span class="org-constant">65</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Integer</span>.parseInt<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Integer</span>.java<span class="org-keyword">:</span><span class="org-constant">580</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Byte</span>.parseByte<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Byte</span>.java<span class="org-keyword">:</span><span class="org-constant">149</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Byte</span>.parseByte<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Byte</span>.java<span class="org-keyword">:</span><span class="org-constant">175</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
String to Int 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-string">"200"</span>.toInt
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">200</span>

scala&gt; <span class="org-string">"200"</span>.toInt * <span class="org-constant">3</span>
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">600</span>

scala&gt; <span class="org-constant">3</span> * <span class="org-string">"200"</span>.toInt 
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">600</span>

scala&gt; <span class="org-constant">3</span> * <span class="org-string">"2ac00"</span>.toInt 
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"2ac00"</span>
.... ...
</pre>
</div>

<p>
String to Long (64 bits Integer) 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-string">"100"</span>.toLong
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">Long</span> <span class="org-keyword">=</span> <span class="org-constant">100</span>

scala&gt; <span class="org-string">"100fail!"</span>.toLong
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"100fail!"</span>
  at java.lang.<span class="org-constant">NumberFormatException</span>.forInputString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">NumberFormatException</span>.java<span class="org-keyword">:</span><span class="org-constant">65</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Long</span>.parseLong<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Long</span>.java<span class="org-keyword">:</span><span class="org-constant">589</span><span class="org-rainbow-delimiters-depth-1">)</span>
... ...
</pre>
</div>

<p>
String to Float (32-bits IEEE Float Point)
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-string">"100"</span>.toFloat
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Float</span> <span class="org-keyword">=</span> <span class="org-constant">100.0</span>

scala&gt; <span class="org-string">"100a"</span>.toFloat
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"100a"</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.readJavaFormatString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">2043</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.parseFloat<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">122</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Float</span>.parseFloat<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Float</span>.java<span class="org-keyword">:</span><span class="org-constant">451</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
String to Double (64-bits IEEE Float Point)
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-string">"300"</span>.toDouble
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">300.0</span>

scala&gt; <span class="org-string">"300"</span> toDouble
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">300.0</span>

scala&gt; <span class="org-constant">Math</span>.log10<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>.toDouble<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.0</span>

scala&gt; <span class="org-constant">Math</span>.log10<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100It is gonna fail!"</span>.toDouble<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"100It is gonna fail!"</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.readJavaFormatString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">2043</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.parseDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">110</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Double</span>.parseDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>.java<span class="org-keyword">:</span><span class="org-constant">538</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.immutable.<span class="org-constant">StringLike</span>.toDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">StringLike</span>.scala<span class="org-keyword">:</span><span class="org-constant">318</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.immutable.<span class="org-constant">StringLike</span>.toDouble$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">StringLike</span>.scala<span class="org-keyword">:</span><span class="org-constant">318</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.immutable.<span class="org-constant">StringOps</span>.toDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">StringOps</span>.scala<span class="org-keyword">:</span><span class="org-constant">29</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-4" class="outline-4">
<h4 id="sec-1-6-4"><span class="section-number-4">1.6.4</span> Regex - Regular Expressions</h4>
<div class="outline-text-4" id="text-1-6-4">
</div><div id="outline-container-sec-1-6-4-1" class="outline-5">
<h5 id="sec-1-6-4-1"><span class="section-number-5">1.6.4.1</span> Pattern Matching Regex</h5>
<div class="outline-text-5" id="text-1-6-4-1">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">dateRegex</span> <span class="org-keyword">=</span> <span class="org-string">"""(\d\d\d\d)-(\d\d)-(\d\d)"""</span>.r
<span class="org-function-name">dateRegex</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.matching.<span class="org-constant">Regex</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>\d\d\d\d<span class="org-rainbow-delimiters-depth-1">)</span>-<span class="org-rainbow-delimiters-depth-1">(</span>\d\d<span class="org-rainbow-delimiters-depth-1">)</span>-<span class="org-rainbow-delimiters-depth-1">(</span>\d\d<span class="org-rainbow-delimiters-depth-1">)</span>



<span class="org-string">"2010-10-15"</span> <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">dateRegex</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span><span class="org-type">*</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"It matches the date regex."</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-string">"2010-10-15"</span> <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">case</span> <span class="org-type">dateRegex</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span><span class="org-type">*</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"It matches the date regex."</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">It</span> matches the date regex.



<span class="org-string">"2010-10-15"</span> <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">dateRegex</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">y</span>, <span class="org-variable-name">m</span>, <span class="org-variable-name">d</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> s<span class="org-string">"The year = </span><span class="org-variable-name">$y</span><span class="org-string"> month = </span><span class="org-variable-name">$m</span><span class="org-string"> day = </span><span class="org-variable-name">$d</span><span class="org-string">"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-string">"2010-10-15"</span> <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">case</span> <span class="org-type">dateRegex</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">y</span>, <span class="org-variable-name">m</span>, <span class="org-variable-name">d</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> s<span class="org-string">"The year = </span><span class="org-variable-name">$y</span><span class="org-string"> month = </span><span class="org-variable-name">$m</span><span class="org-string"> day = </span><span class="org-variable-name">$d</span><span class="org-string">"</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">The</span> year <span class="org-keyword">=</span> <span class="org-constant">2010</span> month <span class="org-keyword">=</span> <span class="org-constant">10</span> day <span class="org-keyword">=</span> <span class="org-constant">15</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-6-4-2" class="outline-5">
<h5 id="sec-1-6-4-2"><span class="section-number-5">1.6.4.2</span> Extracting Regex</h5>
<div class="outline-text-5" id="text-1-6-4-2">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">dateRegex</span> <span class="org-keyword">=</span> <span class="org-string">"""(\d\d\d\d)-(\d\d)-(\d\d)"""</span>.r
<span class="org-function-name">dateRegex</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.matching.<span class="org-constant">Regex</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>\d\d\d\d<span class="org-rainbow-delimiters-depth-1">)</span>-<span class="org-rainbow-delimiters-depth-1">(</span>\d\d<span class="org-rainbow-delimiters-depth-1">)</span>-<span class="org-rainbow-delimiters-depth-1">(</span>\d\d<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-type">dateRegex</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">y</span>, <span class="org-variable-name">m</span>, <span class="org-variable-name">d</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-string">"2010-10-15"</span>
<span class="org-function-name">y</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">2010</span>
<span class="org-function-name">m</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-function-name">d</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; y
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">2010</span>

scala&gt; m
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; d
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; m.toInt + <span class="org-constant">2</span>
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">12</span>

scala&gt; s<span class="org-string">"The year = </span><span class="org-variable-name">$y</span><span class="org-string"> month = </span><span class="org-variable-name">$m</span><span class="org-string"> day = </span><span class="org-variable-name">$d</span><span class="org-string">"</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">The</span> year <span class="org-keyword">=</span> <span class="org-constant">2010</span> month <span class="org-keyword">=</span> <span class="org-constant">10</span> day <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; println<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-string">"The year = </span><span class="org-variable-name">$y</span><span class="org-string"> month = </span><span class="org-variable-name">$m</span><span class="org-string"> day = </span><span class="org-variable-name">$d</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">The</span> year <span class="org-keyword">=</span> <span class="org-constant">2010</span> month <span class="org-keyword">=</span> <span class="org-constant">10</span> day <span class="org-keyword">=</span> <span class="org-constant">15</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-6-4-3" class="outline-5">
<h5 id="sec-1-6-4-3"><span class="section-number-5">1.6.4.3</span> Find all strings that matching a regex</h5>
<div class="outline-text-5" id="text-1-6-4-3">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">val</span> <span class="org-variable-name">dateRegex</span> <span class="org-keyword">=</span> <span class="org-string">"""(\d\d\d\d)-(\d\d)-(\d\d)"""</span>.r

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">dateList</span> <span class="org-keyword">=</span> <span class="org-string">"2004-01-20 1998-02-12  2003-04-15"</span>
<span class="org-function-name">dateList</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">2004-01-20</span> <span class="org-constant">1998-02-12</span>  <span class="org-constant">2003-04-15</span>

scala&gt; dateRegex.findFirstIn<span class="org-rainbow-delimiters-depth-1">(</span>dateList<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2004-01-20</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; m.next
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.matching.<span class="org-constant">Regex</span>.<span class="org-constant">Match</span> <span class="org-keyword">=</span> <span class="org-constant">2004-01-20</span>

scala&gt; m.next
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.matching.<span class="org-constant">Regex</span>.<span class="org-constant">Match</span> <span class="org-keyword">=</span> <span class="org-constant">1998-02-12</span>

scala&gt; m.next
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.matching.<span class="org-constant">Regex</span>.<span class="org-constant">Match</span> <span class="org-keyword">=</span> <span class="org-constant">2003-04-15</span>

scala&gt; m.hasNext
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>

scala&gt; m.next
java.util.<span class="org-constant">NoSuchElementException</span>
  at scala.util.matching.<span class="org-constant">Regex</span>$MatchIterator.next<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Regex</span>.scala<span class="org-keyword">:</span><span class="org-constant">753</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.util.matching.<span class="org-constant">Regex</span>$$anon$4.next<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Regex</span>.scala<span class="org-keyword">:</span><span class="org-constant">374</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.util.matching.<span class="org-constant">Regex</span>$$anon$4.next<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Regex</span>.scala<span class="org-keyword">:</span><span class="org-constant">371</span><span class="org-rainbow-delimiters-depth-1">)</span>
    ... <span class="org-constant">32</span> elided


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">m</span> <span class="org-keyword">=</span> dateRegex.findAllMatchIn<span class="org-rainbow-delimiters-depth-1">(</span>dateList<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">m</span><span class="org-keyword">:</span> <span class="org-type">Iterator</span><span class="org-rainbow-delimiters-depth-1">[</span>scala.util.matching.<span class="org-constant">Regex</span>.<span class="org-constant">Match</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> non-empty iterator

scala&gt; m.toList
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span>scala.util.matching.<span class="org-constant">Regex</span>.<span class="org-constant">Match</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2004-01-20</span>, <span class="org-constant">1998-02-12</span>, <span class="org-constant">2003-04-15</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-6-4-4" class="outline-5">
<h5 id="sec-1-6-4-4"><span class="section-number-5">1.6.4.4</span> Replace text</h5>
<div class="outline-text-5" id="text-1-6-4-4">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">dateRegex</span> <span class="org-keyword">=</span> <span class="org-string">"""(\d\d\d\d)-(\d\d)-(\d\d)"""</span>.r
<span class="org-function-name">dateRegex</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.matching.<span class="org-constant">Regex</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>\d\d\d\d<span class="org-rainbow-delimiters-depth-1">)</span>-<span class="org-rainbow-delimiters-depth-1">(</span>\d\d<span class="org-rainbow-delimiters-depth-1">)</span>-<span class="org-rainbow-delimiters-depth-1">(</span>\d\d<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">dateList</span> <span class="org-keyword">=</span> <span class="org-string">"2004-01-20 1998-02-12  2003-04-15"</span>
<span class="org-function-name">dateList</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">2004-01-20</span> <span class="org-constant">1998-02-12</span>  <span class="org-constant">2003-04-15</span>

scala&gt; dateRegex.replaceAllIn<span class="org-rainbow-delimiters-depth-1">(</span>dateList, <span class="org-string">"xxxx-xx-xx"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> xxxx-xx-xx xxxx-xx-xx  xxxx-xx-xx
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-4-5" class="outline-5">
<h5 id="sec-1-6-4-5"><span class="section-number-5">1.6.4.5</span> Regex use case for extracting color from string</h5>
<div class="outline-text-5" id="text-1-6-4-5">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">val</span> <span class="org-variable-name">rgbRegex</span> <span class="org-keyword">=</span> <span class="org-string">"""rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)"""</span>.r

<span class="org-keyword">def</span> <span class="org-function-name">getColor</span><span class="org-rainbow-delimiters-depth-1">(</span>color<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> color <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-string">"blue"</span>    <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.blue
  <span class="org-keyword">case</span> <span class="org-string">"cyan"</span>    <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.cyan
  <span class="org-keyword">case</span> <span class="org-string">"red"</span>     <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.red
  <span class="org-keyword">case</span> <span class="org-string">"green"</span>   <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.green
  <span class="org-keyword">case</span> <span class="org-string">"yellow"</span>  <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.yellow
  <span class="org-keyword">case</span> <span class="org-string">"white"</span>   <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.white
  <span class="org-keyword">case</span> <span class="org-string">"pink"</span>    <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.pink
  <span class="org-keyword">case</span> <span class="org-string">"black"</span>   <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.black
  <span class="org-keyword">case</span> <span class="org-string">"magenta"</span> <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.magenta
  <span class="org-keyword">case</span> <span class="org-string">"orange"</span>  <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.orange
  <span class="org-keyword">case</span> <span class="org-string">"gray"</span>    <span class="org-keyword">=&gt;</span> java.awt.<span class="org-constant">Color</span>.gray
  <span class="org-keyword">case</span> <span class="org-type">rgbRegex</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-variable-name">g</span>, <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.<span class="org-constant">Color</span><span class="org-rainbow-delimiters-depth-2">(</span>r.toInt, g.toInt, b.toInt<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span>  <span class="org-keyword">_</span>        <span class="org-keyword">=&gt;</span> <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">IllegalArgumentException</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error invalid color name."</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">@</span> getColor<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"blue"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">java</span>.awt.<span class="org-constant">Color</span> <span class="org-keyword">=</span> java.awt.<span class="org-constant">Color</span><span class="org-rainbow-delimiters-depth-1">[</span>r<span class="org-keyword">=</span><span class="org-constant">0</span>,g<span class="org-keyword">=</span><span class="org-constant">0</span>,b<span class="org-keyword">=</span><span class="org-constant">255</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> getColor<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"rgb(255, 0, 0)"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">java</span>.awt.<span class="org-constant">Color</span> <span class="org-keyword">=</span> java.awt.<span class="org-constant">Color</span><span class="org-rainbow-delimiters-depth-1">[</span>r<span class="org-keyword">=</span><span class="org-constant">255</span>,g<span class="org-keyword">=</span><span class="org-constant">0</span>,b<span class="org-keyword">=</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> getColor<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"rgb(10, 121, 25)"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">java</span>.awt.<span class="org-constant">Color</span> <span class="org-keyword">=</span> java.awt.<span class="org-constant">Color</span><span class="org-rainbow-delimiters-depth-1">[</span>r<span class="org-keyword">=</span><span class="org-constant">10</span>,g<span class="org-keyword">=</span><span class="org-constant">121</span>,b<span class="org-keyword">=</span><span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> getColor<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"rgb(10, 121, 25) error"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">java.lang.IllegalArgumentException</span><span class="org-keyword">:</span> <span class="org-type">Error</span> invalid color name.
  ammonite.$sess.cmd1$.getColor<span class="org-rainbow-delimiters-depth-1">(</span>cmd1.sc<span class="org-keyword">:</span><span class="org-constant">14</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ammonite.$sess.cmd5$.&lt;init&gt;<span class="org-rainbow-delimiters-depth-1">(</span>cmd5.sc<span class="org-keyword">:</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ammonite.$sess.cmd5$.&lt;clinit&gt;<span class="org-rainbow-delimiters-depth-1">(</span>cmd5.sc<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> getColor<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"red"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">java</span>.awt.<span class="org-constant">Color</span> <span class="org-keyword">=</span> java.awt.<span class="org-constant">Color</span><span class="org-rainbow-delimiters-depth-1">[</span>r<span class="org-keyword">=</span><span class="org-constant">255</span>,g<span class="org-keyword">=</span><span class="org-constant">0</span>,b<span class="org-keyword">=</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> getColor<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"invalid color"</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">java.lang.IllegalArgumentException</span><span class="org-keyword">:</span> <span class="org-type">Error</span> invalid color name.
  ammonite.$sess.cmd1$.getColor<span class="org-rainbow-delimiters-depth-1">(</span>cmd1.sc<span class="org-keyword">:</span><span class="org-constant">14</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ammonite.$sess.cmd7$.&lt;init&gt;<span class="org-rainbow-delimiters-depth-1">(</span>cmd7.sc<span class="org-keyword">:</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ammonite.$sess.cmd7$.&lt;clinit&gt;<span class="org-rainbow-delimiters-depth-1">(</span>cmd7.sc<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-4-6" class="outline-5">
<h5 id="sec-1-6-4-6"><span class="section-number-5">1.6.4.6</span> Documentation and References</h5>
<div class="outline-text-5" id="text-1-6-4-6">
<ul class="org-ul">
<li><a href="http://www.scala-lang.org/api/2.12.1/scala/util/matching/Regex.html">Scala Standard Library 2.12.1 - scala.util.matching.Regex</a>
</li>

<li><a href="http://www.scala-lang.org/api/2.9.3/scala/util/matching/Regex.html">scala.util.matching.Regex</a>
</li>

<li><a href="https://www.tutorialspoint.com/scala/scala_regular_expressions.htm">Scala Regular Expressions</a>
</li>

<li><a href="http://www.javaworld.com/article/2075410/core-java/matchmaking-with-regular-expressions.html">Matchmaking with regular expressions | JavaWorld</a>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Collections</h3>
<div class="outline-text-3" id="text-1-7">
</div><div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
<b>Collection Hierarchy</b>
</p>

<ul class="org-ul">
<li>Iterable

<ul class="org-ul">
<li>Seq (Sequence)

<ul class="org-ul">
<li>List

<ul class="org-ul">
<li>Fundamental operations: head, tail
</li>
</ul>
</li>

<li>Vector

<ul class="org-ul">
<li>indexing
</li>
</ul>
</li>

<li>Array. Mutable array, equivalent to Java Array.
</li>

<li>String (Seq-like, although not subclass of Seq).
</li>

<li>Range
</li>
</ul>
</li>

<li>Sets (Relational algebra). Contains no duplicated element.
</li>

<li>Map (aka Hashmap, Dictionary or hash-table)
</li>
</ul>
</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Scala Collection</th>
<th scope="col" class="left">Description</th>
<th scope="col" class="left">Immutable</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">List</td>
<td class="left">Linked list</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left">Iterable / Stream</td>
<td class="left">Lazy evaluation</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left">Array</td>
<td class="left">Random Access by index</td>
<td class="left">No</td>
</tr>

<tr>
<td class="left">Map</td>
<td class="left">Hash table / Dictionary, Index table</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left">Set</td>
<td class="left">Unique items</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> Immutable Collections</h4>
<div class="outline-text-4" id="text-1-7-2">
</div><div id="outline-container-sec-1-7-2-1" class="outline-5">
<h5 id="sec-1-7-2-1"><span class="section-number-5">1.7.2.1</span> Tuples</h5>
</div>
<div id="outline-container-sec-1-7-2-2" class="outline-5">
<h5 id="sec-1-7-2-2"><span class="section-number-5">1.7.2.2</span> List</h5>
<div class="outline-text-5" id="text-1-7-2-2">
<p>
<b>Creating a list</b>
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">xs</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">6.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">xs</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">6.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Map over a list</b>
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; xs.map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res31</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">6.0</span>, <span class="org-constant">9.0</span>, <span class="org-constant">12.0</span>, <span class="org-constant">15.0</span>, <span class="org-constant">18.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; xs.map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>.map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x + <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">8.0</span>, <span class="org-constant">11.0</span>, <span class="org-constant">14.0</span>, <span class="org-constant">17.0</span>, <span class="org-constant">20.0</span>, <span class="org-constant">23.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Filter a list</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Filter</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.filter <span class="org-rainbow-delimiters-depth-1">(</span> x <span class="org-keyword">=&gt;</span> x &lt; <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Filter a list / reject</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">FilterNot - Inverse of filter, reject</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.filterNot <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x &lt; <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res80</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">6.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Find a element that matches a predicate function</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Find the first element that satisfies</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">a predicate.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.find <span class="org-keyword">_</span>
<span class="org-function-name">res43</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Boolean</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> &lt;function1&gt;


scala&gt; xs.find <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x &gt; <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; xs.find <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x &gt; <span class="org-constant">14.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res44</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
<b>Test if list is empty</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Test if list is empty</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.isEmpty
<span class="org-function-name">res85</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>
</pre>
</div>

<p>
<b>Find the index of an element that satisfies a predicate</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Find the index of an element that satisfies a predicate.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.indexWhere <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span>  x &gt; <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res116</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>

scala&gt; xs.indexWhere <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span>  x &gt; <span class="org-constant">14.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res117</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">-1</span>
</pre>
</div>

<p>
<b>Count all elements that matches a predicate</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Count all elements greater than 3.0</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.count <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x &gt; <span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>
</pre>
</div>

<p>
<b>Get max and min elements</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Max and Min elements</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.max
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span>

scala&gt; xs.min
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1.0</span>
</pre>
</div>

<p>
<b>Head (fist) and (last) elements</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Head and tail of a list.</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">First element</span>
scala&gt; xs.head
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1.0</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Last element</span>
scala&gt; xs.last
<span class="org-function-name">res45</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span>
</pre>
</div>

<p>
<b>Tail</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Tail: Remove first element</span>
scala&gt; xs.tail
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">6.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Reverse a list</b>
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; xs.reverse
<span class="org-function-name">res36</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">6.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">4.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Foreach</b>
</p>


<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Impure Map</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">1.0</span>
<span class="org-constant">2.0</span>
<span class="org-constant">3.0</span>
<span class="org-constant">4.0</span>
<span class="org-constant">5.0</span>
<span class="org-constant">6.0</span>

scala&gt; xs.foreach<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-string">"x = %.3f"</span>.format<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">1</span>,<span class="org-constant">000</span>
x <span class="org-keyword">=</span> <span class="org-constant">2</span>,<span class="org-constant">000</span>
x <span class="org-keyword">=</span> <span class="org-constant">3</span>,<span class="org-constant">000</span>
x <span class="org-keyword">=</span> <span class="org-constant">4</span>,<span class="org-constant">000</span>
x <span class="org-keyword">=</span> <span class="org-constant">5</span>,<span class="org-constant">000</span>
x <span class="org-keyword">=</span> <span class="org-constant">6</span>,<span class="org-constant">000</span>
</pre>
</div>

<p>
<b>Slice elements</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Select elements x[2],x[3] and x[4]</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.slice<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res40</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<p>
<b>Take n elements</b>
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; xs.take<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res68</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<p>
<b>Drop elements</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Drop elements</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.drop <span class="org-keyword">_</span>
<span class="org-function-name">res66</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; xs.drop <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res67</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">6.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Length of a list</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Length of a list</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.length
<span class="org-function-name">res69</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">6</span>
</pre>
</div>

<p>
<b>Sum of all list elements</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Sum of all elements of a list</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.sum
<span class="org-function-name">res82</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">21.0</span>
</pre>
</div>

<p>
<b>Product of all list elements</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Product of all elements of a list</span>
<span class="org-comment-delimiter">//</span>
scala&gt; xs.product
<span class="org-function-name">res83</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">720.0</span>
</pre>
</div>

<p>
<b>Fold left</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Fold left</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">100</span> * acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res107</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">102030405</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x :: acc<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res110</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span>, <span class="org-constant">4</span>, <span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Fold right</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Fold right</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>.foldRight<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>x, acc<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">10</span> * acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res111</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">54321</span>
</pre>
</div>

<p>
<b>Reduce</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Reduce. fold left without initial value of accumulator.</span>
scala&gt; xs.reduce <span class="org-keyword">_</span>
<span class="org-function-name">res92</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; xs.reduce <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">10</span>*acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res95</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">123456.0</span>
</pre>
</div>

<p>
<b>Max by</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Returns the element for which the projection function has the</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">maximun value</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">In this case: returns the string which its lenght is maximun.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">s</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello"</span>, <span class="org-string">"World"</span>, <span class="org-string">"Scala"</span>, <span class="org-string">"is"</span>, <span class="org-string">"amazing"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">s</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Hello</span>, <span class="org-constant">World</span>, <span class="org-constant">Scala</span>, is, amazing<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; s.maxBy <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x.length<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res74</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> amazing
</pre>
</div>

<p>
<b>Min by</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">In this case: returns the string which its length is minimun.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; s.minBy <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x.length<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res75</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> is
</pre>
</div>

<p>
<b>Sort by</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Sort the string by the length of each string</span>
<span class="org-comment-delimiter">//</span>
scala&gt; s.sortBy <span class="org-rainbow-delimiters-depth-1">(</span> x <span class="org-keyword">=&gt;</span> x.length<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res78</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>is, <span class="org-constant">Hello</span>, <span class="org-constant">World</span>, <span class="org-constant">Scala</span>, amazing<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Group by</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">//  </span><span class="org-comment">groupBy</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Separate string that have equal number of characters</span>
<span class="org-comment-delimiter">//</span>
scala&gt; s.groupBy<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x.length<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span>,<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span> -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>is<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">5</span> -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Hello</span>, <span class="org-constant">World</span>, <span class="org-constant">Scala</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">7</span> -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>amazing<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-keyword">def</span> <span class="org-function-name">fileExtension</span> <span class="org-rainbow-delimiters-depth-1">(</span>filename<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> filename.split <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">'.'</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>arr.length &gt; <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       arr.apply<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-keyword">else</span><span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-string">""</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">files</span> <span class="org-keyword">=</span>
<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"file1.pdf"</span>,
     <span class="org-string">"file2.doc"</span>,
     <span class="org-string">"dummy.pdf"</span>,
     <span class="org-string">"clojure.jar"</span>,
     <span class="org-string">"document.zip"</span>,
     <span class="org-string">"file3.pdf"</span>,
     <span class="org-string">"scala.jar"</span>,
     <span class="org-string">"manifest.doc"</span>,
     <span class="org-string">"unixBsd"</span>
     <span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; files.groupBy <span class="org-rainbow-delimiters-depth-1">(</span>fileExtension<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span>,<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>unixBsd<span class="org-rainbow-delimiters-depth-2">)</span>, zip -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>document.zip<span class="org-rainbow-delimiters-depth-2">)</span>,
pdf -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>file1.pdf, dummy.pdf, file3.pdf<span class="org-rainbow-delimiters-depth-2">)</span>,
doc -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>file2.doc, manifest.doc<span class="org-rainbow-delimiters-depth-2">)</span>,
jar -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>clojure.jar, scala.jar<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; files.groupBy <span class="org-rainbow-delimiters-depth-1">(</span>fileExtension<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>,<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>unixBsd<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>zip,<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>document.zip<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>pdf,<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>file1.pdf, dummy.pdf, file3.pdf<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>doc,<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>file2.doc, manifest.doc<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>jar,<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>clojure.jar, scala.jar<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Distinct</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Distinct elements.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">a</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">5</span>, <span class="org-constant">3</span>, <span class="org-constant">1</span>, <span class="org-constant">3</span>, <span class="org-constant">3</span>, <span class="org-constant">5</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">a</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">5</span>, <span class="org-constant">3</span>, <span class="org-constant">1</span>, <span class="org-constant">3</span>, <span class="org-constant">3</span>, <span class="org-constant">5</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; a.distinct
<span class="org-function-name">res88</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">5</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-2-3" class="outline-5">
<h5 id="sec-1-7-2-3"><span class="section-number-5">1.7.2.3</span> Maps</h5>
<div class="outline-text-5" id="text-1-7-2-3">
<p>
Scala Maps are immutable hash tables or dictionaries.
</p>

<ul class="org-ul">
<li><a href="https://www.tutorialspoint.com/scala/scala_maps.htm">Scala Maps</a> methods signatures.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">capital</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"US"</span>     -&gt; <span class="org-string">"Washigton"</span>,
                  <span class="org-string">"France"</span> -&gt; <span class="org-string">"Paris"</span>,
                  <span class="org-string">"Japan"</span>  -&gt; <span class="org-string">"Tokyo"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; capital<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Japan"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Tokyo</span>

scala&gt; capital<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"US"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Washigton</span>

scala&gt; capital<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"USsa"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.util.NoSuchElementException</span><span class="org-keyword">:</span> <span class="org-type">key</span> not found<span class="org-keyword">:</span> <span class="org-type">USsa</span>
  at scala.collection.<span class="org-constant">MapLike</span>$class.default<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MapLike</span>.scala<span class="org-keyword">:</span><span class="org-constant">228</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.<span class="org-constant">AbstractMap</span>.default<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Map</span>.scala<span class="org-keyword">:</span><span class="org-constant">59</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.<span class="org-constant">MapLike</span>$class.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MapLike</span>.scala<span class="org-keyword">:</span><span class="org-constant">141</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.<span class="org-constant">AbstractMap</span>.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Map</span>.scala<span class="org-keyword">:</span><span class="org-constant">59</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided


scala&gt; assert<span class="org-rainbow-delimiters-depth-1">(</span>capital<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Japan"</span><span class="org-rainbow-delimiters-depth-2">)</span> == <span class="org-string">"Tokyo"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; assert<span class="org-rainbow-delimiters-depth-1">(</span>capital<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Japan"</span><span class="org-rainbow-delimiters-depth-2">)</span> == <span class="org-string">"Tokyo2"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.AssertionError</span><span class="org-keyword">:</span> <span class="org-type">assertion</span> failed
  at scala.<span class="org-constant">Predef</span>$.assert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">156</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt; println<span class="org-rainbow-delimiters-depth-1">(</span>capital<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"France"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Paris</span>

scala&gt; println<span class="org-rainbow-delimiters-depth-1">(</span>capital<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Japan"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Tokyo</span>
</pre>
</div>


<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">getFileExtension</span><span class="org-rainbow-delimiters-depth-1">(</span>file<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">i</span> <span class="org-keyword">=</span> file.lastIndexOf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">'.'</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span> i &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span>
    file.substring<span class="org-rainbow-delimiters-depth-2">(</span>i+<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">else</span>
    <span class="org-string">""</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">it creates a Map of file extensions as keys and</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">all files with given extension as values</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">val</span> <span class="org-variable-name">fileGroups</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/etc/"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    .listFiles<span class="org-rainbow-delimiters-depth-2">()</span>
    .filter<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>.isFile<span class="org-rainbow-delimiters-depth-2">)</span>
    .map<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>.getPath<span class="org-rainbow-delimiters-depth-2">)</span>
    .groupBy<span class="org-rainbow-delimiters-depth-2">(</span>getFileExtension<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fileGroups</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/etc/"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |     .listFiles<span class="org-rainbow-delimiters-depth-2">()</span>
     |     .filter<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>.isFile<span class="org-rainbow-delimiters-depth-2">)</span>
     |     .map<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>.getPath<span class="org-rainbow-delimiters-depth-2">)</span>
     |     .groupBy<span class="org-rainbow-delimiters-depth-2">(</span>getFileExtension<span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">fileGroups</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span>,<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span>
<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/motd, /etc/gemrc, /etc/environment, /etc/gshadow,
/etc/shadow-, /etc/fstab, /etc/rpc, /etc/passwd,
/etc/gnome-vfs-mime-magic, /etc/passwd-, /etc/sudoers,
/etc/anacrontab, /etc/os-release, /etc/adjtime, /etc/netconfig,
/etc/inputrc, /etc/timezone, /etc/shadow, /etc/lsb-release,
/etc/shells, /etc/papersize, /etc/drirc, /etc/hostname, /etc/exports,
/etc/machine-id, /etc/group-, /etc/nanorc, /etc/hosts, /etc/group,
/etc/mtab, /etc/securetty, /etc/services, /etc/protocols,
/etc/gshadow-, /etc/localtime, /etc/issue, /etc/ethertypes,
/etc/manjaro-release, /etc/yaourtrc, /etc/profile, /etc/printcap,
/etc/crypttab<span class="org-rainbow-delimiters-depth-2">)</span>, backup -&gt;
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/pacman-mirrors.conf.<span class="org-constant">20170402</span>.backup<span class="org-rainbow-delimiters-depth-2">)</span>, bash_logout -&gt;
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/bash.bash...  scala&gt;


<span class="org-comment-delimiter">// </span><span class="org-comment">Get all files with cfg extension </span>
<span class="org-comment-delimiter">//</span>
scala&gt; fileGroups<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"cfg"</span><span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-function-name">res113</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">(</span>/etc/vdpau_wrapper.cfg, /etc/rc_maps.cfg<span class="org-rainbow-delimiters-depth-3">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Get all files with conf extension</span>
<span class="org-comment-delimiter">//</span>
cala&gt; fileGroups<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"conf"</span><span class="org-rainbow-delimiters-depth-3">)</span> res117<span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span> <span class="org-keyword">=</span>
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">(</span>/etc/sensors3.conf, /etc/pacman.conf, /etc/cpufreq-bench.conf,
/etc/makepkg.conf, /etc/ld.so.conf, /etc/host.conf, /etc/healthd.conf,
/etc/ts.conf, /etc/resolvconf.conf, /etc/logrotate.conf,
/etc/locale.conf, /etc/request-key.conf, /etc/nscd.conf,
/etc/dnsmasq.conf, /etc/nsswitch.conf, /etc/ntp.conf,
/etc/updatedb.conf, /etc/dhcpcd.conf, /etc/krb5.conf,
/etc/openswap.conf, /etc/vconsole.conf, /etc/mkinitcpio.conf,
/etc/man_db.conf, /etc/mke2fs.conf, /etc/fuse.conf, /etc/asound.conf,
/etc/mdadm.conf, /etc/pamac.conf, /etc/nfs.conf, /etc/nfsmount.conf,
/etc/resolv.conf, /etc/gai.conf, /etc/pacman-mirrors.conf,
/etc/rsyncd.conf<span class="org-rainbow-delimiters-depth-3">)</span>

scala&gt; fileGroups<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"wrong"</span><span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-function-name">java.util.NoSuchElementException</span><span class="org-keyword">:</span> <span class="org-type">key</span> not found<span class="org-keyword">:</span> <span class="org-type">wrong</span>
  at scala.collection.<span class="org-constant">MapLike</span>$class.default<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">MapLike</span>.scala<span class="org-keyword">:</span><span class="org-constant">228</span><span class="org-rainbow-delimiters-depth-3">)</span>
  at scala.collection.<span class="org-constant">AbstractMap</span>.default<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Map</span>.scala<span class="org-keyword">:</span><span class="org-constant">59</span><span class="org-rainbow-delimiters-depth-3">)</span>
  at scala.collection.<span class="org-constant">MapLike</span>$class.apply<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">MapLike</span>.scala<span class="org-keyword">:</span><span class="org-constant">141</span><span class="org-rainbow-delimiters-depth-3">)</span>
  at scala.collection.<span class="org-constant">AbstractMap</span>.apply<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Map</span>.scala<span class="org-keyword">:</span><span class="org-constant">59</span><span class="org-rainbow-delimiters-depth-3">)</span>
  ... <span class="org-constant">32</span> elided
</pre>
</div>

<p>
Method: .get -&gt; Get a element with given key, returning None if not
element is found.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; fileGroups.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"conf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res119</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Ljava</span>.lang.<span class="org-constant">String</span>;<span class="org-keyword">@</span><span class="org-constant">4</span>cb04f41<span class="org-rainbow-delimiters-mismatched">)</span>

scala&gt; fileGroups.get<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"conf"</span><span class="org-rainbow-delimiters-depth-2">)</span>.map<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>.toList<span class="org-rainbow-delimiters-depth-2">)</span> res123<span class="org-keyword">:</span>
<span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-3">(</span>/etc/sensors3.conf, /etc/pacman.conf,
/etc/cpufreq-bench.conf, /etc/makepkg.conf, /etc/ld.so.conf,
/etc/host.conf, /etc/healthd.conf, /etc/ts.conf, /etc/resolvconf.conf,
/etc/logrotate.conf, /etc/locale.conf, /etc/request-key.conf,
/etc/nscd.conf, /etc/dnsmasq.conf, /etc/nsswitch.conf, /etc/ntp.conf,
/etc/updatedb.conf, /etc/dhcpcd.conf, /etc/krb5.conf,
/etc/openswap.conf, /etc/vconsole.conf, /etc/mkinitcpio.conf,
/etc/man_db.conf, /etc/mke2fs.conf, /etc/fuse.conf, /etc/asound.conf,
/etc/mdadm.conf, /etc/pamac.conf, /etc/nfs.conf, /etc/nfsmount.conf,
/etc/resolv.conf, /etc/gai.conf, /etc/pacman-mirrors.conf,
/etc/rsyncd.conf<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; fileGroups.get<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"confx"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res125</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
Method: .head -&gt; Get first element of Map 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; fileGroups.head

<span class="org-function-name">res143</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">String</span>, <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span>,<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/motd, /etc/gemrc,
/etc/environment, /etc/gshadow, /etc/shadow-, /etc/fstab, /etc/rpc,
/etc/passwd, /etc/gnome-vfs-mime-magic, /etc/passwd-, /etc/sudoers,
/etc/anacrontab, /etc/os-release, /etc/adjtime, /etc/netconfig,
/etc/inputrc, /etc/timezone, /etc/shadow, /etc/lsb-release,
/etc/shells, /etc/papersize, /etc/drirc, /etc/hostname, /etc/exports,
/etc/machine-id, /etc/group-, /etc/nanorc, /etc/hosts, /etc/group,
/etc/mtab, /etc/securetty, /etc/services, /etc/protocols,
/etc/gshadow-, /etc/localtime, /etc/issue, /etc/ethertypes,
/etc/manjaro-release, /etc/yaourtrc, /etc/profile, /etc/printcap,
/etc/crypttab<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Method: .last -&gt; Get last element of Map 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; fileGroups.last

<span class="org-function-name">res145</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">String</span>, <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>defs,<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/login.defs<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Method: .key -&gt; Get all keys 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Get all  file extensions </span>
scala&gt; fileGroups.keys
<span class="org-function-name">res114</span><span class="org-keyword">:</span> <span class="org-type">Iterable</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Set</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span>, backup, bash_logout, local, pacnew, lock, conf, cache, key, shutdown, updated, cfg, deny, bashrc, types, rc, gen, defs<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Print all file extensions </span>
scala&gt; fileGroups.keys.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>

backup
bash_logout
local
pacnew
lock
conf
cache
key
shutdown
updated
cfg
deny
bashrc
types
rc
gen
defs
</pre>
</div>

<p>
Method: .values -&gt; Get all values. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; fileGroups.values
<span class="org-function-name">res126</span><span class="org-keyword">:</span> <span class="org-type">Iterable</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">MapLike</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/motd, /etc/gemrc,
/etc/environment, /etc/gshadow, /etc/shadow-, /etc/fstab, /etc/rpc,
/etc/passwd, /etc/gnome-vfs-mime-magic, /etc/passwd-, /etc/sudoers,
/etc/anacrontab, /etc/os-release, /etc/adjtime, /etc/netconfig,
/etc/inputrc, /etc/timezone, /etc/shadow, /etc/lsb-release,
/etc/shells, /etc/papersize, /etc/drirc, /etc/hostname, /etc/exports,
/etc/machine-id, /etc/group-, /etc/nanorc, /etc/hosts, /etc/group,
/etc/mtab, /etc/securetty, /etc/services, /etc/protocols,
/etc/gshadow-, /etc/localtime, /etc/issue, /etc/ethertypes,
/etc/manjaro-release, /etc/yaourtrc, /etc/profile, /etc/printcap,
/etc/crypttab<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/pacman-mirrors.conf.<span class="org-constant">20170402</span>.backup<span class="org-rainbow-delimiters-depth-2">)</span>,
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/bash.bash_logout<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/rc.local<span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>/etc/pacman-mirrors.co...  scala&gt;

scala&gt; fileGroups.values.head
<span class="org-function-name">res129</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">(</span>/etc/motd, /etc/gemrc, /etc/environment,
/etc/gshadow, /etc/shadow-, /etc/fstab, /etc/rpc, /etc/passwd,
/etc/gnome-vfs-mime-magic, /etc/passwd-, /etc/sudoers,
/etc/anacrontab, /etc/os-release, /etc/adjtime, /etc/netconfig,
/etc/inputrc, /etc/timezone, /etc/shadow, /etc/lsb-release,
/etc/shells, /etc/papersize, /etc/drirc, /etc/hostname, /etc/exports,
/etc/machine-id, /etc/group-, /etc/nanorc, /etc/hosts, /etc/group,
/etc/mtab, /etc/securetty, /etc/services, /etc/protocols,
/etc/gshadow-, /etc/localtime, /etc/issue, /etc/ethertypes,
/etc/manjaro-release, /etc/yaourtrc, /etc/profile, /etc/printcap,
  /etc/crypttab<span class="org-rainbow-delimiters-depth-3">)</span>
</pre>
</div>

<p>
Method: .size -&gt; Get the number of Map elements or the number of key,
value pairs. 
</p>

<div class="org-src-container">

<pre class="src src-scala>">scala&gt; fileGroups.size
res148: Int = 18

scala&gt; fileGroups size
res149: Int = 18
</pre>
</div>

<p>
Method: .mapValues -&gt; Apply a function to each map value. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">/// </span><span class="org-comment">Get a Map with all extension and number of files with a given extension.</span>
scala&gt; fileGroups.mapValues<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x.length<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-function-name">res136</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span>,<span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">42</span>,
backup -&gt; <span class="org-constant">1</span>, bash_logout -&gt; <span class="org-constant">1</span>, local -&gt; <span class="org-constant">1</span>, pacnew -&gt; <span class="org-constant">1</span>, lock -&gt; <span class="org-constant">1</span>,
conf -&gt; <span class="org-constant">34</span>, cache -&gt; <span class="org-constant">1</span>, key -&gt; <span class="org-constant">1</span>, shutdown -&gt; <span class="org-constant">1</span>, updated -&gt; <span class="org-constant">1</span>, cfg -&gt;
<span class="org-constant">2</span>, deny -&gt; <span class="org-constant">1</span>, bashrc -&gt; <span class="org-constant">1</span>, types -&gt; <span class="org-constant">1</span>, rc -&gt; <span class="org-constant">2</span>, gen -&gt; <span class="org-constant">1</span>, defs -&gt; <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; fileGroups.mapValues<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res137</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span>,<span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">42</span>,
backup -&gt; <span class="org-constant">1</span>, bash_logout -&gt; <span class="org-constant">1</span>, local -&gt; <span class="org-constant">1</span>, pacnew -&gt; <span class="org-constant">1</span>, lock -&gt; <span class="org-constant">1</span>,
conf -&gt; <span class="org-constant">34</span>, cache -&gt; <span class="org-constant">1</span>, key -&gt; <span class="org-constant">1</span>, shutdown -&gt; <span class="org-constant">1</span>, updated -&gt; <span class="org-constant">1</span>, cfg -&gt;
  <span class="org-constant">2</span>, deny -&gt; <span class="org-constant">1</span>, bashrc -&gt; <span class="org-constant">1</span>, types -&gt; <span class="org-constant">1</span>, rc -&gt; <span class="org-constant">2</span>, gen -&gt; <span class="org-constant">1</span>, defs -&gt; <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; fileGroups.mapValues<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>,<span class="org-constant">42</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>backup,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bash_logout,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>local,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>pacnew,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>lock,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>conf,<span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cache,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>key,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>shutdown,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>updated,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cfg,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>deny,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bashrc,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>types,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>rc,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>gen,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>defs,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Method: .map  -&gt; Apply a function to each to each (key, value) pair. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt;  fileGroups.map <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">k</span>, <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">(</span>k, v.length<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Get new Map with (extension, number of files with extension)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">pairs.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-function-name">res160</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span>,<span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">42</span>,
backup -&gt; <span class="org-constant">1</span>, bash_logout -&gt; <span class="org-constant">1</span>, local -&gt; <span class="org-constant">1</span>, pacnew -&gt; <span class="org-constant">1</span>, lock -&gt; <span class="org-constant">1</span>,
conf -&gt; <span class="org-constant">34</span>, cache -&gt; <span class="org-constant">1</span>, key -&gt; <span class="org-constant">1</span>, shutdown -&gt; <span class="org-constant">1</span>, updated -&gt; <span class="org-constant">1</span>, cfg -&gt;
<span class="org-constant">2</span>, deny -&gt; <span class="org-constant">1</span>, bashrc -&gt; <span class="org-constant">1</span>, types -&gt; <span class="org-constant">1</span>, rc -&gt; <span class="org-constant">2</span>, gen -&gt; <span class="org-constant">1</span>, defs -&gt; <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>



scala&gt;  fileGroups.map <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">k</span>, <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">(</span>k, v.max<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">res161</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span>,<span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span> -&gt;
/etc/yaourtrc, backup -&gt; /etc/pacman-mirrors.conf.<span class="org-constant">20170402</span>.backup,
bash_logout -&gt; /etc/bash.bash_logout, local -&gt; /etc/rc.local,
pacnew -&gt; /etc/pacman-mirrors.conf.pacnew, lock -&gt; /etc/.pwd.lock,
conf -&gt; /etc/vconsole.conf, cache -&gt; /etc/ld.so.cache, key -&gt;
/etc/trusted-key.key, shutdown -&gt; /etc/rc.local.shutdown, updated -&gt;
/etc/.updated, cfg -&gt; /etc/vdpau_wrapper.cfg, deny -&gt; /etc/cron.deny,
bashrc -&gt; /etc/bash.bashrc, types -&gt; /etc/mime.types, rc -&gt;
/etc/slsh.rc, gen -&gt; /etc/locale.gen, defs -&gt; /etc/login.defs<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Method: .foreach -&gt; Apply a function that returns Unit (returns no value or void) to each element. 
</p>

<div class="org-src-container">

<pre class="src src-scala">fileGroups.foreach <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">k</span>, <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Number of files with extenson</span><span class="org-string"><span class="org-constant">\t</span></span><span class="org-string">'%s'</span><span class="org-string"><span class="org-constant">\t\t</span></span><span class="org-string">=%d</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, k, v.length<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt;  fileGroups.foreach <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">k</span>, <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span>k<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

backup
bash_logout
local
pacnew
lock
conf
cache
key
shutdown
updated
cfg
deny
bashrc
types
rc
gen
defs

scala&gt;  fileGroups.foreach <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">k</span>, <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span>k, v.length<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span>,<span class="org-constant">42</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>backup,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bash_logout,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>local,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>pacnew,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>lock,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>conf,<span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cache,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>key,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>shutdown,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>updated,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cfg,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>deny,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bashrc,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>types,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>rc,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>gen,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>defs,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;  fileGroups.mapValues<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>,<span class="org-constant">42</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>backup,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bash_logout,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>local,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>pacnew,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>lock,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>conf,<span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cache,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>key,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>shutdown,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>updated,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cfg,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>deny,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bashrc,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>types,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>rc,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>gen,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>defs,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;  fileGroups.foreach <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">k</span>, <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Number of files with extenson</span><span class="org-string"><span class="org-constant">\t</span></span><span class="org-string">'%s'</span><span class="org-string"><span class="org-constant">\t\t</span></span><span class="org-string">=%d</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, k, v.length<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   ''      <span class="org-keyword">=</span><span class="org-constant">42</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'backu</span>p'        <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'bash_logou</span>t'       <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'loca</span>l'     <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'pacne</span>w'        <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'loc</span>k'      <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'con</span>f'      <span class="org-keyword">=</span><span class="org-constant">34</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'cach</span>e'     <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'ke</span>y'       <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'shutdow</span>n'      <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'update</span>d'       <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'cf</span>g'       <span class="org-keyword">=</span><span class="org-constant">2</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'den</span>y'      <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'bashr</span>c'        <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'type</span>s'     <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'r</span>c'        <span class="org-keyword">=</span><span class="org-constant">2</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'ge</span>n'       <span class="org-keyword">=</span><span class="org-constant">1</span>
<span class="org-constant">Number</span> of files <span class="org-keyword">with</span> <span class="org-type">extenson</span>   <span class="org-string">'def</span>s'      <span class="org-keyword">=</span><span class="org-constant">1</span>
</pre>
</div>

<p>
Method: .isEmpty -&gt; Test if Map is empty. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; fileGroups.isEmpty
<span class="org-function-name">res151</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>
</pre>
</div>


<p>
Method: .toList -&gt; Convert a Map to a list of key and values. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fileCounts</span> <span class="org-keyword">=</span> fileGroups.mapValues<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-function-name">fileCounts</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span>,<span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">42</span>,
backup -&gt; <span class="org-constant">1</span>, bash_logout -&gt; <span class="org-constant">1</span>, local -&gt; <span class="org-constant">1</span>, pacnew -&gt; <span class="org-constant">1</span>, lock -&gt; <span class="org-constant">1</span>,
conf -&gt; <span class="org-constant">34</span>, cache -&gt; <span class="org-constant">1</span>, key -&gt; <span class="org-constant">1</span>, shutdown -&gt; <span class="org-constant">1</span>, updated -&gt; <span class="org-constant">1</span>, cfg -&gt;
<span class="org-constant">2</span>, deny -&gt; <span class="org-constant">1</span>, bashrc -&gt; <span class="org-constant">1</span>, types -&gt; <span class="org-constant">1</span>, rc -&gt; <span class="org-constant">2</span>, gen -&gt; <span class="org-constant">1</span>, defs -&gt; <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>



scala&gt; fileGroups.toList

scala&gt; fileCounts.toList
<span class="org-function-name">res140</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">String</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span>,<span class="org-constant">42</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>backup,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>,
<span class="org-rainbow-delimiters-depth-2">(</span>bash_logout,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>local,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>pacnew,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>lock,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>conf,<span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-2">)</span>,
<span class="org-rainbow-delimiters-depth-2">(</span>cache,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>key,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>shutdown,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>updated,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>cfg,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>deny,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>,
<span class="org-rainbow-delimiters-depth-2">(</span>bashrc,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>types,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>rc,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>gen,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>defs,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Method: .toArray -&gt; Convert a Map to an array of key and values.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fileCounts</span> <span class="org-keyword">=</span> fileGroups.mapValues<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; fileCounts.toArray
<span class="org-function-name">res141</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">String</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span>,<span class="org-constant">42</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>backup,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>,
<span class="org-rainbow-delimiters-depth-2">(</span>bash_logout,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>local,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>pacnew,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>lock,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>conf,<span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-2">)</span>,
<span class="org-rainbow-delimiters-depth-2">(</span>cache,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>key,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>shutdown,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>updated,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>cfg,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>deny,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>,
<span class="org-rainbow-delimiters-depth-2">(</span>bashrc,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>types,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>rc,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>gen,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>defs,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-3" class="outline-4">
<h4 id="sec-1-7-3"><span class="section-number-4">1.7.3</span> Mutable Collections</h4>
<div class="outline-text-4" id="text-1-7-3">
</div><div id="outline-container-sec-1-7-3-1" class="outline-5">
<h5 id="sec-1-7-3-1"><span class="section-number-5">1.7.3.1</span> Array</h5>
<div class="outline-text-5" id="text-1-7-3-1">
<ul class="org-ul">
<li><a href="https://www.tutorialspoint.com/scala/scala_arrays.htm">Scala Arrays</a> methods signatures. 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Type tab after the dot to show the Array methods</span>
scala&gt; arr.
++              filterNot            maxBy               span            
<span class="org-function-name">++</span>:             find                 min                 splitAt         
<span class="org-function-name">+</span>:              flatMap              minBy               startsWith      
<span class="org-function-name">/</span>:              flatten              mkString            stringPrefix    
:+              fold                 nonEmpty            sum             
:\              foldLeft             orElse              tail            
addString       foldRight            padTo               tails           
aggregate       forall               par                 take            
andThen         foreach              partition           takeRight       
apply           genericBuilder       patch               takeWhile       
applyOrElse     groupBy              permutations        to              
array           grouped              prefixLength        toArray         
canEqual        hasDefiniteSize      product             toBuffer        
clone           head                 reduce              toIndexedSeq    
collect         headOption           reduceLeft          toIterable      
collectFirst    indexOf              reduceLeftOption    toIterator      
combinations    indexOfSlice         reduceOption        toList          
companion       indexWhere           reduceRight         toMap           
compose         indices              reduceRightOption   toSeq           
contains        init                 repr                toSet           
containsSlice   inits                reverse             toStream        
copyToArray     intersect            reverseIterator     toTraversable   
copyToBuffer    isDefinedAt          reverseMap          toVector        
corresponds     isEmpty              runWith             transform       
count           isTraversableAgain   sameElements        transpose       
deep            iterator             scan                union           
diff            last                 scanLeft            unzip           
distinct        lastIndexOf          scanRight           unzip3          
drop            lastIndexOfSlice     segmentLength       update          
dropRight       lastIndexWhere       seq                 updated         
dropWhile       lastOption           size                view            
elemManifest    length               slice               withFilter      
elemTag         lengthCompare        sliding             zip             
endsWith        lift                 sortBy              zipAll          
exists          map                  sortWith            zipWithIndex    
filter          max                  sorted
</pre>
</div>

<p>
Get first and last elements.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.head
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.4</span>

scala&gt; arr.tail
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Get array tail (remove first element)
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.tail
<span class="org-function-name">res25</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr
<span class="org-function-name">res26</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Get nth-element.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.4</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.5</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.ArrayIndexOutOfBoundsException</span><span class="org-keyword">:</span> <span class="org-constant">10</span>
  ... <span class="org-constant">32</span> elided
</pre>
</div>

<p>
Change nth-element. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">100.0</span>

scala&gt; arr
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">100.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.4</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>

scala&gt; arr
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">100.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>
</pre>
</div>

<p>
Get minimum and maximum elements.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; arr
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.max
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>

scala&gt; arr.min
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">-6.31</span>
</pre>
</div>

<p>
Get array length.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.length
length   lengthCompare

scala&gt; arr.length
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">6</span>
</pre>
</div>

<p>
Reverse array. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.reverse
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-6.31</span>, <span class="org-constant">5.0</span>, <span class="org-constant">4.0</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">2.5</span>, <span class="org-constant">3.4</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Convert Array to List.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.toList
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Get array sum: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.sum
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">21</span>
</pre>
</div>

<p>
Get array product: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.4</span>, <span class="org-constant">2.5</span>, <span class="org-constant">-4.5</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.31</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.product
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4827.15</span>
</pre>
</div>

<p>
Map - Apply a function to all array elements.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">-4</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">-4</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Map with anonymous function</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------------------------</span>
scala&gt; arr.map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>, <span class="org-constant">6</span>, <span class="org-constant">-12</span>, <span class="org-constant">12</span>, <span class="org-constant">15</span>, <span class="org-constant">-18</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res35</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>, <span class="org-constant">6</span>, <span class="org-constant">-12</span>, <span class="org-constant">12</span>, <span class="org-constant">15</span>, <span class="org-constant">-18</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Map a function </span>
<span class="org-comment-delimiter">// </span>
scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">fn</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> x * <span class="org-constant">2</span> - <span class="org-constant">5</span>
<span class="org-function-name">fn</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Int</span>

scala&gt; arr.map<span class="org-rainbow-delimiters-depth-1">(</span>fn<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res34</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">-1</span>, <span class="org-constant">-13</span>, <span class="org-constant">3</span>, <span class="org-constant">5</span>, <span class="org-constant">-17</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr map fn
<span class="org-function-name">res36</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">-1</span>, <span class="org-constant">-13</span>, <span class="org-constant">3</span>, <span class="org-constant">5</span>, <span class="org-constant">-17</span><span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Convert integer to double </span>
scala&gt; <span class="org-constant">10</span>
<span class="org-function-name">res41</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; <span class="org-constant">10.</span>toDouble
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Map a function that applies a method.</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------------------------</span>
scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.toDouble<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res43</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">-4.0</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">-6.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.toString<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res54</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">-4</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.toHexString<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res58</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, fffffffc, <span class="org-constant">4</span>, <span class="org-constant">5</span>, fffffffa<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Math syntax sugars </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------------</span>
scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span> + <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res44</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">13</span>, <span class="org-constant">12</span>, <span class="org-constant">6</span>, <span class="org-constant">14</span>, <span class="org-constant">15</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span> * <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res45</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">30</span>, <span class="org-constant">20</span>, <span class="org-constant">-40</span>, <span class="org-constant">40</span>, <span class="org-constant">50</span>, <span class="org-constant">-60</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span> * <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span> + <span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">35</span>, <span class="org-constant">25</span>, <span class="org-constant">-35</span>, <span class="org-constant">45</span>, <span class="org-constant">55</span>, <span class="org-constant">-55</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span> * <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> sum
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">40</span>

scala&gt; arr
<span class="org-function-name">res51</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">-4</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">//  </span><span class="org-comment">13 = 16 - 3</span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">14 = 16 - 2</span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">20 = 16 -(-4) </span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">... ... </span>
scala&gt; arr map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">16</span> - <span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res52</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">13</span>, <span class="org-constant">14</span>, <span class="org-constant">20</span>, <span class="org-constant">12</span>, <span class="org-constant">11</span>, <span class="org-constant">22</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Filter - an array. Select all array elements that satisfies a
predicate. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">-4</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">-4</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.filter<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res68</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>

scala&gt; arr filter <span class="org-rainbow-delimiters-depth-2">(</span>x <span class="org-keyword">=&gt;</span> x &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res70</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; arr filter <span class="org-rainbow-delimiters-depth-2">(</span>x <span class="org-keyword">=&gt;</span> x &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span> sum
<span class="org-function-name">res71</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">14</span>

scala&gt; arr filter <span class="org-rainbow-delimiters-depth-2">(</span>x <span class="org-keyword">=&gt;</span> x &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span> product
<span class="org-function-name">res72</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">120</span>


scala&gt; arr.filter<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span> &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res74</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; arr.filter<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span> &lt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res77</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">-4</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; arr filter <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span> &lt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res78</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">-4</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-2">)</span>
</pre>
</div>

<p>
Reduce (fold). It fails for empty arrays. 
</p>

<ul class="org-ul">
<li>acc stands for accumulator. 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">sum of array elements </span>
scala&gt; arr.reduce<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">21</span>

scala&gt; arr.sum
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">21</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">product of array elements </span>
scala&gt; arr.reduce<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> acc * x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">720</span>

scala&gt; arr.product
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">720</span>

scala&gt; arr.reduce<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">10</span> * acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">123456</span>

scala&gt; arr reduce<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> acc * x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">720</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">emptyArr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">emptyArr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; emptyArr.reduce<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">10</span> * acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.UnsupportedOperationException</span><span class="org-keyword">:</span> <span class="org-type">empty</span>.reduceLeft
  at scala.collection.<span class="org-constant">TraversableOnce</span>$class.reduceLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">TraversableOnce</span>.scala<span class="org-keyword">:</span><span class="org-constant">180</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.mutable.<span class="org-constant">ArrayOps</span>$ofDouble.scala$collection$IndexedSeqOptimized$$super$reduceLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ArrayOps</span>.scala<span class="org-keyword">:</span><span class="org-constant">270</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.<span class="org-constant">IndexedSeqOptimized</span>$class.reduceLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">IndexedSeqOptimized</span>.scala<span class="org-keyword">:</span><span class="org-constant">74</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.mutable.<span class="org-constant">ArrayOps</span>$ofDouble.reduceLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ArrayOps</span>.scala<span class="org-keyword">:</span><span class="org-constant">270</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.<span class="org-constant">TraversableOnce</span>$class.reduce<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">TraversableOnce</span>.scala<span class="org-keyword">:</span><span class="org-constant">208</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.mutable.<span class="org-constant">ArrayOps</span>$ofDouble.reduce<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ArrayOps</span>.scala<span class="org-keyword">:</span><span class="org-constant">270</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided
</pre>
</div>


<p>
foldLeft - Like reduce, but it works for empty arrays. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">emptyArr</span> <span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">emptyArr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; arr.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">10</span> * acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">123456</span>

scala&gt; emptyArr.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">10</span> * acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>


scala&gt; arr.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> acc * x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res38</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">720</span>

scala&gt; emptyArr.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>acc, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> acc * x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res39</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; arr.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>
<span class="org-constant">6</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">- '()' - Unit type </span>
<span class="org-comment-delimiter">//</span>
scala&gt; emptyArr.foldLeft<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>, x<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt;
</pre>
</div>

<p>
foldRight 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">emptyArr</span> <span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">emptyArr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; arr.foldRight<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>x, acc<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">10</span>* acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res46</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">654321</span>

scala&gt; emptyArr.foldRight<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>x, acc<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">10</span>* acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>


scala&gt; arr.foldRight<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>x, acc<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> acc + x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">21</span>

scala&gt; arr.foldRight<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-rainbow-delimiters-depth-2">(</span>x, acc<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> acc * x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res50</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">720</span>
</pre>
</div>

<p>
Group By 
</p>

<ul class="org-ul">
<li>groupBy[k](f: Element =&gt; key) : Map[key, Array[Element]]
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">getFileExtension</span><span class="org-rainbow-delimiters-depth-1">(</span>file<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">i</span> <span class="org-keyword">=</span> file.lastIndexOf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">'.'</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span> i &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span>
    file.substring<span class="org-rainbow-delimiters-depth-2">(</span>i+<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">else</span>
    <span class="org-string">""</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">val</span> <span class="org-variable-name">flist</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-string">"/downloads/magazine.pdf"</span>
 ,<span class="org-string">"afile.html"</span>
 ,<span class="org-string">"file2.html"</span>
 ,<span class="org-string">"file3.png"</span>
 ,<span class="org-string">"config"</span>
 ,<span class="org-string">"imageFun.png"</span>
 ,<span class="org-string">"unix.pdf"</span>
 ,<span class="org-string">"script10.scala"</span>
 ,<span class="org-string">"bashrc"</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">flist</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>
     |   <span class="org-string">"/downloads/magazine.pdf"</span>
     |  ,<span class="org-string">"afile.html"</span>
     |  ,<span class="org-string">"file2.html"</span>
     |  ,<span class="org-string">"file3.png"</span>
     |  ,<span class="org-string">"config"</span>
     |  ,<span class="org-string">"imageFun.png"</span>
     |  ,<span class="org-string">"unix.pdf"</span>
     |  ,<span class="org-string">"script10.scala"</span>
     |  ,<span class="org-string">"bashrc"</span>
     |   <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">flist</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>/downloads/magazine.pdf, afile.html, file2.html, file3.png, config, imageFun.png, unix.pdf, script10.scala, bashrc<span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; flist map getFileExtension
<span class="org-function-name">res63</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>pdf, html, html, png, <span class="org-string">""</span>, png, pdf, scala, <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fgroups</span> <span class="org-keyword">=</span> flist.groupBy<span class="org-rainbow-delimiters-depth-1">(</span>getFileExtension<span class="org-rainbow-delimiters-depth-1">)</span> fgroups<span class="org-keyword">:</span>
scala.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span>,<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span> -&gt;
<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>config, bashrc<span class="org-rainbow-delimiters-depth-2">)</span>, png -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>file3.png, imageFun.png<span class="org-rainbow-delimiters-depth-2">)</span>, pdf -&gt;
<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>/downloads/magazine.pdf, unix.pdf<span class="org-rainbow-delimiters-depth-2">)</span>, scala -&gt;
<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>script10.scala<span class="org-rainbow-delimiters-depth-2">)</span>, html -&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>afile.html, file2.html<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Get extensions</span>
<span class="org-comment-delimiter">//</span>
scala&gt; fgroups.keys
<span class="org-function-name">res74</span><span class="org-keyword">:</span> <span class="org-type">Iterable</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Set</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span>, png, pdf, scala, html<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; fgroups.keys.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>

png
pdf
scala
html

<span class="org-comment-delimiter">// </span><span class="org-comment">Get all files without extension</span>
<span class="org-comment-delimiter">//</span>
scala&gt; fgroups.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res75</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>config, bashrc<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; fgroups.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>.get
<span class="org-function-name">res79</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>config, bashrc<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; fgroups.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"tgz"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res81</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; fgroups.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"tgz"</span><span class="org-rainbow-delimiters-depth-1">)</span>.get
<span class="org-function-name">java.util.NoSuchElementException</span><span class="org-keyword">:</span> <span class="org-type">None</span>.get
  at scala.<span class="org-constant">None</span>$.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span>.scala<span class="org-keyword">:</span><span class="org-constant">347</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">None</span>$.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span>.scala<span class="org-keyword">:</span><span class="org-constant">345</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided


<span class="org-comment-delimiter">// </span><span class="org-comment">Get all files with extension *.png</span>
scala&gt; fgroups.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"png"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res76</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span>file3.png, imageFun.png<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">files</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/etc/"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>.listFiles<span class="org-rainbow-delimiters-depth-1">()</span>.filter<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.isFile<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">files</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span>java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span>/etc/motd, /etc/gemrc,
/etc/ld.so.cache, /etc/environment, /etc/sensors3.conf, /etc/gshadow,
/etc/cron.deny, /etc/shadow-, /etc/vdpau_wrapper.cfg,
/etc/pacman.conf, /etc/cpufreq-bench.conf, /etc/makepkg.conf,
/etc/ld.so.conf, /etc/fstab, /etc/host.conf, /etc/rpc,
/etc/mime.types, /etc/locale.gen, /etc/passwd, /etc/healthd.conf,
/etc/gnome-vfs-mime-magic, /etc/ts.conf, /etc/resolvconf.conf,
/etc/passwd-, /etc/logrotate.conf, /etc/locale.conf,
/etc/pacman-mirrors.conf.<span class="org-constant">20170402</span>.backup, /etc/login.defs,
/etc/sudoers, /etc/request-key.conf, /etc/bash.bashrc,
/etc/anacrontab, /etc/nscd.conf, /etc/os-release, /etc/adjtime,
/etc/dnsmasq.conf, /etc/netconfig, /etc/mail.rc, /etc/inputrc,
/etc/nsswitch.conf, /etc/ntp.conf, /etc/updatedb.conf,
/etc/dhcpcd.conf, /e...  scala&gt;


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fileGroups</span> <span class="org-keyword">=</span> files.map<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>.getPath<span class="org-rainbow-delimiters-depth-2">)</span>.groupBy<span class="org-rainbow-delimiters-depth-2">(</span>getFileExtension<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">fileGroups</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span>,<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span>
<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">(</span>/etc/motd, /etc/gemrc, /etc/environment, /etc/gshadow,
/etc/shadow-, /etc/fstab, /etc/rpc, /etc/passwd,
/etc/gnome-vfs-mime-magic, /etc/passwd-, /etc/sudoers,
/etc/anacrontab, /etc/os-release, /etc/adjtime, /etc/netconfig,
/etc/inputrc, /etc/timezone, /etc/shadow, /etc/lsb-release,
/etc/shells, /etc/papersize, /etc/drirc, /etc/hostname, /etc/exports,
/etc/machine-id, /etc/group-, /etc/nanorc, /etc/hosts, /etc/group,
/etc/mtab, /etc/securetty, /etc/services, /etc/protocols,
/etc/gshadow-, /etc/localtime, /etc/issue, /etc/ethertypes,
/etc/manjaro-release, /etc/yaourtrc, /etc/profile, /etc/printcap,
/etc/crypttab<span class="org-rainbow-delimiters-depth-3">)</span>, backup -&gt;
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">(</span>/etc/pacman-mirrors.conf.<span class="org-constant">20170402</span>.backup<span class="org-rainbow-delimiters-depth-3">)</span>, bash_logout -&gt;
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">(</span>/etc/bash.bash...  scala&gt;


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fileGroups</span> <span class="org-keyword">=</span> files map<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">_</span>.getPath<span class="org-rainbow-delimiters-depth-4">)</span> groupBy getFileExtension
<span class="org-function-name">fileGroups</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-4">[</span><span class="org-constant">String</span>,<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-5">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-5">]</span><span class="org-rainbow-delimiters-depth-4">]</span> <span class="org-keyword">=</span>
<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-5">(</span>/etc/motd, /etc/gemrc, /etc/environment, /etc/gshadow,
/etc/shadow-, /etc/fstab, /etc/rpc, /etc/passwd,
/etc/gnome-vfs-mime-magic, /etc/passwd-, /etc/sudoers,
/etc/anacrontab, /etc/os-release, /etc/adjtime, /etc/netconfig,
/etc/inputrc, /etc/timezone, /etc/shadow, /etc/lsb-release,
/etc/shells, /etc/papersize, /etc/drirc, /etc/hostname, /etc/exports,
/etc/machine-id, /etc/group-, /etc/nanorc, /etc/hosts, /etc/group,
/etc/mtab, /etc/securetty, /etc/services, /etc/protocols,
/etc/gshadow-, /etc/localtime, /etc/issue, /etc/ethertypes,
/etc/manjaro-release, /etc/yaourtrc, /etc/profile, /etc/printcap,
/etc/crypttab<span class="org-rainbow-delimiters-depth-5">)</span>, backup -&gt;
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-5">(</span>/etc/pacman-mirrors.conf.<span class="org-constant">20170402</span>.backup<span class="org-rainbow-delimiters-depth-5">)</span>, bash_logout -&gt;
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-5">(</span>/etc/bash.bash...  scala&gt;

<span class="org-comment-delimiter">/// </span><span class="org-comment">Show all file extensions </span>
scala&gt; fileGroups.keys.foreach<span class="org-rainbow-delimiters-depth-6">(</span>println<span class="org-rainbow-delimiters-depth-6">)</span>

backup
bash_logout
local
pacnew
lock
conf
cache
key
shutdown
updated
cfg
deny
bashrc
types
rc
gen
defs

scala&gt; fileGroups.get<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"conf"</span><span class="org-rainbow-delimiters-depth-6">)</span>
<span class="org-function-name">res90</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-6">[</span><span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-7">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-7">]</span><span class="org-rainbow-delimiters-depth-6">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">[</span><span class="org-constant">Ljava</span>.lang.<span class="org-constant">String</span>;<span class="org-keyword">@</span><span class="org-constant">610</span>b9cb3<span class="org-rainbow-delimiters-mismatched">)</span>

scala&gt; fileGroups.get<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"conf"</span><span class="org-rainbow-delimiters-depth-7">)</span>.get res91<span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-7">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-7">]</span> <span class="org-keyword">=</span>
<span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-7">(</span>/etc/sensors3.conf, /etc/pacman.conf, /etc/cpufreq-bench.conf,
/etc/makepkg.conf, /etc/ld.so.conf, /etc/host.conf, /etc/healthd.conf,
/etc/ts.conf, /etc/resolvconf.conf, /etc/logrotate.conf,
/etc/locale.conf, /etc/request-key.conf, /etc/nscd.conf,
/etc/dnsmasq.conf, /etc/nsswitch.conf, /etc/ntp.conf,
/etc/updatedb.conf, /etc/dhcpcd.conf, /etc/krb5.conf,
/etc/openswap.conf, /etc/vconsole.conf, /etc/mkinitcpio.conf,
/etc/man_db.conf, /etc/mke2fs.conf, /etc/fuse.conf, /etc/asound.conf,
/etc/mdadm.conf, /etc/pamac.conf, /etc/nfs.conf, /etc/nfsmount.conf,
/etc/resolv.conf, /etc/gai.conf, /etc/pacman-mirrors.conf,
/etc/rsyncd.conf<span class="org-rainbow-delimiters-depth-7">)</span>

scala&gt; fileGroups.get<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"conf"</span><span class="org-rainbow-delimiters-depth-7">)</span>.get.take<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-7">)</span>.foreach<span class="org-rainbow-delimiters-depth-7">(</span>println<span class="org-rainbow-delimiters-depth-7">)</span>
/etc/sensors3.conf
/etc/pacman.conf
/etc/cpufreq-bench.conf
/etc/makepkg.conf
/etc/ld.so.conf
/etc/host.conf
/etc/healthd.conf
/etc/ts.conf
/etc/resolvconf.conf
/etc/logrotate.conf

scala&gt; fileGroups.get<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"cfg"</span><span class="org-rainbow-delimiters-depth-7">)</span>.get.take<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-7">)</span>.foreach<span class="org-rainbow-delimiters-depth-7">(</span>println<span class="org-rainbow-delimiters-depth-7">)</span>
/etc/vdpau_wrapper.cfg
/etc/rc_maps.cfg

<span class="org-comment-delimiter">/// </span><span class="org-comment">Show all files without extension </span>
scala&gt; fileGroups.get<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-7">)</span>.get.take<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-7">)</span>.foreach<span class="org-rainbow-delimiters-depth-7">(</span>println<span class="org-rainbow-delimiters-depth-7">)</span>
/etc/motd
/etc/gemrc
/etc/environment
/etc/gshadow
/etc/shadow-
/etc/fstab
/etc/rpc
/etc/passwd
/etc/gnome-vfs-mime-magic
/etc/passwd-

<span class="org-comment-delimiter">// </span><span class="org-comment">Get the number of files of each extension </span>
cala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">fileCounts</span> <span class="org-keyword">=</span> fileGroups.mapValues<span class="org-rainbow-delimiters-depth-7">(</span>n <span class="org-keyword">=&gt;</span> n.length<span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-function-name">fileCounts</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-7">[</span><span class="org-constant">String</span>,<span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-7">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">""</span> -&gt; <span class="org-constant">42</span>,
backup -&gt; <span class="org-constant">1</span>, bash_logout -&gt; <span class="org-constant">1</span>, local -&gt; <span class="org-constant">1</span>, pacnew -&gt; <span class="org-constant">1</span>, lock -&gt; <span class="org-constant">1</span>,
conf -&gt; <span class="org-constant">34</span>, cache -&gt; <span class="org-constant">1</span>, key -&gt; <span class="org-constant">1</span>, shutdown -&gt; <span class="org-constant">1</span>, updated -&gt; <span class="org-constant">1</span>, cfg -&gt;
<span class="org-constant">2</span>, deny -&gt; <span class="org-constant">1</span>, bashrc -&gt; <span class="org-constant">1</span>, types -&gt; <span class="org-constant">1</span>, rc -&gt; <span class="org-constant">2</span>, gen -&gt; <span class="org-constant">1</span>, defs -&gt; <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Count the number of *.cfg </span>
scala&gt; fileCounts.get<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"cfg"</span><span class="org-rainbow-delimiters-depth-7">)</span>.get
<span class="org-function-name">res102</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Count the number of files without extension</span>
scala&gt; fileCounts.get<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-function-name">res99</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-7">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-7">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-7">(</span><span class="org-constant">42</span><span class="org-rainbow-delimiters-depth-7">)</span>

scala&gt; fileCounts.get<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"conf"</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-function-name">res100</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-7">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-7">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-7">(</span><span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-7">)</span>

scala&gt; fileCounts.get<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"conf"</span><span class="org-rainbow-delimiters-depth-7">)</span>.get
<span class="org-function-name">res101</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">34</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Show how many files are of each extension.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">- 2 files with *.cfg extension and 42 without extension.</span>
<span class="org-comment-delimiter">//   </span>
scala&gt; fileCounts.foreach<span class="org-rainbow-delimiters-depth-7">(</span>println<span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>,<span class="org-constant">42</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>backup,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>bash_logout,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>local,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>pacnew,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>lock,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>conf,<span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>cache,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>key,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>shutdown,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>updated,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>cfg,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>deny,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>bashrc,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>types,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>rc,<span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>gen,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
<span class="org-rainbow-delimiters-depth-7">(</span>defs,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-7">)</span>
</pre>
</div>

<p>
Foreach - Apply a function that performs side-effect to each element. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">-4</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">2</span>, <span class="org-constant">-4</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">-6</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; arr.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">3</span>
<span class="org-constant">2</span>
<span class="org-constant">-4</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>
<span class="org-constant">-6</span>

scala&gt; arr foreach println
<span class="org-constant">3</span>
<span class="org-constant">2</span>
<span class="org-constant">-4</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>
<span class="org-constant">-6</span>

scala&gt; arr.foreach<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x = "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">3</span>
x <span class="org-keyword">=</span> <span class="org-constant">2</span>
x <span class="org-keyword">=</span> <span class="org-constant">-4</span>
x <span class="org-keyword">=</span> <span class="org-constant">4</span>
x <span class="org-keyword">=</span> <span class="org-constant">5</span>
x <span class="org-keyword">=</span> <span class="org-constant">-6</span>

scala&gt; arr foreach <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x = "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">3</span>
x <span class="org-keyword">=</span> <span class="org-constant">2</span>
x <span class="org-keyword">=</span> <span class="org-constant">-4</span>
x <span class="org-keyword">=</span> <span class="org-constant">4</span>
x <span class="org-keyword">=</span> <span class="org-constant">5</span>
x <span class="org-keyword">=</span> <span class="org-constant">-6</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">More practical example:</span>
<span class="org-comment-delimiter">//</span>

scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">files</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/etc/"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>.listFiles<span class="org-rainbow-delimiters-depth-1">()</span>

<span class="org-function-name">files</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span>java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span>/etc/systemd, /etc/motd,
/etc/gemrc, /etc/adobe, /etc/ld.so.cache, /etc/environment,
/etc/libreoffice, /etc/rc_keymaps, /etc/sensors3.conf, /etc/gshadow,
/etc/acpi, /etc/pkcs11, /etc/modules-load.d, ... <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Get the number of files</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------</span>
scala&gt; files.length
<span class="org-function-name">res80</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">188</span>

scala&gt; files.size
<span class="org-function-name">res81</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">188</span>

scala&gt; files.head
<span class="org-function-name">res82</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span> <span class="org-keyword">=</span> /etc/systemd

scala&gt; files.last
<span class="org-function-name">res83</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span> <span class="org-keyword">=</span> /etc/rsyncd.conf

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">f</span> <span class="org-keyword">=</span> files.head
<span class="org-function-name">f</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span> <span class="org-keyword">=</span> /etc/systemd

scala&gt; f. <span class="org-comment-delimiter">// </span><span class="org-comment">Type tab to show class tabs </span>
canExecute      getAbsoluteFile    getTotalSpace    list              setWritable   
canRead         getAbsolutePath    getUsableSpace   listFiles         toPath        
canWrite        getCanonicalFile   hashCode         mkdir             toString      
compareTo       getCanonicalPath   isAbsolute       mkdirs            toURI         
createNewFile   getFreeSpace       isDirectory      renameTo          toURL         
delete          getName            isFile           setExecutable                   
deleteOnExit    getParent          isHidden         setLastModified                 
equals          getParentFile      lastModified     setReadOnly                     
exists          getPath            length           setReadable

scala&gt; files.head.getName
<span class="org-function-name">res84</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> systemd

scala&gt; files.head.getPath
<span class="org-function-name">res86</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> /etc/systemd

scala&gt; files.head.toURL
<span class="org-function-name">res87</span><span class="org-keyword">:</span> <span class="org-type">java</span>.net.<span class="org-constant">URL</span> <span class="org-keyword">=</span> file:/etc/systemd/

scala&gt; files.head.toURI
<span class="org-function-name">res88</span><span class="org-keyword">:</span> <span class="org-type">java</span>.net.<span class="org-constant">URI</span> <span class="org-keyword">=</span> file:/etc/systemd/

scala&gt; files.head.isFile
<span class="org-function-name">res89</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>

scala&gt; files.head.isDirectory
<span class="org-function-name">res90</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Filter all file objects that are directory and take 10 directories.</span>
scala&gt; files.filter<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.isDirectory<span class="org-rainbow-delimiters-depth-1">)</span>.take<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res94</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span>java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span>/etc/systemd, /etc/adobe, /etc/libreoffice, /etc/rc_keymaps, /etc/acpi, /etc/pkcs11, /etc/modules-load.d, /etc/gufw, /etc/security, /etc/tmpfiles.d<span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Get directories and print 15.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; files.filter<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.isDirectory<span class="org-rainbow-delimiters-depth-1">)</span>.take<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
/etc/systemd
/etc/adobe
/etc/libreoffice
/etc/rc_keymaps
/etc/acpi
/etc/pkcs11
/etc/modules-load.d
/etc/gufw
/etc/security
/etc/tmpfiles.d
/etc/ppp
/etc/iptables
/etc/pulse
/etc/xinetd.d
/etc/ca-certificates

<span class="org-comment-delimiter">// </span><span class="org-comment">Filter 5 files   </span>
scala&gt; files.filter<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.isFile<span class="org-rainbow-delimiters-depth-1">)</span>.take<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res96</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span>java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span>/etc/motd, /etc/gemrc, /etc/ld.so.cache, /etc/environment, /etc/sensors3.conf<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; files.filter<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.isFile<span class="org-rainbow-delimiters-depth-1">)</span>.take<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
/etc/motd
/etc/gemrc
/etc/ld.so.cache
/etc/environment
/etc/sensors3.conf
/etc/gshadow
/etc/cron.deny
/etc/shadow-
/etc/vdpau_wrapper.cfg
/etc/pacman.conf
/etc/cpufreq-bench.conf
/etc/makepkg.conf
/etc/ld.so.conf
/etc/fstab
/etc/host.conf

scala&gt; <span class="org-keyword">:</span><span class="org-type">paste</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Entering paste mode (ctrl-D to finish)</span>

files
  .filter<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.isFile<span class="org-rainbow-delimiters-depth-1">)</span>
  .take<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-1">)</span>
  .foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Exiting paste mode, now interpreting.</span>

/etc/motd
/etc/gemrc
/etc/ld.so.cache
/etc/environment
/etc/sensors3.conf
/etc/gshadow
/etc/cron.deny
/etc/shadow-
/etc/vdpau_wrapper.cfg
/etc/pacman.conf
/etc/cpufreq-bench.conf
/etc/makepkg.conf
/etc/ld.so.conf
/etc/fstab
/etc/host.conf


scala&gt; files filter <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.isFile<span class="org-rainbow-delimiters-depth-1">)</span> take <span class="org-constant">15</span> foreach println
/etc/motd
/etc/gemrc
/etc/ld.so.cache
/etc/environment
/etc/sensors3.conf
/etc/gshadow
/etc/cron.deny
/etc/shadow-
/etc/vdpau_wrapper.cfg
/etc/pacman.conf
/etc/cpufreq-bench.conf
/etc/makepkg.conf
/etc/ld.so.conf
/etc/fstab
/etc/host.conf
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-3-2" class="outline-5">
<h5 id="sec-1-7-3-2"><span class="section-number-5">1.7.3.2</span> Mutable List</h5>
<div class="outline-text-5" id="text-1-7-3-2">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> collection.mutable.<span class="org-constant">ListBuffer</span>
<span class="org-keyword">import</span> collection.mutable.<span class="org-constant">ListBuffer</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">xs</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]()</span>
<span class="org-function-name">xs</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.mutable.<span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span> to <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>i <span class="org-keyword">=&gt;</span> xs.append<span class="org-rainbow-delimiters-depth-2">(</span>i.toDouble * <span class="org-constant">2.5</span> - <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; xs
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.mutable.<span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-1.5</span>, <span class="org-constant">1.0</span>, <span class="org-constant">3.5</span>, <span class="org-constant">6.0</span>, <span class="org-constant">8.5</span>, <span class="org-constant">11.0</span>, <span class="org-constant">13.5</span>, <span class="org-constant">16.0</span>, <span class="org-constant">18.5</span>, <span class="org-constant">21.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-3-3" class="outline-5">
<h5 id="sec-1-7-3-3"><span class="section-number-5">1.7.3.3</span> Mutable Maps&#xa0;&#xa0;&#xa0;<span class="tag"><span class="collection">collection</span>&#xa0;<span class="map">map</span>&#xa0;<span class="hash">hash</span></span></h5>
<div class="outline-text-5" id="text-1-7-3-3">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> scala.collection.mutable.<span class="org-constant">Map</span>
<span class="org-keyword">import</span> scala.collection.mutable.<span class="org-constant">Map</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">hmap1</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]()</span>
<span class="org-function-name">hmap1</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.mutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span>,<span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; hmap1 += <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span> -&gt; <span class="org-string">"Netherlands"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">hmap1</span>.<span class="org-keyword">type</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span> -&gt; <span class="org-constant">Netherlands</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; hmap1 += <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span> -&gt; <span class="org-string">"Mexico"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res50</span><span class="org-keyword">:</span> <span class="org-type">hmap1</span>.<span class="org-keyword">type</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span> -&gt; <span class="org-constant">Mexico</span>, <span class="org-constant">1</span> -&gt; <span class="org-constant">Netherlands</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; hmap1 += <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span> -&gt; <span class="org-string">"Italy"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res51</span><span class="org-keyword">:</span> <span class="org-type">hmap1</span>.<span class="org-keyword">type</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span> -&gt; <span class="org-constant">Mexico</span>, <span class="org-constant">1</span> -&gt; <span class="org-constant">Netherlands</span>, <span class="org-constant">3</span> -&gt; <span class="org-constant">Italy</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; hmap1 += <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span> -&gt; <span class="org-string">"Japan"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-function-name">res52</span><span class="org-keyword">:</span> <span class="org-type">hmap1</span>.<span class="org-keyword">type</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span> -&gt; <span class="org-constant">Mexico</span>, <span class="org-constant">10</span> -&gt; <span class="org-constant">Japan</span>, <span class="org-constant">1</span> -&gt; <span class="org-constant">Netherlands</span>, <span class="org-constant">3</span> -&gt; <span class="org-constant">Italy</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;
scala&gt; hmap1
<span class="org-function-name">res53</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.mutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span>,<span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span> -&gt; <span class="org-constant">Mexico</span>, <span class="org-constant">10</span> -&gt; <span class="org-constant">Japan</span>, <span class="org-constant">1</span> -&gt; <span class="org-constant">Netherlands</span>, <span class="org-constant">3</span> -&gt; <span class="org-constant">Italy</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; hmap1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res54</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Italy</span>

scala&gt; hmap1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res55</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Japan</span>

scala&gt; hmap1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.util.NoSuchElementException</span><span class="org-keyword">:</span> <span class="org-type">key</span> not found<span class="org-keyword">:</span> <span class="org-constant">100</span>
  at scala.collection.<span class="org-constant">MapLike</span>$class.default<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MapLike</span>.scala<span class="org-keyword">:</span><span class="org-constant">228</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.<span class="org-constant">AbstractMap</span>.default<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Map</span>.scala<span class="org-keyword">:</span><span class="org-constant">59</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.collection.mutable.<span class="org-constant">HashMap</span>.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">HashMap</span>.scala<span class="org-keyword">:</span><span class="org-constant">65</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-4" class="outline-4">
<h4 id="sec-1-7-4"><span class="section-number-4">1.7.4</span> Seq Trait/Interface</h4>
<div class="outline-text-4" id="text-1-7-4">
<p>
Seq is trait or interface for collections with iterable interface and
defined order of elements such as Array, List, and Vector which
implement Seq trait. 
</p>

<p>
Example 1: Generalizing functions that operates over Seq collections.
</p>

<p>
The function printElements only works for Arrays of ints. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">def</span> <span class="org-function-name">printElements</span><span class="org-rainbow-delimiters-depth-1">(</span>xs<span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> xs foreach println 
defined function printElements
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> printElements<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>

<span class="org-keyword">@</span> printElements<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">cmd3.sc</span><span class="org-keyword">:</span><span class="org-constant">1</span><span class="org-keyword">:</span> <span class="org-keyword">type</span> mismatch;
 found   <span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>
 required<span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-keyword">val</span> <span class="org-variable-name">res3</span> <span class="org-keyword">=</span> printElements<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                             ^
<span class="org-constant">Compilation</span> <span class="org-constant">Failed</span>
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> printElements<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">cmd3.sc</span><span class="org-keyword">:</span><span class="org-constant">1</span><span class="org-keyword">:</span> <span class="org-keyword">type</span> mismatch;
 found   <span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.immutable.<span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>
 required<span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-keyword">val</span> <span class="org-variable-name">res3</span> <span class="org-keyword">=</span> printElements<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                               ^
<span class="org-constant">Compilation</span> <span class="org-constant">Failed</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
This function can be refactored in order to work with all those
collections by replacing Array with Seq.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">def</span> <span class="org-function-name">printElements</span><span class="org-rainbow-delimiters-depth-1">(</span>xs<span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> xs foreach println  
defined function printElements

<span class="org-keyword">@</span> printElements<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>  
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>

<span class="org-keyword">@</span> printElements<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>  
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>

<span class="org-keyword">@</span> printElements<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>  
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>
</pre>
</div>

<p>
Example 2: Some Seq operations. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">seq1</span><span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">seq1</span><span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">WrappedArray</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">seq2</span><span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">seq2</span><span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">seq3</span><span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">seq3</span><span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> seq1.sum 
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-keyword">@</span> seq2.sum 
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-keyword">@</span> seq3.sum 
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">8</span>


<span class="org-keyword">@</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>seq1, seq2, seq3<span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.sum<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">10</span>, <span class="org-constant">8</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>seq1, seq2, seq3<span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.product<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">24</span>, <span class="org-constant">24</span>, <span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> <span class="org-keyword">def</span> <span class="org-function-name">sum</span><span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> s.sum  
defined function sum
<span class="org-keyword">@</span> 

<span class="org-keyword">@</span> sum<span class="org-rainbow-delimiters-depth-1">(</span>seq1<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-keyword">@</span> sum<span class="org-rainbow-delimiters-depth-1">(</span>seq2<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-keyword">@</span> sum<span class="org-rainbow-delimiters-depth-1">(</span>seq3<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">8</span>
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> sum<span class="org-rainbow-delimiters-depth-1">(</span>seq4<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">seq4</span> <span class="org-keyword">=</span> scala.collection.mutable.<span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]()</span> 
<span class="org-function-name">seq4</span><span class="org-keyword">:</span> <span class="org-type">collection</span>.mutable.<span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> seq4.sum 
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
<span class="org-keyword">@</span> seq4.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span> 

<span class="org-keyword">@</span> seq4.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span> 

<span class="org-keyword">@</span> seq4.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span> 

<span class="org-keyword">@</span> seq4 
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">collection</span>.mutable.<span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> seq4.sum 
<span class="org-function-name">res25</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">6</span>
<span class="org-keyword">@</span>  
<span class="org-keyword">@</span> sum<span class="org-rainbow-delimiters-depth-1">(</span>seq4<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">6</span>
<span class="org-keyword">@</span>  

<span class="org-keyword">@</span> <span class="org-keyword">def</span> <span class="org-function-name">getSecond</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>xs<span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> xs<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span> 
defined function getSecond
<span class="org-keyword">@</span>  
getSecond
<span class="org-keyword">@</span> getSecond<span class="org-rainbow-delimiters-depth-1">(</span>seq1<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>
<span class="org-keyword">@</span> getSecond<span class="org-rainbow-delimiters-depth-1">(</span>seq2<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res31</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>
<span class="org-keyword">@</span> getSecond<span class="org-rainbow-delimiters-depth-1">(</span>seq3<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>
<span class="org-keyword">@</span> getSecond<span class="org-rainbow-delimiters-depth-1">(</span>seq4<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>
<span class="org-keyword">@</span>
</pre>
</div>

<p>
References:
</p>

<ul class="org-ul">
<li><b>Scala Standard Library 2.12.0 - scala.collection.Seq</b>. Available at
<a href="http://www.scala-lang.org/api/2.12.0/scala/collection/Seq.html">http://www.scala-lang.org/api/2.12.0/scala/collection/Seq.html</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Case classes and pattern matching</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Scala case classes are similar to Haskell algebraic data types and
supports pattern matching. It is useful to represent abstract syntax
trees and build interpreters and pasers.
</p>

<p>
<b>Example 1:</b> 
</p>

<ul class="org-ul">
<li>Sealed class means that it is not possible to define any other
sublclass of class Shape. 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-scala-font-lockXsealed">sealed</span> <span class="org-scala-font-lockXabstract">abstract</span> <span class="org-keyword">class</span> <span class="org-type">Shape</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Square</span>   <span class="org-rainbow-delimiters-depth-1">(</span>side<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span>                    <span class="org-keyword">extends</span> <span class="org-type">Shape</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Rectangle</span><span class="org-rainbow-delimiters-depth-1">(</span>height<span class="org-keyword">:</span> <span class="org-type">Double</span>, width<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span>   <span class="org-keyword">extends</span> <span class="org-type">Shape</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Circle</span>   <span class="org-rainbow-delimiters-depth-1">(</span>radius<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span>                  <span class="org-keyword">extends</span> <span class="org-type">Shape</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Triangle</span> <span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span>, c<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Shape</span>


<span class="org-keyword">def</span> <span class="org-function-name">computeArea</span><span class="org-rainbow-delimiters-depth-1">(</span>shape<span class="org-keyword">:</span> <span class="org-type">Shape</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> shape <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">Square</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>       <span class="org-keyword">=&gt;</span> x * x
  <span class="org-keyword">case</span> <span class="org-type">Rectangle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">w</span>, <span class="org-variable-name">h</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> w * h
  <span class="org-keyword">case</span> <span class="org-type">Circle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span><span class="org-rainbow-delimiters-depth-2">)</span>       <span class="org-keyword">=&gt;</span> <span class="org-constant">Math</span>.<span class="org-constant">PI</span> * r * r
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>               <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: Not implemented. See Heron's formula."</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">computePerimiter</span><span class="org-rainbow-delimiters-depth-1">(</span>shape<span class="org-keyword">:</span> <span class="org-type">Shape</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> shape <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">Square</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>         <span class="org-keyword">=&gt;</span> <span class="org-constant">4</span> * x
  <span class="org-keyword">case</span> <span class="org-type">Rectangle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">w</span>, <span class="org-variable-name">h</span><span class="org-rainbow-delimiters-depth-2">)</span>   <span class="org-keyword">=&gt;</span> <span class="org-constant">2</span> * <span class="org-rainbow-delimiters-depth-2">(</span>w + h<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-type">Circle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span><span class="org-rainbow-delimiters-depth-2">)</span>         <span class="org-keyword">=&gt;</span> <span class="org-constant">2</span> * <span class="org-constant">Math</span>.<span class="org-constant">PI</span> * r 
  <span class="org-keyword">case</span> <span class="org-type">Triangle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">a</span>, <span class="org-variable-name">b</span>, <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> a + b + c 
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">classify</span><span class="org-rainbow-delimiters-depth-1">(</span>shape<span class="org-keyword">:</span> <span class="org-type">Shape</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> shape <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">Square</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span>       <span class="org-keyword">=&gt;</span> <span class="org-string">"square"</span>
  <span class="org-keyword">case</span> <span class="org-type">Rectangle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>,<span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"rectangle"</span>
  <span class="org-keyword">case</span> <span class="org-type">Circle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span>       <span class="org-keyword">=&gt;</span> <span class="org-string">"circle"</span>
  <span class="org-keyword">case</span> <span class="org-type">Triangle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>,<span class="org-keyword">_</span>,<span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"triangle"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">s</span> <span class="org-keyword">=</span> <span class="org-constant">Square</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">s</span><span class="org-keyword">:</span> <span class="org-type">Square</span> <span class="org-keyword">=</span> <span class="org-constant">Square</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">r</span> <span class="org-keyword">=</span> <span class="org-constant">Rectangle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">r</span><span class="org-keyword">:</span> <span class="org-type">Rectangle</span> <span class="org-keyword">=</span> <span class="org-constant">Rectangle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>,<span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> <span class="org-constant">Circle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">c</span><span class="org-keyword">:</span> <span class="org-type">Circle</span> <span class="org-keyword">=</span> <span class="org-constant">Circle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">t</span> <span class="org-keyword">=</span> <span class="org-constant">Triangle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>, <span class="org-constant">4.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">t</span><span class="org-keyword">:</span> <span class="org-type">Triangle</span> <span class="org-keyword">=</span> <span class="org-constant">Triangle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>,<span class="org-constant">4.0</span>,<span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; 


scala&gt; computeArea<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">100.0</span>

scala&gt; computeArea<span class="org-rainbow-delimiters-depth-1">(</span>r<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">50.0</span>

scala&gt; computeArea<span class="org-rainbow-delimiters-depth-1">(</span>t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">Not</span> implemented. <span class="org-constant">See</span> heron formula.
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .computeArea<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt; 


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>s, r, t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Shape</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Square</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Rectangle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5.0</span>,<span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Triangle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2.0</span>,<span class="org-constant">4.0</span>,<span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>s, r, t<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Square</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Rectangle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>,<span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Triangle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>,<span class="org-constant">4.0</span>,<span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>s, r, t<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>classify<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>square, rectangle, triangle<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>s, r, t<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>computePerimiter<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">40.0</span>, <span class="org-constant">30.0</span>, <span class="org-constant">11.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Example 2: Abstract syntax tree.</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-scala-font-lockXsealed">sealed</span> <span class="org-scala-font-lockXabstract">abstract</span> <span class="org-keyword">class</span> <span class="org-type">Expr</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span>           <span class="org-keyword">extends</span> <span class="org-type">Expr</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Add</span><span class="org-rainbow-delimiters-depth-1">(</span>r<span class="org-keyword">:</span> <span class="org-type">Expr</span>, s<span class="org-keyword">:</span> <span class="org-type">Expr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Expr</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Sub</span><span class="org-rainbow-delimiters-depth-1">(</span>r<span class="org-keyword">:</span> <span class="org-type">Expr</span>, s<span class="org-keyword">:</span> <span class="org-type">Expr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Expr</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-1">(</span>r<span class="org-keyword">:</span> <span class="org-type">Expr</span>, s<span class="org-keyword">:</span> <span class="org-type">Expr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Expr</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">It is possible to define multiple interpreters for this AST.</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">This interpreter evaluates the AST </span>
<span class="org-keyword">def</span> <span class="org-function-name">evalExpr</span><span class="org-rainbow-delimiters-depth-1">(</span>expr<span class="org-keyword">:</span> <span class="org-type">Expr</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> expr <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-2">)</span>    <span class="org-keyword">=&gt;</span> n
  <span class="org-keyword">case</span> <span class="org-type">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> computeExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> + computeExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-type">Sub</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> computeExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> - computeExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> computeExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> * computeExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">This interpreter show the expresion </span>
<span class="org-keyword">def</span> <span class="org-function-name">showExpr</span><span class="org-rainbow-delimiters-depth-1">(</span>expr<span class="org-keyword">:</span> <span class="org-type">Expr</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> expr <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-2">)</span>    <span class="org-keyword">=&gt;</span> n.toString

  <span class="org-keyword">case</span> <span class="org-type">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x + <span class="org-string">" + "</span> + y
  <span class="org-keyword">case</span> <span class="org-type">Sub</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x + <span class="org-string">" - "</span> + y
  <span class="org-keyword">case</span> <span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x + <span class="org-string">" * "</span> + y    

  <span class="org-keyword">case</span> <span class="org-type">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x + <span class="org-string">" + ("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">")"</span>
  <span class="org-keyword">case</span> <span class="org-type">Sub</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x + <span class="org-string">" - ("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">")"</span>
  <span class="org-keyword">case</span> <span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x + <span class="org-string">" * ("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">")"</span>    

  <span class="org-keyword">case</span> <span class="org-type">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">") + "</span> + y
  <span class="org-keyword">case</span> <span class="org-type">Sub</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">") - "</span> + y
  <span class="org-keyword">case</span> <span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-type">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">") * "</span> + y    

  <span class="org-keyword">case</span> <span class="org-type">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">") + ("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">")"</span>
  <span class="org-keyword">case</span> <span class="org-type">Sub</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">") - ("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">")"</span>
  <span class="org-keyword">case</span> <span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">r</span>, <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">") * ("</span> + showExpr<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">")"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">This interpreter shows the expresion and its value </span>
<span class="org-keyword">def</span> <span class="org-function-name">showEval</span><span class="org-rainbow-delimiters-depth-1">(</span>expr<span class="org-keyword">:</span> <span class="org-type">Expr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>showExpr<span class="org-rainbow-delimiters-depth-3">(</span>expr<span class="org-rainbow-delimiters-depth-3">)</span> + <span class="org-string">" = "</span> + evalExpr<span class="org-rainbow-delimiters-depth-3">(</span>expr<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>



scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">e1</span> <span class="org-keyword">=</span> <span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">e1</span><span class="org-keyword">:</span> <span class="org-type">Val</span> <span class="org-keyword">=</span> <span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">e2</span> <span class="org-keyword">=</span> <span class="org-constant">Add</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">e2</span><span class="org-keyword">:</span> <span class="org-type">Add</span> <span class="org-keyword">=</span> <span class="org-constant">Add</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>,<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">e3</span> <span class="org-keyword">=</span> <span class="org-constant">Mul</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-2">)</span>, e2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">e3</span><span class="org-keyword">:</span> <span class="org-type">Mul</span> <span class="org-keyword">=</span> <span class="org-constant">Mul</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-2">)</span>,<span class="org-constant">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-3">)</span>,<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">e4</span> <span class="org-keyword">=</span> <span class="org-constant">Sub</span><span class="org-rainbow-delimiters-depth-1">(</span>e3, e1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">e4</span><span class="org-keyword">:</span> <span class="org-type">Sub</span> <span class="org-keyword">=</span> <span class="org-constant">Sub</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Mul</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-3">)</span>,<span class="org-constant">Add</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-4">)</span>,<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>,<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; evalExpr<span class="org-rainbow-delimiters-depth-1">(</span>e1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res56</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; evalExpr<span class="org-rainbow-delimiters-depth-1">(</span>e2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res57</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; evalExpr<span class="org-rainbow-delimiters-depth-1">(</span>e3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res58</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">45</span>

scala&gt; evalExpr<span class="org-rainbow-delimiters-depth-1">(</span>e4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res59</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">35</span>


scala&gt; showExpr<span class="org-rainbow-delimiters-depth-1">(</span>e1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res60</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; showExpr<span class="org-rainbow-delimiters-depth-1">(</span>e2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res61</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">10</span> + <span class="org-constant">5</span>

scala&gt; showExpr<span class="org-rainbow-delimiters-depth-1">(</span>e3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res62</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">3</span> * <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span> + <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; showExpr<span class="org-rainbow-delimiters-depth-1">(</span>e4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res63</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span> * <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span> + <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> - <span class="org-constant">10</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>e1, e2, e3, e4<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Add</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>,<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Mul</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-2">)</span>,<span class="org-constant">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-3">)</span>,<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Sub</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Mul</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-3">)</span>,<span class="org-constant">Add</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-4">)</span>,<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>,<span class="org-constant">Val</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>e1, e2, e3, e4<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>showEval<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">10</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-constant">10</span> + <span class="org-constant">5</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>
<span class="org-constant">3</span> * <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span> + <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">45</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span> * <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span> + <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> - <span class="org-constant">10</span> <span class="org-keyword">=</span> <span class="org-constant">35</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> Pattern Matching</h3>
<div class="outline-text-3" id="text-1-9">
</div><div id="outline-container-sec-1-9-1" class="outline-4">
<h4 id="sec-1-9-1"><span class="section-number-4">1.9.1</span> Pattern matching numbers</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
Example 1 - Show month name. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">getMonthName</span><span class="org-rainbow-delimiters-depth-1">(</span>month<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> month <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-constant">1</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"January"</span>
  <span class="org-keyword">case</span> <span class="org-constant">2</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"February"</span>
  <span class="org-keyword">case</span> <span class="org-constant">3</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"March"</span>
  <span class="org-keyword">case</span> <span class="org-constant">4</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"April"</span>
  <span class="org-keyword">case</span> <span class="org-constant">5</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"May"</span>
  <span class="org-keyword">case</span> <span class="org-constant">6</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"June"</span>
  <span class="org-keyword">case</span> <span class="org-constant">7</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"July"</span>
  <span class="org-keyword">case</span> <span class="org-constant">8</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"August"</span>
  <span class="org-keyword">case</span> <span class="org-constant">9</span>  <span class="org-keyword">=&gt;</span> <span class="org-string">"September"</span>
  <span class="org-keyword">case</span> <span class="org-constant">10</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"October"</span>
  <span class="org-keyword">case</span> <span class="org-constant">11</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"November"</span>
  <span class="org-keyword">case</span> <span class="org-constant">12</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"December"</span>
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>  <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: Invalid month"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; getMonthName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res75</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">January</span>

scala&gt; getMonthName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res76</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">September</span>

scala&gt; getMonthName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">Invalid</span> month
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .getMonthName<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">26</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided


<span class="org-keyword">def</span> <span class="org-function-name">getMonthName2</span><span class="org-rainbow-delimiters-depth-1">(</span>month<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> month <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-constant">1</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"January"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">2</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"February"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">3</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"March"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">4</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"April"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">5</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"May"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">6</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"June"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">7</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"July"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">8</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"August"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">9</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"September"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">10</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"October"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">11</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"November"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">12</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"December"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">None</span> 
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; getMonthName2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res78</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">January</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; getMonthName2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res79</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">December</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; getMonthName2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res80</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; getMonthName2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res81</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-9-2" class="outline-4">
<h4 id="sec-1-9-2"><span class="section-number-4">1.9.2</span> Pattern matching with strings.</h4>
<div class="outline-text-4" id="text-1-9-2">
<p>
Example 2 - Pattern matching with strings. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">showCurrencyName</span><span class="org-rainbow-delimiters-depth-1">(</span>cur<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> cur <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-string">"USD"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"United States Dollar"</span>
  <span class="org-keyword">case</span> <span class="org-string">"CAD"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Canadian Dollar"</span>
  <span class="org-keyword">case</span> <span class="org-string">"EUR"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Euro"</span>
  <span class="org-keyword">case</span> <span class="org-string">"AUD"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Australian Dollar"</span>
  <span class="org-keyword">case</span> <span class="org-string">"GBP"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Great Britain Pound"</span>
  <span class="org-keyword">case</span> <span class="org-string">"JPY"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Japanese Yen"</span>
  <span class="org-keyword">case</span> <span class="org-string">"CNY"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Chinese Yuan / Reminbi"</span>
  <span class="org-keyword">case</span> <span class="org-string">"HKD"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Hong Kong Dollar"</span>
  <span class="org-keyword">case</span> <span class="org-string">"BRL"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Brazilian Real"</span>
  <span class="org-keyword">case</span> <span class="org-string">"MXN"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Mexican Peso"</span>
  <span class="org-keyword">case</span> <span class="org-string">"CHF"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Switzerland Franc"</span>
  <span class="org-keyword">case</span> <span class="org-string">"XBT"</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"Bitcoin"</span>
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>     <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: I don't the name of this currency. Please teach me it."</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; showCurrencyName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"CNY"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res102</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Chinese</span> <span class="org-constant">Yuan</span> / <span class="org-constant">Reminbi</span>

scala&gt; showCurrencyName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"JPY"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res103</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Japanese</span> <span class="org-constant">Yen</span>

scala&gt; showCurrencyName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"HKD"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res104</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Hong</span> <span class="org-constant">Kong</span> <span class="org-constant">Dollar</span>

scala&gt; showCurrencyName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"JPYx"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">I</span> don<span class="org-string">'t</span> the name of <span class="org-keyword">this</span> currency. <span class="org-constant">Please</span> teach me it.
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .showCurrencyName<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">26</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"CNY"</span>, <span class="org-string">"HKD"</span>, <span class="org-string">"AUD"</span>, <span class="org-string">"BRL"</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>showCurrencyName<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Chinese</span> <span class="org-constant">Yuan</span> / <span class="org-constant">Reminbi</span>
<span class="org-constant">Hong</span> <span class="org-constant">Kong</span> <span class="org-constant">Dollar</span>
<span class="org-constant">Australian</span> <span class="org-constant">Dollar</span>
<span class="org-constant">Brazilian</span> <span class="org-constant">Real</span>

scala&gt; showCurrencyName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"XBT"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res109</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Bitcoin</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-9-3" class="outline-4">
<h4 id="sec-1-9-3"><span class="section-number-4">1.9.3</span> Pattern with number and case-classes.</h4>
<div class="outline-text-4" id="text-1-9-3">
<p>
Example 3 - Pattern with number and case-classes. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-scala-font-lockXabstract">abstract</span> <span class="org-scala-font-lockXsealed">sealed</span> <span class="org-keyword">class</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Jan</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Feb</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Mar</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Apr</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">May</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Jun</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Jul</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Aug</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Sep</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Oct</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Nov</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Dec</span> <span class="org-keyword">extends</span> <span class="org-type">Month</span>

<span class="org-keyword">def</span> <span class="org-function-name">getMonthName</span><span class="org-rainbow-delimiters-depth-1">(</span>month<span class="org-keyword">:</span> <span class="org-type">Month</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> month <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-constant">Jan</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"January"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Feb</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"February"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Mar</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"March"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Apr</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"April"</span>
  <span class="org-keyword">case</span> <span class="org-constant">May</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"May"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Jun</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"June"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Jul</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"July"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Aug</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"August"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Sep</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"September"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Oct</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"October"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Nov</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"November"</span>
  <span class="org-keyword">case</span> <span class="org-constant">Dec</span> <span class="org-keyword">=&gt;</span> <span class="org-string">"December"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">numberToMonth</span><span class="org-rainbow-delimiters-depth-1">(</span>n<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> n <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-constant">1</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Jan</span>
  <span class="org-keyword">case</span> <span class="org-constant">2</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Feb</span>
  <span class="org-keyword">case</span> <span class="org-constant">3</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Mar</span>
  <span class="org-keyword">case</span> <span class="org-constant">4</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Apr</span>
  <span class="org-keyword">case</span> <span class="org-constant">5</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">May</span>
  <span class="org-keyword">case</span> <span class="org-constant">6</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Jun</span>
  <span class="org-keyword">case</span> <span class="org-constant">7</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Jul</span>
  <span class="org-keyword">case</span> <span class="org-constant">8</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Aug</span>
  <span class="org-keyword">case</span> <span class="org-constant">9</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Sep</span>
  <span class="org-keyword">case</span> <span class="org-constant">10</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Oct</span>
  <span class="org-keyword">case</span> <span class="org-constant">11</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Nov</span>
  <span class="org-keyword">case</span> <span class="org-constant">12</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Dec</span>
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>  <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: Invalid month number."</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">numberToMonth2</span><span class="org-rainbow-delimiters-depth-1">(</span>n<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> n <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-constant">1</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Jan</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">2</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Feb</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">3</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Mar</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">4</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Apr</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">5</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">May</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">6</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Jun</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">7</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Jul</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">8</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Aug</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">9</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Sep</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">10</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Oct</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">11</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Nov</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">12</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Dec</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">None</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; getMonthName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Jan</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res85</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">January</span>

scala&gt; getMonthName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Feb</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res86</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">February</span>

scala&gt; getMonthName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Aug</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res87</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">August</span>

scala&gt; getMonthName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Dec</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res88</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">December</span>


scala&gt; numberToMonth<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res93</span><span class="org-keyword">:</span> <span class="org-type">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Month</span> <span class="org-keyword">=</span> <span class="org-constant">Jan</span>

scala&gt; numberToMonth<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res94</span><span class="org-keyword">:</span> <span class="org-type">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Month</span> <span class="org-keyword">=</span> <span class="org-constant">Sep</span>

scala&gt; numberToMonth<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">Invalid</span> month number.
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .numberToMonth<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">39</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided


scala&gt; numberToMonth2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res97</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Month</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Jan</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; numberToMonth2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res98</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Month</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Feb</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; numberToMonth2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res99</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Month</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Dec</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; numberToMonth2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res100</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Month</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; numberToMonth2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res101</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Month</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-9-4" class="outline-4">
<h4 id="sec-1-9-4"><span class="section-number-4">1.9.4</span> Pattern matching with conditional.</h4>
<div class="outline-text-4" id="text-1-9-4">
<p>
Example 4 - Pattern matching with conditional. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">classifyNumber</span><span class="org-rainbow-delimiters-depth-1">(</span>n<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> n <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-variable-name">x</span> <span class="org-keyword">if</span> x &lt; <span class="org-constant">0</span>               <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Negative number"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">0</span>                        <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"zero"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-variable-name">x</span> <span class="org-keyword">if</span> x &gt; <span class="org-constant">0</span> &amp;&amp; x % <span class="org-constant">2</span> == <span class="org-constant">0</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Positive even number"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>                        <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Positive odd number"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; classifyNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Negative</span> number

scala&gt; classifyNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Negative</span> number

scala&gt; classifyNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
zero

scala&gt; classifyNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Positive</span> even number

scala&gt; classifyNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">21</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Positive</span> odd number

scala&gt; classifyNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">210</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Positive</span> even number

scala&gt; classifyNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1213</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Positive</span> odd number
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-9-5" class="outline-4">
<h4 id="sec-1-9-5"><span class="section-number-4">1.9.5</span> Recursive functions</h4>
<div class="outline-text-4" id="text-1-9-5">
<p>
Example 5 - Recursive functions. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">factorial</span><span class="org-rainbow-delimiters-depth-1">(</span>n<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> n <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-variable-name">a</span> <span class="org-keyword">if</span> a &lt; <span class="org-constant">0</span> <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: Invalid input."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-constant">0</span> | <span class="org-constant">1</span>      <span class="org-keyword">=&gt;</span> <span class="org-constant">1</span>
  <span class="org-keyword">case</span> <span class="org-variable-name">k</span>          <span class="org-keyword">=&gt;</span> k * factorial<span class="org-rainbow-delimiters-depth-2">(</span>k - <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; factorial<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res126</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">24</span>

scala&gt; factorial<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res127</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">120</span>

scala&gt; factorial<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">Invalid</span> input.
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .factorial<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">14</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt; factorial<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res129</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; factorial<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res130</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>
</pre>
</div>

<p>
Example 6 - Recursive list functions. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">1</span>::<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res118</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">2</span>::<span class="org-constant">1</span>::<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res119</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">4</span>::<span class="org-constant">2</span>::<span class="org-constant">1</span>::<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res120</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>, <span class="org-constant">2</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-keyword">def</span> <span class="org-function-name">sumList</span><span class="org-rainbow-delimiters-depth-1">(</span>list<span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> list <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">0</span>
  <span class="org-keyword">case</span> <span class="org-variable-name">hd</span><span class="org-type">::</span><span class="org-variable-name">tl</span> <span class="org-keyword">=&gt;</span> hd + sumList<span class="org-rainbow-delimiters-depth-2">(</span>tl<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; sumList<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res121</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; 

<span class="org-keyword">def</span> <span class="org-function-name">foreach</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)(</span>list<span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span> <span class="org-keyword">=</span> list <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Do nothing.</span>
  <span class="org-keyword">case</span> <span class="org-variable-name">hd</span><span class="org-type">::</span><span class="org-variable-name">tl</span> <span class="org-keyword">=&gt;</span> fn<span class="org-rainbow-delimiters-depth-2">(</span>hd<span class="org-rainbow-delimiters-depth-2">)</span> ; foreach<span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-rainbow-delimiters-depth-2">)(</span>tl<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">foreach</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)(</span>list<span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span> <span class="org-keyword">=</span> list <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">case</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Do nothing.</span>
     |   <span class="org-keyword">case</span> <span class="org-variable-name">hd</span><span class="org-type">::</span><span class="org-variable-name">tl</span> <span class="org-keyword">=&gt;</span> fn<span class="org-rainbow-delimiters-depth-2">(</span>hd<span class="org-rainbow-delimiters-depth-2">)</span> ; foreach<span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-rainbow-delimiters-depth-2">)(</span>tl<span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">foreach</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)(</span>list<span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Unit</span>

scala&gt; foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">printAll</span> <span class="org-keyword">=</span> foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">printAll</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Any</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function1&gt;



scala&gt; printAll<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Hello"</span>, <span class="org-string">"World"</span>, <span class="org-string">"Scala"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Hello</span>
<span class="org-constant">World</span>
<span class="org-constant">Scala</span>

scala&gt; printAll<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-9-6" class="outline-4">
<h4 id="sec-1-9-6"><span class="section-number-4">1.9.6</span> Destructuring</h4>
<div class="outline-text-4" id="text-1-9-6">
</div><div id="outline-container-sec-1-9-6-1" class="outline-5">
<h5 id="sec-1-9-6-1"><span class="section-number-5">1.9.6.1</span> Destructuring tuples</h5>
<div class="outline-text-5" id="text-1-9-6-1">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">a</span>, <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">a</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-function-name">b</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>

scala&gt; a + b
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">30</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">tpl</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-string">"hello"</span>, <span class="org-string">'x'</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">tpl</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span>, <span class="org-constant">Char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>,hello,x<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> tpl
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-function-name">y</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> hello
<span class="org-function-name">z</span><span class="org-keyword">:</span> <span class="org-type">Char</span> <span class="org-keyword">=</span> x

scala&gt; x
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; y
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> hello

scala&gt; z
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Char</span> <span class="org-keyword">=</span> x
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-9-6-2" class="outline-5">
<h5 id="sec-1-9-6-2"><span class="section-number-5">1.9.6.2</span> Destructuring List, Arrays and other collections</h5>
<div class="outline-text-5" id="text-1-9-6-2">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">a</span>, <span class="org-variable-name">b</span>, <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">a</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>
<span class="org-function-name">b</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>
<span class="org-function-name">c</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">a</span>, <span class="org-variable-name">b</span>, <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">scala.MatchError</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>of <span class="org-keyword">class</span> <span class="org-type">scala</span>.collection.immutable.$colon$colon<span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided


scala&gt; <span class="org-keyword">val</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>
<span class="org-function-name">y</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>
<span class="org-function-name">z</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

scala&gt; x + y + z
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">6</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-9-6-3" class="outline-5">
<h5 id="sec-1-9-6-3"><span class="section-number-5">1.9.6.3</span> Destructuring case classes</h5>
<div class="outline-text-5" id="text-1-9-6-3">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">(</span>
  id<span class="org-keyword">:</span>       <span class="org-type">Int</span>,
  name<span class="org-keyword">:</span>     <span class="org-type">String</span>,
  price<span class="org-keyword">:</span>    <span class="org-type">BigDecimal</span>,
  quantity<span class="org-keyword">:</span> <span class="org-type">Int</span>
<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">inventory</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-constant">Product</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">100</span>, <span class="org-string">"Sugar"</span>, <span class="org-constant">1.24</span>, <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-constant">Product</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">201</span>, <span class="org-string">"Carton of Milk"</span>, <span class="org-constant">2.25</span>, <span class="org-constant">200</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-constant">Product</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">300</span>, <span class="org-string">"Carton of fresh orange juice"</span>, <span class="org-constant">4.5</span>, <span class="org-constant">300</span><span class="org-rainbow-delimiters-depth-2">)</span>,
<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">def</span> <span class="org-function-name">showProduct</span><span class="org-rainbow-delimiters-depth-1">(</span>product<span class="org-keyword">:</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">id</span>, <span class="org-variable-name">name</span>, <span class="org-variable-name">price</span>, <span class="org-variable-name">qnt</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> product
  println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"""</span>
<span class="org-string">name     = </span><span class="org-variable-name">${name}</span>
<span class="org-string">id       = </span><span class="org-variable-name">${id}</span>
<span class="org-string">price    = </span><span class="org-variable-name">${price}</span>
<span class="org-string">quantity = </span><span class="org-variable-name">${qnt}</span>
<span class="org-string">"""</span>.trim<span class="org-rainbow-delimiters-depth-3">()</span> + <span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>
  <span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative way without destructuring</span>
<span class="org-keyword">def</span> <span class="org-function-name">showProduct2</span><span class="org-rainbow-delimiters-depth-1">(</span>product<span class="org-keyword">:</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"""</span>
<span class="org-string">name     = </span><span class="org-variable-name">${product.name}</span>
<span class="org-string">id       = </span><span class="org-variable-name">${product.id}</span>
<span class="org-string">price    = </span><span class="org-variable-name">${prodcut.price}</span>
<span class="org-string">quantity = </span><span class="org-variable-name">${product.quantity}</span>
<span class="org-string">"""</span>.trim<span class="org-rainbow-delimiters-depth-3">()</span> + <span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>
  <span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">getInventoryValue</span><span class="org-rainbow-delimiters-depth-1">(</span>inventory<span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Product</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  inventory.foldLeft<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">0</span><span class="org-keyword">:</span> <span class="org-type">BigDecimal</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-3">(</span>acc, product<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span>
    <span class="org-keyword">val</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">_</span>, <span class="org-keyword">_</span>, <span class="org-variable-name">price</span>, <span class="org-variable-name">qnt</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> product
    acc + price * qnt 
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt;  inventory foreach showProduct
name     <span class="org-keyword">=</span> <span class="org-constant">Sugar</span>
id       <span class="org-keyword">=</span> <span class="org-constant">100</span>
price    <span class="org-keyword">=</span> <span class="org-constant">1.24</span>
quantity <span class="org-keyword">=</span> <span class="org-constant">100</span>

name     <span class="org-keyword">=</span> <span class="org-constant">Carton</span> of <span class="org-constant">Milk</span>
id       <span class="org-keyword">=</span> <span class="org-constant">201</span>
price    <span class="org-keyword">=</span> <span class="org-constant">2.25</span>
quantity <span class="org-keyword">=</span> <span class="org-constant">200</span>

name     <span class="org-keyword">=</span> <span class="org-constant">Carton</span> of fresh orange juice
id       <span class="org-keyword">=</span> <span class="org-constant">300</span>
price    <span class="org-keyword">=</span> <span class="org-constant">4.5</span>
quantity <span class="org-keyword">=</span> <span class="org-constant">300</span>


scala&gt; getInventoryValue<span class="org-rainbow-delimiters-depth-1">(</span>inventory<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">BigDecimal</span> <span class="org-keyword">=</span> <span class="org-constant">1924.00</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10"><span class="section-number-3">1.10</span> Option type</h3>
<div class="outline-text-3" id="text-1-10">
</div><div id="outline-container-sec-1-10-1" class="outline-4">
<h4 id="sec-1-10-1"><span class="section-number-4">1.10.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-10-1">
<p>
Scala's Option type is similar to Haskell's Maybe and to OCaml's
Option type which allows to deal with null values, avoid nested null
checkings and also lots of null exceptions or null pointer exception.
</p>
</div>
</div>

<div id="outline-container-sec-1-10-2" class="outline-4">
<h4 id="sec-1-10-2"><span class="section-number-4">1.10.2</span> Basic operations</h4>
<div class="outline-text-4" id="text-1-10-2">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">Some</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">None</span>
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">None</span>.<span class="org-keyword">type</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Null</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"opt"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span>opt<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-constant">None</span> <span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-10-3" class="outline-4">
<h4 id="sec-1-10-3"><span class="section-number-4">1.10.3</span> Pattern matching</h4>
<div class="outline-text-4" id="text-1-10-3">
<p>
Pattern matching an Option value 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">testPatternMatching</span><span class="org-rainbow-delimiters-depth-1">(</span>opt<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> opt <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">case</span> <span class="org-type">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Received: "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">case</span> <span class="org-constant">None</span>    <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Received: None"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">testPatternMatching</span><span class="org-rainbow-delimiters-depth-1">(</span>opt<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> opt <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |     <span class="org-keyword">case</span> <span class="org-type">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Received: "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span>
     |     <span class="org-keyword">case</span> <span class="org-constant">None</span>    <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Received: None"</span><span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">testPatternMatching</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>opt<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Unit</span>


scala&gt; testPatternMatching<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"avoiding null exceptions"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Received</span><span class="org-keyword">:</span> <span class="org-type">avoiding</span> <span class="org-constant">null</span> exceptions

scala&gt; testPatternMatching<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Received</span><span class="org-keyword">:</span> <span class="org-type">None</span>

scala&gt; testPatternMatching<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"avoiding null exceptions"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Received</span><span class="org-keyword">:</span> <span class="org-type">avoiding</span> <span class="org-constant">null</span> exceptions

scala&gt; testPatternMatching<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Received</span><span class="org-keyword">:</span> <span class="org-type">None</span>
</pre>
</div>

<p>
Pattern matching an option tuple: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">safeSum</span><span class="org-rainbow-delimiters-depth-1">(</span>optA<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">]</span>, optB<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>optA, optB<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Some</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-type">Some</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span>a + b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>                  <span class="org-keyword">=&gt;</span> <span class="org-constant">None</span> 
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; safeSum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">30.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; safeSum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; safeSum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; safeSum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-10-4" class="outline-4">
<h4 id="sec-1-10-4"><span class="section-number-4">1.10.4</span> Option type as a collection</h4>
<div class="outline-text-4" id="text-1-10-4">
<p>
The Scala's option is similar to Scala's collections like List, Array
and Map with lots of useful higher order methods that accepts
functions as argument. 
</p>

<p>
<b>Get</b> - Get the value of wrapped by the option type, but throws an
exception if it is None.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">x1</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">x1</span><span class="org-keyword">:</span> <span class="org-type">Some</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Hello</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">x2</span> <span class="org-keyword">=</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"World"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">x2</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">World</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">x3</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
<span class="org-function-name">x3</span><span class="org-keyword">:</span> <span class="org-type">None</span>.<span class="org-keyword">type</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">x4</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">x4</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>


scala&gt; x1.get
<span class="org-function-name">res50</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Hello</span>

scala&gt; x2.get
<span class="org-function-name">res51</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">World</span>

scala&gt; x3.get
<span class="org-function-name">java.util.NoSuchElementException</span><span class="org-keyword">:</span> <span class="org-type">None</span>.get
  at scala.<span class="org-constant">None</span>$.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span>.scala<span class="org-keyword">:</span><span class="org-constant">349</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided

scala&gt; x4.get
<span class="org-function-name">java.util.NoSuchElementException</span><span class="org-keyword">:</span> <span class="org-type">None</span>.get
  at scala.<span class="org-constant">None</span>$.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span>.scala<span class="org-keyword">:</span><span class="org-constant">349</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">None</span>$.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span>.scala<span class="org-keyword">:</span><span class="org-constant">347</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided

scala&gt;
</pre>
</div>


<p>
<b>GetOrElse</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">None</span>.getOrElse <span class="org-keyword">_</span>
<span class="org-function-name">res111</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">=&gt;</span> <span class="org-constant">Nothing</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Nothing</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>.getOrElse<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res112</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.getOrElse<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res113</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>.getOrElse<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res114</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> hello

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-1">)</span>.getOrElse<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res115</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> world

scala&gt; <span class="org-constant">None</span>.getOrElse<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res116</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> world
</pre>
</div>

<p>
<b>Map:</b> - Apply a function to the option value wrapped by the option type.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">o1</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">o1</span><span class="org-keyword">:</span> <span class="org-type">Some</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Test with Some value</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">o2</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
<span class="org-function-name">o2</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; o1.map<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">30</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; o1.map<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x + <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res26</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">40</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Test with None values </span>
<span class="org-comment-delimiter">//</span>
scala&gt; o2 
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; o2 map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; o2 map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x + <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res29</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
<b>Flatmap</b> - It is similar to Haskell bind operator (&gt;&gt;=). But in
Scala it is method, not a function as in Haskell. 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>x &gt; <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">else</span> <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>x &gt; <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">else</span> <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>x &gt; <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">else</span> <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res35</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>


scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> flatMap <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>x &gt; <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">else</span> <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res36</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span> flatMap <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>x &gt; <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">else</span> <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res37</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> flatMap <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>x &gt; <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">else</span> <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res38</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
<b>Flatten</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>.flatten
<span class="org-function-name">res143</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>.flatten
<span class="org-function-name">res144</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Nothing</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-constant">None</span>.flatten
<span class="org-function-name">res145</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Nothing</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.flatten 
<span class="org-function-name">res146</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.flatten 
<span class="org-function-name">res147</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
<b>Foreach</b> - Apply a function that performs some action to the value
wrapped by the option type.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Scala Option"</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span>s <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Message = "</span> + s<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Message</span> <span class="org-keyword">=</span> <span class="org-constant">Scala</span> <span class="org-constant">Option</span>

scala&gt; <span class="org-constant">None</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span>s <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Message = "</span> + s<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Scala Option"</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span>s <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Message = "</span> + s<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Message</span> <span class="org-keyword">=</span> <span class="org-constant">Scala</span> <span class="org-constant">Option</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span>s <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Message = "</span> + s<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt;
</pre>
</div>

<p>
<b>Find</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>.find<span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> a &lt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res122</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>.find<span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> a &lt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res123</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span> find <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> a &lt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res126</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.find<span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> a &lt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res125</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
<b>Filter</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>.filter <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> a &gt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res131</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>.filter <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> a &gt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res132</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.filter <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> a &gt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res133</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>.filter <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span> &gt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res137</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>.filter <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span> &gt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res138</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.filter <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span> &gt; <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res139</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
<b>Conversions</b> 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>.toArray
<span class="org-function-name">res160</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Scala</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.toArray
<span class="org-function-name">res161</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>.toArray
<span class="org-function-name">res162</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Scala</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.toArray
<span class="org-function-name">res163</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>.toList
<span class="org-function-name">res164</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Scala</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>.toList
<span class="org-function-name">res165</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Scala"</span><span class="org-rainbow-delimiters-depth-1">)</span>.toList
<span class="org-function-name">res166</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Scala</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-10-5" class="outline-4">
<h4 id="sec-1-10-5"><span class="section-number-4">1.10.5</span> For-loop</h4>
<div class="outline-text-4" id="text-1-10-5">
<p>
For-loop: Option's for-loop is similar to Array's or list for-loop.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span>s <span class="org-keyword">&lt;-</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"x = "</span> + s<span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">1</span>
x <span class="org-keyword">=</span> <span class="org-constant">2</span>
x <span class="org-keyword">=</span> <span class="org-constant">3</span>
x <span class="org-keyword">=</span> <span class="org-constant">4</span>

scala&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span>s <span class="org-keyword">&lt;-</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"scala"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Message = "</span> + s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Message</span> <span class="org-keyword">=</span> scala

scala&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span>s <span class="org-keyword">&lt;-</span> <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Message = "</span> + s<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-10-6" class="outline-4">
<h4 id="sec-1-10-6"><span class="section-number-4">1.10.6</span> For-comprehensions</h4>
<div class="outline-text-4" id="text-1-10-6">
<p>
Scala's for comprehension are very similar to Haskell's do-notation
for Monad. 
</p>

<p>
<b>Example 1:</b>
</p>

<p>
Scala:
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">safeSum</span><span class="org-rainbow-delimiters-depth-1">(</span>sa<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, sb<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    a <span class="org-keyword">&lt;-</span> sa
    b <span class="org-keyword">&lt;-</span> sb 
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> a + b
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; safeSum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res170</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">30</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; safeSum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res171</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; safeSum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res172</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>


<span class="org-comment-delimiter">/// </span><span class="org-comment">-- Expanding to for-notation  -------</span>

<span class="org-keyword">def</span> <span class="org-function-name">safeSum2</span><span class="org-rainbow-delimiters-depth-1">(</span>sa<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, sb<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  sa.flatMap <span class="org-rainbow-delimiters-depth-2">{</span> a <span class="org-keyword">=&gt;</span>
  sb.map     <span class="org-rainbow-delimiters-depth-3">{</span> b <span class="org-keyword">=&gt;</span> a + b<span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">@</span> safeSum2 <span class="org-keyword">_</span>
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>


<span class="org-keyword">@</span> safeSum2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> safeSum2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

<span class="org-keyword">@</span> safeSum2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res25</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
Haskell: 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-constructor">:</span>{
<span class="org-function-name">safeSum</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-definition">safeSum</span> sa sb <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
  a <span class="org-haskell-operator">&lt;-</span> sa
  b <span class="org-haskell-operator">&lt;-</span> sb
  return ( a <span class="org-haskell-operator">+</span> b)
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">safeSum</span> (<span class="org-haskell-constructor">Just</span> 10) (<span class="org-haskell-constructor">Just</span> 20)
<span class="org-haskell-constructor">Just</span> 30
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">safeSum</span> (<span class="org-haskell-type">Just</span> 10) <span class="org-haskell-type">Nothing</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">safeSum</span> <span class="org-haskell-type">Nothing</span> <span class="org-haskell-type">Nothing</span>
<span class="org-haskell-constructor">Nothing</span>
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
<b>Example 2:</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">both</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span>, <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-1">](</span>oa<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span>, ob<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    a <span class="org-keyword">&lt;-</span> oa
    b <span class="org-keyword">&lt;-</span> ob
    c <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>a, b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> c

scala&gt; both<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res214</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span>,hello<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; both<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res215</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>


<span class="org-keyword">def</span> <span class="org-function-name">both2</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span>, <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-1">](</span>oa<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span>, ob<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    a <span class="org-keyword">&lt;-</span> oa
    b <span class="org-keyword">&lt;-</span> ob
  <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> <span class="org-rainbow-delimiters-depth-1">(</span>a, b<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; both2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res216</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span>,hello<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; both2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res217</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; both2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, <span class="org-constant">None</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res218</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-10-7" class="outline-4">
<h4 id="sec-1-10-7"><span class="section-number-4">1.10.7</span> Avoiding null checking and null pointer exceptions</h4>
<div class="outline-text-4" id="text-1-10-7">
<p>
The function getClibpoardText gets a string from clibpoard. It is
non-safe and error prone as it is full of null checking and returns a
<span class="underline">null</span> <span class="underline">value</span>. If the developer forgets to check for null at the
point of use, it may lead the unexpected null-pointer exceptions at
runtime that cannot be spot at compile-time or spot by the type
system. 
</p>

<p>
It may get worse if the return value of this function is passed to
other functions that dont't check for null values.
</p>

<ul class="org-ul">
<li>Situation 1: getClibpoardText will null checking and with
possibility of returning null value.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> java.awt.<span class="org-constant">Toolkit</span>
<span class="org-keyword">import</span> java.awt.datatransfer.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">Clipboard</span>, <span class="org-constant">DataFlavor</span>, <span class="org-constant">Transferable</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">getClipboardText</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">clip</span> <span class="org-keyword">=</span> <span class="org-constant">Toolkit</span>.getDefaultToolkit<span class="org-rainbow-delimiters-depth-2">()</span>.getSystemClipboard<span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>clip == <span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">null</span>
  <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">data</span> <span class="org-keyword">=</span> clip.getContents<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>data != <span class="org-constant">null</span>  &amp;&amp; data.isDataFlavorSupported<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DataFlavor</span>.getTextPlainUnicodeFlavor<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      data.getTransferData<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">DataFlavor</span>.stringFlavor<span class="org-rainbow-delimiters-depth-3">)</span>.asInstanceOf<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span>
    <span class="org-keyword">else</span> 
      <span class="org-constant">null</span>    
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">User copies some text and run this function</span>
<span class="org-comment-delimiter">///</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">text1</span> <span class="org-keyword">=</span> getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">text1</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span>
"<span class="org-constant">A</span> <span class="org-keyword">class</span> <span class="org-type">that</span> implements a mechanism to transfer data using cut/copy/paste operations.
<span class="org-constant">FlavorListeners</span> may be registered on an instance of the <span class="org-constant">Clipboard</span> <span class="org-keyword">class</span> <span class="org-type">to</span> be notified about changes to the set of <span class="org-constant">DataFlavors</span> available on <span class="org-keyword">this</span> clipboard <span class="org-rainbow-delimiters-depth-1">(</span>see addFlavorListener<span class="org-rainbow-delimiters-depth-2">(</span>java.awt.datatransfer.<span class="org-constant">FlavorListener</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>.

"

scala&gt; text1.length
<span class="org-function-name">res188</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">305</span>


<span class="org-comment-delimiter">/// </span><span class="org-comment">User copies some image and run this function</span>
<span class="org-comment-delimiter">///</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">text2</span> <span class="org-keyword">=</span> getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">text2</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

scala&gt; text2.length
java.lang.<span class="org-constant">NullPointerException</span>
  ... <span class="org-constant">29</span> elided

scala&gt; <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">val</span> <span class="org-variable-name">text3</span> <span class="org-keyword">=</span> getClipboardText<span class="org-rainbow-delimiters-depth-2">()</span> ; <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>text3 != <span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-2">)</span> text3.length <span class="org-keyword">else</span> <span class="org-constant">null</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res190</span><span class="org-keyword">:</span> <span class="org-type">Any</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

<span class="org-keyword">def</span> <span class="org-function-name">tellSize1</span><span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"String size is = "</span> + s.length<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">User copies some text </span>
scala&gt; tellSize1<span class="org-rainbow-delimiters-depth-1">(</span>getClipboardText<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">String</span> size is <span class="org-keyword">=</span> <span class="org-constant">305</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">User copies some image. The function getClibpoardtext returns null.</span>
scala&gt; tellSize1<span class="org-rainbow-delimiters-depth-1">(</span>getClipboardText<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
java.lang.<span class="org-constant">NullPointerException</span>
  at .tellSize1<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">21</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided


<span class="org-keyword">def</span> <span class="org-function-name">tellSize2</span><span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>s != <span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-2">)</span>
     println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"String size is = "</span> + s.length<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; tellSize2<span class="org-rainbow-delimiters-depth-1">(</span>getClipboardText<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">String</span> size is <span class="org-keyword">=</span> <span class="org-constant">94</span>

scala&gt; tellSize2<span class="org-rainbow-delimiters-depth-1">(</span>getClipboardText<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
By refactoring the aforementioned code to use option type instead of
null values, it leads to a more concise and type-safe code where it is
no longer necessary to check for null values and there is no more risk
of unexpected null exceptions at run-time.
</p>

<ul class="org-ul">
<li>Situation 2: getClibpoardText with Option type.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> java.awt.<span class="org-constant">Toolkit</span>
<span class="org-keyword">import</span> java.awt.datatransfer.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">Clipboard</span>, <span class="org-constant">DataFlavor</span>, <span class="org-constant">Transferable</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">getClipboardText</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  clip <span class="org-keyword">&lt;-</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Toolkit</span>.getDefaultToolkit<span class="org-rainbow-delimiters-depth-3">()</span>.getSystemClipboard<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
  data <span class="org-keyword">&lt;-</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">(</span>clip.getContents<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">if</span> data.isDataFlavorSupported<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">DataFlavor</span>.getTextPlainUnicodeFlavor<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
  text <span class="org-keyword">=</span> data.getTransferData<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">DataFlavor</span>.stringFlavor<span class="org-rainbow-delimiters-depth-2">)</span>.asInstanceOf<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> text


scala&gt; getClipboardText <span class="org-keyword">_</span>
<span class="org-function-name">res200</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">User copies some text </span>
scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res201</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">JGoodies</span> <span class="org-constant">Binding</span><span class="org-keyword">:</span> <span class="org-type">Property</span> <span class="org-constant">Adapter</span> <span class="org-constant">Example</span> <span class="org-constant">3</span> <span class="org-keyword">:</span> <span class="org-type">Data</span> <span class="org-constant">Binding</span> &#171; <span class="org-constant">Swing</span> <span class="org-constant">Components</span> &#171; <span class="org-constant">Java</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">User copies an image</span>
scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res202</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">User copies some text </span>
scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span> foreach println
<span class="org-keyword">def</span> <span class="org-function-name">error</span><span class="org-rainbow-delimiters-depth-1">(</span>message<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">Exception</span><span class="org-rainbow-delimiters-depth-1">(</span>message<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">User copies an image</span>
scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span> foreach println


<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">User copies some text </span>
scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span> map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res207</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">23</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>.get
<span class="org-function-name">res211</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">68</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">User copies an image</span>
scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span> map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res208</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.length<span class="org-rainbow-delimiters-depth-1">)</span>.get
<span class="org-function-name">java.util.NoSuchElementException</span><span class="org-keyword">:</span> <span class="org-type">None</span>.get
  at scala.<span class="org-constant">None</span>$.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span>.scala<span class="org-keyword">:</span><span class="org-constant">349</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">None</span>$.get<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Option</span>.scala<span class="org-keyword">:</span><span class="org-constant">347</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided


scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">tellSize1</span><span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"String size is = "</span> + s.length<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">tellSize1</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Unit</span>

scala&gt; getClipboardText<span class="org-rainbow-delimiters-depth-1">()</span> foreach tellSize1
<span class="org-constant">String</span> size is <span class="org-keyword">=</span> <span class="org-constant">101</span>
</pre>
</div>

<p>
It can be refactored to more sef-contained code.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">getClipboardText</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">import</span> java.awt.<span class="org-constant">Toolkit</span>
  <span class="org-keyword">import</span> java.awt.datatransfer.<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-constant">Clipboard</span>, <span class="org-constant">DataFlavor</span>, <span class="org-constant">Transferable</span><span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    clip <span class="org-keyword">&lt;-</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Toolkit</span>.getDefaultToolkit<span class="org-rainbow-delimiters-depth-4">()</span>.getSystemClipboard<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
    data <span class="org-keyword">&lt;-</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-3">(</span>clip.getContents<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">if</span> data.isDataFlavorSupported<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">DataFlavor</span>.getTextPlainUnicodeFlavor<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
    text <span class="org-keyword">=</span> data.getTransferData<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">DataFlavor</span>.stringFlavor<span class="org-rainbow-delimiters-depth-3">)</span>.asInstanceOf<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span>
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> text
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-11" class="outline-3">
<h3 id="sec-1-11"><span class="section-number-3">1.11</span> Exception Handling with try-catch</h3>
<div class="outline-text-3" id="text-1-11">
</div><div id="outline-container-sec-1-11-1" class="outline-4">
<h4 id="sec-1-11-1"><span class="section-number-4">1.11.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-11-1">
<p>
An exception is an event that happens during the execution of a
programs which disrupts the normal flow of execution or an unexpected
runtime error that terminates the execution abnormally. Handling them
is necessary to create robust programs resilient that can react to
failures, invalid input, network error and so on.
</p>

<p>
<b>Exception Hierarchy</b>
</p>

<ul class="org-ul">
<li>Throwable

<ul class="org-ul">
<li><span class="underline">Error</span> - System errors or fatal error thrown by JVM that ends the program
execution and should not be handled by the application.

<ul class="org-ul">
<li>LinkageError
</li>

<li>VirtualMachineError
</li>

<li>AWTError
</li>

<li><span class="underline">AssertionError</span>

<ul class="org-ul">
<li>Cause: Assertion errors happens when the program assumptions
are wrong, for instance, <code>assert (10 == 0, "The result should be 10")</code>
</li>
</ul>
</li>

<li>&#x2026; &#x2026; &#x2026; &#x2026;
</li>
</ul>
</li>

<li><span class="underline">Exception</span> - Errors that can be handled by the program.

<ul class="org-ul">
<li>ClassNotFoundException
</li>

<li>SQLException 
</li>

<li>IOException

<ul class="org-ul">
<li>FileNotFoundException
</li>

<li>MalformedURLException
</li>

<li>SocketException
</li>

<li>EOFException
</li>

<li>InterruptedIOException 
</li>
</ul>
</li>

<li><span class="underline">RuntimeException</span>

<ul class="org-ul">
<li>ArtithmeticException 
<ul class="org-ul">
<li>Case: Division by zero.
</li>
</ul>
</li>

<li><span class="underline">NullPointerException</span>
<ul class="org-ul">
<li>Cause: Calling a method or accessing a field of a class
which the value is set to null.  
</li>
</ul>
</li>

<li>IndexOutofBoundsException 
<ul class="org-ul">
<li>Cause: Accessing out-of-bounds array elements.
</li>
</ul>
</li>

<li>IllegalArgumentException
<ul class="org-ul">
<li>Cause: Sending illegal argument to a method like sending a
negative number to the method .runWithDelay(time: Int).
</li>
</ul>
</li>

<li>IllegalStateException
</li>

<li>NumberFormatException
<ul class="org-ul">
<li>Cause: Attempt to convert a bad-formatted string to some
value. Example: <code>Integer.parseInt("xyz")</code>
</li>
</ul>
</li>

<li>ClassCastException
<ul class="org-ul">
<li>Cause: Invalid casting.
</li>
</ul>
</li>

<li>&#x2026; &#x2026; &#x2026; &#x2026; &#x2026; 
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<p>
<b>Exception Methods:</b>
</p>

<ul class="org-ul">
<li>.getMessage() - Get exception Message.
</li>

<li>.getStackTrace() 
</li>

<li>.getStackTraceString()
</li>

<li>.printStackTrace()
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-11-2" class="outline-4">
<h4 id="sec-1-11-2"><span class="section-number-4">1.11.2</span> Throwing Exceptions</h4>
<div class="outline-text-4" id="text-1-11-2">
<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">IllegalArgumentException</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Error: Amount to withdraw cannot excede balance"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.IllegalArgumentException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">Amount</span> to withdraw cannot excede balance
  ... <span class="org-constant">29</span> elided

scala&gt; <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">Exception</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Error: Invalid user input. Fatal kernel failure."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.Exception</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">Invalid</span> user input. <span class="org-constant">Fatal</span> kernel failure.
  ... <span class="org-constant">29</span> elided

scala&gt; <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.lang.<span class="org-constant">ArrayIndexOutOfBoundsException</span><span class="org-rainbow-delimiters-depth-1">()</span>
java.lang.<span class="org-constant">ArrayIndexOutOfBoundsException</span>
  ... <span class="org-constant">29</span> elided

scala&gt; <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">NullPointerException</span><span class="org-rainbow-delimiters-depth-1">()</span>
java.lang.<span class="org-constant">NullPointerException</span>
  ... <span class="org-constant">29</span> elided

scala&gt; <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">AssertionError</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"The result should be 10"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.AssertionError</span><span class="org-keyword">:</span> <span class="org-type">The</span> result should be <span class="org-constant">10</span>
  ... <span class="org-constant">29</span> elided

scala&gt; <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">Error</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Fatal failure. Aborting exectution"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.Error</span><span class="org-keyword">:</span> <span class="org-type">Fatal</span> failure. <span class="org-constant">Aborting</span> exectution
  ... <span class="org-constant">29</span> elided
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-11-3" class="outline-4">
<h4 id="sec-1-11-3"><span class="section-number-4">1.11.3</span> Catching exceptions without finally block.</h4>
<div class="outline-text-4" id="text-1-11-3">
<p>
Example 1
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">testException1</span><span class="org-rainbow-delimiters-depth-1">(</span>block<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span> 
    <span class="org-keyword">try</span> block 
    <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">{</span>  
      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">IllegalArgumentException</span>         <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Illegal exception"</span><span class="org-rainbow-delimiters-depth-3">)</span> 
      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">IllegalStateException</span>            <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Illegal state exception"</span><span class="org-rainbow-delimiters-depth-3">)</span> 
      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">FileNotFoundException</span>    <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: File not found exception "</span><span class="org-rainbow-delimiters-depth-3">)</span>

      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">Exception</span>                        <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Unknown exception"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span> 
<span class="org-rainbow-delimiters-depth-1">}</span> 


scala&gt; testException1<span class="org-rainbow-delimiters-depth-1">{</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"It is not gonna fail."</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">It</span> is not gonna fail.

scala&gt; testException1<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">FileReader</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/etc/somefile"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">Error</span><span class="org-keyword">:</span> <span class="org-type">File</span> not found exception 

scala&gt; testException1<span class="org-rainbow-delimiters-depth-1">{</span> assert<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span> == <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">java.lang.AssertionError</span><span class="org-keyword">:</span> <span class="org-type">assertion</span> failed
  at scala.<span class="org-constant">Predef</span>$.assert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">204</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .$anonfun$res41$1<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .testException1<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided
</pre>
</div>

<p>
Example 2: Catching exceptions with try block.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">showException</span><span class="org-rainbow-delimiters-depth-1">(</span>label<span class="org-keyword">:</span> <span class="org-type">String</span>, ex<span class="org-keyword">:</span> <span class="org-type">Exception</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>label<span class="org-rainbow-delimiters-depth-2">)</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>ex<span class="org-rainbow-delimiters-depth-2">)</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>ex.printStackTrace<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">testException2</span><span class="org-rainbow-delimiters-depth-1">(</span>block<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">try</span> block 
    <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">{</span>  

      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">FileNotFoundException</span>
          <span class="org-keyword">=&gt;</span> showException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: File not found exception"</span>, ex<span class="org-rainbow-delimiters-depth-3">)</span>

      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">IOException</span>
          <span class="org-keyword">=&gt;</span> showException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: IO Exception"</span>, ex<span class="org-rainbow-delimiters-depth-3">)</span>

      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">NullPointerException</span>
          <span class="org-keyword">=&gt;</span> showException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Null exception"</span>, ex<span class="org-rainbow-delimiters-depth-3">)</span>

      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">IllegalArgumentException</span>
          <span class="org-keyword">=&gt;</span> showException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Illegal Argument exception."</span>, ex<span class="org-rainbow-delimiters-depth-3">)</span>

      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">IllegalStateException</span>
          <span class="org-keyword">=&gt;</span> showException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Illegal state exception"</span>, ex<span class="org-rainbow-delimiters-depth-3">)</span>

      <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">Exception</span>
          <span class="org-keyword">=&gt;</span> showException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Unknown exception"</span>, ex<span class="org-rainbow-delimiters-depth-3">)</span> 

    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">finally</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"After 'finally' statement this piece of code always runs."</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span> 

scala&gt; testException2<span class="org-rainbow-delimiters-depth-1">{</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"This code will not throw an exception"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">This</span> code will not <span class="org-keyword">throw</span> an exception
<span class="org-constant">After</span> <span class="org-string">'finall</span>y' statement <span class="org-keyword">this</span> piece of code always runs.

scala&gt;  testException2<span class="org-rainbow-delimiters-depth-1">{</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span>/ <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">Error</span><span class="org-keyword">:</span> <span class="org-type">Unknown</span> exception
<span class="org-function-name">java.lang.ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero
<span class="org-function-name">java.lang.ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero
    at $line86.$read$$iw$$iw$.$anonfun$res30$1<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at $line85.$read$$iw$$iw$.testException2<span class="org-rainbow-delimiters-depth-1">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at $line86.$read$$iw$$iw$.&lt;init&gt;<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at $line86.$read$$iw$$iw$.&lt;clinit&gt;<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console&gt;<span class="org-rainbow-delimiters-depth-1">)</span>
    at $line86.$eval$.$print$lzycompute<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">7</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at $line86.$eval$.$print<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>

... ...
<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">After</span> <span class="org-string">'finall</span>y' statement <span class="org-keyword">this</span> piece of code always runs.


scala&gt; testException2<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">val</span> <span class="org-variable-name">x</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">null</span> ; println<span class="org-rainbow-delimiters-depth-2">(</span>x.length<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">Error</span><span class="org-keyword">:</span> <span class="org-type">Null</span> exception
java.lang.<span class="org-constant">NullPointerException</span>
java.lang.<span class="org-constant">NullPointerException</span>
    at $line87.$read$$iw$$iw$.$anonfun$res31$1<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">14</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at $line85.$read$$iw$$iw$.testException2<span class="org-rainbow-delimiters-depth-1">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
      ... ... ... ...
<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">After</span> <span class="org-string">'finall</span>y' statement <span class="org-keyword">this</span> piece of code always runs.


scala&gt; testException2<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">FileReader</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/etc/fstabx"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">Error</span><span class="org-keyword">:</span> <span class="org-type">File</span> not found exception
<span class="org-function-name">java.io.FileNotFoundException</span><span class="org-keyword">:</span> <span class="org-type">/</span>etc/fstabx <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">No</span> such file or directory<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.io.FileNotFoundException</span><span class="org-keyword">:</span> <span class="org-type">/</span>etc/fstabx <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">No</span> such file or directory<span class="org-rainbow-delimiters-depth-1">)</span>
    at java.io.<span class="org-constant">FileInputStream</span>.open0<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Native</span> <span class="org-constant">Method</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at java.io.<span class="org-constant">FileInputStream</span>.open<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FileInputStream</span>.java<span class="org-keyword">:</span><span class="org-constant">195</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at java.io.<span class="org-constant">FileInputStream</span>.&lt;init&gt;<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FileInputStream</span>.java<span class="org-keyword">:</span><span class="org-constant">138</span><span class="org-rainbow-delimiters-depth-1">)</span>
      ... ... ... ...
<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">After</span> <span class="org-string">'finall</span>y' statement <span class="org-keyword">this</span> piece of code always runs.


<span class="org-comment-delimiter">// </span><span class="org-comment">Exception not handled.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; testException2<span class="org-rainbow-delimiters-depth-1">{</span> assert<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span> == <span class="org-constant">5</span>, <span class="org-string">"Result should be 10"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">After</span> <span class="org-string">'finall</span>y' statement <span class="org-keyword">this</span> piece of code always runs.
<span class="org-function-name">java.lang.AssertionError</span><span class="org-keyword">:</span> <span class="org-type">assertion</span> failed<span class="org-keyword">:</span> <span class="org-type">Result</span> should be <span class="org-constant">10</span>
  at scala.<span class="org-constant">Predef</span>$.assert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">219</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .$anonfun$res32$1<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at .testException2<span class="org-rainbow-delimiters-depth-1">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided
</pre>
</div>

<p>
Example 3: Catching exception and releasing resources.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">displayFile</span><span class="org-rainbow-delimiters-depth-1">(</span>file<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">fd</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">FileReader</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>
  <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    fd <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">FileReader</span><span class="org-rainbow-delimiters-depth-3">(</span>file<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">in</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Scanner</span><span class="org-rainbow-delimiters-depth-3">(</span>fd<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-3">(</span>in.hasNextLine<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">){</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span>in.nextLine<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">FileNotFoundException</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: File not found: "</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">finally</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>fd != <span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-3">)</span> fd.close<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; displayFile<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/etc/lsb-release"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">DISTRIB_ID</span><span class="org-keyword">=</span><span class="org-constant">ManjaroLinux</span>
<span class="org-constant">DISTRIB_RELEASE</span><span class="org-keyword">=</span><span class="org-constant">17.0.2</span>
<span class="org-constant">DISTRIB_CODENAME</span><span class="org-keyword">=</span><span class="org-constant">Gellivara</span>
<span class="org-constant">DISTRIB_DESCRIPTION</span><span class="org-keyword">=</span><span class="org-string">"Manjaro Linux"</span>

scala&gt; displayFile<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/etc/lsb-releaseq"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Error</span><span class="org-keyword">:</span> <span class="org-type">File</span> not found<span class="org-keyword">:</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-11-4" class="outline-4">
<h4 id="sec-1-11-4"><span class="section-number-4">1.11.4</span> References</h4>
<div class="outline-text-4" id="text-1-11-4">
<ul class="org-ul">
<li><b>Chapter 14 - Exception Handling and Text Files</b> -
<a href="http://grail.cba.csuohio.edu/~matos/notes/cis-265/lecture-notes/03-13slide-Exceptions.pdf">http://grail.cba.csuohio.edu/~matos/notes/cis-265/lecture-notes/03-13slide-Exceptions.pdf</a>
</li>
</ul>


<ul class="org-ul">
<li><b>CSC 102 Lecture Notes Week 5 Shallowness and Deepness Exceptions
File I/O</b> <a href="http://users.csc.calpoly.edu/~gfisher/classes/102/lectures/5.html">http://users.csc.calpoly.edu/~gfisher/classes/102/lectures/5.html</a>
</li>
</ul>


<ul class="org-ul">
<li><b>Java Programming - Exception Handling &amp; Assertion</b> -
<a href="https://www3.ntu.edu.sg/home/ehchua/programming/java/J5a_ExceptionAssert.html">https://www3.ntu.edu.sg/home/ehchua/programming/java/J5a_ExceptionAssert.html</a>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-12" class="outline-3">
<h3 id="sec-1-12"><span class="section-number-3">1.12</span> Exception Handling with Try (scala.utils.Try)</h3>
<div class="outline-text-3" id="text-1-12">
</div><div id="outline-container-sec-1-12-1" class="outline-4">
<h4 id="sec-1-12-1"><span class="section-number-4">1.12.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-12-1">
<p>
Scala provides <a href="http://www.scala-lang.org/files/archive/api/current/scala/util/Try.html">scala.util.Try</a> which is similar to Option type and
allows failures to be dealt in higher level way than try-catch
blocks. 
</p>

<p>
The benefits of using Try type insted of using try-catch blocks are
explicit faluire in the type system lots of useful combinators to
handle failures such as map, flatMap, foreach and also
for-comprehensions.
</p>

<p>
The Try algebraic data type has two type constructors, Success which
holds a result or successful computation and Failure which holds a
failure or exception, which is a subtype of Trowable.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-scala-font-lockXsealed">sealed</span> <span class="org-scala-font-lockXabstract">abstract</span> <span class="org-keyword">class</span> <span class="org-type">Try</span><span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-constant">T</span><span class="org-rainbow-delimiters-depth-1">]</span>                <span class="org-keyword">extends</span> <span class="org-type">AnyRef</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-constant">T</span><span class="org-rainbow-delimiters-depth-1">](</span>value<span class="org-keyword">:</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">)</span>             <span class="org-keyword">extends</span> <span class="org-type">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">T</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-constant">T</span><span class="org-rainbow-delimiters-depth-1">](</span>exception<span class="org-keyword">:</span> <span class="org-type">Throwable</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">T</span><span class="org-rainbow-delimiters-depth-1">]</span>
</pre>
</div>

<p>
<b>Documentation</b>
</p>

<ul class="org-ul">
<li><a href="http://www.scala-lang.org/files/archive/api/current/scala/util/Try.html">scala.util.Try</a> 
</li>

<li><a href="http://www.scala-lang.org/files/archive/api/current/scala/util/Success.html">scala.util.Success</a>
</li>

<li><a href="http://www.scala-lang.org/files/archive/api/current/scala/util/Failure.html">scala.util.Failure</a> 
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-12-2" class="outline-4">
<h4 id="sec-1-12-2"><span class="section-number-4">1.12.2</span> Examples</h4>
<div class="outline-text-4" id="text-1-12-2">
</div><div id="outline-container-sec-1-12-2-1" class="outline-5">
<h5 id="sec-1-12-2-1"><span class="section-number-5">1.12.2.1</span> Example 1: basic operations.</h5>
<div class="outline-text-5" id="text-1-12-2-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> scala.util.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">Try</span>, <span class="org-constant">Success</span>, <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">}</span>

cala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ma</span> <span class="org-keyword">=</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">10</span> / <span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">ma</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Success</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mb</span> <span class="org-keyword">=</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">10</span> / <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">mb</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">---- Map ------------</span>

scala&gt; ma map <span class="org-rainbow-delimiters-depth-1">{</span> x <span class="org-keyword">=&gt;</span> x + <span class="org-constant">10</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Success</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; mb map <span class="org-rainbow-delimiters-depth-1">{</span> x <span class="org-keyword">=&gt;</span> x + <span class="org-constant">10</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">----- Foreach --------</span>


scala&gt; ma foreach <span class="org-rainbow-delimiters-depth-1">{</span>res <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result = "</span> + res<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Result</span> <span class="org-keyword">=</span> <span class="org-constant">5</span>

scala&gt; mb foreach <span class="org-rainbow-delimiters-depth-1">{</span>res <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result = "</span> + res<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">------ Check if it is success ---------- //</span>

scala&gt; ma.isSuccess
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; mb.isSuccess
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">------ Check if it is failure ---------- //</span>

scala&gt; ma.isFailure
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>

scala&gt; mb.isFailure
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">-------- Turn result into option type ------ //</span>

scala&gt; ma.toOption
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; mb.toOption
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">------ Get the result or failure -----------//</span>

scala&gt; ma.get
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">5</span>

scala&gt; mb.get
<span class="org-function-name">java.lang.ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero
  at .$anonfun$mb$1<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.runtime.java8.<span class="org-constant">JFunction0</span>$mcI$sp.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">JFunction0</span>$mcI$sp.java<span class="org-keyword">:</span><span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.util.<span class="org-constant">Try</span>$.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Try</span>.scala<span class="org-keyword">:</span><span class="org-constant">209</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">29</span> elided


<span class="org-comment-delimiter">//</span><span class="org-comment">----- Handling Result with pattern matching -------//</span>

ma <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Successful result "</span> + a<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Failure happend"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        println<span class="org-rainbow-delimiters-depth-3">(</span>e<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; ma <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |       <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Successful result "</span> + a<span class="org-rainbow-delimiters-depth-2">)</span>
     |   <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |       <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     |         println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Failure happend"</span><span class="org-rainbow-delimiters-depth-3">)</span>
     |         println<span class="org-rainbow-delimiters-depth-3">(</span>e<span class="org-rainbow-delimiters-depth-3">)</span>
     |       <span class="org-rainbow-delimiters-depth-2">}</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Successful</span> result <span class="org-constant">5</span>


mb <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Successful result "</span> + a<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Failure happend"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        println<span class="org-rainbow-delimiters-depth-3">(</span>e<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; mb <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |       <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Successful result "</span> + a<span class="org-rainbow-delimiters-depth-2">)</span>
     |   <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |       <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     |         println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Failure happend"</span><span class="org-rainbow-delimiters-depth-3">)</span>
     |         println<span class="org-rainbow-delimiters-depth-3">(</span>e<span class="org-rainbow-delimiters-depth-3">)</span>
     |       <span class="org-rainbow-delimiters-depth-2">}</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Failure</span> happend
<span class="org-function-name">java.lang.ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-12-2-2" class="outline-5">
<h5 id="sec-1-12-2-2"><span class="section-number-5">1.12.2.2</span> Example 2: for-comprehensions.</h5>
<div class="outline-text-5" id="text-1-12-2-2">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> scala.util.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">Try</span>, <span class="org-constant">Success</span>, <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">parseAndDivide1</span><span class="org-rainbow-delimiters-depth-1">(</span>strA<span class="org-keyword">:</span> <span class="org-type">String</span>, strB<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    a <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strA.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
    b <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strB.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
    c <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span> <span class="org-rainbow-delimiters-depth-3">(</span>a / b<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> c 
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">parseAndDivide1</span><span class="org-rainbow-delimiters-depth-1">(</span>strA<span class="org-keyword">:</span> <span class="org-type">String</span>, strB<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     |     a <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strA.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
     |     b <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strB.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
     |     c <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span> <span class="org-rainbow-delimiters-depth-3">(</span>a / b<span class="org-rainbow-delimiters-depth-3">)</span>
     |   <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> c 
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">parseAndDivide1</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>strA<span class="org-keyword">:</span> <span class="org-type">String</span>, strB<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span>scala.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>

scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>, <span class="org-string">"20"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Success</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>, <span class="org-string">"20x"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"20x"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"10s0"</span>, <span class="org-string">"0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"10s0"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>, <span class="org-string">"0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero<span class="org-rainbow-delimiters-depth-1">)</span>



scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>, <span class="org-string">"20"</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span> r <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result is equal to "</span> + r<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Result</span> is equal to <span class="org-constant">5</span>

scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>, <span class="org-string">"20a"</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span> r <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result is equal to "</span> + r<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>, <span class="org-string">"0"</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span> r <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result is equal to "</span> + r<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>, <span class="org-string">"20"</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">{</span> x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">5</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Success</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"100"</span>, <span class="org-string">"0"</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">{</span> x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">5</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; parseAndDivide1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"4"</span>, <span class="org-string">"a"</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">{</span> x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">5</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"a"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-12-2-3" class="outline-5">
<h5 id="sec-1-12-2-3"><span class="section-number-5">1.12.2.3</span> Example 3: Pattern matching result.</h5>
<div class="outline-text-5" id="text-1-12-2-3">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">parseAndDivide2</span><span class="org-rainbow-delimiters-depth-1">(</span>strA<span class="org-keyword">:</span> <span class="org-type">String</span>, strB<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">res</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    a <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strA.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
    b <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strB.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
    c <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span> <span class="org-rainbow-delimiters-depth-3">(</span>a / b<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> c

  res <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Successful result = "</span> + a<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Failure, try again! Game over!"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span>e<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; parseAndDivide2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"500"</span>, <span class="org-string">"10"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Successful</span> result <span class="org-keyword">=</span> <span class="org-constant">50</span>

scala&gt; parseAndDivide2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"50d0"</span>, <span class="org-string">"10"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Failure</span>, <span class="org-keyword">try</span> again! <span class="org-constant">Game</span> over!
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"50d0"</span>

scala&gt; parseAndDivide2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"500"</span>, <span class="org-string">"0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Failure</span>, <span class="org-keyword">try</span> again! <span class="org-constant">Game</span> over!
<span class="org-function-name">java.lang.ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-12-2-4" class="outline-5">
<h5 id="sec-1-12-2-4"><span class="section-number-5">1.12.2.4</span> Example 4: Pattern matching specific exceptions.</h5>
<div class="outline-text-5" id="text-1-12-2-4">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">parseAndDivide3</span><span class="org-rainbow-delimiters-depth-1">(</span>strA<span class="org-keyword">:</span> <span class="org-type">String</span>, strB<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">res</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    a <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strA.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
    b <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strB.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
    c <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span> <span class="org-rainbow-delimiters-depth-3">(</span>a / b<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> c

  res <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Successful result = "</span> + a<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.lang.<span class="org-constant">ArithmeticException</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Failure was arithmetic exception"</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.lang.<span class="org-constant">NumberFormatException</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Failure was user bad input"</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"I don't know how to deal with this kind of failure"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Failure was </span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span> + e<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; parseAndDivide3<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200"</span>, <span class="org-string">"50"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Successful</span> result <span class="org-keyword">=</span> <span class="org-constant">4</span>

scala&gt; parseAndDivide3<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200a"</span>, <span class="org-string">"50"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Failure</span> was user bad input

scala&gt; parseAndDivide3<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200"</span>, <span class="org-string">"50x"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Failure</span> was user bad input

scala&gt; parseAndDivide3<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200"</span>, <span class="org-string">"0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Failure</span> was arithmetic exception



<span class="org-keyword">def</span> <span class="org-function-name">parseAndDivide4</span><span class="org-rainbow-delimiters-depth-1">(</span>strA<span class="org-keyword">:</span> <span class="org-type">String</span>, strB<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">res</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    a <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strA.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
    b <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">(</span>strB.toInt<span class="org-rainbow-delimiters-depth-3">)</span>
    c <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span> <span class="org-rainbow-delimiters-depth-3">(</span>a / b<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> c

  res <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Successful result = "</span> + a<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-keyword">=&gt;</span> e <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-3">{</span>
          <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.lang.<span class="org-constant">ArithmeticException</span>
              <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-4">{</span>
                println<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"Failure cause was arithmetic exception."</span><span class="org-rainbow-delimiters-depth-5">)</span>
                println<span class="org-rainbow-delimiters-depth-5">(</span>e<span class="org-rainbow-delimiters-depth-5">)</span>
                e.printStackTrace<span class="org-rainbow-delimiters-depth-5">()</span>
              <span class="org-rainbow-delimiters-depth-4">}</span>

          <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.lang.<span class="org-constant">NumberFormatException</span>
              <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-4">{</span>
                println<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"Failure was user bad input."</span><span class="org-rainbow-delimiters-depth-5">)</span>
                println<span class="org-rainbow-delimiters-depth-5">(</span>ex.getMessage<span class="org-rainbow-delimiters-depth-6">()</span><span class="org-rainbow-delimiters-depth-5">)</span>
              <span class="org-rainbow-delimiters-depth-4">}</span>

          <span class="org-keyword">case</span> <span class="org-variable-name">e</span>
              <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-4">{</span>
                println<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"Error: I don't know how to deal with this failure"</span><span class="org-rainbow-delimiters-depth-5">)</span>
                println<span class="org-rainbow-delimiters-depth-5">(</span>e<span class="org-rainbow-delimiters-depth-5">)</span>
              <span class="org-rainbow-delimiters-depth-4">}</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>



scala&gt; parseAndDivide4<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200"</span>, <span class="org-string">"20"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Successful</span> result <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; parseAndDivide4<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200a"</span>, <span class="org-string">"20"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Failure</span> was user bad input.
<span class="org-constant">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"200a"</span>

scala&gt; parseAndDivide4<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200"</span>, <span class="org-string">"20x"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Failure</span> was user bad input.
<span class="org-constant">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"20x"</span>

scala&gt; parseAndDivide4<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200"</span>, <span class="org-string">"0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Failure</span> cause was arithmetic exception.
<span class="org-function-name">java.lang.ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero
<span class="org-function-name">java.lang.ArithmeticException</span><span class="org-keyword">:</span> <span class="org-type">/</span> by zero
    at $line91.$read$$iw$$iw$$iw$$iw$.$anonfun$parseAndDivide4$5<span class="org-rainbow-delimiters-depth-1">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at scala.runtime.java8.<span class="org-constant">JFunction0</span>$mcI$sp.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">JFunction0</span>$mcI$sp.java<span class="org-keyword">:</span><span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at scala.util.<span class="org-constant">Try</span>$.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Try</span>.scala<span class="org-keyword">:</span><span class="org-constant">209</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at $line91.$read$$iw$$iw$$iw$$iw$.$anonfun$parseAndDivide4$4<span class="org-rainbow-delimiters-depth-1">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at $line91.$read$$iw$$iw$$iw$$iw$.$anonfun$parseAndDivide4$4$adapted<span class="org-rainbow-delimiters-depth-1">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">19</span><span class="org-rainbow-delimiters-depth-1">)</span>
    at scala.util.<span class="org-constant">Success</span>.flatMap<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Try</span>.scala<span class="org-keyword">:</span><span class="org-constant">247</span><span class="org-rainbow-delimiters-depth-1">)</span>

 .... ... ... ... .... ... ... ...
</pre>
</div>

<p>
Possibilities: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">case</span> <span class="org-variable-name">e</span>
    <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
      println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: I don't know how to deal with this failure"</span><span class="org-rainbow-delimiters-depth-2">)</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Print exception</span>
      println<span class="org-rainbow-delimiters-depth-2">(</span>e<span class="org-rainbow-delimiters-depth-2">)</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Print exception stack trace </span>
      e.printStackTrace<span class="org-rainbow-delimiters-depth-2">()</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Print exception message</span>
      println<span class="org-rainbow-delimiters-depth-2">(</span>e.getMessage<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Throw exception again</span>
      <span class="org-keyword">throw</span> e 
    <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-12-2-5" class="outline-5">
<h5 id="sec-1-12-2-5"><span class="section-number-5">1.12.2.5</span> Example 5: Try with http request</h5>
<div class="outline-text-5" id="text-1-12-2-5">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> scala.util.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">Try</span>, <span class="org-constant">Success</span>, <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-doc">/** Read string from byte input source InputStream and its sub classes. </span>

<span class="org-doc">   Note: This function doesn't close the input stream. It is supposed</span>
<span class="org-doc">   to be done by the caller.</span>

<span class="org-doc">   @param input - Byte input source </span>
<span class="org-doc">   @param size  - Buffer size (default 1024 bytes or 1kb)</span>
<span class="org-doc">   @return        String.</span>
<span class="org-doc">  */</span>
<span class="org-keyword">def</span> <span class="org-function-name">readInputToString</span><span class="org-rainbow-delimiters-depth-1">(</span>input<span class="org-keyword">:</span> <span class="org-type">java</span>.io.<span class="org-constant">InputStream</span>, size<span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1024</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">out</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">ByteArrayOutputStream</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">char[] buffer = new char[bufferSize]</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">buffer</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Byte</span><span class="org-rainbow-delimiters-depth-2">](</span>size<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Number of bytes read </span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">rd</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span> input.available<span class="org-rainbow-delimiters-depth-3">()</span> &gt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">){</span>
    rd <span class="org-keyword">=</span> input.read<span class="org-rainbow-delimiters-depth-3">(</span>buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    out.write<span class="org-rainbow-delimiters-depth-3">(</span>buffer, <span class="org-constant">0</span>, rd<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
  out.toString<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"UTF-8"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">httpGetRequest</span><span class="org-rainbow-delimiters-depth-1">(</span>url<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">import</span> java.net.<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-constant">URL</span>, <span class="org-constant">HttpURLConnection</span><span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    urlo <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-keyword">new</span> <span class="org-type">URL</span><span class="org-rainbow-delimiters-depth-4">(</span>url<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">}</span>
    conn <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">{</span>
      <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> urlo
        .openConnection<span class="org-rainbow-delimiters-depth-4">()</span>
        .asInstanceOf<span class="org-rainbow-delimiters-depth-4">[</span>java.net.<span class="org-constant">HttpURLConnection</span><span class="org-rainbow-delimiters-depth-4">]</span>

      c.setRequestMethod<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"GET"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      c
    <span class="org-rainbow-delimiters-depth-3">}</span>
    is  <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">{</span>conn.getInputStream<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">}</span>
    out <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">{</span>readInputToString<span class="org-rainbow-delimiters-depth-4">(</span>is<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">_</span>   <span class="org-keyword">&lt;-</span> <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-3">{</span>is.close<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> out 
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">showResult</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>result<span class="org-keyword">:</span> <span class="org-type">Try</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span> <span class="org-keyword">=</span> result <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">case</span> <span class="org-type">Failure</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Failure"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span>e<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; httpGetRequest<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"http://www.httpbin.org/get"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res63</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span>
<span class="org-constant">Success</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">{</span>
  <span class="org-string">"args"</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">{}</span>,
  <span class="org-string">"headers"</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">{</span>
    <span class="org-string">"Accept"</span><span class="org-keyword">:</span> <span class="org-string">"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"</span>,
    <span class="org-string">"Connection"</span><span class="org-keyword">:</span> <span class="org-string">"close"</span>,
    <span class="org-string">"Host"</span><span class="org-keyword">:</span> <span class="org-string">"www.httpbin.org"</span>,
    <span class="org-string">"User-Agent"</span><span class="org-keyword">:</span> <span class="org-string">"Java/1.8.0_144"</span>
  <span class="org-rainbow-delimiters-depth-3">}</span>,
  <span class="org-string">"origin"</span><span class="org-keyword">:</span> <span class="org-string">"176.18.51.232"</span>,
  <span class="org-string">"url"</span><span class="org-keyword">:</span> <span class="org-string">"http://www.httpbin.org/get"</span>
<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; httpGetRequest<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"https://www.httpbin.org/get"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res66</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span>
<span class="org-constant">Success</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">{</span>
  <span class="org-string">"args"</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">{}</span>,
  <span class="org-string">"headers"</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">{</span>
    <span class="org-string">"Accept"</span><span class="org-keyword">:</span> <span class="org-string">"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"</span>,
    <span class="org-string">"Connection"</span><span class="org-keyword">:</span> <span class="org-string">"close"</span>,
    <span class="org-string">"Host"</span><span class="org-keyword">:</span> <span class="org-string">"www.httpbin.org"</span>,
    <span class="org-string">"User-Agent"</span><span class="org-keyword">:</span> <span class="org-string">"Java/1.8.0_144"</span>
  <span class="org-rainbow-delimiters-depth-3">}</span>,
  <span class="org-string">"origin"</span><span class="org-keyword">:</span> <span class="org-string">"176.18.51.232"</span>,
  <span class="org-string">"url"</span><span class="org-keyword">:</span> <span class="org-string">"https://www.httpbin.org/get"</span>
<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; httpGetRequest<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"http://www.httpbin.org/getx"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res64</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-1">(</span>java.io.<span class="org-constant">FileNotFoundException</span><span class="org-keyword">:</span> <span class="org-type">http</span><span class="org-keyword">:</span><span class="org-comment-delimiter">//</span><span class="org-comment">www.httpbin.org/getx)</span>

scala&gt; httpGetRequest<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"httpa://www.httpbin.org/get"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res65</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-2">(</span>java.net.<span class="org-constant">MalformedURLException</span><span class="org-keyword">:</span> <span class="org-type">unknown</span> protocol<span class="org-keyword">:</span> <span class="org-type">httpa</span><span class="org-rainbow-delimiters-depth-2">)</span>

scala&gt; httpGetRequest<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"http://www.fail.this.url"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res67</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-2">(</span>java.net.<span class="org-constant">UnknownHostException</span><span class="org-keyword">:</span> <span class="org-type">www</span>.fail.<span class="org-keyword">this</span>.url<span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">User disconnects in order to simulate a connection failure </span>
<span class="org-comment-delimiter">//</span>
scala&gt; httpGetRequest<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"http://www.httpbin.org/get"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">res69</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.util.<span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-2">(</span>java.net.<span class="org-constant">UnknownHostException</span><span class="org-keyword">:</span> <span class="org-type">www</span>.httpbin.org<span class="org-rainbow-delimiters-depth-2">)</span>


scala&gt;  showResult<span class="org-rainbow-delimiters-depth-2">(</span>httpGetRequest<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"httpx://www.httpbin.org"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-constant">Failure</span>
<span class="org-function-name">java.net.MalformedURLException</span><span class="org-keyword">:</span> <span class="org-type">unknown</span> protocol<span class="org-keyword">:</span> <span class="org-type">httpx</span>

scala&gt;  showResult<span class="org-rainbow-delimiters-depth-2">(</span>httpGetRequest<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"http://www.httpErrorbin.org"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-constant">Failure</span>
<span class="org-function-name">java.net.UnknownHostException</span><span class="org-keyword">:</span> <span class="org-type">www</span>.httpErrorbin.org

scala&gt;  showResult<span class="org-rainbow-delimiters-depth-2">(</span>httpGetRequest<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"http://www.httpbin.org/get"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">{</span>
  <span class="org-string">"args"</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">{}</span>, 
  <span class="org-string">"headers"</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">{</span>
    <span class="org-string">"Accept"</span><span class="org-keyword">:</span> <span class="org-string">"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"</span>, 
    <span class="org-string">"Connection"</span><span class="org-keyword">:</span> <span class="org-string">"close"</span>, 
    <span class="org-string">"Host"</span><span class="org-keyword">:</span> <span class="org-string">"www.httpbin.org"</span>, 
    <span class="org-string">"User-Agent"</span><span class="org-keyword">:</span> <span class="org-string">"Java/1.8.0_144"</span>
  <span class="org-rainbow-delimiters-depth-3">}</span>, 
  <span class="org-string">"origin"</span><span class="org-keyword">:</span> <span class="org-string">"176.18.51.232"</span>, 
  <span class="org-string">"url"</span><span class="org-keyword">:</span> <span class="org-string">"http://www.httpbin.org/get"</span>
<span class="org-rainbow-delimiters-depth-2">}</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-13" class="outline-3">
<h3 id="sec-1-13"><span class="section-number-3">1.13</span> For comprehensions and Monads</h3>
<div class="outline-text-3" id="text-1-13">
</div><div id="outline-container-sec-1-13-1" class="outline-4">
<h4 id="sec-1-13-1"><span class="section-number-4">1.13.1</span> Scala For-comprehensions and Haskell do-notation</h4>
<div class="outline-text-4" id="text-1-13-1">
</div><div id="outline-container-sec-1-13-1-1" class="outline-5">
<h5 id="sec-1-13-1-1"><span class="section-number-5">1.13.1.1</span> For-loop</h5>
<div class="outline-text-5" id="text-1-13-1-1">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>

<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>  println<span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-rainbow-delimiters-depth-1">)</span>  
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>

<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}{</span> 
     println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"a = "</span> + a<span class="org-rainbow-delimiters-depth-2">)</span> 
  <span class="org-rainbow-delimiters-depth-1">}</span> 
a <span class="org-keyword">=</span> <span class="org-constant">1</span>
a <span class="org-keyword">=</span> <span class="org-constant">2</span>
a <span class="org-keyword">=</span> <span class="org-constant">3</span>
a <span class="org-keyword">=</span> <span class="org-constant">4</span>
a <span class="org-keyword">=</span> <span class="org-constant">5</span>

<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>file <span class="org-keyword">&lt;-</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-2">)</span>.listFiles<span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"file = "</span> + file<span class="org-rainbow-delimiters-depth-1">)</span> 
file <span class="org-keyword">=</span> /lost+found
file <span class="org-keyword">=</span> /boot
file <span class="org-keyword">=</span> /run
file <span class="org-keyword">=</span> /usr
file <span class="org-keyword">=</span> /etc
file <span class="org-keyword">=</span> /sbin
file <span class="org-keyword">=</span> /tmp
file <span class="org-keyword">=</span> /mnt
... ... ... ...
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-13-1-2" class="outline-5">
<h5 id="sec-1-13-1-2"><span class="section-number-5">1.13.1.2</span> For-yield</h5>
<div class="outline-text-5" id="text-1-13-1-2">
<p>
Scala's for-yield or for comprehension is similar to Haskell's monad
do-notation. However unlike Haskell do-notation, which is dessugarized
to (&gt;&gt;=) bind and return functions, Scala's for-yield notation is
dessugarized to flatMap, map, filter and foreach method calls. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Haskell</th>
<th scope="col" class="left">Scala</th>
</tr>

<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">(&gt;&gt;=) or bind</td>
<td class="left">.flatMap</td>
</tr>

<tr>
<td class="left">return</td>
<td class="left">- Equivalent to object constructor. Option(10), Option(null), List(), List(1, 2, 3)</td>
</tr>

<tr>
<td class="left">fmap</td>
<td class="left">.map</td>
</tr>

<tr>
<td class="left">forM_</td>
<td class="left">.foreach</td>
</tr>

<tr>
<td class="left">guard</td>
<td class="left">.filter or .withFilter</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>Note: .flatMap, .map, .foreach and .filter are methods.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> a 
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">collection</span>.immutable.<span class="org-constant">IndexedSeq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">1.</span>to<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> a  
<span class="org-function-name">res44</span><span class="org-keyword">:</span> <span class="org-type">collection</span>.immutable.<span class="org-constant">IndexedSeq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span> * a<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res31</span><span class="org-keyword">:</span> <span class="org-type">collection</span>.immutable.<span class="org-constant">IndexedSeq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span>, <span class="org-constant">4</span>, <span class="org-constant">6</span>, <span class="org-constant">8</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>file <span class="org-keyword">&lt;-</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/etc"</span><span class="org-rainbow-delimiters-depth-2">)</span>.listFiles<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> file.getName 
<span class="org-function-name">res33</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-string">"bash.bash_logout"</span>,
  <span class="org-string">"papersize"</span>,
  <span class="org-string">"exports.d"</span>,
  <span class="org-string">"apparmor.d"</span>,
  <span class="org-string">"shadow"</span>,
...


<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    file <span class="org-keyword">&lt;-</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/etc"</span><span class="org-rainbow-delimiters-depth-3">)</span>.listFiles
    <span class="org-keyword">val</span> <span class="org-variable-name">data</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span>file.getPath, file.getName, file.length<span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> data

<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">String</span>, <span class="org-constant">String</span>, <span class="org-constant">Long</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-2">(</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/etc/bash.bash_logout"</span>, <span class="org-string">"bash.bash_logout"</span>, <span class="org-constant">28L</span><span class="org-rainbow-delimiters-depth-3">)</span>,
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/etc/papersize"</span>, <span class="org-string">"papersize"</span>, <span class="org-constant">68L</span><span class="org-rainbow-delimiters-depth-3">)</span>,
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/etc/exports.d"</span>, <span class="org-string">"exports.d"</span>, <span class="org-constant">4096L</span><span class="org-rainbow-delimiters-depth-3">)</span>,
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/etc/apparmor.d"</span>, <span class="org-string">"apparmor.d"</span>, <span class="org-constant">4096L</span><span class="org-rainbow-delimiters-depth-3">)</span>,
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/etc/shadow"</span>, <span class="org-string">"shadow"</span>, <span class="org-constant">1001L</span><span class="org-rainbow-delimiters-depth-3">)</span>,
...


<span class="org-comment-delimiter">//  </span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">Get the name of all directories in /etc/.</span>
<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-3">{</span>
    file <span class="org-keyword">&lt;-</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"/etc"</span><span class="org-rainbow-delimiters-depth-4">)</span>.listFiles
    <span class="org-keyword">if</span> file.isDirectory <span class="org-comment-delimiter">// </span><span class="org-comment">Rejects entries that aren't file.</span>
  <span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">yield</span> file.getName<span class="org-rainbow-delimiters-depth-3">()</span> 

<span class="org-function-name">res58</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-3">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-3">(</span>
  <span class="org-string">"exports.d"</span>,
  <span class="org-string">"apparmor.d"</span>,
  <span class="org-string">"cron.weekly"</span>,
  <span class="org-string">"pulse"</span>,
  <span class="org-string">"iptables"</span>,
...


<span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">files</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-4">{</span>
    file <span class="org-keyword">&lt;-</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"/etc"</span><span class="org-rainbow-delimiters-depth-5">)</span>.listFiles
    <span class="org-keyword">if</span> file.isFile
<span class="org-rainbow-delimiters-depth-4">}</span> <span class="org-keyword">yield</span> file.getName<span class="org-rainbow-delimiters-depth-4">()</span>


<span class="org-function-name">files</span><span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-4">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-4">]</span> <span class="org-keyword">=</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-4">(</span>
  <span class="org-string">"bash.bash_logout"</span>,
  <span class="org-string">"papersize"</span>,
  <span class="org-string">"shadow"</span>,
  <span class="org-string">"adjtime"</span>,
  <span class="org-string">"resolv.conf"</span>,
...

<span class="org-keyword">@</span> files take <span class="org-constant">5</span> foreach println 
bash.bash_logout
papersize
shadow
adjtime
resolv.conf
</pre>
</div>

<p>
<b>Example 1</b> 
</p>

<p>
Get all combinations between numbers 1, 2, 3, 4 and letters 'a' and 'b'.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  a <span class="org-keyword">&lt;-</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span>
  b <span class="org-keyword">&lt;-</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">'a'</span>, <span class="org-string">'b'</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> <span class="org-rainbow-delimiters-depth-1">(</span>a, b<span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    a <span class="org-keyword">&lt;-</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span>
    b <span class="org-keyword">&lt;-</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">'a'</span>, <span class="org-string">'b'</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> <span class="org-rainbow-delimiters-depth-1">(</span>a, b<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-function-name">c</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Int</span>, <span class="org-constant">Char</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-string">'a'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-string">'b'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>, <span class="org-string">'a'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>, <span class="org-string">'b'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>, <span class="org-string">'a'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
...

<span class="org-keyword">@</span> c foreach println 
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>,a<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>,b<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>,a<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>,b<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>,a<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>,b<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">4</span>,a<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">4</span>,b<span class="org-rainbow-delimiters-depth-2">)</span>
</pre>
</div>

<p>
Dessugarizing for-comprehension: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span>.flatMap <span class="org-rainbow-delimiters-depth-2">{</span> a <span class="org-keyword">=&gt;</span>
  <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">'a'</span>, <span class="org-string">'b'</span><span class="org-rainbow-delimiters-depth-3">)</span>.map       <span class="org-rainbow-delimiters-depth-3">{</span> b <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-4">(</span>a, b<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">@</span> <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span>.flatMap <span class="org-rainbow-delimiters-depth-2">{</span> a <span class="org-keyword">=&gt;</span>
    <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">'a'</span>, <span class="org-string">'b'</span><span class="org-rainbow-delimiters-depth-3">)</span>.map       <span class="org-rainbow-delimiters-depth-3">{</span> b <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-4">(</span>a, b<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-rainbow-delimiters-depth-1">}</span> 
<span class="org-function-name">c</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Int</span>, <span class="org-constant">Char</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-string">'a'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>, <span class="org-string">'b'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>, <span class="org-string">'a'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>, <span class="org-string">'b'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>, <span class="org-string">'a'</span><span class="org-rainbow-delimiters-depth-2">)</span>,
...

<span class="org-keyword">@</span> c foreach println 
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>,a<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span>,b<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>,a<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>,b<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>,a<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>,b<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">4</span>,a<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">4</span>,b<span class="org-rainbow-delimiters-depth-2">)</span>
</pre>
</div>

<p>
Haskell Equivalent code: 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span>(forM_)

<span class="org-haskell-constructor">:</span>{
<span class="org-haskell-definition">xs</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
  a <span class="org-haskell-operator">&lt;-</span> [1, 2, 3, 4]
  b <span class="org-haskell-operator">&lt;-</span> [<span class="org-string">'a'</span>, <span class="org-string">'b'</span>]
  return (a, b)     
<span class="org-haskell-constructor">:</span>}


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>{
<span class="org-haskell-operator">-</span> xs <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
<span class="org-haskell-operator">-</span>   a <span class="org-haskell-operator">&lt;-</span> [1, 2, 3, 4]
<span class="org-haskell-operator">-</span>   b <span class="org-haskell-operator">&lt;-</span> [<span class="org-string">'a'</span>, <span class="org-string">'b'</span>]
<span class="org-haskell-operator">-</span>   return (a, b)     
<span class="org-function-name">-</span> <span class="org-haskell-constructor">:</span>}
<span class="org-function-name">xs</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Num</span> t <span class="org-haskell-operator">=&gt;</span> [(t, <span class="org-haskell-type">Char</span>)]

<span class="org-haskell-operator">&gt;</span>  xs
[(1,<span class="org-string">'a'</span>),(1,<span class="org-string">'b'</span>),(2,<span class="org-string">'a'</span>),(2,<span class="org-string">'b'</span>),(3,<span class="org-string">'a'</span>),(3,<span class="org-string">'b'</span>),(4,<span class="org-string">'a'</span>),(4,<span class="org-string">'b'</span>)]
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Num</span> t <span class="org-haskell-operator">=&gt;</span> [(t, <span class="org-haskell-type">Char</span>)]
<span class="org-haskell-operator">&gt;</span>


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> print xs
(1,<span class="org-string">'a'</span>)
(1,<span class="org-string">'b'</span>)
(2,<span class="org-string">'a'</span>)
(2,<span class="org-string">'b'</span>)
(3,<span class="org-string">'a'</span>)
(3,<span class="org-string">'b'</span>)
(4,<span class="org-string">'a'</span>)
(4,<span class="org-string">'b'</span>)
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM_</span> xs print
(1,<span class="org-string">'a'</span>)
(1,<span class="org-string">'b'</span>)
(2,<span class="org-string">'a'</span>)
(2,<span class="org-string">'b'</span>)
(3,<span class="org-string">'a'</span>)
(3,<span class="org-string">'b'</span>)
(4,<span class="org-string">'a'</span>)
(4,<span class="org-string">'b'</span>)
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-comment-delimiter">-- </span><span class="org-comment">Do-notation dessugarized</span>
<span class="org-comment-delimiter">--</span>
<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">xs2</span> <span class="org-haskell-operator">=</span> 
  [1, 2, 3, 4] <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> a <span class="org-haskell-operator">-&gt;</span>
  [<span class="org-string">'a'</span>, <span class="org-string">'b'</span>]   <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> b <span class="org-haskell-operator">-&gt;</span>
  return (a, b)     
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>{
<span class="org-haskell-operator">-</span> xs2 <span class="org-haskell-operator">=</span> 
<span class="org-haskell-operator">-</span>   [1, 2, 3, 4] <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> a <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   [<span class="org-string">'a'</span>, <span class="org-string">'b'</span>]   <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> b <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   return (a, b)     
<span class="org-function-name">-</span> <span class="org-haskell-constructor">:</span>}
<span class="org-function-name">xs2</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Num</span> t <span class="org-haskell-operator">=&gt;</span> [(t, <span class="org-haskell-type">Char</span>)]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> xs2
[(1,<span class="org-string">'a'</span>),(1,<span class="org-string">'b'</span>),(2,<span class="org-string">'a'</span>),(2,<span class="org-string">'b'</span>),(3,<span class="org-string">'a'</span>),(3,<span class="org-string">'b'</span>),(4,<span class="org-string">'a'</span>),(4,<span class="org-string">'b'</span>)]
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Num</span> t <span class="org-haskell-operator">=&gt;</span> [(t, <span class="org-haskell-type">Char</span>)]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> print xs2
(1,<span class="org-string">'a'</span>)
(1,<span class="org-string">'b'</span>)
(2,<span class="org-string">'a'</span>)
(2,<span class="org-string">'b'</span>)
(3,<span class="org-string">'a'</span>)
(3,<span class="org-string">'b'</span>)
(4,<span class="org-string">'a'</span>)
(4,<span class="org-string">'b'</span>)
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">forM_</span> xs2 print
(1,<span class="org-string">'a'</span>)
(1,<span class="org-string">'b'</span>)
(2,<span class="org-string">'a'</span>)
(2,<span class="org-string">'b'</span>)
(3,<span class="org-string">'a'</span>)
(3,<span class="org-string">'b'</span>)
(4,<span class="org-string">'a'</span>)
(4,<span class="org-string">'b'</span>)
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
<b>Example 2</b> 
</p>

<p>
Get all pythagorean numbers from 1 to 100. Pythagorean numbers are
integers that satisfies the equation c^2 = a^2 + b^2
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">val</span> <span class="org-variable-name">pty</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span> 
  a <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to <span class="org-constant">100</span>
  b <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to <span class="org-constant">100</span>
  c <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to <span class="org-constant">100</span>
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>a * a + b * b == c * c<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> <span class="org-rainbow-delimiters-depth-1">(</span>a, b, c<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> pty.take<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>,<span class="org-constant">4</span>,<span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>,<span class="org-constant">3</span>,<span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span>,<span class="org-constant">12</span>,<span class="org-constant">13</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">6</span>,<span class="org-constant">8</span>,<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7</span>,<span class="org-constant">24</span>,<span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">8</span>,<span class="org-constant">6</span>,<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">8</span>,<span class="org-constant">15</span>,<span class="org-constant">17</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>,<span class="org-constant">12</span>,<span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>,<span class="org-constant">40</span>,<span class="org-constant">41</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>,<span class="org-constant">24</span>,<span class="org-constant">26</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> pty take <span class="org-constant">10</span> foreach println 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>,<span class="org-constant">4</span>,<span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4</span>,<span class="org-constant">3</span>,<span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span>,<span class="org-constant">12</span>,<span class="org-constant">13</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">6</span>,<span class="org-constant">8</span>,<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7</span>,<span class="org-constant">24</span>,<span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">8</span>,<span class="org-constant">6</span>,<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">8</span>,<span class="org-constant">15</span>,<span class="org-constant">17</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>,<span class="org-constant">12</span>,<span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>,<span class="org-constant">40</span>,<span class="org-constant">41</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>,<span class="org-constant">24</span>,<span class="org-constant">26</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Dessugarizing for-comprehension: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">val</span> <span class="org-variable-name">pty</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span> to <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>.flatMap     <span class="org-rainbow-delimiters-depth-1">{</span> a <span class="org-keyword">=&gt;</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1</span> to <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-2">)</span>.flatMap     <span class="org-rainbow-delimiters-depth-2">{</span> b <span class="org-keyword">=&gt;</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">1</span> to <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-3">)</span>.filter      <span class="org-rainbow-delimiters-depth-3">{</span> c <span class="org-keyword">=&gt;</span> 
           a * a + b * b == c * c
          <span class="org-rainbow-delimiters-depth-3">}</span>.map<span class="org-rainbow-delimiters-depth-3">{</span> c <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-4">(</span>a, b, c<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">}</span>
          <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">pty</span><span class="org-keyword">:</span> <span class="org-type">collection</span>.immutable.<span class="org-constant">IndexedSeq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Vector</span><span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">4</span>, <span class="org-constant">3</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span>, <span class="org-constant">12</span>, <span class="org-constant">13</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">6</span>, <span class="org-constant">8</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>,
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">7</span>, <span class="org-constant">24</span>, <span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-2">)</span>,
...


<span class="org-keyword">@</span> pty take <span class="org-constant">10</span> foreach println 
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">3</span>,<span class="org-constant">4</span>,<span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">4</span>,<span class="org-constant">3</span>,<span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span>,<span class="org-constant">12</span>,<span class="org-constant">13</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">6</span>,<span class="org-constant">8</span>,<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">7</span>,<span class="org-constant">24</span>,<span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">8</span>,<span class="org-constant">6</span>,<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">8</span>,<span class="org-constant">15</span>,<span class="org-constant">17</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">9</span>,<span class="org-constant">12</span>,<span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">9</span>,<span class="org-constant">40</span>,<span class="org-constant">41</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span>,<span class="org-constant">24</span>,<span class="org-constant">26</span><span class="org-rainbow-delimiters-depth-2">)</span>
</pre>
</div>

<p>
Haskell equivalent code: 
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Control.Monad</span> (guard)
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t guard
<span class="org-function-name">guard</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">GHC.Base.Alternative</span> f <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">Bool</span> <span class="org-haskell-operator">-&gt;</span> f <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">pty</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
  a <span class="org-haskell-operator">&lt;-</span> [1 <span class="org-haskell-operator">..</span> 100]
  b <span class="org-haskell-operator">&lt;-</span> [1 <span class="org-haskell-operator">..</span> 100]
  c <span class="org-haskell-operator">&lt;-</span> [1 <span class="org-haskell-operator">..</span> 100]
  guard (a <span class="org-haskell-operator">*</span> a <span class="org-haskell-operator">+</span> b <span class="org-haskell-operator">*</span> b <span class="org-haskell-operator">==</span> c <span class="org-haskell-operator">*</span> c)
  return (a, b, c)
<span class="org-haskell-constructor">:</span>}

 <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>{
<span class="org-haskell-operator">-</span> pty <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
<span class="org-haskell-operator">-</span>   a <span class="org-haskell-operator">&lt;-</span> [1 <span class="org-haskell-operator">..</span> 100]
<span class="org-haskell-operator">-</span>   b <span class="org-haskell-operator">&lt;-</span> [1 <span class="org-haskell-operator">..</span> 100]
<span class="org-haskell-operator">-</span>   c <span class="org-haskell-operator">&lt;-</span> [1 <span class="org-haskell-operator">..</span> 100]
<span class="org-haskell-operator">-</span>   guard (a <span class="org-haskell-operator">*</span> a <span class="org-haskell-operator">+</span> b <span class="org-haskell-operator">*</span> b <span class="org-haskell-operator">==</span> c <span class="org-haskell-operator">*</span> c)
<span class="org-haskell-operator">-</span>   return (a, b, c)
<span class="org-function-name">-</span> <span class="org-haskell-constructor">:</span>}
<span class="org-function-name">pty</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Eq</span> t, <span class="org-haskell-type">Enum</span> t, <span class="org-haskell-type">Num</span> t) <span class="org-haskell-operator">=&gt;</span> [(t, t, t)]
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">take</span> 5 pty
[(3,4,5),(4,3,5),(5,12,13),(6,8,10),(7,24,25)]
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Num</span> t, <span class="org-haskell-type">Enum</span> t, <span class="org-haskell-type">Eq</span> t) <span class="org-haskell-operator">=&gt;</span> [(t, t, t)]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> print (take 10 pty)
(3,4,5)
(4,3,5)
(5,12,13)
(6,8,10)
(7,24,25)
(8,6,10)
(8,15,17)
(9,12,15)
(9,40,41)
(10,24,26)
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">pty2</span> <span class="org-haskell-operator">=</span> 
  [1 <span class="org-haskell-operator">..</span> 100]                       <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> a <span class="org-haskell-operator">-&gt;</span>
  [1 <span class="org-haskell-operator">..</span> 100]                       <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> b <span class="org-haskell-operator">-&gt;</span>
  [1 <span class="org-haskell-operator">..</span> 100]                       <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> c <span class="org-haskell-operator">-&gt;</span>
  guard (a <span class="org-haskell-operator">*</span> a <span class="org-haskell-operator">+</span> b <span class="org-haskell-operator">*</span> b <span class="org-haskell-operator">==</span> c <span class="org-haskell-operator">*</span> c)   <span class="org-haskell-operator">&gt;&gt;=</span> <span class="org-haskell-operator">\</span> <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">-&gt;</span>
  return (a, b, c)
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">take</span> 5 pty2 
[(3,4,5),(4,3,5),(5,12,13),(6,8,10),(7,24,25)]
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Num</span> t, <span class="org-haskell-type">Enum</span> t, <span class="org-haskell-type">Eq</span> t) <span class="org-haskell-operator">=&gt;</span> [(t, t, t)]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">mapM_</span> print (take 10 pty)
(3,4,5)
(4,3,5)
(5,12,13)
(6,8,10)
(7,24,25)
(8,6,10)
(8,15,17)
(9,12,15)
(9,40,41)
(10,24,26)
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-constructor">()</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t (<span class="org-haskell-operator">&gt;&gt;=</span>)
(<span class="org-haskell-definition">&gt;&gt;=</span>) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> m a <span class="org-haskell-operator">-&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> m b
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> bind ma fn <span class="org-haskell-operator">=</span> ma <span class="org-haskell-operator">&gt;&gt;=</span> fn
<span class="org-function-name">bind</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Monad</span> m <span class="org-haskell-operator">=&gt;</span> m a <span class="org-haskell-operator">-&gt;</span> (a <span class="org-haskell-operator">-&gt;</span> m b) <span class="org-haskell-operator">-&gt;</span> m b
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">pty3</span> <span class="org-haskell-operator">=</span> 
  bind [1 <span class="org-haskell-operator">..</span> 100]                        (<span class="org-haskell-operator">\</span> a <span class="org-haskell-operator">-&gt;</span>
  bind [1 <span class="org-haskell-operator">..</span> 100]                        (<span class="org-haskell-operator">\</span> b <span class="org-haskell-operator">-&gt;</span>
  bind [1 <span class="org-haskell-operator">..</span> 100]                        (<span class="org-haskell-operator">\</span> c <span class="org-haskell-operator">-&gt;</span>
  bind (guard (a <span class="org-haskell-operator">*</span> a <span class="org-haskell-operator">+</span> b <span class="org-haskell-operator">*</span> b <span class="org-haskell-operator">==</span> c <span class="org-haskell-operator">*</span> c))  (<span class="org-haskell-operator">\</span> <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">-&gt;</span>
  return (a, b, c)
                                         ))))
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>{
<span class="org-haskell-operator">-</span> pty3 <span class="org-haskell-operator">=</span> 
<span class="org-haskell-operator">-</span>   bind [1 <span class="org-haskell-operator">..</span> 100]                        (<span class="org-haskell-operator">\</span> a <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   bind [1 <span class="org-haskell-operator">..</span> 100]                        (<span class="org-haskell-operator">\</span> b <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   bind [1 <span class="org-haskell-operator">..</span> 100]                        (<span class="org-haskell-operator">\</span> c <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   bind (guard (a <span class="org-haskell-operator">*</span> a <span class="org-haskell-operator">+</span> b <span class="org-haskell-operator">*</span> b <span class="org-haskell-operator">==</span> c <span class="org-haskell-operator">*</span> c))  (<span class="org-haskell-operator">\</span> <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   return (a, b, c)
<span class="org-haskell-operator">-</span>                                          ))))
<span class="org-function-name">-</span> <span class="org-haskell-constructor">:</span>}
<span class="org-function-name">pty3</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Eq</span> t, <span class="org-haskell-type">Enum</span> t, <span class="org-haskell-type">Num</span> t) <span class="org-haskell-operator">=&gt;</span> [(t, t, t)]
<span class="org-haskell-operator">&gt;</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">take</span> 5 pty3 
[(3,4,5),(4,3,5),(5,12,13),(6,8,10),(7,24,25)]
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Num</span> t, <span class="org-haskell-type">Enum</span> t, <span class="org-haskell-type">Eq</span> t) <span class="org-haskell-operator">=&gt;</span> [(t, t, t)]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-type">:</span>{
<span class="org-haskell-definition">pty4</span> <span class="org-haskell-operator">=</span> 
  [1 <span class="org-haskell-operator">..</span> 100]                      <span class="org-haskell-operator">`bind`</span> <span class="org-haskell-operator">\</span> a <span class="org-haskell-operator">-&gt;</span>
  [1 <span class="org-haskell-operator">..</span> 100]                      <span class="org-haskell-operator">`bind`</span> <span class="org-haskell-operator">\</span> b <span class="org-haskell-operator">-&gt;</span>
  [1 <span class="org-haskell-operator">..</span> 100]                      <span class="org-haskell-operator">`bind`</span> <span class="org-haskell-operator">\</span> c <span class="org-haskell-operator">-&gt;</span>
  guard (a <span class="org-haskell-operator">*</span> a <span class="org-haskell-operator">+</span> b <span class="org-haskell-operator">*</span> b <span class="org-haskell-operator">==</span> c <span class="org-haskell-operator">*</span> c)  <span class="org-haskell-operator">`bind`</span> <span class="org-haskell-operator">\</span> <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">-&gt;</span>
  return (a, b, c)
<span class="org-haskell-constructor">:</span>}

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>{
<span class="org-haskell-operator">-</span> pty4 <span class="org-haskell-operator">=</span> 
<span class="org-haskell-operator">-</span>   [1 <span class="org-haskell-operator">..</span> 100]                      <span class="org-haskell-operator">`bind`</span> <span class="org-haskell-operator">\</span> a <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   [1 <span class="org-haskell-operator">..</span> 100]                      <span class="org-haskell-operator">`bind`</span> <span class="org-haskell-operator">\</span> b <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   [1 <span class="org-haskell-operator">..</span> 100]                      <span class="org-haskell-operator">`bind`</span> <span class="org-haskell-operator">\</span> c <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   guard (a <span class="org-haskell-operator">*</span> a <span class="org-haskell-operator">+</span> b <span class="org-haskell-operator">*</span> b <span class="org-haskell-operator">==</span> c <span class="org-haskell-operator">*</span> c)  <span class="org-haskell-operator">`bind`</span> <span class="org-haskell-operator">\</span> <span class="org-haskell-keyword">_</span> <span class="org-haskell-operator">-&gt;</span>
<span class="org-haskell-operator">-</span>   return (a, b, c)
<span class="org-function-name">-</span> <span class="org-haskell-constructor">:</span>}
<span class="org-function-name">pty4</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Eq</span> t, <span class="org-haskell-type">Enum</span> t, <span class="org-haskell-type">Num</span> t) <span class="org-haskell-operator">=&gt;</span> [(t, t, t)]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">take</span> 5 pty4 
[(3,4,5),(4,3,5),(5,12,13),(6,8,10),(7,24,25)]
<span class="org-function-name">it</span> <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Num</span> t, <span class="org-haskell-type">Enum</span> t, <span class="org-haskell-type">Eq</span> t) <span class="org-haskell-operator">=&gt;</span> [(t, t, t)]
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-13-2" class="outline-4">
<h4 id="sec-1-13-2"><span class="section-number-4">1.13.2</span> Options for comprehensions</h4>
<div class="outline-text-4" id="text-1-13-2">
<p>
For - comprehension is equivalent to method .foreach
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ma</span> <span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ma</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mb</span> <span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
<span class="org-function-name">mb</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; ma foreach println
<span class="org-constant">100</span>

scala&gt; mb foreach println

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> ma<span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"x = "</span> + x<span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">100</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> mb<span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"x = "</span> + x<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;



scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"java.home"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Java Home = "</span> + a<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Java</span> <span class="org-constant">Home</span> <span class="org-keyword">=</span> /home/archbox/opt/jdk1.<span class="org-constant">8.0</span>_144/jre

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>a <span class="org-keyword">&lt;-</span> <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"java.home error"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Java Home = "</span> + a<span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"java.home"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span> a <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Java Home = "</span> + a<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">Java</span> <span class="org-constant">Home</span> <span class="org-keyword">=</span> /home/archbox/opt/jdk1.<span class="org-constant">8.0</span>_144/jre

scala&gt; <span class="org-constant">Option</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"java.home error"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach <span class="org-rainbow-delimiters-depth-1">{</span> a <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Java Home = "</span> + a<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
For-yield equivalence to map
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ma</span> <span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ma</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mb</span> <span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
<span class="org-function-name">mb</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>


scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> ma<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> <span class="org-constant">5</span> * x
<span class="org-function-name">res34</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">500</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> mb<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> <span class="org-constant">5</span> * x
<span class="org-function-name">res35</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>


scala&gt; ma map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-constant">5</span> * x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res36</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">500</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; mb map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-constant">5</span> * x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res37</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>

<p>
For-yield expressions for Option type are a syntax sugar for nested
flatMaps and maps method calls similar to Haskell's Maybe monad.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">addSafe1</span><span class="org-rainbow-delimiters-depth-1">(</span>ma<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, mb<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    a <span class="org-keyword">&lt;-</span> ma
    b <span class="org-keyword">&lt;-</span> mb
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> a + b
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">addSafe2</span><span class="org-rainbow-delimiters-depth-1">(</span>ma<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, mb<span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  ma.flatMap <span class="org-rainbow-delimiters-depth-2">{</span> a <span class="org-keyword">=&gt;</span>
  mb.map     <span class="org-rainbow-delimiters-depth-3">{</span> b <span class="org-keyword">=&gt;</span>
    a + b
  <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; addSafe1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res43</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; addSafe1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res44</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; addSafe1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res45</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>


scala&gt; addSafe2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res46</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; addSafe2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Some</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>

scala&gt; addSafe2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">None</span>, <span class="org-constant">None</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">Option</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">None</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-13-3" class="outline-4">
<h4 id="sec-1-13-3"><span class="section-number-4">1.13.3</span> Identity Monad Implementation</h4>
<div class="outline-text-4" id="text-1-13-3">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Identity</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>value<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">flatMap</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Identity</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    fn<span class="org-rainbow-delimiters-depth-3">(</span>value<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">map</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Identity</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-3">(</span>fn<span class="org-rainbow-delimiters-depth-4">(</span>value<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">foreach</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span> <span class="org-keyword">=</span> fn<span class="org-rainbow-delimiters-depth-2">(</span>value<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">@</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res65</span><span class="org-keyword">:</span> <span class="org-type">Identity</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res66</span><span class="org-keyword">:</span> <span class="org-type">Identity</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">40</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">@</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> flatMap <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-2">(</span>x * <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-function-name">res67</span><span class="org-keyword">:</span> <span class="org-type">Identity</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">40</span><span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-constant">10</span>

<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-constant">Hello</span> world

<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> <span class="org-constant">4</span> * x 
<span class="org-function-name">res70</span><span class="org-keyword">:</span> <span class="org-type">Identity</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-keyword">@</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    a <span class="org-keyword">&lt;-</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>
    b <span class="org-keyword">&lt;-</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> a + b 
<span class="org-function-name">res71</span><span class="org-keyword">:</span> <span class="org-type">Identity</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Identity</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">35</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-13-4" class="outline-4">
<h4 id="sec-1-13-4"><a id="ID-0ce71f62-789c-4b6d-9ce6-98e062f7f6d1" name="ID-0ce71f62-789c-4b6d-9ce6-98e062f7f6d1"></a><span class="section-number-4">1.13.4</span> Maybe/Option implementation</h4>
<div class="outline-text-4" id="text-1-13-4">

<p>
This example shows an Option type monad and collection implementation.
It was named Maybe in order to avoid conflict with Scala's built in
Option type. 
</p>

<p>
file: <a href="src/maybe-collection.scala"><a href="src/maybe-collection.scala">src/maybe-collection.scala</a></a>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Sealed trait means that is not possible to add more</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">implementation of this trait/interface out of this file.</span>
<span class="org-comment-delimiter">// </span>
<span class="org-scala-font-lockXsealed">sealed</span> <span class="org-keyword">trait</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">A</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Haskell's forM_ - Apply a function that returns nothing to a</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">collection. </span>
  <span class="org-comment-delimiter">//</span>
  <span class="org-keyword">def</span> <span class="org-function-name">foreach</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Haskell's fmap</span>
  <span class="org-comment-delimiter">//</span>
  <span class="org-keyword">def</span> <span class="org-function-name">map</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Haskell's (&gt;&gt;=) bind </span>
  <span class="org-comment-delimiter">// </span>
  <span class="org-keyword">def</span> <span class="org-function-name">flatMap</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Haskell's guard </span>
  <span class="org-comment-delimiter">// </span>
  <span class="org-keyword">def</span> <span class="org-function-name">withFilter</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Boolean</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span>

  <span class="org-keyword">def</span> <span class="org-function-name">filter</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Boolean</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> withFilter<span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to Haskell's Nothing or Scala's None.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">case</span> <span class="org-keyword">object</span> <span class="org-constant">Empty</span> <span class="org-keyword">extends</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Nothing</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">RuntimeException</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: Attemp to get data from Empty value"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">foreach</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">Nothing</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">map</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">Nothing</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

  <span class="org-keyword">def</span> <span class="org-function-name">flatMap</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">Nothing</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

  <span class="org-keyword">def</span> <span class="org-function-name">withFilter</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">Nothing</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Boolean</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Similar to Haskell's Just or Scala's Some. </span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span>  <span class="org-type">Just</span><span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>value<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> value

  <span class="org-keyword">def</span> <span class="org-function-name">foreach</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> fn<span class="org-rainbow-delimiters-depth-2">(</span>value<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">map</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-rainbow-delimiters-depth-3">(</span>value<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">flatMap</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> fn<span class="org-rainbow-delimiters-depth-2">(</span>value<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">withFilter</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Boolean</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>fn<span class="org-rainbow-delimiters-depth-4">(</span>value<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-3">(</span>value<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">else</span>
      <span class="org-constant">Empty</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Companion object</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">object</span> <span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>value<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>value != <span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-3">(</span>value<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">else</span>
      <span class="org-constant">Empty</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">makeMaybeFn</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span>, <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    apply<span class="org-rainbow-delimiters-depth-3">(</span>fn<span class="org-rainbow-delimiters-depth-4">(</span>x<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">mapM2</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span>, <span class="org-constant">B</span>, <span class="org-constant">C</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">A</span>, <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">C</span>, ma<span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span>, mb<span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      a <span class="org-keyword">&lt;-</span> ma
      b <span class="org-keyword">&lt;-</span> mb 
    <span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">yield</span> fn<span class="org-rainbow-delimiters-depth-3">(</span>a, b<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">addSafe</span><span class="org-rainbow-delimiters-depth-1">(</span>sa<span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, sb<span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    a <span class="org-keyword">&lt;-</span> sa 
    b <span class="org-keyword">&lt;-</span> sb 
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> a + b 
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">readNumber</span><span class="org-rainbow-delimiters-depth-1">(</span>prompt<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">try</span>  <span class="org-rainbow-delimiters-depth-2">{</span>
    print<span class="org-rainbow-delimiters-depth-3">(</span>prompt<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">sc</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Scanner</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">System</span>.in<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">n</span>  <span class="org-keyword">=</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-3">(</span>sc.nextInt<span class="org-rainbow-delimiters-depth-3">)</span>
    print<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    n
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">InputMismatchException</span>
        <span class="org-keyword">=&gt;</span> <span class="org-constant">Empty</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">parseInt</span><span class="org-rainbow-delimiters-depth-1">(</span>str<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span>  <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">try</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-2">(</span>str.toInt<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">case</span> <span class="org-variable-name">ex</span><span class="org-keyword">:</span> <span class="org-type">java</span>.lang.<span class="org-constant">NumberFormatException</span>
        <span class="org-keyword">=&gt;</span> <span class="org-constant">Empty</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Test: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">:</span><span class="org-type">paste</span> src/maybe-collection.scala
<span class="org-constant">Pasting</span> file src/maybe-collection.scala...
defined <span class="org-keyword">trait</span> <span class="org-type">Maybe</span>
defined <span class="org-keyword">object</span> <span class="org-constant">Empty</span>
defined <span class="org-keyword">class</span> <span class="org-type">Just</span>
defined <span class="org-keyword">object</span> <span class="org-constant">Maybe</span>
<span class="org-function-name">addSafe</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>sa<span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span>, sb<span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">readNumber</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>prompt<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">parseInt</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>str<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">------- Test function apply ----------------</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> 
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach println

scala&gt; <span class="org-constant">Maybe</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>  foreach println
<span class="org-constant">Hello</span>

scala&gt; 


<span class="org-comment-delimiter">//</span><span class="org-comment">------ tet map, foreach, and get ------ // </span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ma</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>
<span class="org-function-name">ma</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mb</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">mb</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> ma<span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"x = "</span> + x<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> mb<span class="org-rainbow-delimiters-depth-1">)</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"x = "</span> + x<span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">100</span>


scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> ma<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> <span class="org-constant">5</span> * x
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

scala&gt; <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">&lt;-</span> mb<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">yield</span> <span class="org-constant">5</span> * x
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">500</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; ma map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

scala&gt; mb map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">500</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">------- Test makeMaybeFn ---------- //</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">This static method, that can be regarded as function, returns null</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">which can unexpectedly crash the program. </span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.home"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> /home/archbox/opt/jdk1.<span class="org-constant">8.0</span>_144/jre

scala&gt; <span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.homex"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">getPropertySafe</span> <span class="org-keyword">=</span> <span class="org-constant">Maybe</span>.makeMaybeFn<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; getPropertySafe<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.homex"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

scala&gt; getPropertySafe<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.home"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">Product</span> <span class="org-keyword">with</span> <span class="org-type">Serializable</span> <span class="org-keyword">with</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-1">(</span>/home/archbox/opt/jdk1.<span class="org-constant">8.0</span>_144/jre<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; getPropertySafe<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.home"</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach println
/home/archbox/opt/jdk1.<span class="org-constant">8.0</span>_144/jre

scala&gt; getPropertySafe<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.homex"</span><span class="org-rainbow-delimiters-depth-1">)</span> foreach println


<span class="org-comment-delimiter">//</span><span class="org-comment">-------- Test function addSafe ---------</span>

scala&gt; addSafe<span class="org-rainbow-delimiters-depth-1">(</span>parseInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"200"</span><span class="org-rainbow-delimiters-depth-2">)</span>, parseInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"300"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Just</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">500</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; addSafe<span class="org-rainbow-delimiters-depth-1">(</span>parseInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"200"</span><span class="org-rainbow-delimiters-depth-2">)</span>, parseInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"300x"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>

scala&gt; addSafe<span class="org-rainbow-delimiters-depth-1">(</span>parseInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"20s0"</span><span class="org-rainbow-delimiters-depth-2">)</span>, parseInt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"300x"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res29</span><span class="org-keyword">:</span> <span class="org-type">Maybe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Empty</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-13-5" class="outline-4">
<h4 id="sec-1-13-5"><a id="ID-55ca2cd1-e1db-404e-860e-502a894925a1" name="ID-55ca2cd1-e1db-404e-860e-502a894925a1"></a><span class="section-number-4">1.13.5</span> IO Monad Implementation</h4>
<div class="outline-text-4" id="text-1-13-5">

<p>
File: <a href="src/iomonad.scala"><a href="src/iomonad.scala">src/iomonad.scala</a></a>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>action<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">){</span>

  <span class="org-keyword">import</span> scala.util.<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-constant">Try</span>, <span class="org-constant">Success</span>, <span class="org-constant">Failure</span><span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> action

  <span class="org-keyword">def</span> <span class="org-function-name">map</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-3">(</span>fn<span class="org-rainbow-delimiters-depth-4">(</span>action<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">flatMap</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">IO</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-3">(</span>fn<span class="org-rainbow-delimiters-depth-4">(</span>action<span class="org-rainbow-delimiters-depth-4">)</span>.run<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Retry until successful </span>
  <span class="org-keyword">def</span> <span class="org-function-name">retry</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">aux</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      <span class="org-constant">Try</span><span class="org-rainbow-delimiters-depth-4">{</span>action<span class="org-rainbow-delimiters-depth-4">}</span> <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-4">{</span>
        <span class="org-keyword">case</span> <span class="org-type">Success</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-keyword">=&gt;</span> a
        <span class="org-keyword">case</span> <span class="org-keyword">_</span>
            <span class="org-keyword">=&gt;</span> aux<span class="org-rainbow-delimiters-depth-5">()</span>          
      <span class="org-rainbow-delimiters-depth-4">}</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-3">(</span>aux<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>


  <span class="org-keyword">def</span> <span class="org-function-name">forever</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">aux</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">this</span>.run<span class="org-rainbow-delimiters-depth-4">()</span>
      aux<span class="org-rainbow-delimiters-depth-4">()</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-3">(</span>aux<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">doTimes</span><span class="org-rainbow-delimiters-depth-2">(</span>n<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">io</span> <span class="org-keyword">=</span> <span class="org-keyword">this</span> 
    <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-4">(</span>i <span class="org-keyword">&lt;-</span> <span class="org-constant">1</span> to n<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">this</span>.run<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">---- End of class IO ----- // </span>


<span class="org-keyword">object</span> <span class="org-constant">IO</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>action<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">(</span>action<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">readLine</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">(</span>scala.io.<span class="org-constant">StdIn</span>.readLine<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">readDouble</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">(</span>scala.io.<span class="org-constant">StdIn</span>.readDouble<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">readInt</span>    <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">(</span>scala.io.<span class="org-constant">StdIn</span>.readInt<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">printn</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>a<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Predef</span>.println<span class="org-rainbow-delimiters-depth-3">(</span>a<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">def</span> <span class="org-function-name">print</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>a<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Predef</span>.print<span class="org-rainbow-delimiters-depth-3">(</span>a<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>


  <span class="org-keyword">def</span> <span class="org-function-name">prompt</span><span class="org-rainbow-delimiters-depth-2">(</span>msg<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">_</span>    <span class="org-keyword">&lt;-</span> print<span class="org-rainbow-delimiters-depth-3">(</span>msg<span class="org-rainbow-delimiters-depth-3">)</span>
    line <span class="org-keyword">&lt;-</span> readLine   
  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">yield</span> line 
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">promptParse</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>msg<span class="org-keyword">:</span> <span class="org-type">String</span>, fn<span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> 
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">_</span>    <span class="org-keyword">&lt;-</span> <span class="org-constant">IO</span>.print<span class="org-rainbow-delimiters-depth-2">(</span>msg<span class="org-rainbow-delimiters-depth-2">)</span>
    line <span class="org-keyword">&lt;-</span> <span class="org-constant">IO</span>.readLine
    <span class="org-keyword">_</span>    <span class="org-keyword">&lt;-</span> <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> fn<span class="org-rainbow-delimiters-depth-1">(</span>line<span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-keyword">val</span> <span class="org-variable-name">getNumAndSum</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    x <span class="org-keyword">&lt;-</span> promptParse<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Enter x: "</span>, <span class="org-keyword">_</span>.toInt<span class="org-rainbow-delimiters-depth-2">)</span>.retry
    y <span class="org-keyword">&lt;-</span> promptParse<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Enter y: "</span>, <span class="org-keyword">_</span>.toInt<span class="org-rainbow-delimiters-depth-2">)</span>.retry
  <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> x + y


<span class="org-keyword">val</span> <span class="org-variable-name">main</span> <span class="org-keyword">=</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">_</span> <span class="org-keyword">&lt;-</span> <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">Testing IO action getNumAndSum"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    x <span class="org-keyword">&lt;-</span> getNumAndSum
    <span class="org-keyword">_</span> <span class="org-keyword">&lt;-</span> <span class="org-constant">IO</span>.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"The result is = "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span> <span class="org-rainbow-delimiters-depth-1">()</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Uncomment the line below to run the program.</span>
main.forever<span class="org-rainbow-delimiters-depth-1">()</span>.run<span class="org-rainbow-delimiters-depth-1">()</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ scala -save  iomonad.scala 

Testing IO action getNumAndSum
Enter x: 200
Enter y: sadsa
Enter y: 300
The result is = 500
Testing IO action getNumAndSum
Enter x: 500
Enter y: 200
The result is = 700
Testing IO action getNumAndSum
Enter x: sadsa
Enter x: xhss
Enter x: 
Enter x:   
Enter x: 89
Enter y: 34
The result is = 123
Testing IO action getNumAndSum
Enter x: 100
Enter y: 200
The result is = 300  <span class="org-comment-delimiter"># </span><span class="org-comment">Enter Ctrl + C to end the program</span>
</pre>
</div>

<p>
Experiment in the REPL: 
</p>

<ul class="org-ul">
<li>This step requires the last line of the file to commented.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">:</span><span class="org-type">paste</span> iomonad.scala 
<span class="org-constant">Pasting</span> file iomonad.scala...
defined <span class="org-keyword">class</span> <span class="org-type">IO</span>
defined <span class="org-keyword">object</span> <span class="org-constant">IO</span>
<span class="org-function-name">promptParse</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>msg<span class="org-keyword">:</span> <span class="org-type">String</span>, fn<span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">getNumAndSum</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">388623</span>ad
<span class="org-function-name">main</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">91f</span>565d


scala&gt; <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Testing IO monad"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">3434</span>a4f0

scala&gt; <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Testing IO monad"</span><span class="org-rainbow-delimiters-depth-1">)</span> doTimes<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">53</span>ea380b

scala&gt; <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Testing IO monad"</span><span class="org-rainbow-delimiters-depth-1">)</span> doTimes<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span> run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Testing</span> <span class="org-constant">IO</span> monad
<span class="org-constant">Testing</span> <span class="org-constant">IO</span> monad
<span class="org-constant">Testing</span> <span class="org-constant">IO</span> monad
<span class="org-constant">Testing</span> <span class="org-constant">IO</span> monad
<span class="org-constant">Testing</span> <span class="org-constant">IO</span> monad


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">action</span> <span class="org-keyword">=</span> promptParse<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Enter a valid double: "</span>, <span class="org-keyword">_</span>.toDouble<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">action</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">2336</span>cd91

<span class="org-comment-delimiter">// </span><span class="org-comment">User types 12345</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------</span>
scala&gt; action.run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> <span class="org-type">res10</span><span class="org-keyword">:</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> <span class="org-constant">12345.0</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">User types "error" </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------</span>
scala&gt; action.run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> <span class="org-type">java</span>.lang.<span class="org-constant">NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"error"</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.readJavaFormatString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">2043</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.parseDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">110</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Double</span>.parseDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>.java<span class="org-keyword">:</span><span class="org-constant">538</span><span class="org-rainbow-delimiters-depth-1">)</span>    
  ... ... ... ... 

<span class="org-comment-delimiter">// </span><span class="org-comment">Keep running IO action until user provides a valid input </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------</span>
scala&gt; action.retry<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">6</span>bd28e4a

scala&gt; action.retry<span class="org-rainbow-delimiters-depth-1">()</span>.run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">12345.0</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">User types 100 </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------</span>
scala&gt; action.retry<span class="org-rainbow-delimiters-depth-1">()</span> map <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">400.0</span>


scala&gt; action.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x * <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>.flatMap<span class="org-rainbow-delimiters-depth-1">{</span> n <span class="org-keyword">=&gt;</span> <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result = "</span> + n<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">37e0614</span>e

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">action2</span> <span class="org-keyword">=</span> action.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x * <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>.flatMap<span class="org-rainbow-delimiters-depth-1">{</span> n <span class="org-keyword">=&gt;</span> <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result = "</span> + n<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">action2</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">3e5</span>d10fc

<span class="org-comment-delimiter">// </span><span class="org-comment">User types 45</span>
scala&gt; action2.run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Result</span> <span class="org-keyword">=</span> <span class="org-constant">180.0</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">User types 'error' in order to crash the program. </span>
scala&gt; action2.run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"error"</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.readJavaFormatString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">2043</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.parseDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">110</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Double</span>.parseDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>.java<span class="org-keyword">:</span><span class="org-constant">538</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">The IO action runs until user provides a valid input.</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
scala&gt; action2 retry<span class="org-rainbow-delimiters-depth-1">()</span> run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Result</span> <span class="org-keyword">=</span> <span class="org-constant">60.0</span>


<span class="org-keyword">val</span> <span class="org-variable-name">action3</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  x <span class="org-keyword">&lt;-</span> action
  n <span class="org-keyword">=</span>  <span class="org-constant">4.0</span> * x
  <span class="org-keyword">_</span> <span class="org-keyword">&lt;-</span> <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result = "</span> + n<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span><span class="org-rainbow-delimiters-depth-1">()</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">action3</span> <span class="org-keyword">=</span> <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   x <span class="org-keyword">&lt;-</span> action
     |   n <span class="org-keyword">=</span>  <span class="org-constant">4.0</span> * x
     |   <span class="org-keyword">_</span> <span class="org-keyword">&lt;-</span> <span class="org-constant">IO</span>.printn<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Result = "</span> + n<span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">yield</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">action3</span><span class="org-keyword">:</span> <span class="org-type">IO</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">IO</span><span class="org-keyword">@</span><span class="org-constant">22</span>b9f45f


scala&gt; action3.run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Result</span> <span class="org-keyword">=</span> <span class="org-constant">48.0</span>

scala&gt; action3.run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-function-name">java.lang.NumberFormatException</span><span class="org-keyword">:</span> <span class="org-type">For</span> input string<span class="org-keyword">:</span> <span class="org-string">"crash"</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.readJavaFormatString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">2043</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at sun.misc.<span class="org-constant">FloatingDecimal</span>.parseDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">FloatingDecimal</span>.java<span class="org-keyword">:</span><span class="org-constant">110</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at java.lang.<span class="org-constant">Double</span>.parseDouble<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>.java<span class="org-keyword">:</span><span class="org-constant">538</span><span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Run IO action forever until user types Ctrl+C</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">ending the execution.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; action3 retry<span class="org-rainbow-delimiters-depth-1">()</span> forever<span class="org-rainbow-delimiters-depth-1">()</span> run<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Result</span> <span class="org-keyword">=</span> <span class="org-constant">496.0</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Result</span> <span class="org-keyword">=</span> <span class="org-constant">140.0</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Result</span> <span class="org-keyword">=</span> <span class="org-constant">48.0</span>
<span class="org-constant">Enter</span> a valid double<span class="org-keyword">:</span> 
<span class="org-constant">Result</span> <span class="org-keyword">=</span> <span class="org-constant">20.0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-13-6" class="outline-4">
<h4 id="sec-1-13-6"><span class="section-number-4">1.13.6</span> Reader Monad Implementation</h4>
<div class="outline-text-4" id="text-1-13-6">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Reader</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">R</span>, <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>run<span class="org-keyword">:</span> <span class="org-type">R</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">){</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Haskell fmap or &lt;$&gt; operator</span>
  <span class="org-comment-delimiter">//</span>
  <span class="org-keyword">def</span> <span class="org-function-name">map</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Reader</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">R</span>, <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> 
    <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-2">(</span>r <span class="org-keyword">=&gt;</span> fn<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>.run<span class="org-rainbow-delimiters-depth-4">(</span>r<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Haskell bind (&gt;&gt;=)</span>
  <span class="org-comment-delimiter">//</span>
  <span class="org-keyword">def</span> <span class="org-function-name">flatMap</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">R</span>, <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Reader</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">R</span>, <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span>
    <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-2">(</span>r <span class="org-keyword">=&gt;</span> fn<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>.run<span class="org-rainbow-delimiters-depth-4">(</span>r<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>.run<span class="org-rainbow-delimiters-depth-3">(</span>r<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">withReader</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Z</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">Z</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">R</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Reader</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Z</span>, <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span>
    <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-2">(</span>z <span class="org-keyword">=&gt;</span> <span class="org-keyword">this</span>.run<span class="org-rainbow-delimiters-depth-3">(</span>fn<span class="org-rainbow-delimiters-depth-4">(</span>z<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">local</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">R</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">R</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Reader</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">R</span>, <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span>
    <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-2">(</span>r <span class="org-keyword">=&gt;</span> <span class="org-keyword">this</span>.run<span class="org-rainbow-delimiters-depth-3">(</span>fn<span class="org-rainbow-delimiters-depth-4">(</span>r<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">foreach</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Reader</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">R</span>, <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span>
    <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-2">(</span>r <span class="org-keyword">=&gt;</span> fn<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>.run<span class="org-rainbow-delimiters-depth-4">(</span>r<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Haskell - runReader </span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">R</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=</span> run<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">object</span> <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent of Haskell return :: a -&gt; (Reader r) a</span>
  <span class="org-keyword">def</span> <span class="org-function-name">pure</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">R</span>, <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">_:</span> <span class="org-type">R</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> x<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">ask</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">R</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Reader</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">R</span>, <span class="org-constant">R</span><span class="org-rainbow-delimiters-depth-2">](</span><span class="org-rainbow-delimiters-depth-3">(</span>r<span class="org-keyword">:</span> <span class="org-type">R</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> r<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">

<pre class="src src-scala"></pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-13-7" class="outline-4">
<h4 id="sec-1-13-7"><span class="section-number-4">1.13.7</span> References</h4>
<div class="outline-text-4" id="text-1-13-7">
<ul class="org-ul">
<li>[<a href="https://docs.scala-lang.org/tutorials/FAQ/yield.html">H|SD</a>] - <b>How does yield work? | Scala Documentation</b>. Available at
<a href="https://docs.scala-lang.org/tutorials/FAQ/yield.html">https://docs.scala-lang.org/tutorials/FAQ/yield.html</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-14" class="outline-3">
<h3 id="sec-1-14"><span class="section-number-3">1.14</span> OOP - Object Oriented Programming</h3>
<div class="outline-text-3" id="text-1-14">
</div><div id="outline-container-sec-1-14-1" class="outline-4">
<h4 id="sec-1-14-1"><span class="section-number-4">1.14.1</span> Everything is an object</h4>
<div class="outline-text-4" id="text-1-14-1">
<p>
In Scala everything is an object: 
</p>

<ul class="org-ul">
<li>Tuples are objects. 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">t1</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-string">"20.2"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">t1</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>,<span class="org-constant">20.2</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; t1._1
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; t1._2
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">20.2</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">t2</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Tuple2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-string">"20.2"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">t2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>,<span class="org-constant">20.2</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; t2._1
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; t2._2
<span class="org-function-name">res50</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">20.2</span>

scala&gt; t1 == t2
<span class="org-function-name">res51</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">t3</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Tuple3</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-string">"aa"</span>, <span class="org-constant">20.4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">t3</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">String</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>,aa,<span class="org-constant">20.4</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; t3._1
<span class="org-function-name">res59</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; t3._2
<span class="org-function-name">res60</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> aa

scala&gt; t3._3
<span class="org-function-name">res61</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.4</span>
</pre>
</div>

<ul class="org-ul">
<li>Functions are objects 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">val</span> <span class="org-variable-name">f1</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Function1</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span> * x + <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>.toString
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">f1</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Function1</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span>, <span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]{</span>
     |   <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span> * x + <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>.toString
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">f1</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">String</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; f1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res52</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">30</span>

scala&gt; f1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res53</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">22</span>


<span class="org-keyword">val</span> <span class="org-variable-name">f2</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Function2</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>,  y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-constant">2</span> * x + y
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">f2</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Function2</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]{</span>
     |   <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>,  y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-constant">2</span> * x + y
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">f2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> &lt;function2&gt;

scala&gt; f2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res54</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">9.0</span>

scala&gt; f2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res55</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">12.0</span>
</pre>
</div>

<ul class="org-ul">
<li>Numbers are objects and operators (+), (-), (/) are not
operators, they are methods. 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">10</span> + <span class="org-constant">5</span>
<span class="org-function-name">res56</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; <span class="org-constant">10.</span>+<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res57</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> <span class="org-constant">10.</span>+<span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res58</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">11</span>, <span class="org-constant">12</span>, <span class="org-constant">13</span>, <span class="org-constant">14</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-14-2" class="outline-4">
<h4 id="sec-1-14-2"><span class="section-number-4">1.14.2</span> Singleton Object</h4>
<div class="outline-text-4" id="text-1-14-2">
<p>
A singleton object is an object of a class with a single instance
implementing the singleton design pattern. A singletion object can be
used as an ML-module which is a container grouping functions. 
</p>

<div class="org-src-container">

<pre class="src src-scala">cala&gt; <span class="org-keyword">:</span><span class="org-type">paste</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Entering paste mode (ctrl-D to finish)</span>


<span class="org-keyword">object</span> <span class="org-constant">Module</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">code</span> <span class="org-keyword">=</span> <span class="org-string">"xyzfmnk"</span>

  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">amount</span> <span class="org-keyword">=</span> <span class="org-constant">1000</span> 

  <span class="org-keyword">def</span> <span class="org-function-name">sayHello</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">fn</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-constant">3</span> * x + <span class="org-constant">4</span> * y

  <span class="org-keyword">def</span> <span class="org-function-name">showFiles</span><span class="org-rainbow-delimiters-depth-2">(</span>path<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">files</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-4">(</span>path<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>.listFiles<span class="org-rainbow-delimiters-depth-3">()</span>.filter<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">_</span>.isFile<span class="org-rainbow-delimiters-depth-3">)</span>
    files.foreach<span class="org-rainbow-delimiters-depth-3">(</span>println<span class="org-rainbow-delimiters-depth-3">)</span>    
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">showDirectories</span><span class="org-rainbow-delimiters-depth-2">(</span>path<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">files</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-4">(</span>path<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>.listFiles<span class="org-rainbow-delimiters-depth-3">()</span>.filter<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">_</span>.isDirectory<span class="org-rainbow-delimiters-depth-3">)</span>
    files.foreach<span class="org-rainbow-delimiters-depth-3">(</span>println<span class="org-rainbow-delimiters-depth-3">)</span>    
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-constant">Module</span>.fn <span class="org-keyword">_</span>
<span class="org-function-name">res204</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function2&gt;

scala&gt; <span class="org-constant">Module</span>.sayHello <span class="org-keyword">_</span>
<span class="org-function-name">res205</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; <span class="org-constant">Module</span>.showFiles <span class="org-keyword">_</span>
<span class="org-function-name">res206</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; <span class="org-constant">Module</span>.showFiles<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/boot"</span><span class="org-rainbow-delimiters-depth-1">)</span>
/boot/initramfs-3.<span class="org-constant">10</span>-x86_64.img
/boot/vmlinuz-4.<span class="org-constant">9</span>-x86_64
/boot/initramfs-3.<span class="org-constant">10</span>-x86_64-fallback.img
/boot/vmlinuz-3.<span class="org-constant">10</span>-x86_64
/boot/initramfs-4.<span class="org-constant">9</span>-x86_64-fallback.img
/boot/initramfs-4.<span class="org-constant">9</span>-x86_64.img
/boot/intel-ucode.img
/boot/linux310-x86_64.kver
/boot/linux49-x86_64.kver

scala&gt; <span class="org-constant">Module</span>.showDirectories<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/boot/grub"</span><span class="org-rainbow-delimiters-depth-1">)</span>
/boot/grub/i386-pc
/boot/grub/locale
/boot/grub/fonts
/boot/grub/themes

scala&gt; <span class="org-constant">Module</span>.sayHello<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Hello</span> world

scala&gt; <span class="org-constant">Module</span>.code 
<span class="org-function-name">res219</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> xyzfmnk

scala&gt; <span class="org-constant">Module</span>.code <span class="org-keyword">=</span> <span class="org-string">"hello"</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> reassignment to <span class="org-keyword">val</span>
       <span class="org-constant">Module</span>.code <span class="org-keyword">=</span> <span class="org-string">"hello"</span>
                   ^

scala&gt; <span class="org-constant">Module</span>.amount += <span class="org-constant">300</span>

scala&gt; <span class="org-constant">Module</span>.amount
<span class="org-function-name">res223</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1300</span>


scala&gt; <span class="org-constant">Module</span>.amount <span class="org-keyword">=</span> <span class="org-constant">0</span>
<span class="org-function-name">Module.amount</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; <span class="org-constant">Module</span>.getClass<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res224</span><span class="org-keyword">:</span> <span class="org-type">Class</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-keyword">_</span> <span class="org-keyword">&lt;:</span> <span class="org-constant">Module</span>.<span class="org-keyword">type</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-keyword">class</span> <span class="org-type">Module$</span>
</pre>
</div>

<p>
Singletons can implement interfaces or traits.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">trait</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">onChange</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
  <span class="org-keyword">def</span> <span class="org-function-name">onError</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span>  <span class="org-type">Unit</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">Observer1</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">onChange</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I received a change event."</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onError</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I received an error event."</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">object</span> <span class="org-constant">SingleTonObserver</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">onChange</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Singleton: I received a change event."</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onError</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Singleton: I received an error event."</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; obs1.onChange<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">I</span> received a change event.

scala&gt; obs1.onError<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">I</span> received an error event.

scala&gt; <span class="org-constant">SingleTonObserver</span>.onChange<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">Singleton</span><span class="org-keyword">:</span> <span class="org-type">I</span> received a change event.

scala&gt; <span class="org-constant">SingleTonObserver</span>.onError<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">Singleton</span><span class="org-keyword">:</span> <span class="org-type">I</span> received an error event.

<span class="org-keyword">def</span> <span class="org-function-name">generateErrorEvent</span><span class="org-rainbow-delimiters-depth-1">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  obs.onError<span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; generateErrorEvent<span class="org-rainbow-delimiters-depth-1">(</span>obs1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">I</span> received an error event.

scala&gt; generateErrorEvent<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">SingleTonObserver</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Singleton</span><span class="org-keyword">:</span> <span class="org-type">I</span> received an error event.
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-14-3" class="outline-4">
<h4 id="sec-1-14-3"><span class="section-number-4">1.14.3</span> Case classes as records</h4>
<div class="outline-text-4" id="text-1-14-3">
<p>
Example: Simple record type.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Person</span><span class="org-rainbow-delimiters-depth-1">(</span>id<span class="org-keyword">:</span> <span class="org-type">Int</span>, firstName<span class="org-keyword">:</span> <span class="org-type">String</span>, lastName<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span>
defined <span class="org-keyword">class</span> <span class="org-type">Person</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">p1</span> <span class="org-keyword">=</span> <span class="org-constant">Person</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span>, <span class="org-string">"John"</span>, <span class="org-string">"Smith"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">p1</span><span class="org-keyword">:</span> <span class="org-type">Person</span> <span class="org-keyword">=</span> <span class="org-constant">Person</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span>,<span class="org-constant">John</span>,<span class="org-constant">Smith</span><span class="org-rainbow-delimiters-depth-1">)</span>

 scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">p2</span> <span class="org-keyword">=</span> <span class="org-constant">Person</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">600</span>, <span class="org-string">"Isaac"</span>, <span class="org-string">"Newton"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">p3</span><span class="org-keyword">:</span> <span class="org-type">Person</span> <span class="org-keyword">=</span> <span class="org-constant">Person</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">600</span>,<span class="org-constant">Isaac</span>,<span class="org-constant">Newton</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; p1.lastName
<span class="org-function-name">res150</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Smith</span>

scala&gt; p1.lastName <span class="org-keyword">=</span> <span class="org-string">""</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">16</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> reassignment to <span class="org-keyword">val</span>
       p1.lastName <span class="org-keyword">=</span> <span class="org-string">""</span>
                   ^

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>p1, p2<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Person</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span>,<span class="org-constant">John</span>,<span class="org-constant">Smith</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Person</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">600</span>,<span class="org-constant">Isaac</span>,<span class="org-constant">Newton</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>p1, p2<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.firstName<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res167</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">John</span>, <span class="org-constant">Isaac</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>p1, p2<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.lastName<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res168</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Smith</span>, <span class="org-constant">Newton</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-14-4" class="outline-4">
<h4 id="sec-1-14-4"><span class="section-number-4">1.14.4</span> Special Methods - Apply and Update</h4>
<div class="outline-text-4" id="text-1-14-4">
</div><div id="outline-container-sec-1-14-4-1" class="outline-5">
<h5 id="sec-1-14-4-1"><span class="section-number-5">1.14.4.1</span> Apply method - Callable objects</h5>
<div class="outline-text-5" id="text-1-14-4-1">
<p>
The Scala Apply-method is used to create callable objects similar to
C++'s "functor" (aka function-object) or an object that behaves like
function.  
</p>

<p>
<b>Example 1</b> - The apply method can be overloaded as a long as each
version has a unique type signature. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">ApplyTest</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Apply called with integer - x = "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"Apply called with string - s = '</span><span class="org-variable-name">$s</span><span class="org-string">' "</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x + y = "</span> + <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; obj1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Apply</span> called <span class="org-keyword">with</span> <span class="org-type">integer</span> - x <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; obj1.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Apply</span> called <span class="org-keyword">with</span> <span class="org-type">integer</span> - x <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; obj1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello world Scala, C++ functor function object"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Apply</span> called <span class="org-keyword">with</span> <span class="org-type">string</span> - s <span class="org-keyword">=</span> <span class="org-string">'hello</span> world <span class="org-constant">Scala</span>, <span class="org-constant">C</span>++ functor function <span class="org-keyword">object</span>'

scala&gt; obj1 apply <span class="org-string">"hello world Scala, C++ functor function object"</span>
<span class="org-constant">Apply</span> called <span class="org-keyword">with</span> <span class="org-type">string</span> - s <span class="org-keyword">=</span> <span class="org-string">'hello</span> world <span class="org-constant">Scala</span>, <span class="org-constant">C</span>++ functor function <span class="org-keyword">object</span>'

scala&gt; obj1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.6</span>, <span class="org-constant">2.435</span><span class="org-rainbow-delimiters-depth-1">)</span>
x + y <span class="org-keyword">=</span> <span class="org-constant">8.035</span>

scala&gt; obj1 apply <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.6</span>, <span class="org-constant">2.435</span><span class="org-rainbow-delimiters-depth-1">)</span>
x + y <span class="org-keyword">=</span> <span class="org-constant">8.035</span>

scala&gt; obj1.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.6</span>, <span class="org-constant">2.435</span><span class="org-rainbow-delimiters-depth-1">)</span>
x + y <span class="org-keyword">=</span> <span class="org-constant">8.035</span>
</pre>
</div>


<p>
<b>Example 2</b> - Singleton objects can also have apply method and be
called like functions. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">SingletonModule</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Apply called with integer - x = "</span> + x<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"Apply called with string - s = '</span><span class="org-variable-name">$s</span><span class="org-string">' "</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x + y = "</span> + <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-constant">SingletonModule</span>.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Apply</span> called <span class="org-keyword">with</span> <span class="org-type">integer</span> - x <span class="org-keyword">=</span> <span class="org-constant">5</span>

scala&gt; <span class="org-constant">SingletonModule</span>.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"C++'s function object"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Apply</span> called <span class="org-keyword">with</span> <span class="org-type">string</span> - s <span class="org-keyword">=</span> <span class="org-string">'C</span>++<span class="org-string">'s</span> function <span class="org-keyword">object</span>'

scala&gt; <span class="org-constant">SingletonModule</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"C++'s function object"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Apply</span> called <span class="org-keyword">with</span> <span class="org-type">string</span> - s <span class="org-keyword">=</span> <span class="org-string">'C</span>++<span class="org-string">'s</span> function <span class="org-keyword">object</span>'

scala&gt; <span class="org-constant">SingletonModule</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.5</span>, <span class="org-constant">9.343</span><span class="org-rainbow-delimiters-depth-1">)</span>
x + y <span class="org-keyword">=</span> <span class="org-constant">12.843</span>

scala&gt; <span class="org-constant">SingletonModule</span>.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.5</span>, <span class="org-constant">9.343</span><span class="org-rainbow-delimiters-depth-1">)</span>
x + y <span class="org-keyword">=</span> <span class="org-constant">12.843</span>

scala&gt; <span class="org-constant">SingletonModule</span> apply <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.5</span>, <span class="org-constant">9.343</span><span class="org-rainbow-delimiters-depth-1">)</span>
x + y <span class="org-keyword">=</span> <span class="org-constant">12.843</span>
</pre>
</div>

<p>
<b>Example 3</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">LinearEquation</span><span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-scala-font-lockXvar">_a</span>, <span class="org-scala-font-lockXvar">_b</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>a, b<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">toString</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    f<span class="org-string">"Linear equation = </span><span class="org-variable-name">${_a}</span><span class="org-string">%.3f * x + </span><span class="org-variable-name">${_b}</span><span class="org-string">%.3f "</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setA</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _a <span class="org-keyword">=</span> a

  <span class="org-keyword">def</span> <span class="org-function-name">setB</span><span class="org-rainbow-delimiters-depth-2">(</span>b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _b <span class="org-keyword">=</span> b 

  <span class="org-comment-delimiter">// </span><span class="org-comment">Compute the equation Y(x) = A * x + B at point x</span>
  <span class="org-keyword">def</span> <span class="org-function-name">compute</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _a * x + _b

  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _a * x + _b
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
The object lineq can be called as it was a function which is a syntax
sugar for the apply method.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Equation 3 * x + 4</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">lineq</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">LinearEquation</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">lineq</span><span class="org-keyword">:</span> <span class="org-type">LinearEquation</span> <span class="org-keyword">=</span> <span class="org-constant">Linear</span> equation <span class="org-keyword">=</span> <span class="org-constant">3.000</span> * x + <span class="org-constant">4.000</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">3 * 0 + 4 = 0</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">--&gt; It is a syntax sugar for the method apply.</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------</span>
scala&gt; lineq<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res40</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; lineq.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res50</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; lineq.compute<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">3 * 1 + 4 = 7</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------</span>
scala&gt; lineq<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res41</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">7.0</span>

scala&gt; lineq.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res51</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">7.0</span>

scala&gt; lineq.compute<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">7.0</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">3 * 2 + 4 = 6</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------</span>
scala&gt; lineq<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; lineq.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res52</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; lineq.compute<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map lineq
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> <span class="org-keyword">type</span> mismatch;
 found   <span class="org-keyword">:</span> <span class="org-type">LinearEquation</span>
 required<span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> ?
       <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map lineq

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">{</span>lineq <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res64</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">13.0</span>, <span class="org-constant">16.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map lineq.compute
<span class="org-function-name">res65</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">13.0</span>, <span class="org-constant">16.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Change the coefficients to Y(x) = 5 * x + 0</span>
scala&gt; lineq.setA<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; lineq.setB<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">{</span>lineq<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res68</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">15.0</span>, <span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-14-4-2" class="outline-5">
<h5 id="sec-1-14-4-2"><span class="section-number-5">1.14.4.2</span> Callable object comparison with closures</h5>
<div class="outline-text-5" id="text-1-14-4-2">
<p>
A closure function could be used instead of a callable object
providing the same results. The difference is that the objects can
update their internal state at run-time while a closures cannot.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">makeLinearEq</span><span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> a * x + b

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">makeLinearEq</span><span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
     |   <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> a * x + b
<span class="org-function-name">makeLinearEq</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Equation: Y(x) = 3 * x + 4 generated with closure </span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">lineqClosure</span> <span class="org-keyword">=</span> makeLinearEq<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">lineqClosure</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> $$Lambda$1577/<span class="org-constant">1928574577</span><span class="org-keyword">@</span><span class="org-constant">1</span>ccc5740


scala&gt; lineqClosure<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res70</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">7.0</span>

scala&gt; lineqClosure<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res72</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map lineqClosure
<span class="org-function-name">res71</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">13.0</span>, <span class="org-constant">16.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">There is no way to update a and b to a = 5 and b = 0</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">keeping the original lambda function. The only way to accomplish this</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">is to generate a new function.</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">lineqClosure2</span> <span class="org-keyword">=</span> makeLinearEq<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">lineqClosure2</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> $$Lambda$1577/<span class="org-constant">1928574577</span><span class="org-keyword">@</span><span class="org-constant">36715f</span>68

scala&gt;  <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map lineqClosure2
<span class="org-function-name">res73</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">15.0</span>, <span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">lineq</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">LinearEquation</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">lineq</span><span class="org-keyword">:</span> <span class="org-type">LinearEquation</span> <span class="org-keyword">=</span> <span class="org-constant">Linear</span> equation <span class="org-keyword">=</span> <span class="org-constant">3.000</span> * x + <span class="org-constant">4.000</span>

scala&gt;  <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">{</span> lineq <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res74</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">13.0</span>, <span class="org-constant">16.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">A Callable object can update its internal state at run-time.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; lineq.setA<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; lineq.setB<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; lineq
<span class="org-function-name">res79</span><span class="org-keyword">:</span> <span class="org-type">LinearEquation</span> <span class="org-keyword">=</span> <span class="org-constant">Linear</span> equation <span class="org-keyword">=</span> <span class="org-constant">5.000</span> * x + <span class="org-constant">0.000</span>

scala&gt;  <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">{</span> lineq <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res80</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">15.0</span>, <span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;  <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map lineq.compute
<span class="org-function-name">res82</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">15.0</span>, <span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Despite the closure limitations, the callable-object approach could be
emulated with closures by returning multiple functions from the
top-level function.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Case class is used here to emulate a record type </span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">LinearEquationFn</span><span class="org-rainbow-delimiters-depth-1">(</span>
  setA<span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>,
  getA<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>,  
  setB<span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>,
  getB<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>,
  compute<span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>  
<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">toString</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>  <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">_a</span>, <span class="org-variable-name">_b</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span>getA<span class="org-rainbow-delimiters-depth-4">()</span>, getB<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
     f<span class="org-string">"Linear equation = </span><span class="org-variable-name">${_a}</span><span class="org-string">%.3f * x + </span><span class="org-variable-name">${_b}</span><span class="org-string">%.3f "</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">makeLinearEqFn</span><span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">type</span> <span class="org-constant">D</span> <span class="org-keyword">=</span> <span class="org-constant">Double</span>
  <span class="org-keyword">var</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-scala-font-lockXvar">_a</span>, <span class="org-scala-font-lockXvar">_b</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>a, b<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">setB</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>b<span class="org-keyword">:</span> <span class="org-type">D</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>_b <span class="org-keyword">=</span> b<span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-constant">LinearEquationFn</span><span class="org-rainbow-delimiters-depth-2">(</span>
    setA <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span>a<span class="org-keyword">:</span> <span class="org-type">D</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">{</span>_a <span class="org-keyword">=</span> a <span class="org-rainbow-delimiters-depth-3">}</span>,
    getA <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> _a,
    setB <span class="org-keyword">=</span> setB,
    getB <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> _b,
    compute <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-keyword">:</span> <span class="org-type">D</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> _a * x + _b
  <span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">lineqEsoteric</span> <span class="org-keyword">=</span> makeLinearEqFn<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">lineqEsoteric</span><span class="org-keyword">:</span> <span class="org-type">LinearEquationFn</span> <span class="org-keyword">=</span> <span class="org-constant">Linear</span> equation <span class="org-keyword">=</span> <span class="org-constant">3.000</span> * x + <span class="org-constant">4.000</span>

scala&gt; lineqEsoteric.getA<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res83</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span>

scala&gt; lineqEsoteric.getB<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res84</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; lineqEsoteric.compute<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res85</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map lineqEsoteric.compute
<span class="org-function-name">res86</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">13.0</span>, <span class="org-constant">16.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; lineqEsoteric.setA<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; lineqEsoteric.setB<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; lineqEsoteric compute <span class="org-constant">5.0</span>
<span class="org-function-name">res90</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">25.0</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span>, <span class="org-constant">2.0</span>, <span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span> map lineqEsoteric.compute
<span class="org-function-name">res89</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">15.0</span>, <span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-14-4-3" class="outline-5">
<h5 id="sec-1-14-4-3"><span class="section-number-5">1.14.4.3</span> Update method</h5>
<div class="outline-text-5" id="text-1-14-4-3">
<p>
The update method provides an assignment syntax sugar which can be
useful for DSLs.
</p>

<p>
<b>Example</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">TestUpdate</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_x</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Value of x is = "</span> + _x<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    _x <span class="org-keyword">=</span> x 
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"x set to "</span> + _x<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    _x <span class="org-keyword">=</span> x + y
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"x set to "</span> + _x<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-keyword">:</span> <span class="org-type">String</span>, value<span class="org-keyword">:</span> <span class="org-type">Object</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span>s<span class="org-string">"Key </span><span class="org-variable-name">$s</span><span class="org-string"> of hash table set to value = </span><span class="org-variable-name">$value</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">u</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">TestUpdate</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">u</span><span class="org-keyword">:</span> <span class="org-type">TestUpdate</span> <span class="org-keyword">=</span> <span class="org-constant">TestUpdate</span><span class="org-keyword">@</span><span class="org-constant">16f</span>1cb2d

scala&gt; u<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Value</span> of x is <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; u<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
x set to <span class="org-constant">10</span>

scala&gt; u<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Value</span> of x is <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; u.update<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">35</span><span class="org-rainbow-delimiters-depth-1">)</span>
x set to <span class="org-constant">35</span>

scala&gt; u<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Value</span> of x is <span class="org-keyword">=</span> <span class="org-constant">35</span>

scala&gt; u.apply<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Value</span> of x is <span class="org-keyword">=</span> <span class="org-constant">35</span>

scala&gt;

scala&gt; u.update<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
x set to <span class="org-constant">15</span>

scala&gt; u<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Value</span> of x is <span class="org-keyword">=</span> <span class="org-constant">15</span>

scala&gt; u<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"database.url"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-string">"blob"</span>
<span class="org-constant">Key</span> database.url of hash table set to value <span class="org-keyword">=</span> blob

scala&gt; u.update<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"database.url"</span>, <span class="org-string">"blob"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Key</span> database.url of hash table set to value <span class="org-keyword">=</span> blob

u<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"character.gui"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Key</span> character.gui of hash table set to value <span class="org-keyword">=</span> javax.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">[</span>frame0 ...

scala&gt; u.update<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"character.gui"</span>, <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-constant">Key</span> character.gui of hash table set to value <span class="org-keyword">=</span> javax.swing.<span class="org-constant">JFrame</span> ... ... .
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-14-4-4" class="outline-5">
<h5 id="sec-1-14-4-4"><span class="section-number-5">1.14.4.4</span> Implementing C#-like properties</h5>
<div class="outline-text-5" id="text-1-14-4-4">
<p>
The update and apply method can be used to create C#-like properties
which are shorthands for get and set methods. A motivation to use
property or get or setters instead of public fields is the
encapsulation as making the internal data private allows changing the
class code, the data representation, memory layout; adding validation
logic to setters and firing events to GUIs without changing the client
code or breaking third-party code. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Only the get and set abstract methods needs to be defined.</span>
<span class="org-keyword">trait</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">A</span>
  <span class="org-keyword">def</span> <span class="org-function-name">set</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> get<span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> set<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">def</span> <span class="org-function-name">:=</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> set<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">toString</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> get<span class="org-rainbow-delimiters-depth-2">()</span>.toString   
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">object</span> <span class="org-constant">Property</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">simple</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>init<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_x</span> <span class="org-keyword">=</span> init
    <span class="org-keyword">new</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]{</span>      
      <span class="org-keyword">def</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-4">()</span>     <span class="org-keyword">=</span> _x
      <span class="org-keyword">def</span> <span class="org-function-name">set</span><span class="org-rainbow-delimiters-depth-4">(</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-4">{</span>_x  <span class="org-keyword">=</span> x<span class="org-rainbow-delimiters-depth-4">}</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">fromGS</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>getter<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span>, setter<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
    <span class="org-keyword">new</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]{</span>      
      <span class="org-keyword">def</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-3">()</span>     <span class="org-keyword">=</span> getter
      <span class="org-keyword">def</span> <span class="org-function-name">set</span><span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> setter<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span> 

  <span class="org-keyword">def</span> <span class="org-function-name">readOnly</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>getter<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">new</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]{</span>      
      <span class="org-keyword">def</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-3">()</span>     <span class="org-keyword">=</span>
        getter      
      <span class="org-keyword">def</span> <span class="org-function-name">set</span><span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span>
        <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.lang.<span class="org-constant">IllegalArgumentException</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Read-only property."</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">validate</span><span class="org-rainbow-delimiters-depth-2">(</span>cond<span class="org-keyword">:</span> <span class="org-type">Boolean</span>, msg<span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"Error invalid argument"</span><span class="org-rainbow-delimiters-depth-2">)(</span>action<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>cond<span class="org-rainbow-delimiters-depth-2">)</span>
      action
    <span class="org-keyword">else</span>
      <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.lang.<span class="org-constant">IllegalArgumentException</span><span class="org-rainbow-delimiters-depth-2">(</span>msg<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing and use-case:
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_name</span>  <span class="org-keyword">=</span> <span class="org-string">"unnamed"</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_price</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">id</span> <span class="org-keyword">=</span> <span class="org-constant">Property</span>.simple<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">name</span> <span class="org-keyword">=</span> <span class="org-constant">Property</span>.fromGS<span class="org-rainbow-delimiters-depth-2">(</span>
    getter <span class="org-keyword">=</span> _name,
    setter <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span>name<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span>  <span class="org-constant">Property</span>.validate<span class="org-rainbow-delimiters-depth-3">(</span>name != <span class="org-string">""</span>, <span class="org-string">"Name cannot be empty"</span><span class="org-rainbow-delimiters-depth-3">){</span>
      println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Name set to "</span> + name<span class="org-rainbow-delimiters-depth-4">)</span>
      _name <span class="org-keyword">=</span> name
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">price</span> <span class="org-keyword">=</span> <span class="org-constant">Property</span>.fromGS<span class="org-rainbow-delimiters-depth-2">(</span>
    getter <span class="org-keyword">=</span> _price,
    setter <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">(</span>price<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span>  <span class="org-rainbow-delimiters-depth-3">{</span>
      <span class="org-constant">Property</span>.validate<span class="org-rainbow-delimiters-depth-4">(</span>price &gt; <span class="org-constant">0</span> , <span class="org-string">"Price cannot be negative"</span><span class="org-rainbow-delimiters-depth-4">){</span>
        println<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"Price set to "</span> + price<span class="org-rainbow-delimiters-depth-5">)</span>
        _price <span class="org-keyword">=</span> price
      <span class="org-rainbow-delimiters-depth-4">}</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>    
  <span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">product</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">product</span><span class="org-keyword">:</span> <span class="org-type">Product</span> <span class="org-keyword">=</span> <span class="org-constant">Product</span><span class="org-keyword">@</span><span class="org-constant">209f</span>6b54

scala&gt; product.id
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; product.id<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>

scala&gt; product.id<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; product.id
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; product.id := <span class="org-constant">20</span>

scala&gt; product.id
<span class="org-function-name">res25</span><span class="org-keyword">:</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">----- Name property </span>

scala&gt; product.name
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> unnamed

cala&gt; product.name<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-string">"coffee"</span>
<span class="org-constant">Name</span> set to coffee

scala&gt; product.name.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> coffee

scala&gt; product.name.set<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"fresh orange juice"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Name</span> set to fresh orange juice

scala&gt; product.name := <span class="org-string">"Chilean wine"</span>
<span class="org-constant">Name</span> set to <span class="org-constant">Chilean</span> wine 

scala&gt; product.name<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-string">""</span>
<span class="org-function-name">java.lang.IllegalArgumentException</span><span class="org-keyword">:</span> <span class="org-type">Name</span> cannot be empty
  at <span class="org-constant">Property</span>$.validate<span class="org-rainbow-delimiters-depth-1">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">49</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at <span class="org-constant">Product</span>.$anonfun$name$2<span class="org-rainbow-delimiters-depth-1">(</span>&lt;pastie<span class="org-keyword">&gt;:</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">---- Price property </span>

scala&gt; product.price
 res19<span class="org-keyword">:</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>


scala&gt; product.price<span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>
<span class="org-constant">Price</span> set to <span class="org-constant">10.0</span>

scala&gt; product.price := <span class="org-constant">20.0</span>
<span class="org-constant">Price</span> set to <span class="org-constant">20.0</span>

scala&gt; product.price.set<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">15.0</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-constant">Price</span> set to <span class="org-constant">15.0</span>

scala&gt; product.price<span class="org-rainbow-delimiters-depth-2">()</span> * <span class="org-constant">10</span>
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">150.0</span>

scala&gt; product.price.get * <span class="org-constant">10.0</span>
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">150.0</span>

scala&gt; product.price := <span class="org-constant">-10.0</span>
<span class="org-function-name">java.lang.IllegalArgumentException</span><span class="org-keyword">:</span> <span class="org-type">Price</span> cannot be negative
  at <span class="org-constant">Property</span>$.validate<span class="org-rainbow-delimiters-depth-2">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">49</span><span class="org-rainbow-delimiters-depth-2">)</span>
  at <span class="org-constant">Product</span>.$anonfun$price$2<span class="org-rainbow-delimiters-depth-2">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">29</span><span class="org-rainbow-delimiters-depth-2">)</span>
  at scala.runtime.java8.<span class="org-constant">JFunction1</span>$mcVD$sp.apply<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">JFunction1</span>$mcVD$sp.java<span class="org-keyword">:</span><span class="org-constant">12</span><span class="org-rainbow-delimiters-depth-2">)</span>
  at <span class="org-constant">Property</span>$$anon$2.set<span class="org-rainbow-delimiters-depth-2">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-2">)</span>
  at <span class="org-constant">IProperty</span>.$colon$eq<span class="org-rainbow-delimiters-depth-2">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">18</span><span class="org-rainbow-delimiters-depth-2">)</span>
  at <span class="org-constant">IProperty</span>.$colon$eq$<span class="org-rainbow-delimiters-depth-2">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">18</span><span class="org-rainbow-delimiters-depth-2">)</span>
  at <span class="org-constant">Property</span>$$anon$2.$colon$eq<span class="org-rainbow-delimiters-depth-2">(</span>&lt;pastie<span class="org-keyword">&gt;:</span><span class="org-constant">32</span><span class="org-rainbow-delimiters-depth-2">)</span>
  ... <span class="org-constant">28</span> elided


<span class="org-keyword">def</span> <span class="org-function-name">showProduct</span><span class="org-rainbow-delimiters-depth-2">(</span>prod<span class="org-keyword">:</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
  println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Product info"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"  id    = "</span> + prod.id<span class="org-rainbow-delimiters-depth-3">)</span>
  println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"  name  = "</span> + prod.name<span class="org-rainbow-delimiters-depth-3">)</span>
  println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"  price = "</span> + prod.price<span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-rainbow-delimiters-depth-2">}</span>


scala&gt; showProduct<span class="org-rainbow-delimiters-depth-2">(</span>product<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-constant">Product</span> info
  id    <span class="org-keyword">=</span> <span class="org-constant">20</span>
  name  <span class="org-keyword">=</span> <span class="org-constant">Chilean</span> wine
  price <span class="org-keyword">=</span> <span class="org-constant">15.0</span>

<span class="org-keyword">def</span> <span class="org-function-name">updateProperty</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>prop<span class="org-keyword">:</span> <span class="org-type">IProperty</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span>, fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
  prop<span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> fn<span class="org-rainbow-delimiters-depth-2">(</span>prop<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Adjust price to inflation rate 6.5%</span>
scala&gt; updateProperty<span class="org-rainbow-delimiters-depth-2">(</span>product.price, <span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">100.0</span> + <span class="org-constant">6.5</span><span class="org-rainbow-delimiters-depth-3">)</span> / <span class="org-constant">100.0</span> * x<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-constant">Price</span> set to <span class="org-constant">15.975</span>
</pre>
</div>

<p>
See also: 
</p>

<ul class="org-ul">
<li><a href="https://medium.com/omarelgabrys-blog/properties-vs-fields-in-c-6cec86c59dc9">Property X Fields in C#</a>
</li>

<li><a href="https://stackoverflow.com/questions/26996901/how-exactly-are-the-get-and-set-methods-used-and-implemented-in-c-sharp">oop - How exactly are the Get and Set methods used and implemented in c# - Stack Overflow</a>
</li>

<li><a href="http://benjiweber.co.uk/blog/2014/03/20/c-style-properties-in-java/">C# style properties in Java | Benji's Blog -</a>
</li>

<li><a href="https://www.rhyous.com/2016/04/04/10-reasons-why-java-needs-csharps-property-syntax/">10+ Reasons why Java needs C#'s property syntax | Rhyous</a>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-14-5" class="outline-4">
<h4 id="sec-1-14-5"><span class="section-number-4">1.14.5</span> Creating a Class</h4>
<div class="outline-text-4" id="text-1-14-5">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">Account</span><span class="org-rainbow-delimiters-depth-1">(</span>owner<span class="org-keyword">:</span> <span class="org-type">String</span>, id<span class="org-keyword">:</span> <span class="org-type">Int</span>, balanceInit<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">balance</span> <span class="org-keyword">=</span> balanceInit

  <span class="org-keyword">def</span> <span class="org-function-name">getBalance</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> balance

  <span class="org-keyword">def</span> <span class="org-function-name">getId</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> id

  <span class="org-keyword">def</span> <span class="org-function-name">getOwner</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> owner

  <span class="org-keyword">def</span> <span class="org-function-name">deposit</span><span class="org-rainbow-delimiters-depth-2">(</span>amount<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>amount &lt; <span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-3">)</span>
      error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Erro: Invalid operation. Negative amount of money"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">else</span> 
      balance <span class="org-keyword">=</span> balance + amount
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">withdraw</span><span class="org-rainbow-delimiters-depth-2">(</span>amount<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> amount <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">case</span> <span class="org-variable-name">a</span> <span class="org-keyword">if</span> a &gt; balance
        <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Not enough funds to withdraw."</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-keyword">case</span> <span class="org-variable-name">a</span> <span class="org-keyword">if</span> a &lt; <span class="org-constant">0</span>
        <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Erro: Invalid operation. Negative amount of money"</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-keyword">case</span> <span class="org-keyword">_</span> <span class="org-keyword">=&gt;</span> balance <span class="org-keyword">=</span> balance - amount
  <span class="org-rainbow-delimiters-depth-2">}</span>


  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">toString</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    s<span class="org-string">"Account{id = </span><span class="org-variable-name">$id</span><span class="org-string">, owner = </span><span class="org-variable-name">$owner</span><span class="org-string">} = </span><span class="org-variable-name">$$</span><span class="org-string"> </span><span class="org-variable-name">$balance</span><span class="org-string">"</span> 
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">End of class Account</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">account</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Account</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Joseph Smith"</span>, <span class="org-constant">10234</span>, <span class="org-constant">4000</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">account</span><span class="org-keyword">:</span> <span class="org-type">Account</span> <span class="org-keyword">=</span> <span class="org-constant">Account</span><span class="org-rainbow-delimiters-depth-1">{</span>id <span class="org-keyword">=</span> <span class="org-constant">10234</span>, owner <span class="org-keyword">=</span> <span class="org-constant">Joseph</span> <span class="org-constant">Smith</span><span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">=</span> $ <span class="org-constant">4000</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">type tab after dot (.) to show all fields and methods</span>
<span class="org-comment-delimiter">//</span>
scala&gt; account.
deposit   getBalance   getId   getOwner   toString   withdraw

scala&gt; account.deposit <span class="org-keyword">_</span>
<span class="org-function-name">res228</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; account.getBalance <span class="org-keyword">_</span>
<span class="org-function-name">res229</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; account.getId <span class="org-keyword">_</span>
<span class="org-function-name">res230</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Int</span> <span class="org-keyword">=</span> &lt;function0&gt;



scala&gt; account.toString<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res180</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Account</span><span class="org-rainbow-delimiters-depth-1">{</span>id <span class="org-keyword">=</span> <span class="org-constant">10234</span>, owner <span class="org-keyword">=</span> <span class="org-constant">Joseph</span> <span class="org-constant">Smith</span><span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">=</span> $ <span class="org-constant">4000</span>

scala&gt; account.getClass<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res181</span><span class="org-keyword">:</span> <span class="org-type">Class</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-keyword">_</span> <span class="org-keyword">&lt;:</span> <span class="org-constant">Account</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-keyword">class</span> <span class="org-type">Account</span>


scala&gt; account.withdraw<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">300</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; account
<span class="org-function-name">res188</span><span class="org-keyword">:</span> <span class="org-type">Account</span> <span class="org-keyword">=</span> <span class="org-constant">Account</span><span class="org-rainbow-delimiters-depth-1">{</span>id <span class="org-keyword">=</span> <span class="org-constant">10234</span>, owner <span class="org-keyword">=</span> <span class="org-constant">Joseph</span> <span class="org-constant">Smith</span><span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">=</span> $ <span class="org-constant">3700</span>

scala&gt; account.withdraw<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10000</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">Not</span> enough funds to withdraw.
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at <span class="org-constant">Account</span>.withdraw<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">24</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt; account.withdraw<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Erro</span><span class="org-keyword">:</span> <span class="org-constant">Invalid</span> operation. <span class="org-constant">Negative</span> amount of money
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at <span class="org-constant">Account</span>.withdraw<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt; account
<span class="org-function-name">res191</span><span class="org-keyword">:</span> <span class="org-type">Account</span> <span class="org-keyword">=</span> <span class="org-constant">Account</span><span class="org-rainbow-delimiters-depth-1">{</span>id <span class="org-keyword">=</span> <span class="org-constant">10234</span>, owner <span class="org-keyword">=</span> <span class="org-constant">Joseph</span> <span class="org-constant">Smith</span><span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">=</span> $ <span class="org-constant">3700</span>

scala&gt; account.deposit<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; account
<span class="org-function-name">res193</span><span class="org-keyword">:</span> <span class="org-type">Account</span> <span class="org-keyword">=</span> <span class="org-constant">Account</span><span class="org-rainbow-delimiters-depth-1">{</span>id <span class="org-keyword">=</span> <span class="org-constant">10234</span>, owner <span class="org-keyword">=</span> <span class="org-constant">Joseph</span> <span class="org-constant">Smith</span><span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">=</span> $ <span class="org-constant">4100</span>

scala&gt; account.deposit<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">-400</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Erro</span><span class="org-keyword">:</span> <span class="org-constant">Invalid</span> operation. <span class="org-constant">Negative</span> amount of money
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at <span class="org-constant">Account</span>.deposit<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">17</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided


scala&gt; account.getOwner<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res225</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Joseph</span> <span class="org-constant">Smith</span>

scala&gt; account.getId<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res226</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10234</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-14-6" class="outline-4">
<h4 id="sec-1-14-6"><span class="section-number-4">1.14.6</span> Inheritance</h4>
<div class="outline-text-4" id="text-1-14-6">
<p>
Inheritance is useful in GUI programming to create new Widgets derived
from existing ones. 
</p>

<p>
The Button that inherits JButton below has a better initialization and Scala-friendly
method to add event handlers (aka Java's listeners).
</p>

<ul class="org-ul">
<li>The method onClick returns a function that when executed function
with type synonym dispose that when executed removes the event
handler. 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> javax.swing.<span class="org-keyword">_</span> 

<span class="org-keyword">type</span> <span class="org-constant">Dispose</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>

<span class="org-keyword">class</span> <span class="org-type">Button</span><span class="org-rainbow-delimiters-depth-1">(</span>
  text<span class="org-keyword">:</span>    <span class="org-type">String</span>,
  enabled<span class="org-keyword">:</span> <span class="org-type">Boolean</span>        <span class="org-keyword">=</span> <span class="org-constant">true</span>,
  bgColor<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.<span class="org-constant">Color</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>,
  fgColor<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.<span class="org-constant">Color</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>,
  toolTip<span class="org-keyword">:</span> <span class="org-type">String</span>         <span class="org-keyword">=</span> <span class="org-constant">null</span>,
  onClick<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>        <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JButton</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-keyword">this</span>.setText<span class="org-rainbow-delimiters-depth-3">(</span>text<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">this</span>.setEnabled<span class="org-rainbow-delimiters-depth-3">(</span>enabled<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>bgColor != <span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">this</span>.setBackground<span class="org-rainbow-delimiters-depth-3">(</span>bgColor<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>fgColor != <span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">this</span>.setForeground<span class="org-rainbow-delimiters-depth-3">(</span>fgColor<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>toolTip != <span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">this</span>.setToolTipText<span class="org-rainbow-delimiters-depth-3">(</span>toolTip<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">this</span>.onClick<span class="org-rainbow-delimiters-depth-3">{</span> onClick <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onClick</span> <span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Dispose</span>  <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">listener</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-4">{</span>
        handler
      <span class="org-rainbow-delimiters-depth-4">}</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">this</span>.addActionListener<span class="org-rainbow-delimiters-depth-3">(</span>listener<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-keyword">this</span>.removeActionListener<span class="org-rainbow-delimiters-depth-3">(</span>listener<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>



<span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">400</span>, <span class="org-constant">300</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setLayout<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.awt.<span class="org-constant">FlowLayout</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">button1</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Button</span><span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-string">"Click me!"</span>,
  <span class="org-comment-delimiter">// </span><span class="org-comment">Optional parameters </span>
  fgColor <span class="org-keyword">=</span> java.awt.<span class="org-constant">Color</span>.<span class="org-constant">RED</span>,  <span class="org-comment-delimiter">// </span><span class="org-comment">Foreground color </span>
  bgColor <span class="org-keyword">=</span> java.awt.<span class="org-constant">Color</span>.<span class="org-constant">GRAY</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">Background color </span>
  toolTip <span class="org-keyword">=</span> <span class="org-string">"Please click at me"</span>  
<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">button2</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Button</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Button Exit"</span><span class="org-rainbow-delimiters-depth-1">)</span>

frame.add<span class="org-rainbow-delimiters-depth-1">(</span>button1<span class="org-rainbow-delimiters-depth-1">)</span>
frame.add<span class="org-rainbow-delimiters-depth-1">(</span>button2<span class="org-rainbow-delimiters-depth-1">)</span>
frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>

button1.onClick<span class="org-rainbow-delimiters-depth-1">{</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Button 1 clicked"</span><span class="org-rainbow-delimiters-depth-2">)</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>

button2.onClick<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">System</span>.exit<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-14-7" class="outline-4">
<h4 id="sec-1-14-7"><span class="section-number-4">1.14.7</span> Class with higher order methods</h4>
<div class="outline-text-4" id="text-1-14-7">
<p>
Scala classes can have methods that accepts functions as parameters or
higher order methods. Note that Scala's collections like List, Array,
Map have higher order methods such as Array.map, Array.foreach and
so on.
</p>

<p>
Example: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">Pipe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>value<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">def</span> <span class="org-function-name">p</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">](</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Pipe</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-rainbow-delimiters-depth-3">(</span>value<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">def</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> value
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">v</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Pipe</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">v</span><span class="org-keyword">:</span> <span class="org-type">Pipe</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Pipe</span><span class="org-preprocessor">@d8c6f0</span>

scala&gt; v.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>.get
<span class="org-function-name">res41</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">110.0</span>

scala&gt; v.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-1">)</span>.get
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">-0.044242678085070965</span>

scala&gt; v.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-1">)</span>.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.cos<span class="org-rainbow-delimiters-depth-1">)</span>.get
<span class="org-function-name">res43</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.9990214523521718</span>

scala&gt; v.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-1">)</span>.p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.cos<span class="org-rainbow-delimiters-depth-1">)</span>.p<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>.get
<span class="org-function-name">res44</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.9970643570565154</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative way</span>

scala&gt; v p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> get
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">110.0</span>

scala&gt; v p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span> p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-1">)</span> p<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.cos<span class="org-rainbow-delimiters-depth-1">)</span> p<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span> get
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.9970643570565154</span>

<span class="org-rainbow-delimiters-depth-1">{</span> v
  .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>
  .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-2">)</span>
  .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Math</span>.cos<span class="org-rainbow-delimiters-depth-2">)</span>
  .p<span class="org-rainbow-delimiters-depth-2">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-2">)</span>
  .get
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">{</span> v
     |   .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |   .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-2">)</span>
     |   .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Math</span>.cos<span class="org-rainbow-delimiters-depth-2">)</span>
     |   .p<span class="org-rainbow-delimiters-depth-2">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-2">)</span>
     |   .get
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.9970643570565154</span>

<span class="org-keyword">val</span> <span class="org-variable-name">out</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  v
  .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>+<span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>
  .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-2">)</span>
  .p<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Math</span>.cos<span class="org-rainbow-delimiters-depth-2">)</span>
  .p<span class="org-rainbow-delimiters-depth-2">(</span>x <span class="org-keyword">=&gt;</span> x * <span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-2">)</span>
  .get
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">out</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.9970643570565154</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-14-8" class="outline-4">
<h4 id="sec-1-14-8"><a id="ID-f8bd284c-3347-4d14-95cd-df2f128dee25" name="ID-f8bd284c-3347-4d14-95cd-df2f128dee25"></a><span class="section-number-4">1.14.8</span> "Operator overloading"</h4>
<div class="outline-text-4" id="text-1-14-8">

<p>
Note: Scala doesn't have operator overloading since (+), (-) and other
math operators are just methods. 
</p>

<p>
Example: Complex number arithmetic. 
</p>

<ul class="org-ul">
<li><a href="src/complex.scala"><a href="src/complex.scala">src/complex.scala</a></a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">package</span> <span class="org-string">complex</span>

<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-1">(</span>re<span class="org-keyword">:</span> <span class="org-type">Double</span>, img<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">){</span>

  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">toString</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    s<span class="org-string">"</span><span class="org-variable-name">${re}</span><span class="org-string"> + </span><span class="org-variable-name">${img}</span><span class="org-string">j"</span>

  <span class="org-keyword">def</span> <span class="org-function-name">unary_-</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> 
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span>-<span class="org-keyword">this</span>.re, -<span class="org-keyword">this</span>.img<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-2">(</span>that<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">this</span>.re + that, <span class="org-keyword">this</span>.img<span class="org-rainbow-delimiters-depth-2">)</span>


  <span class="org-keyword">def</span> <span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-2">(</span>that<span class="org-keyword">:</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">this</span>.re + that.img, <span class="org-keyword">this</span>.img + that.img<span class="org-rainbow-delimiters-depth-2">)</span>


  <span class="org-keyword">def</span> <span class="org-function-name">-</span><span class="org-rainbow-delimiters-depth-2">(</span>that<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">this</span>.re - that, <span class="org-keyword">this</span>.img<span class="org-rainbow-delimiters-depth-2">)</span>


  <span class="org-keyword">def</span> <span class="org-function-name">-</span><span class="org-rainbow-delimiters-depth-2">(</span>that<span class="org-keyword">:</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">this</span>.re - that.re, <span class="org-keyword">this</span>.img - that.img<span class="org-rainbow-delimiters-depth-2">)</span>


  <span class="org-keyword">def</span> <span class="org-function-name">*</span><span class="org-rainbow-delimiters-depth-2">(</span>that<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span>that * <span class="org-keyword">this</span>.re, that * <span class="org-keyword">this</span>.img<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">*</span><span class="org-rainbow-delimiters-depth-2">(</span>that<span class="org-keyword">:</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">x</span> <span class="org-keyword">=</span> <span class="org-keyword">this</span>.re * that.re - <span class="org-keyword">this</span>.img * that.img
    <span class="org-keyword">val</span> <span class="org-variable-name">y</span> <span class="org-keyword">=</span> <span class="org-keyword">this</span>.re * that.img + <span class="org-keyword">this</span>.img * that.re 
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>


  <span class="org-keyword">def</span> <span class="org-function-name">/</span><span class="org-rainbow-delimiters-depth-2">(</span>that<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">this</span>.re / that, <span class="org-keyword">this</span>.img / that<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">/</span><span class="org-rainbow-delimiters-depth-2">(</span>that<span class="org-keyword">:</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">r</span> <span class="org-keyword">=</span> that.re * that.re + that.img * that.img
    <span class="org-keyword">val</span> <span class="org-variable-name">x</span> <span class="org-keyword">=</span> <span class="org-keyword">this</span>.re * that.re + <span class="org-keyword">this</span>.img * that.img
    <span class="org-keyword">val</span> <span class="org-variable-name">y</span> <span class="org-keyword">=</span> - <span class="org-keyword">this</span>.re * that.img + <span class="org-keyword">this</span>.img * that.re
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-3">(</span>x / r, y / r<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Conjugate </span>
  <span class="org-keyword">def</span> <span class="org-function-name">conj</span> <span class="org-keyword">=</span>
    <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">this</span>.re, -<span class="org-keyword">this</span>.img<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">norm</span> <span class="org-keyword">=</span> <span class="org-constant">Math</span>.sqrt<span class="org-rainbow-delimiters-depth-2">(</span>re * re + img * img<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Angle in radians </span>
  <span class="org-keyword">def</span> <span class="org-function-name">angle</span> <span class="org-keyword">=</span> <span class="org-constant">Math</span>.atan2<span class="org-rainbow-delimiters-depth-2">(</span>img, re<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Angle in degrees </span>
  <span class="org-keyword">def</span> <span class="org-function-name">angled</span> <span class="org-keyword">=</span> <span class="org-constant">Math</span>.atan2<span class="org-rainbow-delimiters-depth-2">(</span>img, re<span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-constant">180.0</span> / <span class="org-constant">Math</span>.<span class="org-constant">PI</span> 

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">object</span> <span class="org-constant">Complex</span><span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">j</span> <span class="org-keyword">=</span> <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">0</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">class</span> <span class="org-type">DoubleToCpl</span><span class="org-rainbow-delimiters-depth-2">(</span>k<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">def j = Cpl(0, k)</span>

    <span class="org-keyword">def</span> <span class="org-function-name">polr</span> <span class="org-keyword">=</span> <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Math</span>.cos<span class="org-rainbow-delimiters-depth-4">(</span>k<span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-4">(</span>k<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-keyword">def</span> <span class="org-function-name">pold</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      <span class="org-keyword">val</span> <span class="org-variable-name">a</span> <span class="org-keyword">=</span> k / <span class="org-constant">180.0</span> * <span class="org-constant">Math</span>.<span class="org-constant">PI</span>
      <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">Math</span>.cos<span class="org-rainbow-delimiters-depth-5">(</span>a<span class="org-rainbow-delimiters-depth-5">)</span>, <span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-5">(</span>a<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">k + that</span>
    <span class="org-keyword">def</span> <span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-3">(</span>that<span class="org-keyword">:</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-3">(</span>that.re + k, that.img<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">k * that </span>
    <span class="org-keyword">def</span> <span class="org-function-name">*</span><span class="org-rainbow-delimiters-depth-3">(</span>that<span class="org-keyword">:</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-3">(</span>k * that.re, k * that.img<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-keyword">def</span> <span class="org-function-name">-</span><span class="org-rainbow-delimiters-depth-3">(</span>that<span class="org-keyword">:</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-3">(</span>k - that.re, -that.img<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">k / that    </span>
    <span class="org-keyword">def</span> <span class="org-function-name">/</span><span class="org-rainbow-delimiters-depth-3">(</span>that<span class="org-keyword">:</span> <span class="org-type">Cpl</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> that.re * that.re + that.img * that.img
      <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-4">(</span> k * that.re / c, - k * that.img / c<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Explanation: 
</p>

<p>
The expression 4.56 + (10 + 4j) is equivalent to 4.56.add(10 + 4j),
that is a Double class method invocation. But implementing the method
.add(&lt;complex&gt;) would require modifying the source code of the class
Double. As it is not possible, the only way to implement this method
is by creating an implicit class "DoubleToCpl" that works as follow:
whenever the compiler finds the expression 4.50 + (10 + 4j), it
converts the number 4.50, that is an instance of Double class, to the
class DoubleTocpl that has a method to carry out complex number
addition.
</p>

<ul class="org-ul">
<li>(10 + 4j) + 3.50 is the same as:

<ul class="org-ul">
<li>(10 + 4j) add 3.50 or (10 + 4j).add(3.50)
</li>
</ul>
</li>

<li>4.56 + (10 + 4j) is the same as:

<ul class="org-ul">
<li>4.56 add (10 + 4j) or 4.56.add(10 + 4j)
</li>
</ul>
</li>
</ul>


<p>
Testing in the REPL by loading the script.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">:</span><span class="org-type">paste</span> src/complex.scala
<span class="org-constant">Pasting</span> file src/complex.scala...

<span class="org-keyword">import</span> complex.<span class="org-constant">Cpl</span>
<span class="org-keyword">import</span> complex.<span class="org-constant">Complex</span>.<span class="org-keyword">_</span>
<span class="org-keyword">import</span> scala.language.postfixOps


<span class="org-comment-delimiter">// </span><span class="org-comment">Imaginary unit</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------</span>
<span class="org-comment-delimiter">//</span>
scala&gt; j
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span> + <span class="org-constant">1.0</span>j

scala&gt; j * j
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">-1.0</span> + <span class="org-constant">0.0</span>j

scala&gt; - j
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">-0.0</span> + <span class="org-constant">-1.0</span>j

scala&gt; <span class="org-constant">6</span> + <span class="org-constant">8</span> * j
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span> + <span class="org-constant">8.0</span>j


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c</span> <span class="org-keyword">=</span> <span class="org-constant">6</span> + <span class="org-constant">8</span> * j
<span class="org-function-name">c</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span> + <span class="org-constant">8.0</span>j

scala&gt; c.re
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span>

scala&gt; c.img
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">8.0</span>

scala&gt; -c
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">-6.0</span> + <span class="org-constant">-8.0</span>j

scala&gt; c.conj
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span> + <span class="org-constant">-8.0</span>j

scala&gt; c * c.conj
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">100.0</span> + <span class="org-constant">0.0</span>j

scala&gt; <span class="org-constant">5</span> * c
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">30.0</span> + <span class="org-constant">40.0</span>j

scala&gt; c / <span class="org-constant">2</span>
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span> + <span class="org-constant">4.0</span>j

scala&gt; <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span> + <span class="org-constant">4.0</span>j

scala&gt; <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>.img
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>.norm
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>

scala&gt; <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>.img
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; <span class="org-constant">Cpl</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>.norm
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>


scala&gt; c / c
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">1.0</span> + <span class="org-constant">0.0</span>j
</pre>
</div>

<p>
Testing in the REPL by compiling the script.
</p>

<ol class="org-ol">
<li>Compile <a href="src/complex.scala"><a href="src/complex.scala">src/complex.scala</a></a> to a jar file.
</li>
</ol>

<div class="org-src-container">

<pre class="src src-sh">$ scalac src/complex.scala  -d complex.jar 

$ file complex.jar 
<span class="org-function-name">complex.jar</span>: Java archive data (JAR)

$ unzip -l complex.jar
<span class="org-function-name">Archive</span>:  complex.jar
  Length      Date    Time    Name
---------  ---------- -----   ----
       57  2017-09-26 02:22   META-INF/MANIFEST.MF
     7057  2017-09-26 02:22   complex/Cpl.class
     1726  2017-09-26 02:22   complex/Cpl$.class
      951  2017-09-26 02:22   complex/Complex.class
      840  2017-09-26 02:22   complex/Complex$.class
     1411  2017-09-26 02:22   complex/Complex$<span class="org-variable-name">DoubleToCpl</span>.class
---------                     -------
    12042                     6 files
</pre>
</div>

<ol class="org-ol">
<li>Load in the REPL
</li>
</ol>

<div class="org-src-container">

<pre class="src src-scala">$ scala  -cp complex.jar 
<span class="org-constant">Welcome</span> to <span class="org-constant">Scala</span> <span class="org-constant">2.12.3</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Java</span> <span class="org-constant">HotSpot</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">TM</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-constant">64</span>-<span class="org-constant">Bit</span> <span class="org-constant">Server</span> <span class="org-constant">VM</span>, <span class="org-constant">Java</span> <span class="org-constant">1.8.0</span>_144<span class="org-rainbow-delimiters-depth-1">)</span>.
<span class="org-constant">Type</span> in expressions <span class="org-keyword">for</span> evaluation. <span class="org-constant">Or</span> <span class="org-keyword">try</span> <span class="org-keyword">:</span><span class="org-type">help</span>.

<span class="org-keyword">import</span> complex.<span class="org-constant">Cpl</span>
<span class="org-keyword">import</span> complex.<span class="org-constant">Complex</span>.<span class="org-keyword">_</span>
<span class="org-keyword">import</span> scala.language.postfixOps

scala&gt; <span class="org-constant">6</span> + <span class="org-constant">8</span> * j
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span> + <span class="org-constant">8.0</span>j

scala&gt; <span class="org-constant">6</span> + <span class="org-constant">8</span> * j
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span> + <span class="org-constant">8.0</span>j

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">6</span> + <span class="org-constant">8</span> * j<span class="org-rainbow-delimiters-depth-1">)</span> conj
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">complex</span>.<span class="org-constant">Cpl</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span> + <span class="org-constant">-8.0</span>j

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">6</span> + <span class="org-constant">8</span> * j<span class="org-rainbow-delimiters-depth-1">)</span> norm 
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-14-9" class="outline-4">
<h4 id="sec-1-14-9"><span class="section-number-4">1.14.9</span> Abstract Classs</h4>
<div class="outline-text-4" id="text-1-14-9">
<p>
An abstract class is a class which cannot be instantiated, containing
abstract methods (methods without implementation) and non-abstract
methods .It is intended to be a base class or parent class for sub
classes that will inherit it.
</p>

<p>
Example: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-scala-font-lockXabstract">abstract</span> <span class="org-keyword">class</span> <span class="org-type">Shape</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">name</span><span class="org-keyword">:</span> <span class="org-type">String</span> 
  <span class="org-keyword">def</span> <span class="org-function-name">getArea</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Double</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getPerimiter</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Double</span>
  <span class="org-keyword">def</span> <span class="org-function-name">scaleDimensions</span><span class="org-rainbow-delimiters-depth-2">(</span>factor<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">Rectangle</span><span class="org-rainbow-delimiters-depth-1">(</span>xx<span class="org-keyword">:</span> <span class="org-type">Double</span>, yy<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Shape</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">x</span> <span class="org-keyword">=</span> xx
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">y</span> <span class="org-keyword">=</span> yy

  <span class="org-keyword">val</span> <span class="org-variable-name">name</span> <span class="org-keyword">=</span> <span class="org-string">"Rectangle"</span>

  <span class="org-keyword">def</span> <span class="org-function-name">getArea</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> x * y

  <span class="org-keyword">def</span> <span class="org-function-name">getPerimiter</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-constant">2.0</span> * <span class="org-rainbow-delimiters-depth-2">(</span>x + y<span class="org-rainbow-delimiters-depth-2">)</span> 

  <span class="org-keyword">def</span> <span class="org-function-name">scaleDimensions</span><span class="org-rainbow-delimiters-depth-2">(</span>factor<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    x <span class="org-keyword">=</span> factor * x
    y <span class="org-keyword">=</span> factor * y
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">getX</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> x
  <span class="org-keyword">def</span> <span class="org-function-name">getY</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> y
  <span class="org-keyword">def</span> <span class="org-function-name">setX</span><span class="org-rainbow-delimiters-depth-2">(</span>nx<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span> x <span class="org-keyword">=</span> nx <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">def</span> <span class="org-function-name">setY</span><span class="org-rainbow-delimiters-depth-2">(</span>ny<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span> y <span class="org-keyword">=</span> ny <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">Circle</span><span class="org-rainbow-delimiters-depth-1">(</span>r<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Shape</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">radius</span> <span class="org-keyword">=</span> r
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">pi</span> <span class="org-keyword">=</span> <span class="org-constant">3.1415</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">name</span> <span class="org-keyword">=</span> <span class="org-string">"Circle"</span>

  <span class="org-keyword">def</span> <span class="org-function-name">getArea</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> pi * radius * radius

  <span class="org-keyword">def</span> <span class="org-function-name">getPerimiter</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-constant">2.0</span> * pi * radius

  <span class="org-keyword">def</span> <span class="org-function-name">scaleDimensions</span><span class="org-rainbow-delimiters-depth-2">(</span>factor<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    radius <span class="org-keyword">=</span> factor * radius
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">getRadius</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> radius

  <span class="org-keyword">def</span> <span class="org-function-name">setRadius</span><span class="org-rainbow-delimiters-depth-2">(</span>r<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span> radius <span class="org-keyword">=</span> r<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>



scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">rec</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Rectangle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span>, <span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">rec</span><span class="org-keyword">:</span> <span class="org-type">Rectangle</span> <span class="org-keyword">=</span> <span class="org-constant">Rectangle</span><span class="org-keyword">@</span><span class="org-constant">8f</span>2e3e6

scala&gt; rec.name
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Rectangle</span>

scala&gt; rec.getX<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; rec.getY<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.0</span>

scala&gt; rec.getArea<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">200.0</span>

scala&gt; rec.getPerimiter<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">60.0</span>

scala&gt; rec.scaleDimensions<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; rec.getX<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.0</span>

scala&gt; rec.getArea<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">800.0</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">circ</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Circle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">circ</span><span class="org-keyword">:</span> <span class="org-type">Circle</span> <span class="org-keyword">=</span> <span class="org-constant">Circle</span><span class="org-keyword">@</span><span class="org-constant">169d</span>5567

scala&gt; circ.name
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Circle</span>

scala&gt; circ.getArea<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">314.15000000000003</span>

scala&gt; circ.getPerimiter<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">62.830000000000005</span>

scala&gt; circ.getRadius<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Shape</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Circle</span><span class="org-keyword">@</span><span class="org-constant">169d</span>5567, <span class="org-constant">Rectangle</span><span class="org-keyword">@</span><span class="org-constant">8f</span>2e3e6<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.name<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Circle</span>, <span class="org-constant">Rectangle</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.getArea<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">314.15000000000003</span>, <span class="org-constant">800.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.getArea<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>.sum
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1114.15</span>


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.getPerimiter<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">62.830000000000005</span>, <span class="org-constant">120.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.getPerimiter<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>.sum
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">182.83</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-14-10" class="outline-4">
<h4 id="sec-1-14-10"><span class="section-number-4">1.14.10</span> Traits</h4>
<div class="outline-text-4" id="text-1-14-10">
<p>
Traits are similar to java interfaces. A class can inherit only one
class, but can mix multiple traits and must implement the methods and
fields of each trait.
</p>

<p>
Notes:
</p>

<ul class="org-ul">
<li>A trait can have concrete and abstract methods.
</li>

<li>Traits must not have constructors.
</li>

<li>Unlike interfaces, traits can have implementation of methods.
</li>
</ul>


<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">trait</span> <span class="org-type">Shape</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">String</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getArea</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Double</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">trait</span> <span class="org-type">Location</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">ox</span><span class="org-keyword">:</span> <span class="org-type">Double</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">oy</span><span class="org-keyword">:</span> <span class="org-type">Double</span>
  <span class="org-keyword">def</span> <span class="org-function-name">move</span><span class="org-rainbow-delimiters-depth-2">(</span>dx<span class="org-keyword">:</span> <span class="org-type">Double</span>, dy<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
  <span class="org-keyword">def</span> <span class="org-function-name">location</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">Rectangle</span><span class="org-rainbow-delimiters-depth-1">(</span>w<span class="org-keyword">:</span> <span class="org-type">Double</span>, h<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Shape</span> <span class="org-keyword">with</span> <span class="org-type">Location</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">ox</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">oy</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span> 
  <span class="org-keyword">def</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-string">"rectangle"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getArea</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> w * h

  <span class="org-keyword">def</span> <span class="org-function-name">move</span><span class="org-rainbow-delimiters-depth-2">(</span>dx<span class="org-keyword">:</span> <span class="org-type">Double</span>, dy<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    ox <span class="org-keyword">=</span> ox + dx
    oy <span class="org-keyword">=</span> oy + dy 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">location</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>ox, oy<span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">Circle</span><span class="org-rainbow-delimiters-depth-1">(</span>radius<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Shape</span> <span class="org-keyword">with</span> <span class="org-type">Location</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">ox</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">oy</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span> 
  <span class="org-keyword">def</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-string">"circle"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getArea</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-constant">3.1415</span> * radius * radius

  <span class="org-keyword">def</span> <span class="org-function-name">move</span><span class="org-rainbow-delimiters-depth-2">(</span>dx<span class="org-keyword">:</span> <span class="org-type">Double</span>, dy<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    ox <span class="org-keyword">=</span> ox + dx
    oy <span class="org-keyword">=</span> oy + dy 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">location</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>ox, oy<span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-1">}</span>




scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">rec</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Rectangle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span>, <span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">rec</span><span class="org-keyword">:</span> <span class="org-type">Rectangle</span> <span class="org-keyword">=</span> <span class="org-constant">Rectangle</span><span class="org-keyword">@</span><span class="org-constant">29526</span>c05

scala&gt; rec.
getArea   getName   location   move   ox   oy

scala&gt; rec.getArea<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">200.0</span>

scala&gt; rec.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> rectangle

scala&gt; rec.location<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>,<span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; rec.move<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.0</span>, <span class="org-constant">30.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; rec.location<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.0</span>,<span class="org-constant">30.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; rec.move<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>, <span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; rec.location<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.0</span>,<span class="org-constant">40.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; 


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">loc</span><span class="org-keyword">:</span> <span class="org-type">Location</span> <span class="org-keyword">=</span> rec
<span class="org-function-name">loc</span><span class="org-keyword">:</span> <span class="org-type">Location</span> <span class="org-keyword">=</span> <span class="org-constant">Rectangle</span><span class="org-keyword">@</span><span class="org-constant">29526</span>c05

scala&gt; loc.
location   move   ox   ox_<span class="org-keyword">=</span>   oy   oy_<span class="org-keyword">=</span>

scala&gt; loc.location<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.0</span>,<span class="org-constant">40.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; loc.ox
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.0</span>

scala&gt; loc.oy
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">40.0</span>

scala&gt; loc.getName<span class="org-rainbow-delimiters-depth-1">()</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">17</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> value getName is not a member of <span class="org-constant">Location</span>
       loc.getName<span class="org-rainbow-delimiters-depth-1">()</span>
           ^


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">circ</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Circle</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">circ</span><span class="org-keyword">:</span> <span class="org-type">Circle</span> <span class="org-keyword">=</span> <span class="org-constant">Circle</span><span class="org-keyword">@</span><span class="org-constant">2</span>ecdcfe3

scala&gt; circ.getArea<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">314.15000000000003</span>

scala&gt; circ.location<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>,<span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; circ.move<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span>, <span class="org-constant">30.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; circ.location<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span>,<span class="org-constant">30.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; circ.move<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span>, <span class="org-constant">30.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; circ.location<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.0</span>,<span class="org-constant">60.0</span><span class="org-rainbow-delimiters-depth-1">)</span>



scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.getArea<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">314.15000000000003</span>, <span class="org-constant">200.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.location<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">20.0</span>,<span class="org-constant">60.0</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">20.0</span>,<span class="org-constant">40.0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.getName<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circle, rectangle<span class="org-rainbow-delimiters-depth-1">)</span>



<span class="org-keyword">def</span> <span class="org-function-name">getArea</span><span class="org-rainbow-delimiters-depth-1">(</span>shape<span class="org-keyword">:</span> <span class="org-type">Shape</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> shape.getArea<span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; getArea<span class="org-rainbow-delimiters-depth-1">(</span>circ<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">314.15000000000003</span>

scala&gt; getArea<span class="org-rainbow-delimiters-depth-1">(</span>rec<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">200.0</span>

<span class="org-keyword">def</span> <span class="org-function-name">getDistance</span><span class="org-rainbow-delimiters-depth-1">(</span>loc<span class="org-keyword">:</span> <span class="org-type">Location</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">Math</span>.sqrt<span class="org-rainbow-delimiters-depth-1">(</span>loc.ox * loc.ox + loc.oy * loc.oy<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; getDistance<span class="org-rainbow-delimiters-depth-1">(</span>circ<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">63.245553203367585</span>

scala&gt; getDistance<span class="org-rainbow-delimiters-depth-1">(</span>rec<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">44.721359549995796</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>circ, rec<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span>getDistance<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">63.245553203367585</span>, <span class="org-constant">44.721359549995796</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-15" class="outline-3">
<h3 id="sec-1-15"><span class="section-number-3">1.15</span> OO - Design Patterns</h3>
<div class="outline-text-3" id="text-1-15">
</div><div id="outline-container-sec-1-15-1" class="outline-4">
<h4 id="sec-1-15-1"><span class="section-number-4">1.15.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-15-1">
<p>
GOF - Gang of Four Design Patterns or Design Patterns: Elements of
Reusable Object-Oriented Software (Addison-Wesley Publishing
Company, 1995)
</p>

<p>
<b>Design Patterns</b>
</p>

<ul class="org-ul">
<li><b>Creational Pattern</b> - Patterns concerned with object
instatiation/creation.

<ul class="org-ul">
<li>Factory pattern  
<ul class="org-ul">
<li>Simple Factory
</li>
<li>Factory Method 
</li>
</ul>
</li>
</ul>
</li>

<li><b>Behavioral Patterns</b> - Patterns that focus on communication
between objects.

<ul class="org-ul">
<li>Strategy Pattern - Allows switching algorithm/strategy at run-time.
</li>

<li>Observer / Publisher-Subscriber
</li>
</ul>
</li>

<li><b>Structural</b> - Patterns fucusing on objects composition to extend
its functionality.
</li>
</ul>

<p>
<b>Creational Patterns</b>
</p>

<p>
Factory Pattern 
</p>

<ul class="org-ul">
<li>Intent: Instantiate classes with a common parent class or interface
without specifying a concrete class.
</li>
</ul>

<p>
Singleton 
</p>

<ul class="org-ul">
<li>Intent: Ensure that a class with only one instance. 
</li>
</ul>

<p>
<b>Structural Patterns</b>
</p>

<p>
Facade Pattern
</p>

<ul class="org-ul">
<li>Provide a unified and simplified interface to a complex subsystem.
</li>
</ul>

<p>
<b>Behavioral Patterns</b>
</p>

<p>
Strategy Pattern
</p>

<ul class="org-ul">
<li>Intent: Encapsulate algorithms with objects and switch them at run-time.
</li>
</ul>

<p>
Observer Pattern
</p>

<ul class="org-ul">
<li>Intent: Define one-to-many dependency between objects.
</li>

<li>Known uses: Event driven-systems such as GUIs such as Gtk, QT and
Java Swing events or Model in model view controller pattern.
</li>
</ul>

<p>
Iterator Pattern 
</p>

<ul class="org-ul">
<li>Intent: Access elements of a container without exposing its representation.
</li>

<li>Known uses: Java Iterators, C++ STL iterators.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-15-2" class="outline-4">
<h4 id="sec-1-15-2"><span class="section-number-4">1.15.2</span> Creational Design Patterns</h4>
<div class="outline-text-4" id="text-1-15-2">
</div><div id="outline-container-sec-1-15-2-1" class="outline-5">
<h5 id="sec-1-15-2-1"><span class="section-number-5">1.15.2.1</span> Singleton Design Pattern</h5>
<div class="outline-text-5" id="text-1-15-2-1">
<p>
Singleton is a creational design pattern where there is only a single
instance of a class and the client code is not allowed to create more
instances.
</p>

<p>
Example: As the singleton pattern is already a language feature of
Scala, it will be shown first the Java implementation of the pattern
and then the Scala implementation. 
</p>

<p>
File: Singleton.java 
</p>

<div class="org-src-container">

<pre class="src src-java"><span class="org-keyword">public</span> <span class="org-keyword">class</span> <span class="org-type">Singleton</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">private</span> <span class="org-keyword">static</span> <span class="org-type">Singleton</span> <span class="org-variable-name">_instance</span> = <span class="org-keyword">new</span> <span class="org-type">Singleton</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">private</span> <span class="org-type">String</span> <span class="org-variable-name">_name</span> = <span class="org-string">"unnamed"</span>;

    <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">setName</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">String</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">){</span>
        _name = name;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">service1</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        System.out.println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Hello world user: "</span> + _name<span class="org-rainbow-delimiters-depth-3">)</span>;
        System.out.println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Scala is much better than Java!"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-type">Singleton</span> <span class="org-function-name">getInstance</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">return</span> _instance;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Compiling and running: 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Compile Singleton.java to generate Singleton.class</span>
<span class="org-comment-delimiter">#</span>
$ javac Singleton.java

<span class="org-comment-delimiter"># </span><span class="org-comment">Run Scala REPL and play with compiled Java code.</span>
<span class="org-comment-delimiter">#</span>
$ scala
Welcome to Scala 2.12.4 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_162)<span class="org-builtin">.</span>
Type<span class="org-keyword"> in</span> expressions for evaluation. Or try :help.

scala&gt; val s = new Singleton()
&lt;console&gt;:11: error: trait Singleton is abstract; cannot be instantiated
       val s = new Singleton()
               ^

scala&gt; val s = Singleton.getInstance()
<span class="org-function-name">s</span>: Singleton = Singleton@517a2b0

scala&gt; s.service1()
Hello world user: unnamed
Scala is much better than Java!

scala&gt; s.setName(<span class="org-string">"Somebody else"</span>)

scala&gt; s.service1()
Hello world user: Somebody else
Scala is much better than Java!

scala&gt; val s2 = Singleton.getInstance()
<span class="org-function-name">s2</span>: Singleton = Singleton@517a2b0

scala&gt; s2.service1()
Hello world user: Somebody else
Scala is much better than Java!

<span class="org-comment-delimiter"># </span><span class="org-comment">Check if s2 and s have the same reference, point to the same </span>
<span class="org-comment-delimiter"># </span><span class="org-comment">memory location. </span>
scala&gt; s2 == s
<span class="org-function-name">res3</span>: Boolean = true

scala&gt; s2.service1()
Hello world user: Somebody else
Scala is much better than Java!
</pre>
</div>

<p>
Scala way: In Scala, there are no static methods or static classes
(classes only with static methods), however they can be replaced by
the singleton created with the "object" keyword.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">SingletonScala</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">It could be: private var _name = "unnamed"</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_name</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"unnamed"</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setName</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _name <span class="org-keyword">=</span> name

  <span class="org-keyword">def</span> <span class="org-function-name">service1</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Hello world user: "</span> + _name<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-constant">System</span>.out.println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Scala is much better than Java!"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing in REPL:
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">SingletonScala</span>.service1<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Hello</span> world user<span class="org-keyword">:</span> <span class="org-type">unnamed</span>
<span class="org-constant">Scala</span> is much better than <span class="org-constant">Java</span>!

scala&gt; <span class="org-constant">SingletonScala</span>.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Thor"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ss1</span> <span class="org-keyword">=</span> <span class="org-constant">SingletonScala</span>
<span class="org-function-name">ss1</span><span class="org-keyword">:</span> <span class="org-type">SingletonScala</span>.<span class="org-keyword">type</span> <span class="org-keyword">=</span> <span class="org-constant">SingletonScala</span>$<span class="org-keyword">@</span><span class="org-constant">12811f</span>95

scala&gt; ss1.service1<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Hello</span> world user<span class="org-keyword">:</span> <span class="org-type">Thor</span>
<span class="org-constant">Scala</span> is much better than <span class="org-constant">Java</span>!

<span class="org-comment-delimiter">// </span><span class="org-comment">Reference equality, aka identity equality </span>
scala&gt; ss1 == <span class="org-constant">SingletonScala</span>
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>
</pre>
</div>

<p>
The Java code mentioned before could be emulated in this way:
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">Singleton2</span> <span class="org-scala-font-lockXprivate">private</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_name</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">"unnamed"</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setName</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
      _name <span class="org-keyword">=</span> name

  <span class="org-keyword">def</span> <span class="org-function-name">service1</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Hello world user: "</span> + _name<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-constant">System</span>.out.println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Scala is much better than Java!"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">object</span> <span class="org-constant">Singleton2</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">instance</span> <span class="org-keyword">=</span>
    <span class="org-keyword">new</span> <span class="org-type">Singleton2</span><span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">getInstance</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    instance
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">//  </span><span class="org-comment">Copy class Singleton2 and companion object Singleton2 paste them together </span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">with command (:paste) in Scala REPL.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">:</span><span class="org-type">paste</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ssa</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Singleton2</span><span class="org-rainbow-delimiters-depth-1">()</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> constructor <span class="org-constant">Singleton2</span> in <span class="org-keyword">class</span> <span class="org-type">Singleton2</span> cannot be accessed in <span class="org-keyword">object</span> <span class="org-constant">$iw</span>
       <span class="org-keyword">val</span> <span class="org-variable-name">ssa</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Singleton2</span><span class="org-rainbow-delimiters-depth-1">()</span>
                 ^

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ssa</span> <span class="org-keyword">=</span> <span class="org-constant">Singleton2</span>.getInstance<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ssa</span><span class="org-keyword">:</span> <span class="org-type">Singleton2</span> <span class="org-keyword">=</span> <span class="org-constant">Singleton2</span><span class="org-keyword">@</span><span class="org-constant">71d</span>6e503

scala&gt; ssa.service1<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Hello</span> world user<span class="org-keyword">:</span> <span class="org-type">unnamed</span>
<span class="org-constant">Scala</span> is much better than <span class="org-constant">Java</span>!

scala&gt; ssa.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Someone"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ssa.service1<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Hello</span> world user<span class="org-keyword">:</span> <span class="org-type">Someone</span>
<span class="org-constant">Scala</span> is much better than <span class="org-constant">Java</span>!

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ssb</span> <span class="org-keyword">=</span> <span class="org-constant">Singleton2</span>.getInstance<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ssb</span><span class="org-keyword">:</span> <span class="org-type">Singleton2</span> <span class="org-keyword">=</span> <span class="org-constant">Singleton2</span><span class="org-keyword">@</span><span class="org-constant">71d</span>6e503

scala&gt; ssb.service1<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Hello</span> world user<span class="org-keyword">:</span> <span class="org-type">Someone</span>
<span class="org-constant">Scala</span> is much better than <span class="org-constant">Java</span>!
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-15-2-2" class="outline-5">
<h5 id="sec-1-15-2-2"><span class="section-number-5">1.15.2.2</span> Simple factory pattern</h5>
<div class="outline-text-5" id="text-1-15-2-2">
<p>
Defined by GOF as: "Define an interface for creating an object, but
let subclasses decide which class to instantiate. Factory Method lets
a class defer instantiation to subclasses."
</p>

<p>
The factory pattern is used to create instances of different
subclasses of a class. A factory class instantiates a subclass based
on the input passed to the factory.
</p>

<p>
Parts: 
</p>

<ul class="org-ul">
<li>Product - Parent class which subclasses will be instantiated by the factory.
</li>

<li>Factory - Class that instantiate product subclasses. 
</li>
</ul>

<p>
The class ComputerFactory is used to instantiate classes that
implements the trait (interface) based on the input passed to the
factory.
</p>

<p>
Note: This pattern is not extensible since, the class ComputerFactory
needs to be modified for every new Computer subclass.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">trait</span> <span class="org-type">Computer</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getManufacturer</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">String</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Int</span>
  <span class="org-keyword">def</span> <span class="org-function-name">clockGHZ</span><span class="org-keyword">:</span> <span class="org-type">Int</span>

  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">toString</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">m</span>  <span class="org-keyword">=</span> getManufacturer<span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">id</span> <span class="org-keyword">=</span> getID<span class="org-rainbow-delimiters-depth-3">()</span>
    s<span class="org-string">"{ Manufacturer = </span><span class="org-variable-name">$m</span><span class="org-string"> id = </span><span class="org-variable-name">$id</span><span class="org-string"> clock = </span><span class="org-variable-name">$clockGHZ</span><span class="org-string"> }"</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">ComputerA</span> <span class="org-keyword">extends</span> <span class="org-type">Computer</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getManufacturer</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-string">"SunJitsu"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">=</span> <span class="org-constant">100</span>
  <span class="org-keyword">def</span> <span class="org-function-name">clockGHZ</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">ComputerB</span> <span class="org-keyword">extends</span> <span class="org-type">Computer</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getManufacturer</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-string">"some manufacturer"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">=</span> <span class="org-constant">300</span>
  <span class="org-keyword">def</span> <span class="org-function-name">clockGHZ</span> <span class="org-keyword">=</span> <span class="org-constant">100</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">ComputerC</span> <span class="org-keyword">extends</span> <span class="org-type">Computer</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getManufacturer</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-string">"unknown manufacturer"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">=</span> <span class="org-constant">350</span>
  <span class="org-keyword">def</span> <span class="org-function-name">clockGHZ</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">ComputerFactory</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getComputer</span><span class="org-rainbow-delimiters-depth-2">(</span>comp<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> comp <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">case</span> <span class="org-string">"compA"</span> <span class="org-keyword">=&gt;</span> <span class="org-keyword">new</span> <span class="org-type">ComputerA</span><span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-keyword">case</span> <span class="org-string">"compB"</span> <span class="org-keyword">=&gt;</span> <span class="org-keyword">new</span> <span class="org-type">ComputerB</span><span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-keyword">case</span> <span class="org-string">"compC"</span> <span class="org-keyword">=&gt;</span> <span class="org-keyword">new</span> <span class="org-type">ComputerC</span><span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-keyword">case</span> <span class="org-keyword">_</span>       <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: This type of computer doesn't exist"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">factory</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ComputerFactory</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">factory</span><span class="org-keyword">:</span> <span class="org-type">ComputerFactory</span> <span class="org-keyword">=</span> <span class="org-constant">ComputerFactory</span><span class="org-keyword">@</span><span class="org-constant">6</span>acb0d0d

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">compA</span> <span class="org-keyword">=</span> factory.getComputer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"compA"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">compA</span><span class="org-keyword">:</span> <span class="org-type">Computer</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> <span class="org-constant">SunJitsu</span> id <span class="org-keyword">=</span> <span class="org-constant">100</span> clock <span class="org-keyword">=</span> <span class="org-constant">4</span> <span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; compA.getManufacturer<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res29</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">SunJitsu</span>

scala&gt; compA.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">100</span>

scala&gt; 


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">compB</span> <span class="org-keyword">=</span> factory.getComputer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"compB"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">compB</span><span class="org-keyword">:</span> <span class="org-type">Computer</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> some manufacturer id <span class="org-keyword">=</span> <span class="org-constant">300</span> clock <span class="org-keyword">=</span> <span class="org-constant">100</span> <span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">compC</span> <span class="org-keyword">=</span> factory.getComputer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"compC"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">compC</span><span class="org-keyword">:</span> <span class="org-type">Computer</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> unknown manufacturer id <span class="org-keyword">=</span> <span class="org-constant">350</span> clok <span class="org-keyword">=</span> <span class="org-constant">4</span> <span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; factory.getComputer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"comp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">This</span> <span class="org-keyword">type</span> of computer doesn<span class="org-string">'t</span> exist
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at <span class="org-constant">ComputerFactory</span>.getComputer<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>compA, compB, compC<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res34</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Computer</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> <span class="org-constant">SunJitsu</span> id <span class="org-keyword">=</span> <span class="org-constant">100</span> clok <span class="org-keyword">=</span> <span class="org-constant">4</span> <span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> some manufacturer id <span class="org-keyword">=</span> <span class="org-constant">300</span> clok <span class="org-keyword">=</span> <span class="org-constant">100</span> <span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> unknown manufacturer id <span class="org-keyword">=</span> <span class="org-constant">350</span> clok <span class="org-keyword">=</span> <span class="org-constant">4</span> <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>compA, compB, compC<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> <span class="org-constant">SunJitsu</span> id <span class="org-keyword">=</span> <span class="org-constant">100</span> clok <span class="org-keyword">=</span> <span class="org-constant">4</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> some manufacturer id <span class="org-keyword">=</span> <span class="org-constant">300</span> clok <span class="org-keyword">=</span> <span class="org-constant">100</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> unknown manufacturer id <span class="org-keyword">=</span> <span class="org-constant">350</span> clok <span class="org-keyword">=</span> <span class="org-constant">4</span> <span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>compA, compB, compC<span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.getID<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span>, <span class="org-constant">300</span>, <span class="org-constant">350</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Functional Simplification: The factory class can replaces by a
function that instantiates the product sub classes. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">getComputer</span><span class="org-rainbow-delimiters-depth-1">(</span>comp<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> comp <span class="org-keyword">match</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">case</span> <span class="org-string">"compA"</span> <span class="org-keyword">=&gt;</span> <span class="org-keyword">new</span> <span class="org-type">ComputerA</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">case</span> <span class="org-string">"compB"</span> <span class="org-keyword">=&gt;</span> <span class="org-keyword">new</span> <span class="org-type">ComputerB</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">case</span> <span class="org-string">"compC"</span> <span class="org-keyword">=&gt;</span> <span class="org-keyword">new</span> <span class="org-type">ComputerC</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">case</span> <span class="org-keyword">_</span>       <span class="org-keyword">=&gt;</span> error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: This type of computer doesn't exist"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; getComputer <span class="org-keyword">_</span>
<span class="org-function-name">res46</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Computer</span> <span class="org-keyword">=</span> &lt;function1&gt;


scala&gt; getComputer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"compA"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Computer</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">Manufacturer</span> <span class="org-keyword">=</span> <span class="org-constant">SunJitsu</span> id <span class="org-keyword">=</span> <span class="org-constant">100</span> clock <span class="org-keyword">=</span> <span class="org-constant">4</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>


<p>
References: 
</p>

<ul class="org-ul">
<li><b>Exploring the Factory Design Pattern</b>
   <a href="https://msdn.microsoft.com/en-us/library/ee817667.aspx">https://msdn.microsoft.com/en-us/library/ee817667.aspx</a>
</li>

<li><b>Design Pattern - Factory Pattern</b>
   <a href="https://www.tutorialspoint.com/design_pattern/factory_pattern.htm">https://www.tutorialspoint.com/design_pattern/factory_pattern.htm</a>
</li>

<li><b>Factory Design Pattern in Java</b>
   <a href="http://howtodoinjava.com/design-patterns/creational/implementing-factory-design-pattern-in-java/">http://howtodoinjava.com/design-patterns/creational/implementing-factory-design-pattern-in-java/</a>
</li>

<li><b>Why should I use a factory class instead of direct object
construction?</b> -
<a href="https://softwareengineering.stackexchange.com/questions/253254/why-should-i-use-a-factory-class-instead-of-direct-object-construction">https://softwareengineering.stackexchange.com/questions/253254/why-should-i-use-a-factory-class-instead-of-direct-object-construction</a>
</li>

<li><b>Factory Pattern</b> <a href="http://www.oodesign.com/factory-pattern.html">http://www.oodesign.com/factory-pattern.html</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-15-2-3" class="outline-5">
<h5 id="sec-1-15-2-3"><span class="section-number-5">1.15.2.3</span> Factory pattern with factory method</h5>
<div class="outline-text-5" id="text-1-15-2-3">
<p>
This variation allows multiple subclasses be added to the factory. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">trait</span> <span class="org-type">DatabaseDriver</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">dbname</span><span class="org-keyword">:</span> <span class="org-type">String</span>
  <span class="org-keyword">def</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Uri</span><span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
  <span class="org-keyword">def</span> <span class="org-function-name">createDriver</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">DatabaseDriver</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">DbSqlite</span> <span class="org-keyword">extends</span> <span class="org-type">DatabaseDriver</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">dbname</span> <span class="org-keyword">=</span> <span class="org-string">"sqlite"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span>uri<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Connect to SQlite database: "</span> + uri<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">createDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">DbSqlite</span><span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">DbPostgres</span> <span class="org-keyword">extends</span> <span class="org-type">DatabaseDriver</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">dbname</span> <span class="org-keyword">=</span> <span class="org-string">"postgres"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span>uri<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Connect to Postgres database: "</span> + uri<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">createDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">DbPostgres</span><span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-rainbow-delimiters-depth-1">}</span>



<span class="org-keyword">class</span> <span class="org-type">DbMysql</span> <span class="org-keyword">extends</span> <span class="org-type">DatabaseDriver</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">dbname</span> <span class="org-keyword">=</span> <span class="org-string">"mysql"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span>uri<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Connect to Mysql database: "</span> + uri<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">createDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">DbMysql</span><span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">DabaseFactory</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">dbMap</span><span class="org-keyword">:</span> <span class="org-type">scala</span>.collection.mutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span>, <span class="org-constant">DatabaseDriver</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> scala.collection.mutable.<span class="org-constant">Map</span><span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">register</span><span class="org-rainbow-delimiters-depth-2">(</span>driver<span class="org-keyword">:</span> <span class="org-type">DatabaseDriver</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    dbMap += <span class="org-rainbow-delimiters-depth-3">(</span>driver.dbname -&gt; driver<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">getDatabase</span><span class="org-rainbow-delimiters-depth-2">(</span>dbname<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> dbMap<span class="org-rainbow-delimiters-depth-2">(</span>dbname<span class="org-rainbow-delimiters-depth-2">)</span>.createDriver<span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">val</span> <span class="org-variable-name">dbFactory</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">DabaseFactory</span><span class="org-rainbow-delimiters-depth-1">()</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">Register database classe.</span>
dbFactory.register<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DbMysql</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
dbFactory.register<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DbSqlite</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
dbFactory.register<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DbPostgres</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>




scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">sqliteDriver</span> <span class="org-keyword">=</span> dbFactory.getDatabase<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"sqlite"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">sqliteDriver</span><span class="org-keyword">:</span> <span class="org-type">DatabaseDriver</span> <span class="org-keyword">=</span> <span class="org-constant">DbSqlite</span><span class="org-keyword">@</span><span class="org-constant">41</span>a9920d

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">pgsqlDriver</span> <span class="org-keyword">=</span> dbFactory.getDatabase<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"postgres"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">pgsqlDriver</span><span class="org-keyword">:</span> <span class="org-type">DatabaseDriver</span> <span class="org-keyword">=</span> <span class="org-constant">DbPostgres</span><span class="org-keyword">@</span><span class="org-constant">1</span>a4b27e1

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mysqlDriver</span> <span class="org-keyword">=</span> dbFactory.getDatabase<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"mysql"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">mysqlDriver</span><span class="org-keyword">:</span> <span class="org-type">DatabaseDriver</span> <span class="org-keyword">=</span> <span class="org-constant">DbMysql</span><span class="org-keyword">@</span><span class="org-constant">4f</span>5a3111

scala&gt; 

scala&gt; sqliteDriver.dbname
<span class="org-function-name">res61</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> sqlite

scala&gt; sqliteDriver.connect<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"file://somedb.sqlite"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Connect</span> to <span class="org-constant">SQlite</span> database<span class="org-keyword">:</span> <span class="org-type">file</span><span class="org-keyword">:</span><span class="org-comment-delimiter">//</span><span class="org-comment">somedb.sqlite</span>

scala&gt;
</pre>
</div>

<p>
Reference: 
</p>

<ul class="org-ul">
<li><b>Factory Pattern</b> <a href="http://www.oodesign.com/factory-pattern.html">http://www.oodesign.com/factory-pattern.html</a>
</li>
</ul>


<ul class="org-ul">
<li><b>what's the difference between a simple factory, a factory method
design pattern, and an abstract factory?</b>
<a href="https://www.linkedin.com/pulse/20140901184348-90925576-what-s-the-difference-between-a-simple-factory-a-factory-method-design-pattern-and-an-abstract-factory">https://www.linkedin.com/pulse/20140901184348-90925576-what-s-the-difference-between-a-simple-factory-a-factory-method-design-pattern-and-an-abstract-factory</a>
</li>
</ul>


<ul class="org-ul">
<li><b>Simple Factory Vs Factory Method Vs Abstract Factory by Example</b>
   <a href="https://vivekcek.wordpress.com/2013/03/17/simple-factory-vs-factory-method-vs-abstract-factory-by-example/">https://vivekcek.wordpress.com/2013/03/17/simple-factory-vs-factory-method-vs-abstract-factory-by-example/</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-15-2-4" class="outline-5">
<h5 id="sec-1-15-2-4"><span class="section-number-5">1.15.2.4</span> Static Factory Method</h5>
<div class="outline-text-5" id="text-1-15-2-4">
<p>
The static factory method is a design pattern that uses private
constructor and static methods to create instances of the class,
instead of public constructors and constructor overload. The benefits
of this methods are: 
</p>

<ul class="org-ul">
<li>Unlike constructors, static methods can have meaningful names.
</li>
<li>It allows the private constructor to be changed without breaking
client code.
</li>
<li>Multiple constructors cannot have have different type
signature. Static methods, doesn't have those limitations.
</li>
<li>Allows multiple ways to instantiate a class.
</li>
</ul>

<p>
Note: It should not be confused with GOF's factory design pattern. 
</p>

<p>
<b>Example 1:</b>
</p>

<p>
The class Interval uses milliseconds as its internal data
representation and can be instantiated as an interval of seconds,
minutes, hours or days.
</p>

<p>
As Scala doesn't have static methods, this pattern is implemented
using an companion-object which is a singleton with the same name of
the class. The companion-object Interval can access any private
method, field or constructor of the class Interval. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Constructor is private and it is only accessible from </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">companion object</span>
<span class="org-keyword">class</span> <span class="org-type">Interval</span> <span class="org-scala-font-lockXprivate">private</span> <span class="org-rainbow-delimiters-depth-1">(</span>timeMs<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">){</span>  
  <span class="org-keyword">def</span> <span class="org-function-name">getSeconds</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">=</span> timeMs / <span class="org-constant">1000.0</span> 
  <span class="org-keyword">def</span> <span class="org-function-name">getMinutes</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">=</span> timeMs / <span class="org-constant">60000.0</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getHours</span><span class="org-rainbow-delimiters-depth-2">()</span>    <span class="org-keyword">=</span> timeMs / <span class="org-constant">3600000.0</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getDays</span><span class="org-rainbow-delimiters-depth-2">()</span>     <span class="org-keyword">=</span> timeMs / <span class="org-constant">86400000.0</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">The companion-object can access the class'</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">with same name private methods and data.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">object</span> <span class="org-constant">Interval</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">ofSeconds</span><span class="org-rainbow-delimiters-depth-2">(</span>time<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">new</span> <span class="org-type">Interval</span><span class="org-rainbow-delimiters-depth-2">(</span>time * <span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">ofMinutes</span><span class="org-rainbow-delimiters-depth-2">(</span>time<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">new</span> <span class="org-type">Interval</span><span class="org-rainbow-delimiters-depth-2">(</span>time * <span class="org-constant">60000</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">ofHours</span><span class="org-rainbow-delimiters-depth-2">(</span>time<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">new</span> <span class="org-type">Interval</span><span class="org-rainbow-delimiters-depth-2">(</span>time * <span class="org-constant">3600000</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">ofDays</span><span class="org-rainbow-delimiters-depth-2">(</span>time<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">new</span> <span class="org-type">Interval</span><span class="org-rainbow-delimiters-depth-2">(</span>time *  <span class="org-constant">86400000</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing in the REPL: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">i0</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Interval</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-1">)</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> constructor <span class="org-constant">Interval</span> in <span class="org-keyword">class</span> <span class="org-type">Interval</span> cannot be accessed in <span class="org-keyword">object</span> <span class="org-constant">$iw</span>
       <span class="org-keyword">val</span> <span class="org-variable-name">i0</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Interval</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-1">)</span>
                ^
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">i1</span> <span class="org-keyword">=</span> <span class="org-constant">Interval</span>.ofSeconds<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">600</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">i1</span><span class="org-keyword">:</span> <span class="org-type">Interval</span> <span class="org-keyword">=</span> <span class="org-constant">Interval</span><span class="org-keyword">@</span><span class="org-constant">1d</span>a074ef

scala&gt; i1.getSeconds<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">600.0</span>

scala&gt; i1.getMinutes<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; i1.getHours<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.16666666666666666</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">i2</span> <span class="org-keyword">=</span> <span class="org-constant">Interval</span>.ofHours<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">i2</span><span class="org-keyword">:</span> <span class="org-type">Interval</span> <span class="org-keyword">=</span> <span class="org-constant">Interval</span><span class="org-keyword">@</span><span class="org-constant">23d</span>5ada9

scala&gt; i2.getSeconds<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10800.0</span>

scala&gt; i2.getMinutes<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">180.0</span>

scala&gt; i2.getHours<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span>

scala&gt; i2.getDays<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.125</span>
</pre>
</div>

<p>
<b>Example 2:</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">Coordinate</span> <span class="org-scala-font-lockXprivate">private</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">import</span> <span class="org-constant">Math</span>.<span class="org-rainbow-delimiters-depth-2">{</span>sqrt, atan2, <span class="org-constant">PI</span><span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getX</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> x
  <span class="org-keyword">def</span> <span class="org-function-name">getY</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> y
  <span class="org-keyword">def</span> <span class="org-function-name">getRadius</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> sqrt<span class="org-rainbow-delimiters-depth-2">(</span>x * x + y * y<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getAngle</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">=</span> atan2<span class="org-rainbow-delimiters-depth-2">(</span>y, x<span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-constant">180.0</span> / <span class="org-constant">PI</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Get rectangular coordinates representation</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getRec</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Get polar coordinates representation</span>
  <span class="org-keyword">def</span> <span class="org-function-name">getPol</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>getRadius<span class="org-rainbow-delimiters-depth-3">()</span>, getAngle<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">object</span> <span class="org-constant">Coordinate</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">import</span> <span class="org-constant">Math</span>.<span class="org-rainbow-delimiters-depth-2">{</span>sqrt, atan2, <span class="org-constant">PI</span>, sin, cos<span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Default "constructor"</span>
  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">new</span> <span class="org-type">Coordinate</span><span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Create a coordinate in rectangular coordinate</span>
  <span class="org-keyword">def</span> <span class="org-function-name">ofRec</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">new</span> <span class="org-type">Coordinate</span><span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span>

   <span class="org-comment-delimiter">// </span><span class="org-comment">Create a coordinate in polar coordinates</span>
  <span class="org-keyword">def</span> <span class="org-function-name">ofPol</span><span class="org-rainbow-delimiters-depth-2">(</span>radius<span class="org-keyword">:</span> <span class="org-type">Double</span>, angle<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Angle "a" in Radians </span>
    <span class="org-keyword">val</span> <span class="org-variable-name">a</span> <span class="org-keyword">=</span> angle / <span class="org-constant">180.0</span> * <span class="org-constant">PI</span>
    <span class="org-keyword">new</span> <span class="org-type">Coordinate</span><span class="org-rainbow-delimiters-depth-3">(</span>radius * cos<span class="org-rainbow-delimiters-depth-4">(</span>a<span class="org-rainbow-delimiters-depth-4">)</span>, radius * sin<span class="org-rainbow-delimiters-depth-4">(</span>a<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Repl test: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c1</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Coordinate</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">13</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> constructor <span class="org-constant">Coordinate</span> in <span class="org-keyword">class</span> <span class="org-type">Coordinate</span> cannot be accessed in <span class="org-keyword">object</span> <span class="org-constant">$iw</span>
       <span class="org-keyword">val</span> <span class="org-variable-name">c1</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Coordinate</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
                ^
<span class="org-comment-delimiter">// </span><span class="org-comment">Apply method </span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c1</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">c1</span><span class="org-keyword">:</span> <span class="org-type">Coordinate</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span><span class="org-preprocessor">@a9f946f</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c1</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">c1</span><span class="org-keyword">:</span> <span class="org-type">Coordinate</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span><span class="org-keyword">@</span><span class="org-constant">2</span>b86d46b

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c1</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">c1</span><span class="org-keyword">:</span> <span class="org-type">Coordinate</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span><span class="org-preprocessor">@de96d10</span>

scala&gt; c1.getX<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>

scala&gt; c1.getY<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>

scala&gt; c1.getPol<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>,<span class="org-constant">90.0</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c2</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span>.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">c2</span><span class="org-keyword">:</span> <span class="org-type">Coordinate</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span><span class="org-keyword">@</span><span class="org-constant">17d</span>2221f

scala&gt; c2.getRec<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>,<span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; c2.getPol<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>,<span class="org-constant">90.0</span><span class="org-rainbow-delimiters-depth-1">)</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Create coordinate given in Polar Coordinates </span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">c3</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span>.ofPol<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span>, <span class="org-constant">45.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">c3</span><span class="org-keyword">:</span> <span class="org-type">Coordinate</span> <span class="org-keyword">=</span> <span class="org-constant">Coordinate</span><span class="org-keyword">@</span><span class="org-constant">1f</span>53e98

scala&gt; c3.getRec<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res25</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">7.0710678118654755</span>,<span class="org-constant">7.071067811865475</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; c2.getPol<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span>,<span class="org-constant">90.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<p>
Futher Reading: 
</p>

<ul class="org-ul">
<li><b>5 Difference between Constructor and Static Factory method in Java-
Pros and Cons</b> -
<a href="http://javarevisited.blogspot.com.br/2017/02/5-difference-between-constructor-and-factory-method-in-java.html">http://javarevisited.blogspot.com.br/2017/02/5-difference-between-constructor-and-factory-method-in-java.html</a>
</li>

<li><b>Replace Constructor with Factory Method</b> -
<a href="https://refactoring.guru/replace-constructor-with-factory-method">https://refactoring.guru/replace-constructor-with-factory-method</a>
</li>

<li><b>Java Static Factory Method</b> -
<a href="https://www.slideshare.net/mysky14/java-static-factory-methods">https://www.slideshare.net/mysky14/java-static-factory-methods</a> 
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-15-3" class="outline-4">
<h4 id="sec-1-15-3"><span class="section-number-4">1.15.3</span> Behavioral Patterns</h4>
<div class="outline-text-4" id="text-1-15-3">
</div><div id="outline-container-sec-1-15-3-1" class="outline-5">
<h5 id="sec-1-15-3-1"><span class="section-number-5">1.15.3.1</span> Strategy Pattern</h5>
<div class="outline-text-5" id="text-1-15-3-1">
</div><ol class="org-ol"><li><a id="sec-1-15-3-1-1" name="sec-1-15-3-1-1"></a>Overview<br  /><div class="outline-text-6" id="text-1-15-3-1-1">
<p>
Strategy pattern allows changing the algorithm (strategy) at
run-time. The strategy object encapsulates the algorithm, in other
words, implements the strategy to be executed. The context
object switches its behavior by switching the context object.
</p>


<p>
Intent: Define a family of algorithms, encapsulate each one, and make
them interchangeable.
</p>

<p>
This pattern has three main parts:
</p>

<ul class="org-ul">
<li><span class="underline">Strategy</span>: the interface that defines how the algorithm will be called.
</li>

<li><span class="underline">Concrete Strategy</span>: the implementation of the strategy (algorithm).
</li>

<li><span class="underline">Context</span>: the object holding the Concrete Strategy.
</li>
</ul>


<p>
References:
</p>

<ul class="org-ul">
<li>Introduction to Design Patterns <a href="https://www.intertech.com/Downloads/Whitepapers/Intertech-Design-Patterns.pdf">https://www.intertech.com/Downloads/Whitepapers/Intertech-Design-Patterns.pdf</a>
</li>

<li>Design Patterns - Strategy Pattern <a href="https://www.tutorialspoint.com/design_pattern/strategy_pattern.htm">https://www.tutorialspoint.com/design_pattern/strategy_pattern.htm</a>
</li>

<li>CS 635 Advanced Object-Oriented Design &amp; Programming - <a href="http://www.eli.sdsu.edu/courses/spring01/cs635/notes/strategy/strategy.html">http://www.eli.sdsu.edu/courses/spring01/cs635/notes/strategy/strategy.html</a>
</li>

<li>Strategy pattern - <a href="https://en.wikipedia.org/wiki/Strategy_pattern">https://en.wikipedia.org/wiki/Strategy_pattern</a>
</li>
</ul>
</div>
</li>

<li><a id="sec-1-15-3-1-2" name="sec-1-15-3-1-2"></a>Example in OO way<br  /><div class="outline-text-6" id="text-1-15-3-1-2">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">/// </span><span class="org-comment">Interface for the Strategy - Algorithm</span>
<span class="org-keyword">trait</span> <span class="org-type">Operation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Double</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">-------- Concrete strategies ------- ///</span>

<span class="org-keyword">class</span> <span class="org-type">AddOp</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">extends</span> <span class="org-type">Operation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> x + y
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">SubOp</span> <span class="org-keyword">extends</span> <span class="org-type">Operation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> x - y
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">MulOp</span> <span class="org-keyword">extends</span> <span class="org-type">Operation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> x * y
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">----- Context - Class that selects the concrete strategy -- //</span>

<span class="org-keyword">class</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">strategy</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span>strategyS<span class="org-keyword">:</span> <span class="org-type">Operation</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    strategy <span class="org-keyword">=</span> strategyS
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">runStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    strategy.run<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">------- Running -------------- //</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ctx</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ctx</span><span class="org-keyword">:</span> <span class="org-type">Context</span> <span class="org-keyword">=</span> <span class="org-constant">Context</span><span class="org-keyword">@</span><span class="org-constant">2f</span>18e88b

scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">AddOp</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res69</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">15.0</span>

scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">MulOp</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">63.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res71</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">252.0</span>

scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">SubOp</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">63.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res73</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">59.0</span>

scala&gt;
</pre>
</div>
</div>
</li>

<li><a id="sec-1-15-3-1-3" name="sec-1-15-3-1-3"></a>Example in FP way<br  /><div class="outline-text-6" id="text-1-15-3-1-3">
<p>
In functional programming each <span class="underline">algorithm is just a function</span>. The
context object can be replaced by a <span class="underline">higher order function</span>. By the
changing the function argument of the context (higher order function)
its changes the behavior.
</p>

<p>
Variation 1: Each concrete strategy can become just a binary function.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">type</span> <span class="org-constant">Operation</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>

<span class="org-keyword">val</span> <span class="org-variable-name">addOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x + y
<span class="org-keyword">val</span> <span class="org-variable-name">subOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x - y
<span class="org-keyword">val</span> <span class="org-variable-name">mulOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x * y

<span class="org-keyword">class</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">strategy</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span>strategyS<span class="org-keyword">:</span> <span class="org-type">Operation</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    strategy <span class="org-keyword">=</span> strategyS
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">runStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    strategy<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ctx</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ctx</span><span class="org-keyword">:</span> <span class="org-type">Context</span> <span class="org-keyword">=</span> <span class="org-constant">Context</span><span class="org-keyword">@</span><span class="org-constant">26275</span>bef

scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span>addOp<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">15.0</span>

scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span>mulOp<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">50.0</span>

scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span>subOp<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>

scala&gt;
</pre>
</div>

<p>
Variation 2: Only with functions:
</p>

<ul class="org-ul">
<li>The function runStrategy switches algorithms at run-time. The
algorithm is just a function passed as argument.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">type</span> <span class="org-constant">Operation</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>

<span class="org-keyword">val</span> <span class="org-variable-name">addOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x + y
<span class="org-keyword">val</span> <span class="org-variable-name">subOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x - y
<span class="org-keyword">val</span> <span class="org-variable-name">mulOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x * y

<span class="org-keyword">def</span> <span class="org-function-name">runStrategy</span><span class="org-rainbow-delimiters-depth-1">(</span>strategy<span class="org-keyword">:</span> <span class="org-type">Operation</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>  <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> strategy<span class="org-rainbow-delimiters-depth-1">(</span>x, y<span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">runStrategy</span><span class="org-rainbow-delimiters-depth-1">(</span>strategy<span class="org-keyword">:</span> <span class="org-type">Operation</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>  <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> strategy<span class="org-rainbow-delimiters-depth-1">(</span>x, y<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">runStrategy</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>strategy<span class="org-keyword">:</span> <span class="org-type">Operation</span><span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>

scala&gt; runStrategy <span class="org-keyword">_</span>
<span class="org-function-name">res80</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> &lt;function1&gt;

scala&gt; runStrategy<span class="org-rainbow-delimiters-depth-1">(</span>addOp<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res75</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> &lt;function2&gt;

scala&gt; runStrategy<span class="org-rainbow-delimiters-depth-1">(</span>addOp<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res76</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">7.0</span>

scala&gt; runStrategy<span class="org-rainbow-delimiters-depth-1">(</span>mulOp<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">5</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res77</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">50.0</span>

scala&gt; runStrategy<span class="org-rainbow-delimiters-depth-1">(</span>subOp<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-constant">5</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res78</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">-5.0</span>
</pre>
</div>


<p>
Variation 3: An alternative way to avoid defining many classes and
using an mixed OOP and FP approach is to create a function that
returns an anonymous class implementing the interface/trait
operation. This method is useful when it is not possible to modify the
code of the Operation trait/interface and class Context. This approach
is also helpful in the case that many external codes, libraries and
programs could be disrupted if the mentioned codes are modified.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">/// </span><span class="org-comment">Interface for the Strategy - Algorithm</span>
<span class="org-keyword">trait</span> <span class="org-type">Operation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Double</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">----- Context - Class that selects the concrete strategy -- //</span>

<span class="org-keyword">class</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">strategy</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span>strategyS<span class="org-keyword">:</span> <span class="org-type">Operation</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    strategy <span class="org-keyword">=</span> strategyS
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">runStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    strategy.run<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Converts a function to the interface "Operation"</span>
<span class="org-keyword">def</span> <span class="org-function-name">makeStrategy</span><span class="org-rainbow-delimiters-depth-1">(</span>operation<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-keyword">new</span> <span class="org-type">Operation</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> operation<span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">addOp</span> <span class="org-keyword">=</span> makeStrategy<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x + y<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">addOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> $anon$1<span class="org-keyword">@</span><span class="org-constant">6f</span>0a4e30

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">subOp</span> <span class="org-keyword">=</span> makeStrategy<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x - y<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">subOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> $anon$1<span class="org-keyword">@</span><span class="org-constant">5e020</span>dd1

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mulOp</span> <span class="org-keyword">=</span> makeStrategy<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x * y<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">mulOp</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> $anon$1<span class="org-keyword">@</span><span class="org-constant">2</span>a0ce342

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ctx</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ctx</span><span class="org-keyword">:</span> <span class="org-type">Context</span> <span class="org-keyword">=</span> <span class="org-constant">Context</span><span class="org-keyword">@</span><span class="org-constant">1e160</span>a9e

<span class="org-comment-delimiter">// </span><span class="org-comment">Algorithm changed at run-time</span>
scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span>addOp<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.5</span>, <span class="org-constant">4.5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">8.0</span>

scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span>mulOp<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">3.5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">35.0</span>
</pre>
</div>


<p>
Alternative 4: Languages like C++ and C# don't support anonymous
classes like Java and Scala, so an alternative approach in this case
is to create a classe implemeting the interface Operation that takes a
lambda function as constructor argument and delegates the execution of
the method defined in the interface to the lambda. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">/// </span><span class="org-comment">Interface for the Strategy - Algorithm</span>
<span class="org-keyword">trait</span> <span class="org-type">Operation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Double</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">----- Context - Class that selects the concrete strategy -- //</span>

<span class="org-keyword">class</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">strategy</span><span class="org-keyword">:</span> <span class="org-type">Operation</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span>strategyS<span class="org-keyword">:</span> <span class="org-type">Operation</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    strategy <span class="org-keyword">=</span> strategyS
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">runStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    strategy.run<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">FunctionToStrategy</span><span class="org-rainbow-delimiters-depth-1">(</span>operation<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Operation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> operation<span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">addOp</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">FunctionToStrategy</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x + y<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">addOp</span><span class="org-keyword">:</span> <span class="org-type">FunctionToStrategy</span> <span class="org-keyword">=</span> <span class="org-constant">FunctionToStrategy</span><span class="org-keyword">@</span><span class="org-constant">43874120</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">subOp</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">FunctionToStrategy</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x - y<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">subOp</span><span class="org-keyword">:</span> <span class="org-type">FunctionToStrategy</span> <span class="org-keyword">=</span> <span class="org-constant">FunctionToStrategy</span><span class="org-keyword">@</span><span class="org-constant">282506e1</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">mulOp</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">FunctionToStrategy</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>x, y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> x * y<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">mulOpt</span><span class="org-keyword">:</span> <span class="org-type">FunctionToStrategy</span> <span class="org-keyword">=</span> <span class="org-constant">FunctionToStrategy</span><span class="org-keyword">@</span><span class="org-constant">7d</span>bcbc7b


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">ctx</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ctx</span><span class="org-keyword">:</span> <span class="org-type">Context</span> <span class="org-keyword">=</span> <span class="org-constant">Context</span><span class="org-keyword">@</span><span class="org-constant">7f</span>53c24c

<span class="org-comment-delimiter">// </span><span class="org-comment">Algorithm changed at run-time</span>
scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span>addOp<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.5</span>, <span class="org-constant">4.5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res1</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">8.0</span>

scala&gt; ctx.setStrategy<span class="org-rainbow-delimiters-depth-1">(</span>mulOp<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; ctx.runStrategy<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-constant">3.5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">35.0</span>
</pre>
</div>

<p>
The alternative 4 could be also implemented in C++11: 
</p>

<ul class="org-ul">
<li>File: strategyPattern.cpp
</li>
</ul>

<div class="org-src-container">

<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">string</span>;
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">function</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Type synonym to function</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">type FOperation = (double, double) =&gt; double </span>
<span class="org-keyword">using</span> <span class="org-type">FOperation</span> = <span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span>, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Class with only with pure virtual methods is equivalent to an interface.</span>
<span class="org-keyword">class</span> <span class="org-type">IOperation</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-keyword">virtual</span> <span class="org-type">string</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> = 0;
    <span class="org-keyword">virtual</span> <span class="org-type">double</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">)</span> = 0;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">Context</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-type">IOperation</span>* <span class="org-variable-name">_strategy</span> = <span class="org-constant">nullptr</span>;

<span class="org-function-name">public</span>:

    <span class="org-type">void</span> <span class="org-function-name">setStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">IOperation</span>* <span class="org-variable-name">strategy</span><span class="org-rainbow-delimiters-depth-2">){</span>
        _strategy = strategy;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">double</span> <span class="org-function-name">runStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-type">double</span> <span class="org-variable-name">result</span> = _strategy-&gt;run<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running strategy = "</span>
                  &lt;&lt; _strategy-&gt;getName<span class="org-rainbow-delimiters-depth-3">()</span>
                  &lt;&lt; <span class="org-string">"( x = "</span> &lt;&lt; x
                  &lt;&lt; <span class="org-string">", y = "</span> &lt;&lt; y
                  &lt;&lt; <span class="org-string">") = "</span> &lt;&lt; result
                  &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> _strategy-&gt;run<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>       
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Turns a lambda function into a "Strategy" object</span>
<span class="org-keyword">class</span> <span class="org-type">FunctionToStrategy</span>: <span class="org-keyword">public</span> <span class="org-type">IOperation</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-type">string</span>     <span class="org-variable-name">_name</span>;
    <span class="org-type">FOperation</span>  <span class="org-variable-name">_oper</span>;
<span class="org-function-name">public</span>: 
    <span class="org-function-name">FunctionToStrategy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">string</span> <span class="org-variable-name">name</span>, <span class="org-type">FOperation</span> <span class="org-variable-name">oper</span><span class="org-rainbow-delimiters-depth-2">)</span>: _name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>, _oper<span class="org-rainbow-delimiters-depth-2">(</span>oper<span class="org-rainbow-delimiters-depth-2">){}</span>    
    <span class="org-type">string</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">return</span> _name;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">double</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-keyword">return</span> _oper<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span>, <span class="org-type">char</span> **<span class="org-variable-name">environ</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Testing mixed FP and OOP strategy pattern in C++"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-type">FunctionToStrategy</span> <span class="org-variable-name">strategyAdd</span> = FunctionToStrategy<span class="org-rainbow-delimiters-depth-2">(</span>
        <span class="org-string">"add"</span>,
        <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> x + y; <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">FunctionToStrategy</span> <span class="org-variable-name">strategyMul</span> = FunctionToStrategy<span class="org-rainbow-delimiters-depth-2">(</span>
        <span class="org-string">"mul"</span>,
        <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> x * y; <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">Context</span> <span class="org-variable-name">ctx</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Testing operation add"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"---------------------"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    ctx.setStrategy<span class="org-rainbow-delimiters-depth-2">(</span>&amp;strategyAdd<span class="org-rainbow-delimiters-depth-2">)</span>;  
    <span class="org-type">double</span> <span class="org-variable-name">res0</span> = ctx.runStrategy<span class="org-rainbow-delimiters-depth-2">(</span>10.0, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Add result = "</span> &lt;&lt; res0 &lt;&lt; <span class="org-constant">std</span>::endl;
    ctx.runStrategy<span class="org-rainbow-delimiters-depth-2">(</span>15.0, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Testing operation mul"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"---------------------"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    ctx.setStrategy<span class="org-rainbow-delimiters-depth-2">(</span>&amp;strategyMul<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">double</span> <span class="org-variable-name">res1</span> = ctx.runStrategy<span class="org-rainbow-delimiters-depth-2">(</span>10.0, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Mul result = "</span> &lt;&lt; res1  &lt;&lt; <span class="org-constant">std</span>::endl; 
    ctx.runStrategy<span class="org-rainbow-delimiters-depth-2">(</span>3, 5<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">return zero status code</span>
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Compiling and Running:
</p>

<div class="org-src-container">

<pre class="src src-sh">$ clang++ strategyPattern.cpp -std=c++11 -o <span class="org-keyword">strategyPattern.bin</span> &amp;&amp; ./strategyPattern.bin 
Testing mixed FP and OOP strategy pattern<span class="org-keyword"> in</span> C++

Testing operation add
---------------------
Running strategy = add( x = 10, y = 20) = 30
Add result = 30
Running strategy = add( x = 15, y = 20) = 35

Testing operation mul
---------------------
Running strategy = mul( x = 10, y = 20) = 200
Mul result = 200
Running strategy = mul( x = 3, y = 5) = 15
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-15-3-2" class="outline-5">
<h5 id="sec-1-15-3-2"><span class="section-number-5">1.15.3.2</span> Template Method</h5>
<div class="outline-text-5" id="text-1-15-3-2">
<p>
The templated method design patterns is a behavioral design pattern
which provides an algorithm, also known as template which defines
some steps and defers the implementation of some steps to subclasses. 
</p>

<p>
It is stated by GOF as: "Defines the skeleton of an algorithm in a
method, deferring some steps to subclasses. Template Method lets
subclasses redefine certain steps of an algorithm without changing the
algorithms structure."
</p>

<ul class="org-ul">
<li>Intent: Create an algorithm template that allows redefine some
steps without changing its structure. 
</li>
</ul>

<p>
The parent abstract class has four different types of methods: 
</p>

<ul class="org-ul">
<li>Concrete methods: Methods implemented in the abstract class. 
</li>

<li>Abstract methods: Methods without implementation that must be
implemented by subclasses. 
</li>

<li>Hook methods: Methods with default implementation that can be
overriden by subclasses.
</li>

<li>Template methods: Method that calls concrete methods, abstract
methods or hook methods.
</li>
</ul>


<p>
Example: The method setepFn is a hook method with default
implementation and the summation is a template method.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">trait</span> <span class="org-type">IntervalSummation</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Summation method with default implementation</span>
  <span class="org-keyword">def</span> <span class="org-function-name">stepFn</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> a 

  <span class="org-comment-delimiter">// </span><span class="org-comment">Summation of all numbers in the interval </span>
  <span class="org-keyword">def</span> <span class="org-function-name">summation</span><span class="org-rainbow-delimiters-depth-2">(</span>lower<span class="org-keyword">:</span> <span class="org-type">Int</span>, upper<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">result</span> <span class="org-keyword">=</span> <span class="org-constant">0</span> 
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-3">(</span>a <span class="org-keyword">&lt;-</span> lower to upper<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      result <span class="org-keyword">=</span> result + stepFn<span class="org-rainbow-delimiters-depth-4">(</span>a<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>

    result
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">class</span> <span class="org-type">IntervalIdentity</span> <span class="org-keyword">extends</span>  <span class="org-type">IntervalSummation</span>
defined <span class="org-keyword">class</span> <span class="org-type">IntervalIdentity</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">intervId</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">IntervalIdentity</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">intervId</span><span class="org-keyword">:</span> <span class="org-type">IntervalIdentity</span> <span class="org-keyword">=</span> <span class="org-constant">IntervalIdentity</span><span class="org-keyword">@</span><span class="org-constant">59</span>ede173

scala&gt; intervId.summation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">55</span>

scala&gt; intervId.summation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span>, <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">5050</span>



<span class="org-keyword">class</span> <span class="org-type">IntervalSquare</span> <span class="org-keyword">extends</span>  <span class="org-type">IntervalSummation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">stepFn</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> a * a
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; intervSquare.summation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">385</span>

scala&gt; intervSquare.summation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span>, <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">338350</span>


<span class="org-keyword">class</span> <span class="org-type">IntervalCube</span> <span class="org-keyword">extends</span>  <span class="org-type">IntervalSummation</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">stepFn</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> a * a * a 
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; intervCube.summation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3025</span>

scala&gt; intervCube.summation<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span>, <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">25502500</span>
</pre>
</div>


<p>
References: 
</p>

<ul class="org-ul">
<li><b>The Template Method Pattern</b> -
<a href="http://ima.udg.edu/~sellares/EINF-ES1/TemplateMethodToni.pdf">http://ima.udg.edu/~sellares/EINF-ES1/TemplateMethodToni.pdf</a>
</li>

<li><b>Template Method Design Pattern</b> -
<a href="https://www.slideshare.net/srikanthps/template-method-design-pattern">https://www.slideshare.net/srikanthps/template-method-design-pattern</a>
</li>

<li><b>Template Method Design Pattern in Java</b> -
<a href="https://stacktips.com/tutorials/design-patterns/template-method-design-pattern-in-java">https://stacktips.com/tutorials/design-patterns/template-method-design-pattern-in-java</a>
</li>

<li><b>Design Patterns - Template Pattern</b>
   <a href="https://www.tutorialspoint.com/design_pattern/template_pattern.htm">https://www.tutorialspoint.com/design_pattern/template_pattern.htm</a>
</li>

<li><b>Template Method Pattern Tutorial with Java Examples</b>
   <a href="https://dzone.com/articles/design-patterns-template-method">https://dzone.com/articles/design-patterns-template-method</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-15-3-3" class="outline-5">
<h5 id="sec-1-15-3-3"><span class="section-number-5">1.15.3.3</span> Iterator Pattern</h5>
<div class="outline-text-5" id="text-1-15-3-3">
</div><ol class="org-ol"><li><a id="sec-1-15-3-3-1" name="sec-1-15-3-3-1"></a>Overview<br  /><div class="outline-text-6" id="text-1-15-3-3-1">
<p>
The iterator pattern allows tranversing a collection or container
without expose its internal structure and provides a uniform interface
interface to tranverse different types of collections.
</p>

<ul class="org-ul">
<li>Stated by GOF as "Provide a way to access the elements of an
aggregate object sequentially without exposing its underlying
representation."
</li>
</ul>

<p>
Intent: Provide a way to transverse a collection or container
sequentially not exposing its internal representation.
</p>


<p>
Also known as:
</p>

<ul class="org-ul">
<li>Cursor
</li>
</ul>


<p>
Iterator Pattern Structure:
</p>

<ul class="org-ul">
<li>Iterfaces:

<ul class="org-ul">
<li>Collection
<ul class="org-ul">
<li>Methods:
<ul class="org-ul">
<li>createIterator()   -&gt; Creates a new iterator object specific for the underlying collection.
</li>
</ul>
</li>
</ul>
</li>

<li>Iterator
<ul class="org-ul">
<li>Methods:
<ul class="org-ul">
<li>hasNext(): Bool  -&gt; Returns true if iterator has next element.
</li>
<li>next()           -&gt; Get next element and advance to next element.
</li>
<li>current()        -&gt; Get current element. (Optional)
</li>
<li>remove()         -&gt; (Optional)
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<p>
Known uses:
</p>

<ul class="org-ul">
<li>This pattern is widely in Java, C# (.NET) and C++ STL containers.
</li>

<li>Java

<ul class="org-ul">
<li>java.util.Iterator Interface
</li>

<li>java.util.Enumerator interface
</li>
</ul>
</li>

<li>.NET

<ul class="org-ul">
<li>IEnumerable
</li>

<li>IEnumerator
</li>
</ul>
</li>
</ul>

<p>
Java iterator Interface:
</p>

<div class="org-src-container">

<pre class="src src-java"><span class="org-keyword">public</span> <span class="org-keyword">interface</span> <span class="org-constant">java</span>.<span class="org-constant">util</span>.<span class="org-type">Iterator</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">E</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">boolean</span> <span class="org-function-name">hasNext</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-type">E</span> <span class="org-function-name">next</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-type">void</span> <span class="org-function-name">remove</span><span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>


<p>
References:
</p>

<ul class="org-ul">
<li><b>Course Notes — CIS 501: Software Architecture and Design, Fall
2014</b>
<a href="http://softwarearch.santoslab.org/12-design-patterns-factories-iterators/index.html">http://softwarearch.santoslab.org/12-design-patterns-factories-iterators/index.html</a>
</li>

<li><b>Supplement: Design Patterns. For Introduction to Java
Programming</b> -
<a href="http://www.cs.armstrong.edu/liang/apcs/supplement/Supplement5hDesignpatterns.pdf">http://www.cs.armstrong.edu/liang/apcs/supplement/Supplement5hDesignpatterns.pdf</a>
</li>

<li><b>Iterator Pattern Tutorial with Java Examples</b>
   <a href="https://dzone.com/articles/design-patterns-iterator">https://dzone.com/articles/design-patterns-iterator</a>
</li>

<li><b>Iterator</b> <a href="http://www.oodesign.com/iterator-pattern.html">http://www.oodesign.com/iterator-pattern.html</a>
</li>

<li><b>Design Patterns - Iterator Pattern</b>
   <a href="https://www.tutorialspoint.com/design_pattern/iterator_pattern.htm">https://www.tutorialspoint.com/design_pattern/iterator_pattern.htm</a>
</li>

<li><b>Principles of Software Construction: Objects, Design, and
Concurrency; Design Case Study: Stream I/O</b>
<a href="https://www.cs.cmu.edu/~charlie/courses/15-214/2014-fall/slides/14-io.pdf">https://www.cs.cmu.edu/~charlie/courses/15-214/2014-fall/slides/14-io.pdf</a>
</li>

<li><b>The Use of Iterator Iterator in Python</b> <a href="https://www.codeday.top/2017/03/27/21392.html">https://www.codeday.top/2017/03/27/21392.html</a>
</li>

<li></li>
</ul>
</div>
</li>

<li><a id="sec-1-15-3-3-2" name="sec-1-15-3-3-2"></a>Examples<br  /><div class="outline-text-6" id="text-1-15-3-3-2">
<p>
Example 1 - Java built-in iterator.
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> java.util.<span class="org-constant">Arrays</span>
<span class="org-keyword">import</span> java.util.<span class="org-constant">Arrays</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Arrays</span>.asList<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span>, <span class="org-constant">7</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span>, <span class="org-constant">7</span><span class="org-rainbow-delimiters-depth-1">]</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">iter</span> <span class="org-keyword">=</span> arr.iterator<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">iter</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Iterator</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> java.util.<span class="org-constant">AbstractList</span>$Itr<span class="org-keyword">@</span><span class="org-constant">3030836d</span>

scala&gt; iter.hasNext <span class="org-keyword">_</span>
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Boolean</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; iter.next <span class="org-keyword">_</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; iter.remove <span class="org-keyword">_</span>
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; iter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; iter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; iter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; iter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; iter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">3</span>

scala&gt; iter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">4</span>

scala&gt; iter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">5</span>

scala&gt; iter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; iter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">6</span>

scala&gt; iter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; iter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">7</span>

scala&gt; iter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>

scala&gt; iter.next<span class="org-rainbow-delimiters-depth-1">()</span>
java.util.<span class="org-constant">NoSuchElementException</span>
  at java.util.<span class="org-constant">AbstractList</span>$Itr.next<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">AbstractList</span>.java<span class="org-keyword">:</span><span class="org-constant">364</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt;
</pre>
</div>

<p>
Example 2 - Print all collection elements
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> java.util.<span class="org-constant">Arrays</span>
<span class="org-keyword">import</span> java.util.<span class="org-constant">Arrays</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">arr</span> <span class="org-keyword">=</span> <span class="org-constant">Arrays</span>.asList<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span>, <span class="org-constant">7</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">arr</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span>, <span class="org-constant">7</span><span class="org-rainbow-delimiters-depth-1">]</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">iter</span> <span class="org-keyword">=</span> arr.iterator<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">iter</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Iterator</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> java.util.<span class="org-constant">AbstractList</span>$Itr<span class="org-keyword">@</span><span class="org-constant">210d</span>3a42

<span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span>iter.hasNext<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>iter.next<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span>iter.hasNext<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   println<span class="org-rainbow-delimiters-depth-2">(</span>iter.next<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>
<span class="org-constant">6</span>
<span class="org-constant">7</span>
</pre>
</div>

<p>
Example 3: Implementation a range iterator with java.util.iterator interface.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">RangeIterator</span><span class="org-rainbow-delimiters-depth-1">(</span>from<span class="org-keyword">:</span> <span class="org-type">Double</span>, to<span class="org-keyword">:</span> <span class="org-type">Double</span>, step<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">java</span>.util.<span class="org-constant">Iterator</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">cursor</span> <span class="org-keyword">=</span> from

  <span class="org-keyword">def</span> <span class="org-function-name">hasNext</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> cursor &lt; to

  <span class="org-keyword">def</span> <span class="org-function-name">next</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>!hasNext<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
      error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: End of iteration, no more elements available."</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">else</span>
    <span class="org-rainbow-delimiters-depth-3">{</span> <span class="org-keyword">val</span> <span class="org-variable-name">ret</span> <span class="org-keyword">=</span> cursor
      cursor <span class="org-keyword">=</span> cursor + step
      ret
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">remove</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: Method not implemented"</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">rng</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">RangeIterator</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>, <span class="org-constant">5.0</span>, <span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">rng</span><span class="org-keyword">:</span> <span class="org-type">RangeIterator</span> <span class="org-keyword">=</span> <span class="org-constant">RangeIterator</span><span class="org-keyword">@</span><span class="org-constant">1</span>a6df932

scala&gt; rng.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res41</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>

scala&gt; rng.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res42</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; rng.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res43</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1.0</span>

scala&gt; rng.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res44</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; rng.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res45</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.0</span>

scala&gt; rng.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res46</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; rng.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res47</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span>

scala&gt; rng.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res48</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; rng.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res49</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>

scala&gt; rng.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">End</span> of iteration, no more elements available.
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at <span class="org-constant">RangeIterator</span>.next<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">19</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt;



<span class="org-keyword">val</span> <span class="org-variable-name">iter</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">RangeIterator</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span>, <span class="org-constant">10.0</span>, <span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span>iter.hasNext<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>iter.next<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span>iter.hasNext<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   println<span class="org-rainbow-delimiters-depth-2">(</span>iter.next<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">0.0</span>
<span class="org-constant">1.0</span>
<span class="org-constant">2.0</span>
<span class="org-constant">3.0</span>
<span class="org-constant">4.0</span>
<span class="org-constant">5.0</span>
<span class="org-constant">6.0</span>
<span class="org-constant">7.0</span>
<span class="org-constant">8.0</span>
<span class="org-constant">9.0</span>
</pre>
</div>

<p>
Example 4: Creating an iterator to iterate over file lines.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">ReadFileLinesIterator</span><span class="org-rainbow-delimiters-depth-1">(</span>file<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Iterator</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">buf</span>          <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">BufferedReader</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">FileReader</span><span class="org-rainbow-delimiters-depth-3">(</span>file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">line</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-string">""</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">status</span>       <span class="org-keyword">=</span> <span class="org-constant">true</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    line <span class="org-keyword">=</span> buf.readLine<span class="org-rainbow-delimiters-depth-3">()</span>
    status <span class="org-keyword">=</span> line != <span class="org-constant">null</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">hasNext</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> status

  <span class="org-keyword">def</span> <span class="org-function-name">next</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>hasNext<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">{</span>
        <span class="org-keyword">val</span> <span class="org-variable-name">ret</span> <span class="org-keyword">=</span> line
        line <span class="org-keyword">=</span> buf.readLine<span class="org-rainbow-delimiters-depth-4">()</span>
        status <span class="org-keyword">=</span> line != <span class="org-constant">null</span>
        ret
      <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-keyword">else</span>
      error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: End of iteration. No more elements available."</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">remove</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: invalid method for this iterator."</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>



scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">lineIter</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ReadFileLinesIterator</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/etc/lsb-release"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">lineIter</span><span class="org-keyword">:</span> <span class="org-type">ReadFileLinesIterator</span> <span class="org-keyword">=</span> non-empty iterator

scala&gt; lineIter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res78</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; lineIter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res79</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">DISTRIB_ID</span><span class="org-keyword">=</span><span class="org-constant">ManjaroLinux</span>

scala&gt; lineIter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res80</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>


scala&gt; lineIter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res81</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">DISTRIB_RELEASE</span><span class="org-keyword">=</span><span class="org-constant">17.0.1</span>

scala&gt; lineIter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res82</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; lineIter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res83</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">DISTRIB_CODENAME</span><span class="org-keyword">=</span><span class="org-constant">Gellivara</span>

scala&gt; lineIter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res84</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; lineIter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res85</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">DISTRIB_DESCRIPTION</span><span class="org-keyword">=</span><span class="org-string">"Manjaro Linux"</span>

scala&gt; lineIter.next<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">java.lang.RuntimeException</span><span class="org-keyword">:</span> <span class="org-type">Error</span><span class="org-keyword">:</span> <span class="org-constant">End</span> of iteration. <span class="org-constant">No</span> more elements available.
  at scala.sys.package$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package</span>.scala<span class="org-keyword">:</span><span class="org-constant">27</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at scala.<span class="org-constant">Predef</span>$.error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Predef</span>.scala<span class="org-keyword">:</span><span class="org-constant">144</span><span class="org-rainbow-delimiters-depth-1">)</span>
  at <span class="org-constant">ReadFileLinesIterator</span>.next<span class="org-rainbow-delimiters-depth-1">(</span>&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">35</span><span class="org-rainbow-delimiters-depth-1">)</span>
  ... <span class="org-constant">32</span> elided

scala&gt; lineIter.hasNext<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res87</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">false</span>

scala&gt;

<span class="org-keyword">val</span> <span class="org-variable-name">lineIter</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ReadFileLinesIterator</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/etc/lsb-release"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>lineIter.hasNext<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">){</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>lineIter.next<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>lineIter.hasNext<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">){</span>
     |   println<span class="org-rainbow-delimiters-depth-2">(</span>lineIter.next<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-constant">DISTRIB_ID</span><span class="org-keyword">=</span><span class="org-constant">ManjaroLinux</span>
<span class="org-constant">DISTRIB_RELEASE</span><span class="org-keyword">=</span><span class="org-constant">17.0.1</span>
<span class="org-constant">DISTRIB_CODENAME</span><span class="org-keyword">=</span><span class="org-constant">Gellivara</span>
<span class="org-constant">DISTRIB_DESCRIPTION</span><span class="org-keyword">=</span><span class="org-string">"Manjaro Linux"</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-15-3-4" class="outline-5">
<h5 id="sec-1-15-3-4"><span class="section-number-5">1.15.3.4</span> Command Design Pattern</h5>
<div class="outline-text-5" id="text-1-15-3-4">
</div><ol class="org-ol"><li><a id="sec-1-15-3-4-1" name="sec-1-15-3-4-1"></a>Overview<br  /><div class="outline-text-6" id="text-1-15-3-4-1">
<p>
Intent from GOF: "Encapsulate a request as an object, thereby letting
you parametrize clients with different requests, queue or log
requests, and support undoable operations."
</p>

<ul class="org-ul">
<li>Also known as: Action or transaction pattern.
</li>

<li>Encapsulate method invocations as objects called commands, which
can be stored and executed later by one or multiple invoker object
which don't know anything about the method invocation or about the
operation being performed.

<ul class="org-ul">
<li>Features: 
</li>

<li>Encapsulates method-calls as commands.
</li>
<li>Provide a common interface for method calls.
</li>
</ul>
</li>
</ul>

<p>
Participants:
</p>

<ul class="org-ul">
<li><span class="underline">Receiver</span> - Object whose methods will be invoked indirectly by
the objects implementing the ICommand interface. This name
"receiver" comes from Smalltalk and means the object which
receives the message (method call).
</li>

<li><span class="underline">Invoker(s)</span> - (Could also be called Sender). One or more object
that store the command objects and executes them later. The
invoker must have no knowledge about how to perform the method
call.

<ul class="org-ul">
<li>The invoker objects can be a list of commands to be run; a stack
of commands; user interface elements such as buttons, menus and
etc, where each element stores a command that performs a
application invocation such as App.print(),
App.hidePanel(panel1).
</li>
</ul>
</li>

<li><span class="underline">ICommand</span> - Command interface - Interface encapsulating the
request or method invocation.
</li>

<li><span class="underline">Client</span> - Client means any code using a particular code, api,
interface or object, in this case any code using this code. The
client's role is to create the concrete commands setting their
requests (methods of receiver that they invoke) and store the
commands in the invoker(s).
</li>
</ul>

<p>
Use cases:
</p>

<ul class="org-ul">
<li><span class="underline">Grapical User Interfaces</span>: Input UI elements such as buttons,
menus and key bindings could act as invokers storing a high
level application command such as "save document", "print
document", "exit application" and so on. This approach allows
to a separate the user interface from the application by
decoupling the UI element that executes the command from the
logic performed by the command and also allows a single command
to be executed by multiple UI elements. For instance, an action
such as "save document" could be encapsulated as a command
object bound to many UI sources such the key binding ctr-s, a
save button and a save menu item, as a result, any changes in
the user interface code would not break the main application
code.
</li>

<li><span class="underline">Allow redo/undo</span>
</li>

<li><span class="underline">Transactions</span>
</li>

<li><span class="underline">Replace switch statements</span>
</li>
</ul>

<p>
Possible Variations
</p>

<ul class="org-ul">
<li>Single invoker
</li>
<li>Multiple invokers
</li>
<li>Single receiver 
</li>
<li>Multiple receivers
</li>
</ul>

<p>
<b>References and further reading</b>
</p>

<ul class="org-ul">
<li><b>Command Pattern Tutorial with Java Examples</b> -
<a href="https://dzone.com/articles/design-patterns-command">https://dzone.com/articles/design-patterns-command</a>
</li>

<li>Toni Sellarès - <b>The Command Pattern</b>
   <a href="http://ima.udg.edu/~sellares/EINF-ES1/CommandToni.pdf">http://ima.udg.edu/~sellares/EINF-ES1/CommandToni.pdf</a> 
</li>

<li>Hans Vangheluwe and Alexandre Denault <b>Design Patters - Command Pattern</b> 
    <a href="http://msdl.cs.mcgill.ca/people/hv/teaching/SoftwareDesign/lectures/lecture.command/lecture.command.pdf">http://msdl.cs.mcgill.ca/people/hv/teaching/SoftwareDesign/lectures/lecture.command/lecture.command.pdf</a>
</li>

<li><a href="https://www.cs.mcgill.ca/~hv/classes/CS400/01.hchen/doc/command/command.html">Command Pattern with Undo/Redo</a>
</li>

<li><a href="https://www.codeproject.com/Articles/15207/Design-Patterns-Command-Pattern">Design Patterns: Command Pattern - CodeProject</a>
</li>

<li>Examples of Command Design pattern in .NET WPF Frameworks:

<ul class="org-ul">
<li><a href="https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/commanding-overview">Commanding Overview | Microsoft Docs</a>
</li>
<li><a href="https://www.codeproject.com/Articles/238657/How-to-use-Commands-in-WPF">How to use Commands in WPF - CodeProject</a>
</li>
<li><a href="https://www.codeproject.com/Articles/25445/WPF-Command-Pattern-Applied">WPF Command Pattern Applied - CodeProject</a>
</li>
<li><a href="https://visualstudiomagazine.com/articles/2012/04/10/command-pattern-in-net.aspx">The Command Pattern in .NET &#x2013; Visual Studio Magazine</a>
</li>
</ul>
</li>
</ul>
</div>
</li>

<li><a id="sec-1-15-3-4-2" name="sec-1-15-3-4-2"></a>Example 1 - Canvas drawing application with animation<br  /><div class="outline-text-6" id="text-1-15-3-4-2">
<p>
In this example, a graphical 2D animation application has tree main
parts, a canvas where 2D shapes can be drawn, a scheduler that can
that allows to schedule drawing commands to be executed in a given
time interval and a command interface which encapsulates request to
the canvas.
</p>

<p>
It is clear that, the canvas plays the role of the receiver and
scheduler plays the role of the invoker. The client code role in this
case is create the concrete commands and pass the to the scheduler in
order to create 2D animations.
</p>

<p>
<b>OOP Approach</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-doc">/** Receiver object */</span>
<span class="org-keyword">class</span> <span class="org-type">Canvas</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">drawLine</span><span class="org-rainbow-delimiters-depth-2">(</span>x1<span class="org-keyword">:</span> <span class="org-type">Int</span>, y1<span class="org-keyword">:</span> <span class="org-type">Int</span>, x2<span class="org-keyword">:</span> <span class="org-type">Int</span>, y2<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"Draw line from p1 = (x1: </span><span class="org-variable-name">$x1</span><span class="org-string">, y1: </span><span class="org-variable-name">$y1</span><span class="org-string">)  to p2 = (x2: </span><span class="org-variable-name">$x2</span><span class="org-string">, y2: </span><span class="org-variable-name">$y2</span><span class="org-string">)"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">drawCircle</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span>, radius<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"Draw ellipse at (x = </span><span class="org-variable-name">$x</span><span class="org-string">, y = </span><span class="org-variable-name">$y</span><span class="org-string">) with radius = </span><span class="org-variable-name">$radius</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">drawSquare</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span>, size<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span>s<span class="org-string">"Draw square at center (</span><span class="org-variable-name">$x</span><span class="org-string">, </span><span class="org-variable-name">$y</span><span class="org-string">) with size = </span><span class="org-variable-name">$size</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">clear</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Clear canvas"</span><span class="org-rainbow-delimiters-depth-2">)</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-doc">/** Command Interface */</span>
<span class="org-keyword">trait</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-1">{</span> 
  <span class="org-keyword">def</span> <span class="org-function-name">execute</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">Scheduler</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">import</span> scala.collection.mutable.<span class="org-constant">ListBuffer</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">_cmdlist</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Int</span>, <span class="org-constant">ICommand</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">]()</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Delay in milliseconds </span>
  <span class="org-keyword">def</span> <span class="org-function-name">addCommand</span><span class="org-rainbow-delimiters-depth-2">(</span>delayMs<span class="org-keyword">:</span> <span class="org-type">Int</span>, cmd<span class="org-keyword">:</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    _cmdlist.append<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>delayMs, cmd<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">clearCommands</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> 
    _cmdlist.clear<span class="org-rainbow-delimiters-depth-2">()</span>  

  <span class="org-keyword">def</span> <span class="org-function-name">playCommands</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>time, cmd<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">&lt;-</span> _cmdlist<span class="org-rainbow-delimiters-depth-2">){</span>
      <span class="org-constant">Thread</span>.sleep<span class="org-rainbow-delimiters-depth-3">(</span>time<span class="org-rainbow-delimiters-depth-3">)</span>
      cmd.execute<span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">/* </span><span class="org-comment">============== Concrete commands ============== */</span>
<span class="org-keyword">class</span> <span class="org-type">DrawLine</span><span class="org-rainbow-delimiters-depth-1">(</span>
  canvas<span class="org-keyword">:</span> <span class="org-type">Canvas</span>,
  x1<span class="org-keyword">:</span> <span class="org-type">Int</span>, y1<span class="org-keyword">:</span> <span class="org-type">Int</span>, x2<span class="org-keyword">:</span> <span class="org-type">Int</span>, y2<span class="org-keyword">:</span> <span class="org-type">Int</span>
 <span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">ICommand</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">execute</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    canvas.drawLine<span class="org-rainbow-delimiters-depth-2">(</span>x1, y1, x2, y2<span class="org-rainbow-delimiters-depth-2">)</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Possible to write arguments in many styles,</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">including this quasi-tabular style.</span>
<span class="org-keyword">class</span> <span class="org-type">DrawCircle</span><span class="org-rainbow-delimiters-depth-1">(</span>
  canvas<span class="org-keyword">:</span> <span class="org-type">Canvas</span>,
  x<span class="org-keyword">:</span>      <span class="org-type">Int</span>,
  y<span class="org-keyword">:</span>      <span class="org-type">Int</span>,
  radius<span class="org-keyword">:</span> <span class="org-type">Int</span>
<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">ICommand</span> <span class="org-rainbow-delimiters-depth-1">{</span>  
  <span class="org-keyword">def</span> <span class="org-function-name">execute</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    canvas.drawCircle<span class="org-rainbow-delimiters-depth-2">(</span>x, y, radius<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">DrawSquare</span><span class="org-rainbow-delimiters-depth-1">(</span>canvas<span class="org-keyword">:</span> <span class="org-type">Canvas</span>, x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span>, size<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">execute</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    canvas.drawSquare<span class="org-rainbow-delimiters-depth-2">(</span>x, y, size<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-doc">/** =============== Client Code =============== */</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Creates animation by setting the commands and scheduler</span>
<span class="org-comment-delimiter">// </span>
<span class="org-keyword">val</span> <span class="org-variable-name">canvas</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Canvas</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">val</span> <span class="org-variable-name">invoker</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Scheduler</span><span class="org-rainbow-delimiters-depth-1">()</span>

<span class="org-keyword">val</span> <span class="org-variable-name">drawCmd1</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">DrawLine</span><span class="org-rainbow-delimiters-depth-1">(</span>canvas, <span class="org-constant">2</span>, <span class="org-constant">10</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">val</span> <span class="org-variable-name">drawCmd2</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">DrawCircle</span><span class="org-rainbow-delimiters-depth-1">(</span>canvas, <span class="org-constant">5</span>, <span class="org-constant">6</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">val</span> <span class="org-variable-name">drawCmd3</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">DrawSquare</span><span class="org-rainbow-delimiters-depth-1">(</span>canvas, <span class="org-constant">9</span>, <span class="org-constant">8</span>, <span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-1">)</span>;

invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1500</span>, drawCmd1<span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Execute command 1 after 1.5 seconds </span>
invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span>, drawCmd2<span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Execute command 2 after 2 seconds </span>
invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2000</span>, drawCmd3<span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Execute command 3 after 3 seconds </span>

scala&gt; invoker.playCommands<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Draw</span> line from p1 <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x1<span class="org-keyword">:</span> <span class="org-constant">2</span>, y1<span class="org-keyword">:</span> <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>  to p2 <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x2<span class="org-keyword">:</span> <span class="org-constant">5</span>, y2<span class="org-keyword">:</span> <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Draw</span> ellipse at <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">5</span>, y <span class="org-keyword">=</span> <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">with</span> <span class="org-type">radius</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>
<span class="org-constant">Draw</span> square at center <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>, <span class="org-constant">8</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">with</span> <span class="org-type">size</span> <span class="org-keyword">=</span> <span class="org-constant">34</span>
</pre>
</div>

<p>
<b>FP Approach</b>
</p>

<ul class="org-ul">
<li>The disadvantage of the OO code is that it is necessary to create a
new class for every method of the receiver object what will result
in many files and lots of boilerplate code. 
</li>
</ul>

<p>
Approach 1: Replace the interface ICommand with a function:
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-doc">/** Receiver object */</span>
<span class="org-keyword">class</span> <span class="org-type">Canvas</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">drawLine</span><span class="org-rainbow-delimiters-depth-2">(</span>x1<span class="org-keyword">:</span> <span class="org-type">Int</span>, y1<span class="org-keyword">:</span> <span class="org-type">Int</span>, x2<span class="org-keyword">:</span> <span class="org-type">Int</span>, y2<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"Draw line from p1 = (x1: </span><span class="org-variable-name">$x1</span><span class="org-string">, y1: </span><span class="org-variable-name">$y1</span><span class="org-string">)  to p2 = (x2: </span><span class="org-variable-name">$x2</span><span class="org-string">, y2: </span><span class="org-variable-name">$y2</span><span class="org-string">)"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">drawCircle</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span>, radius<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"Draw ellipse at (x = </span><span class="org-variable-name">$x</span><span class="org-string">, y = </span><span class="org-variable-name">$y</span><span class="org-string">) with radius = </span><span class="org-variable-name">$radius</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">drawSquare</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span>, size<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span>s<span class="org-string">"Draw square at center (</span><span class="org-variable-name">$x</span><span class="org-string">, </span><span class="org-variable-name">$y</span><span class="org-string">) with size = </span><span class="org-variable-name">$size</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">clear</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Clear canvas"</span><span class="org-rainbow-delimiters-depth-2">)</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">object</span> <span class="org-constant">ICommandTypes</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">type</span> <span class="org-constant">ICommand</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">import</span> <span class="org-constant">ICommandTypes</span>.<span class="org-keyword">_</span>

<span class="org-keyword">class</span> <span class="org-type">Scheduler</span><span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">import</span> scala.collection.mutable.<span class="org-constant">ListBuffer</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">_cmdlist</span> <span class="org-keyword">=</span> <span class="org-constant">ListBuffer</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Int</span>, <span class="org-constant">ICommand</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">]()</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Delay in milliseconds </span>
  <span class="org-keyword">def</span> <span class="org-function-name">addCommand</span><span class="org-rainbow-delimiters-depth-2">(</span>delayMs<span class="org-keyword">:</span> <span class="org-type">Int</span>, cmd<span class="org-keyword">:</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    _cmdlist.append<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>delayMs, cmd<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">clearCommands</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> 
    _cmdlist.clear<span class="org-rainbow-delimiters-depth-2">()</span>  

  <span class="org-keyword">def</span> <span class="org-function-name">playCommands</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>time, cmd<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">&lt;-</span> _cmdlist<span class="org-rainbow-delimiters-depth-2">){</span>
      <span class="org-constant">Thread</span>.sleep<span class="org-rainbow-delimiters-depth-3">(</span>time<span class="org-rainbow-delimiters-depth-3">)</span>
      cmd<span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-doc">/** =============== Client Code =============== */</span>
<span class="org-comment-delimiter">// </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Creates animation by setting the commands and the scheduler</span>
<span class="org-comment-delimiter">//</span>

<span class="org-keyword">val</span> <span class="org-variable-name">canvas</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Canvas</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">val</span> <span class="org-variable-name">invoker</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Scheduler</span><span class="org-rainbow-delimiters-depth-1">()</span>
invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1500</span>, <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> canvas.drawLine<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>, <span class="org-constant">10</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span>, <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> canvas.drawCircle<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5</span>, <span class="org-constant">6</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2000</span>, <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> canvas.drawSquare<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">9</span> ,<span class="org-constant">8</span> , <span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; invoker.playCommands<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Draw</span> line from p1 <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x1<span class="org-keyword">:</span> <span class="org-constant">2</span>, y1<span class="org-keyword">:</span> <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>  to p2 <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x2<span class="org-keyword">:</span> <span class="org-constant">5</span>, y2<span class="org-keyword">:</span> <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Draw</span> ellipse at <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">5</span>, y <span class="org-keyword">=</span> <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">with</span> <span class="org-type">radius</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>
<span class="org-constant">Draw</span> square at center <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>, <span class="org-constant">8</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">with</span> <span class="org-type">size</span> <span class="org-keyword">=</span> <span class="org-constant">34</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">---&gt; Or it could also be &lt;----</span>
<span class="org-comment-delimiter">// </span>
<span class="org-keyword">val</span> <span class="org-variable-name">canvas</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Canvas</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">val</span> <span class="org-variable-name">invoker</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Scheduler</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">val</span> <span class="org-variable-name">cmd1</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> canvas.drawLine<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2</span>, <span class="org-constant">10</span>, <span class="org-constant">5</span>, <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">cmd2</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> canvas.drawCircle<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5</span>, <span class="org-constant">6</span>, <span class="org-constant">20</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">cmd3</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> canvas.drawSquare<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span> ,<span class="org-constant">8</span> , <span class="org-constant">34</span><span class="org-rainbow-delimiters-depth-1">)</span>
invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1500</span>, cmd1<span class="org-rainbow-delimiters-depth-1">)</span>
invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span>, cmd2<span class="org-rainbow-delimiters-depth-1">)</span>
invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2000</span>, cmd3<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; invoker.playCommands<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Draw</span> line from p1 <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x1<span class="org-keyword">:</span> <span class="org-constant">2</span>, y1<span class="org-keyword">:</span> <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>  to p2 <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x2<span class="org-keyword">:</span> <span class="org-constant">5</span>, y2<span class="org-keyword">:</span> <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Draw</span> ellipse at <span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">5</span>, y <span class="org-keyword">=</span> <span class="org-constant">6</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">with</span> <span class="org-type">radius</span> <span class="org-keyword">=</span> <span class="org-constant">20</span>
<span class="org-constant">Draw</span> square at center <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">9</span>, <span class="org-constant">8</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">with</span> <span class="org-type">size</span> <span class="org-keyword">=</span> <span class="org-constant">34</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">---&gt; Or it could also be &lt;----</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">def</span> <span class="org-function-name">makeCmdDrawCircle</span><span class="org-rainbow-delimiters-depth-1">(</span>canvas<span class="org-keyword">:</span> <span class="org-type">Canvas</span>, x<span class="org-keyword">:</span> <span class="org-type">Int</span>, y<span class="org-keyword">:</span> <span class="org-type">Int</span>, radius<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> canvas.drawCircle<span class="org-rainbow-delimiters-depth-1">(</span>x, y, radius<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">drawCircleAtOrigin</span> <span class="org-keyword">=</span> makeCmdDrawCircle<span class="org-rainbow-delimiters-depth-1">(</span>canvas, <span class="org-constant">0</span>, <span class="org-constant">0</span>, <span class="org-constant">25</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">drawCircleAtOrigin</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>

scala&gt; invoker.addCommand<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4000</span>, drawCircleAtOrigin<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>



<li><a id="sec-1-15-3-4-3" name="sec-1-15-3-4-3"></a><a id="ID-9bccd5c0-53f5-4925-b58b-a989d28cfe70" name="ID-9bccd5c0-53f5-4925-b58b-a989d28cfe70"></a>Example 2 - Graphical user interface with FP approach<br  /><div class="outline-text-6" id="text-1-15-3-4-3">

<p>
In this example, every GUI button works as an invoker and main
application as a receiver. The command pattern here can decouple the
application from the GUI. 
</p>

<ul class="org-ul">
<li>Running: The sample code can be run directly from the REPL
with :paste and pasting the source code or loading the file
with :paste src/commandGUIPattern.scala.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">:</span><span class="org-type">paste</span> src/commandGUIPattern.scala

<span class="org-comment-delimiter">// </span><span class="org-comment">User clicks at buttons or menu items. </span>
scala&gt; <span class="org-constant">Save</span> document to file file1.txt
<span class="org-constant">Save</span> document to file file1.txt
<span class="org-constant">Save</span> document to file file1.txt
<span class="org-constant">Open</span> file <span class="org-keyword">=</span> /data/fileTest.csv
<span class="org-constant">Open</span> file <span class="org-keyword">=</span> /data/fileTest.csv
<span class="org-constant">Fake</span> command. <span class="org-constant">DO</span> <span class="org-constant">NOT</span> <span class="org-constant">EXIT</span> during test.
<span class="org-constant">Fake</span> command. <span class="org-constant">DO</span> <span class="org-constant">NOT</span> <span class="org-constant">EXIT</span> during test.
<span class="org-constant">Fake</span> command. <span class="org-constant">DO</span> <span class="org-constant">NOT</span> <span class="org-constant">EXIT</span> during test.

<span class="org-comment-delimiter">// </span><span class="org-comment">Run command directly </span>
scala&gt; cmdSave.execute<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Save</span> document to file file1.txt

scala&gt; cmdOpen.execute<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">Open</span> file <span class="org-keyword">=</span> /data/fileTest.csv
</pre>
</div>

<ul class="org-ul">
<li>Screenshot: 
</li>
</ul>


<div class="figure">
<p><a href="images/commandGUIPattern.png"><img src="images/commandGUIPattern.png" alt="commandGUIPattern.png" /></a>
</p>
</div>

<ul class="org-ul">
<li>File: <a href="src/commandGUIPattern.scala"><a href="src/commandGUIPattern.scala">src/commandGUIPattern.scala</a></a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JButton</span>, <span class="org-constant">JMenuItem</span>, <span class="org-constant">JMenuBar</span>, <span class="org-constant">JMenu</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">import</span> java.awt.event.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">ActionListener</span>, <span class="org-constant">ActionEvent</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">Application</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">saveDocument</span><span class="org-rainbow-delimiters-depth-2">(</span>file<span class="org-keyword">:</span> <span class="org-type">String</span>, data<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"Save document to file </span><span class="org-variable-name">$file</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">openFile</span><span class="org-rainbow-delimiters-depth-2">(</span>file<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> 
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"Open file = </span><span class="org-variable-name">$file</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">printDocument</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Printing document ..."</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">exit</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Shutdown systems ..."</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-constant">System</span>.exit<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">trait</span> <span class="org-type">ICommand</span> <span class="org-keyword">extends</span> <span class="org-type">ActionListener</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Abstract method </span>
  <span class="org-keyword">def</span> <span class="org-function-name">execute</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Concrete method </span>
  <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-2">(</span>evt<span class="org-keyword">:</span> <span class="org-type">ActionEvent</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    execute<span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">MainGUI</span> <span class="org-keyword">extends</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btSave</span>    <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Save"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btOpen</span>    <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Open"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btClose</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Close"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">menuSave</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JMenuItem</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Save"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">menuOpen</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JMenuItem</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Open"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">menuClose</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JMenuItem</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Close"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    setLayout<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.awt.<span class="org-constant">FlowLayout</span><span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
    setTitle<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"FP - Command Design Pattern for GUIs"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Can be without this, but explicit is better than implicit!</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">this.settSize(300, 276)</span>
    setSize<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">300</span>, <span class="org-constant">276</span><span class="org-rainbow-delimiters-depth-3">)</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Add buttons</span>
    <span class="org-comment-delimiter">//</span><span class="org-comment">==============</span>
    <span class="org-keyword">this</span>.add<span class="org-rainbow-delimiters-depth-3">(</span>btSave<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">this</span>.add<span class="org-rainbow-delimiters-depth-3">(</span>btOpen<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">this</span>.add<span class="org-rainbow-delimiters-depth-3">(</span>btClose<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Add menu bar</span>
    <span class="org-comment-delimiter">//</span><span class="org-comment">================</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">menu</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JMenu</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Save"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    menu.add<span class="org-rainbow-delimiters-depth-3">(</span>menuOpen<span class="org-rainbow-delimiters-depth-3">)</span>        
    menu.add<span class="org-rainbow-delimiters-depth-3">(</span>menuSave<span class="org-rainbow-delimiters-depth-3">)</span>
    menu.add<span class="org-rainbow-delimiters-depth-3">(</span>menuClose<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">menuBar</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JMenuBar</span><span class="org-rainbow-delimiters-depth-3">()</span>
    menuBar.add<span class="org-rainbow-delimiters-depth-3">(</span>menu<span class="org-rainbow-delimiters-depth-3">)</span>
    setJMenuBar<span class="org-rainbow-delimiters-depth-3">(</span>menuBar<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setSaveCommand</span><span class="org-rainbow-delimiters-depth-2">(</span>cmd<span class="org-keyword">:</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    btSave.addActionListener<span class="org-rainbow-delimiters-depth-3">(</span>cmd<span class="org-rainbow-delimiters-depth-3">)</span>
    menuSave.addActionListener<span class="org-rainbow-delimiters-depth-3">(</span>cmd<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">this</span> <span class="org-comment-delimiter">// </span><span class="org-comment">return this for method chaining</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setOpenCommand</span><span class="org-rainbow-delimiters-depth-2">(</span>cmd<span class="org-keyword">:</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span> 
    btOpen.addActionListener<span class="org-rainbow-delimiters-depth-3">(</span>cmd<span class="org-rainbow-delimiters-depth-3">)</span>
    menuOpen.addActionListener<span class="org-rainbow-delimiters-depth-3">(</span>cmd<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">this</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">setExitCommand</span><span class="org-rainbow-delimiters-depth-2">(</span>cmd<span class="org-keyword">:</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span> 
    btClose.addActionListener<span class="org-rainbow-delimiters-depth-3">(</span>cmd<span class="org-rainbow-delimiters-depth-3">)</span>
    menuClose.addActionListener<span class="org-rainbow-delimiters-depth-3">(</span>cmd<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">this</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">//</span><span class="org-comment">--- End of class MainGUI ---- // </span>



<span class="org-comment-delimiter">// </span><span class="org-comment">Approach 1: The function generates anonymous </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">classes implementing the interface.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">def</span> <span class="org-function-name">makeCommand</span><span class="org-rainbow-delimiters-depth-1">(</span>action<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-keyword">new</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">execute</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> action
  <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">makeOpenComand</span><span class="org-rainbow-delimiters-depth-1">(</span>app<span class="org-keyword">:</span> <span class="org-type">Application</span>, file<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-keyword">new</span> <span class="org-type">ICommand</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">execute</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> app.openFile<span class="org-rainbow-delimiters-depth-2">(</span>file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">val</span> <span class="org-variable-name">app</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Application</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">val</span> <span class="org-variable-name">gui</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">MainGUI</span><span class="org-rainbow-delimiters-depth-1">()</span>
gui.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">cmdSave</span> <span class="org-keyword">=</span> makeCommand<span class="org-rainbow-delimiters-depth-1">{</span> app.saveDocument<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"file1.txt"</span>, <span class="org-string">"some data"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">val</span> <span class="org-variable-name">cmdOpen</span> <span class="org-keyword">=</span> makeOpenComand<span class="org-rainbow-delimiters-depth-1">(</span>app, <span class="org-string">"/data/fileTest.csv"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">cmdExit</span> <span class="org-keyword">=</span> makeCommand<span class="org-rainbow-delimiters-depth-1">{</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Fake command. DO NOT EXIT during test."</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
gui.setSaveCommand<span class="org-rainbow-delimiters-depth-1">(</span>cmdSave<span class="org-rainbow-delimiters-depth-1">)</span>
gui.setOpenCommand<span class="org-rainbow-delimiters-depth-1">(</span>cmdOpen<span class="org-rainbow-delimiters-depth-1">)</span>
gui.setExitCommand<span class="org-rainbow-delimiters-depth-1">(</span>cmdExit<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-15-3-5" class="outline-5">
<h5 id="sec-1-15-3-5"><a id="ID-a24d6fd5-1931-4dde-b68d-0873704614fb" name="ID-a24d6fd5-1931-4dde-b68d-0873704614fb"></a><span class="section-number-5">1.15.3.5</span> Observer / Publisher Subscriber</h5>
<div class="outline-text-5" id="text-1-15-3-5">
</div>
<ol class="org-ol"><li><a id="sec-1-15-3-5-1" name="sec-1-15-3-5-1"></a>Overview<br  /><div class="outline-text-6" id="text-1-15-3-5-1">
<p>
The observer pattern is stated by GOF as "Define a one-to-many
dependency between objects so that when one object changes state, all
its dependents are notified and updated automatically."
</p>

<p>
The observer pattern is behavioral pattern defining a one-to-many
dependency between subject and observer. The observers objects are
notified about the subject changes.
</p>

<p>
This pattern is widely used by GUIs toolkits, including Java Swing and
spreadsheets. It is also a key part of MVC - Model View Controller.
</p>

<p>
It is also known as:
</p>

<ul class="org-ul">
<li>Puhlisher/ Subscriber
</li>

<li>Observable/ Observer
</li>

<li>Subject / Observer
</li>
</ul>

<p>
Known uses in Frameworks:
</p>

<ul class="org-ul">
<li>Java: java.util.Observable
</li>

<li>.NET: System.IObservable and System.IObserver
</li>
</ul>

<p>
Participants:
</p>

<ul class="org-ul">
<li><span class="underline">Subject</span>  - The <span class="underline">subject</span> object maintains references to all
subscribed <span class="underline">observers</span> and notifies them when an event happens or
its state changes.

<ul class="org-ul">
<li>Methods:

<ul class="org-ul">
<li>attach or subscribe           - Attach observer.
</li>

<li>detach/ unsubscribe or remove - Remove observer.
</li>

<li>notify - Notify all observers,
</li>
</ul>
</li>
</ul>
</li>

<li><span class="underline">Observer</span> - Each Observer object has an update or notify method
that is called by the subscribed subject when its states
changes.

<ul class="org-ul">
<li>Methods:

<ul class="org-ul">
<li>update / notify  - Notify or update observer.
</li>
</ul>
</li>
</ul>
</li>
</ul>

<p>
Mechanisms to send data to observers:
</p>

<ul class="org-ul">
<li>Pull model. Observer executes Subject.getData() to get data from subject.
</li>

<li>Push model. The subject pass its data as argument of observers'
update method. <code>for o in observers do o.update(subject.data)</code>
</li>
</ul>


<p>
References:
</p>

<ul class="org-ul">
<li><b>Observer Pattern</b>
   <a href="http://www.cs.mcgill.ca/~hv/classes/CS400/01.hchen/doc/observer/observer.html">http://www.cs.mcgill.ca/~hv/classes/CS400/01.hchen/doc/observer/observer.html</a>
</li>

<li><b>Observer Design Pattern</b>
   <a href="https://docs.microsoft.com/en-us/dotnet/standard/events/observer-design-pattern">https://docs.microsoft.com/en-us/dotnet/standard/events/observer-design-pattern</a>
</li>

<li><b>Exploring the Observer Design Pattern</b>
   <a href="https://msdn.microsoft.com/en-us/library/ee817669.aspx">https://msdn.microsoft.com/en-us/library/ee817669.aspx</a>
</li>

<li><b>Introduction to Software Engineering - The Observer Design
Pattern</b> <a href="http://stg-tud.github.io/eise/WS11-EiSE-17-Observer_Design_Pattern.pdf">http://stg-tud.github.io/eise/WS11-EiSE-17-Observer_Design_Pattern.pdf</a>
</li>

<li><b>Observer</b> <a href="http://cs.unb.ca/~wdu/cs4015/ch5i.pdf">http://cs.unb.ca/~wdu/cs4015/ch5i.pdf</a>
</li>

<li><b>Observer design pattern</b>
   <a href="https://www.slideshare.net/saratorkey/observer-design-pattern">https://www.slideshare.net/saratorkey/observer-design-pattern</a>
</li>

<li><b>Software Development (cs2500)</b>
   <a href="http://www.ucccs.info/ucc/ucc2/ucc_folder/cs2500/notes/Lecture%2037%20-%20EventHandlers.pdf">http://www.ucccs.info/ucc/ucc2/ucc_folder/cs2500/notes/Lecture%2037%20-%20EventHandlers.pdf</a>
</li>

<li><b>Observer pattern</b> <a href="https://en.wikipedia.org/wiki/Observer_pattern">https://en.wikipedia.org/wiki/Observer_pattern</a>
</li>
</ul>
</div>
</li>

<li><a id="sec-1-15-3-5-2" name="sec-1-15-3-5-2"></a><a id="ID-24e96781-f520-491c-9607-5513cd9c738b" name="ID-24e96781-f520-491c-9607-5513cd9c738b"></a>Example in OO way<br  /><div class="outline-text-6" id="text-1-15-3-5-2">

<p>
Example: A temperature sensor publishes its temperature to 4 observers
that displays the temperature in Celsius, Kelvin and Fahrenheit. It
has also a GUI observer (View) that displays the temperature in
Celsius. All observers(displays, aka views) are updated when the
temperature changes.
</p>

<ul class="org-ul">
<li>File:  <a href="src/observerPattern1.scala">src/observerPattern1.scala</a> 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Observer interface</span>
<span class="org-keyword">trait</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Subject interface</span>
<span class="org-keyword">trait</span> <span class="org-type">Subject</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Subscribe observer to subject updates</span>
  <span class="org-keyword">def</span> <span class="org-function-name">attach</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Remove/ unsubscribe observer from subject updates</span>
  <span class="org-keyword">def</span> <span class="org-function-name">detach</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Notify all observers</span>
  <span class="org-keyword">def</span> <span class="org-function-name">notifyObservers</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Concrete: Subject</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Publishes temperature measurements.</span>
<span class="org-keyword">class</span> <span class="org-type">TempSensor</span> <span class="org-keyword">extends</span> <span class="org-type">Subject</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">temp</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">observers</span><span class="org-keyword">:</span> <span class="org-type">Set</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Observer</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Set</span><span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">attach</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    observers += obs

  <span class="org-keyword">def</span> <span class="org-function-name">detach</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    observers -= obs

  <span class="org-keyword">def</span> <span class="org-function-name">notifyObservers</span><span class="org-rainbow-delimiters-depth-2">(</span>tempNew<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    temp <span class="org-keyword">=</span> tempNew
    observers.foreach<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">_</span>.update<span class="org-rainbow-delimiters-depth-4">(</span>tempNew<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">for (obs &lt;- observers) obs.update(tempNew)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">getTemp</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> temp

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">---------- Concrete Observers ----------------- //</span>

<span class="org-keyword">class</span> <span class="org-type">ConsoleCelsiusObserver</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Current temperature is %.3f in &#176;C</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, temp<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">End of class ConsoleCelsiusObserver</span>

<span class="org-keyword">class</span> <span class="org-type">ConsoleKelvinObserver</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Current temperature is %.3f in &#176;K</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, temp + <span class="org-constant">273.0</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">End of class ConsoleKelvinObserver</span>

<span class="org-keyword">class</span> <span class="org-type">ConsoleFahrenheitObserver</span><span class="org-rainbow-delimiters-depth-1">(</span>subject<span class="org-keyword">:</span> <span class="org-type">Subject</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]{</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    subject.attach<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">tempF</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span> / <span class="org-constant">9.0</span> * temp + <span class="org-constant">32.0</span>
    printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Current temperature is %.3f in F</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, tempF<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">End of class ConsoleFahrenheitObserver</span>


<span class="org-comment-delimiter">/// </span><span class="org-comment">Java Swing Observer</span>
<span class="org-keyword">class</span> <span class="org-type">GuiCelsiusObserver</span><span class="org-rainbow-delimiters-depth-1">(</span>subject<span class="org-keyword">:</span> <span class="org-type">Subject</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">frame</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">display</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-2">()</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    frame.setSize<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">255</span>, <span class="org-constant">71</span><span class="org-rainbow-delimiters-depth-3">)</span>
    frame.add<span class="org-rainbow-delimiters-depth-3">(</span>display<span class="org-rainbow-delimiters-depth-3">)</span>
    frame.show<span class="org-rainbow-delimiters-depth-3">()</span>
    frame.setTitle<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Temperature View"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    subject.attach<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    display.setText<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Temperature = %.3f C"</span>.format<span class="org-rainbow-delimiters-depth-4">(</span>temp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">----------- Classes Instantiation ---------- ///</span>

<span class="org-keyword">val</span> <span class="org-variable-name">sensor</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">TempSensor</span><span class="org-rainbow-delimiters-depth-1">()</span>

<span class="org-keyword">val</span> <span class="org-variable-name">consoleC</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ConsoleCelsiusObserver</span><span class="org-rainbow-delimiters-depth-1">()</span>
sensor.attach<span class="org-rainbow-delimiters-depth-1">(</span>consoleC<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">consoleK</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ConsoleKelvinObserver</span><span class="org-rainbow-delimiters-depth-1">()</span>
sensor.attach<span class="org-rainbow-delimiters-depth-1">(</span>consoleK<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">consoleF</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ConsoleFahrenheitObserver</span><span class="org-rainbow-delimiters-depth-1">(</span>sensor<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">guiObs</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">GuiCelsiusObserver</span><span class="org-rainbow-delimiters-depth-1">(</span>sensor<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<p>
Running:
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">:</span><span class="org-type">paste</span> src/observerPattern1.scala
<span class="org-constant">Pasting</span> file src/observerPattern1.scala...
<span class="org-function-name">warning</span><span class="org-keyword">:</span> <span class="org-type">there</span> was one deprecation warning; re-run <span class="org-keyword">with</span> <span class="org-type">-</span>deprecation <span class="org-keyword">for</span> details

ob_scala_eoldefined <span class="org-keyword">trait</span> <span class="org-type">Observer</span>
defined <span class="org-keyword">trait</span> <span class="org-type">Subject</span>
defined <span class="org-keyword">class</span> <span class="org-type">TempSensor</span>
defined <span class="org-keyword">class</span> <span class="org-type">ConsoleCelsiusObserver</span>
defined <span class="org-keyword">class</span> <span class="org-type">ConsoleKelvinObserver</span>
defined <span class="org-keyword">class</span> <span class="org-type">ConsoleFahrenheitObserver</span>
defined <span class="org-keyword">class</span> <span class="org-type">GuiCelsiusObserver</span>
<span class="org-function-name">sensor</span><span class="org-keyword">:</span> <span class="org-type">TempSensor</span> <span class="org-keyword">=</span> <span class="org-constant">TempSensor</span><span class="org-keyword">@</span><span class="org-constant">4d</span>d02341
<span class="org-function-name">consoleC</span><span class="org-keyword">:</span> <span class="org-type">ConsoleCelsiusObserver</span> <span class="org-keyword">=</span> <span class="org-constant">ConsoleCelsiusObserver</span><span class="org-keyword">@</span><span class="org-constant">3212</span>a8d7
<span class="org-function-name">consoleK</span><span class="org-keyword">:</span> <span class="org-type">ConsoleKelvinObserver</span> <span class="org-keyword">=</span> <span class="org-constant">ConsoleKelvinObserver</span><span class="org-keyword">@</span><span class="org-constant">7</span>a1a3478
<span class="org-function-name">consoleF</span><span class="org-keyword">:</span> <span class="org-type">ConsoleFahrenheitObserver</span> <span class="org-keyword">=</span> <span class="org-constant">ConsoleFahrenheitObserver</span><span class="org-keyword">@</span><span class="org-constant">495</span>b04<span class="org-constant">87</span>
<span class="org-function-name">guiObs</span><span class="org-keyword">:</span> <span class="org-type">GuiCelsiusObserver</span> <span class="org-keyword">=</span> <span class="org-constant">GuiCelsiusObserver</span><span class="org-keyword">@</span><span class="org-constant">55d</span>fcc6

<span class="org-comment-delimiter">// </span><span class="org-comment">Manual simulation </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------</span>

scala&gt; sensor.notifyObservers<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Current</span> temperature is <span class="org-constant">20.000</span> in &#176;C
<span class="org-constant">Current</span> temperature is <span class="org-constant">293.000</span> in &#176;K
<span class="org-constant">Current</span> temperature is <span class="org-constant">43.111</span> in <span class="org-constant">F</span>

scala&gt; sensor.notifyObservers<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Current</span> temperature is <span class="org-constant">20.100</span> in &#176;C
<span class="org-constant">Current</span> temperature is <span class="org-constant">293.100</span> in &#176;K
<span class="org-constant">Current</span> temperature is <span class="org-constant">43.167</span> in <span class="org-constant">F</span>

scala&gt; sensor.notifyObservers<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Current</span> temperature is <span class="org-constant">20.500</span> in &#176;C
<span class="org-constant">Current</span> temperature is <span class="org-constant">293.500</span> in &#176;K
<span class="org-constant">Current</span> temperature is <span class="org-constant">43.389</span> in <span class="org-constant">F</span>

scala&gt; sensor.detach<span class="org-rainbow-delimiters-depth-1">(</span>consoleK<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; sensor.notifyObservers<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">23.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Current</span> temperature is <span class="org-constant">23.000</span> in &#176;C
<span class="org-constant">Current</span> temperature is <span class="org-constant">44.778</span> in <span class="org-constant">F</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Automatic simulation</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------------</span>

<span class="org-keyword">def</span> <span class="org-function-name">runTimer</span><span class="org-rainbow-delimiters-depth-1">(</span>interval<span class="org-keyword">:</span> <span class="org-type">Int</span>, taskFn<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">task</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">TimerTask</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      taskFn<span class="org-rainbow-delimiters-depth-4">()</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">timer</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Timer</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Run the task every 1 second interval (or 1000 milli seconds)</span>
  timer.schedule<span class="org-rainbow-delimiters-depth-2">(</span>task, <span class="org-constant">1</span>, interval<span class="org-rainbow-delimiters-depth-2">)</span>
  timer
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">End of runTimer</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Generates a random number within an interval</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">from (mid - delta) to (mid + delta)</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">def</span> <span class="org-function-name">genRandomInterval</span><span class="org-rainbow-delimiters-depth-1">(</span>mid<span class="org-keyword">:</span> <span class="org-type">Double</span>, delta<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">rnd</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Random</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">val</span> <span class="org-variable-name">x</span> <span class="org-keyword">=</span> rnd.nextDouble<span class="org-rainbow-delimiters-depth-3">()</span>
          <span class="org-constant">2</span> * delta * x + <span class="org-rainbow-delimiters-depth-3">(</span>mid - delta<span class="org-rainbow-delimiters-depth-3">)</span> 
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">genRandomInterval</span><span class="org-rainbow-delimiters-depth-1">(</span>mid<span class="org-keyword">:</span> <span class="org-type">Double</span>, delta<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     |   <span class="org-keyword">val</span> <span class="org-variable-name">rnd</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Random</span><span class="org-rainbow-delimiters-depth-2">()</span>
     |   <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">val</span> <span class="org-variable-name">x</span> <span class="org-keyword">=</span> rnd.nextDouble<span class="org-rainbow-delimiters-depth-3">()</span>
     |           <span class="org-constant">2</span> * delta * x + <span class="org-rainbow-delimiters-depth-3">(</span>mid - delta<span class="org-rainbow-delimiters-depth-3">)</span> 
     |         <span class="org-rainbow-delimiters-depth-2">}</span>
     | <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">genRandomInterval</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>mid<span class="org-keyword">:</span> <span class="org-type">Double</span>, delta<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Generates a temperature between 20.0 - 3.0 (17.0 C) and 20.0 + 3.0 (23 &#176;C)</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">genTemp</span> <span class="org-keyword">=</span> genRandomInterval<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.0</span>, <span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">genTemp</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> &lt;function0&gt;


<span class="org-comment-delimiter">// </span><span class="org-comment">Update the temperature every 1 second </span>
runTimer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span>, <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> sensor.notifyObservers<span class="org-rainbow-delimiters-depth-2">(</span>genTemp<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-1-15-3-5-3" name="sec-1-15-3-5-3"></a><a id="ID-50b40ac2-98e9-40cb-ab9e-0984e1ef3c22" name="ID-50b40ac2-98e9-40cb-ab9e-0984e1ef3c22"></a>Example in FP way<br  /><div class="outline-text-6" id="text-1-15-3-5-3">

<p>
As Scala is also a functional language, it allows functions be passed
directly as argument, therefore the observer objects can be replaced
by <span class="underline">callbacks</span> functions and the <span class="underline">subject</span> by some object with a
mutable collection of callbacks. 
</p>

<p>
The subject or observable class was replaced by a record of stateful
functions created with a closure, but it could remain as class as
well.
</p>

<p>
File: <a href="src/observerPatternFun.scala"><a href="src/observerPatternFun.scala">src/observerPatternFun.scala</a></a>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Observer object is replace by a callback function </span>
<span class="org-keyword">type</span> <span class="org-constant">Observer</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Record containing functions </span>
<span class="org-keyword">case</span> <span class="org-keyword">class</span> <span class="org-type">Subject</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>
   attach<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
  ,detach<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
  ,notifyObservers<span class="org-keyword">:</span> <span class="org-type">A</span>  <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
  ,getState<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">A</span>
<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">def</span> <span class="org-function-name">createSubject</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>stateInit<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">observers</span> <span class="org-keyword">:</span> <span class="org-type">Set</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Set</span><span class="org-rainbow-delimiters-depth-2">()</span>  
  <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">state</span> <span class="org-keyword">=</span> stateInit

  <span class="org-keyword">val</span> <span class="org-variable-name">attach</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    observers += obs 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">detach</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    observers -= obs 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">notifyObservers</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    state <span class="org-keyword">=</span> a 
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-3">(</span>obs <span class="org-keyword">&lt;-</span> observers<span class="org-rainbow-delimiters-depth-3">)</span> obs<span class="org-rainbow-delimiters-depth-3">(</span>a<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">getState</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> state

  <span class="org-constant">Subject</span><span class="org-rainbow-delimiters-depth-2">(</span>attach, detach, notifyObservers, getState<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">The observer becomes just a function or callback!!</span>
<span class="org-keyword">def</span> <span class="org-function-name">consoleCelsiusObserver</span><span class="org-rainbow-delimiters-depth-1">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Current temperature is %.3f in &#176;C</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, temp<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">consoleKelvinObserver</span><span class="org-rainbow-delimiters-depth-1">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Current temperature is %.3f in &#176;K</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, temp + <span class="org-constant">273.0</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">consoleFahrenheitObserver</span><span class="org-rainbow-delimiters-depth-1">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">tempF</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span> / <span class="org-constant">9.0</span> * temp + <span class="org-constant">32.0</span>
  printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Current temperature is %.3f in F</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span>, tempF<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Creates a function that updates the GUI display</span>
<span class="org-comment-delimiter">// </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Note: (Double =&gt; Unit) is optional.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">The type annotation was added to make reading easier.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">def</span> <span class="org-function-name">makeGuiObserver</span><span class="org-rainbow-delimiters-depth-1">()</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">display</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-2">()</span>
  frame.setSize<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">255</span>, <span class="org-constant">71</span><span class="org-rainbow-delimiters-depth-2">)</span>
  frame.add<span class="org-rainbow-delimiters-depth-2">(</span>display<span class="org-rainbow-delimiters-depth-2">)</span>
  frame.show<span class="org-rainbow-delimiters-depth-2">()</span>
  frame.setTitle<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Temperature View"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span>  display.setText<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Temperature = %.3f C"</span>.format<span class="org-rainbow-delimiters-depth-3">(</span>temp<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">val</span> <span class="org-variable-name">sensor</span> <span class="org-keyword">=</span> createSubject<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-constant">20.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
sensor.attach<span class="org-rainbow-delimiters-depth-1">(</span>consoleCelsiusObserver<span class="org-rainbow-delimiters-depth-1">)</span>
sensor.attach<span class="org-rainbow-delimiters-depth-1">(</span>consoleKelvinObserver<span class="org-rainbow-delimiters-depth-1">)</span>
sensor.attach<span class="org-rainbow-delimiters-depth-1">(</span>consoleFahrenheitObserver<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">guiObserver</span> <span class="org-keyword">=</span> makeGuiObserver<span class="org-rainbow-delimiters-depth-1">()</span>
sensor.attach<span class="org-rainbow-delimiters-depth-1">(</span>guiObserver<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">:</span><span class="org-type">paste</span> src/observerPatternFun.scala
<span class="org-constant">Pasting</span> file src/observerPatternFun.scala...
<span class="org-function-name">warning</span><span class="org-keyword">:</span> <span class="org-type">there</span> was one deprecation warning; re-run <span class="org-keyword">with</span> <span class="org-type">-</span>deprecation <span class="org-keyword">for</span> details

ob_scala_eoldefined <span class="org-keyword">type</span> alias <span class="org-constant">Observer</span>
defined <span class="org-keyword">class</span> <span class="org-type">Subject</span>
<span class="org-function-name">createSubject</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">](</span>stateInit<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Subject</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">consoleCelsiusObserver</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Unit</span>
<span class="org-function-name">consoleKelvinObserver</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Unit</span>
<span class="org-function-name">consoleFahrenheitObserver</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>temp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Unit</span>
<span class="org-function-name">makeGuiObserver</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span><span class="org-constant">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
<span class="org-function-name">sensor</span><span class="org-keyword">:</span> <span class="org-type">Subject</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">Subject</span><span class="org-rainbow-delimiters-depth-1">(</span>&lt;function1&gt;,&lt;function1&gt;,&lt;function1&gt;,&lt;function0&gt;<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">guiObserver</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> &lt;function1&gt;


<span class="org-comment-delimiter">// </span><span class="org-comment">Manual simulation</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------------</span>

scala&gt;  sensor.notifyObservers<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">21.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Current</span> temperature is <span class="org-constant">21.000</span> in &#176;C
<span class="org-constant">Current</span> temperature is <span class="org-constant">294.000</span> in &#176;K
<span class="org-constant">Current</span> temperature is <span class="org-constant">43.667</span> in <span class="org-constant">F</span>

scala&gt;  sensor.notifyObservers<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">22.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Current</span> temperature is <span class="org-constant">22.000</span> in &#176;C
<span class="org-constant">Current</span> temperature is <span class="org-constant">295.000</span> in &#176;K
<span class="org-constant">Current</span> temperature is <span class="org-constant">44.222</span> in <span class="org-constant">F</span>

scala&gt;  sensor.notifyObservers<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">23.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Current</span> temperature is <span class="org-constant">23.000</span> in &#176;C
<span class="org-constant">Current</span> temperature is <span class="org-constant">296.000</span> in &#176;K
<span class="org-constant">Current</span> temperature is <span class="org-constant">44.778</span> in <span class="org-constant">F</span>

scala&gt;  sensor.notifyObservers<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">25.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Current</span> temperature is <span class="org-constant">25.000</span> in &#176;C
<span class="org-constant">Current</span> temperature is <span class="org-constant">298.000</span> in &#176;K
<span class="org-constant">Current</span> temperature is <span class="org-constant">45.889</span> in <span class="org-constant">F</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Automatic simulation</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------------</span>


<span class="org-keyword">def</span> <span class="org-function-name">runTimer</span><span class="org-rainbow-delimiters-depth-1">(</span>interval<span class="org-keyword">:</span> <span class="org-type">Int</span>, taskFn<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">task</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">TimerTask</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      taskFn<span class="org-rainbow-delimiters-depth-4">()</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">timer</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Timer</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Run the task every 1 second interval (or 1000 milli seconds)</span>
  timer.schedule<span class="org-rainbow-delimiters-depth-2">(</span>task, <span class="org-constant">1</span>, interval<span class="org-rainbow-delimiters-depth-2">)</span>
  timer
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">End of runTimer</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Generates a random number within an interval</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">from (mid - delta) to (mid + delta)</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">def</span> <span class="org-function-name">genRandomInterval</span><span class="org-rainbow-delimiters-depth-1">(</span>mid<span class="org-keyword">:</span> <span class="org-type">Double</span>, delta<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">rnd</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Random</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">val</span> <span class="org-variable-name">x</span> <span class="org-keyword">=</span> rnd.nextDouble<span class="org-rainbow-delimiters-depth-3">()</span>
          <span class="org-constant">2</span> * delta * x + <span class="org-rainbow-delimiters-depth-3">(</span>mid - delta<span class="org-rainbow-delimiters-depth-3">)</span> 
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">genTemp</span> <span class="org-keyword">=</span> genRandomInterval<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">20.0</span>, <span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">genTemp</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> &lt;function0&gt;

scala&gt; genTemp<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">19.81265553013229</span>

scala&gt; genTemp<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">18.965575803660617</span>

scala&gt; genTemp<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">21.172101549312305</span>

scala&gt; genTemp<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">17.821626339663855</span>

scala&gt; genTemp<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">22.38493758505381</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Update the temperature every 1 second </span>
runTimer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span>, <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> sensor.notifyObservers<span class="org-rainbow-delimiters-depth-2">(</span>genTemp<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-1-15-3-5-4" name="sec-1-15-3-5-4"></a>Java built-in Observer Pattern<br  /><div class="outline-text-6" id="text-1-15-3-5-4">
<p>
Java provides the java.util.Observable and java.util.Observer
interfaces to help implement the observer pattern. 
</p>

<p>
The subject/observable class inherits the Observable interface and
notifies observer objects which implements the Observer interface. 
</p>


<ul class="org-ul">
<li>API Docs:

<ul class="org-ul">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Observable.html">Observable (Java Platform SE 7 )</a>
</li>

<li><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Observer.html">Observer (Java Platform SE 7 )</a>
</li>
</ul>
</li>
</ul>

<p>
Example: Every time the temperature sensor gets a new temperature, the
celsius and kelvin displays are updated with the temperature
measurements. 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">TemperatureSensor</span><span class="org-rainbow-delimiters-depth-1">(</span>initTemp<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">java</span>.util.<span class="org-constant">Observable</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">temp</span> <span class="org-keyword">=</span> initTemp

  <span class="org-keyword">def</span> <span class="org-function-name">setValue</span><span class="org-rainbow-delimiters-depth-2">(</span>t<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    temp <span class="org-keyword">=</span> t
    setChanged<span class="org-rainbow-delimiters-depth-3">()</span>
    notifyObservers<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">getValue</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> temp 
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Observer that displays temperature in Celsius </span>
<span class="org-keyword">class</span> <span class="org-type">CelsiusObserver</span> <span class="org-keyword">extends</span> <span class="org-type">java</span>.util.<span class="org-constant">Observer</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Observable</span>, obj<span class="org-keyword">:</span> <span class="org-type">Object</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">ov</span> <span class="org-keyword">=</span> obs.asInstanceOf<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">TemperatureSensor</span><span class="org-rainbow-delimiters-depth-3">]</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Temperature is = %.2f C"</span>.format<span class="org-rainbow-delimiters-depth-4">(</span>ov.getValue<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Observer that displays temperature in Kelvin </span>
<span class="org-keyword">class</span> <span class="org-type">KelvinObserver</span> <span class="org-keyword">extends</span> <span class="org-type">java</span>.util.<span class="org-constant">Observer</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Observable</span>, obj<span class="org-keyword">:</span> <span class="org-type">Object</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">ov</span> <span class="org-keyword">=</span> obs.asInstanceOf<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">TemperatureSensor</span><span class="org-rainbow-delimiters-depth-3">]</span>
    <span class="org-keyword">val</span> <span class="org-variable-name">temp</span> <span class="org-keyword">=</span> ov.getValue<span class="org-rainbow-delimiters-depth-3">()</span> + <span class="org-constant">273.0</span> 
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Temperature is = %.2f K"</span>.format<span class="org-rainbow-delimiters-depth-4">(</span>temp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">val</span> <span class="org-variable-name">sensor</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">TemperatureSensor</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">21.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">celsiusObserver</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">CelsiusObserver</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-keyword">val</span> <span class="org-variable-name">kelvinObserver</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">KelvinObserver</span><span class="org-rainbow-delimiters-depth-1">()</span>


sensor.addObserver<span class="org-rainbow-delimiters-depth-1">(</span>celsiusObserver<span class="org-rainbow-delimiters-depth-1">)</span>
sensor.addObserver<span class="org-rainbow-delimiters-depth-1">(</span>kelvinObserver<span class="org-rainbow-delimiters-depth-1">)</span>

cala&gt; sensor.getValue<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">21.0</span>

scala&gt; sensor.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">21.5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Temperature</span> is <span class="org-keyword">=</span> <span class="org-constant">294.50</span> <span class="org-constant">K</span>
<span class="org-constant">Temperature</span> is <span class="org-keyword">=</span> <span class="org-constant">21.50</span> <span class="org-constant">C</span>

scala&gt; sensor.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">21.6</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Temperature</span> is <span class="org-keyword">=</span> <span class="org-constant">294.60</span> <span class="org-constant">K</span>
<span class="org-constant">Temperature</span> is <span class="org-keyword">=</span> <span class="org-constant">21.60</span> <span class="org-constant">C</span>

scala&gt; sensor.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">22</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Temperature</span> is <span class="org-keyword">=</span> <span class="org-constant">295.00</span> <span class="org-constant">K</span>
<span class="org-constant">Temperature</span> is <span class="org-keyword">=</span> <span class="org-constant">22.00</span> <span class="org-constant">C</span>

scala&gt; 

scala&gt; sensor.countObservers<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2</span>

scala&gt; sensor.deleteObserver<span class="org-rainbow-delimiters-depth-1">(</span>kelvinObserver<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; sensor.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">23</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Temperature</span> is <span class="org-keyword">=</span> <span class="org-constant">23.00</span> <span class="org-constant">C</span>


scala&gt; sensor.deleteObservers<span class="org-rainbow-delimiters-depth-1">()</span>

scala&gt; sensor.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<p>
References: 
</p>

<ul class="org-ul">
<li><b>Observer and Observable</b> An introduction to the Observer interface
and Observable class using the Model/View/Controller architecture
as a guide. <a href="http://www.javaworld.com/article/2077258/learn-java/observer-and-observable.html">http://www.javaworld.com/article/2077258/learn-java/observer-and-observable.html</a>
</li>
</ul>


<ul class="org-ul">
<li>java.util.Observer Example
<a href="https://examples.javacodegeeks.com/core-java/util/observer/java-util-observer-example/">https://examples.javacodegeeks.com/core-java/util/observer/java-util-observer-example/</a>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-15-3-6" class="outline-5">
<h5 id="sec-1-15-3-6"><span class="section-number-5">1.15.3.6</span> Model View Controller - MVC</h5>
<div class="outline-text-5" id="text-1-15-3-6">
</div><ol class="org-ol"><li><a id="sec-1-15-3-6-1" name="sec-1-15-3-6-1"></a>Overview<br  /><div class="outline-text-6" id="text-1-15-3-6-1">
<p>
The MVC - Model-View-Controller pattern was introduced by Trygve
Reenskaug in a Smalltalk-80 implementation in 1970s to address the
problem of building GUI - Graphical User Interfaces.
</p>

<p>
The MVC has three parts: 
</p>

<ul class="org-ul">
<li><span class="underline">View</span> - The view is everything the user can see and it is
resposible to render the model data. It is built with a hierarchy of
widgets of some GUI toolkit such as Gtk, QT, Java Swing and etc.

<ul class="org-ul">
<li><span class="underline">Manages graphical or textual output.</span>
</li>
</ul>
</li>

<li><span class="underline">Controller</span> - The controller is a middleware between the view and
model. The controller handles the user input or the events
triggered by the view updating the model or the view.

<ul class="org-ul">
<li><span class="underline">Manages user input</span> or GUI events such as button click, mouse move
and etc.  
</li>
</ul>
</li>

<li><span class="underline">Model</span> - The model contains data to be displayed by the view and
the business logic.

<ul class="org-ul">
<li><span class="underline">Manages application logic or domain logic.</span>
</li>

<li>The model must have no knowledge about the view or controller.
</li>

<li>A model can have multiple views diplaying the model in different
ways. Example bar chart, pie chart, table, spreadsheet display
and so on. Each view must have an associated controller.
</li>

<li>When the model is updated, it notifies all views that it has
changed and the views query data from the model updating
itself. The model is suitable to be implemented with observer
pattern. 
</li>

<li>The MVC is supposed to have only one global model.
</li>
</ul>
</li>
</ul>


<div class="figure">
<p><a href="images/mvc-model-view-controller-diagram.png"><img src="images/mvc-model-view-controller-diagram.png" alt="mvc-model-view-controller-diagram.png" /></a>
</p>
</div>

<p>
MVC Variation: 
</p>

<ul class="org-ul">
<li>Controller as mediator or MVP - Model View Presenter. The model
doesn't interact directly with the view. It updates the view
through the controller. This MVC variation is widely used in
Apple's Cocoa framework.
</li>
</ul>


<p>
Benefits: 
</p>

<ul class="org-ul">
<li>Separate the domain model from the presentation.
</li>

<li>The same data can be displayed or rendered in many different
ways. Multiple views for short.
</li>
</ul>

<p>
Drawbacks: 
</p>

<ul class="org-ul">
<li>In a GUI it is hard to separate input from output, consequently it
is hard to separate  the view from the model. What makes them
tightly coupled.
</li>
</ul>


<p>
References and Bookmarks: 
</p>

<ul class="org-ul">
<li><b>MVP: Model-View-Presenter. The Taligent Programming Model for C++
and Java</b> <a href="https://web.archive.org/web/20170620100654/http://www.wildcrest.com/Potel/Portfolio/mvp.pdf">https://web.archive.org/web/20170620100654/http://www.wildcrest.com/Potel/Portfolio/mvp.pdf</a>
</li>

<li><b>A Description of the Model-View-Controller User Interface Paradigm
in the Smalltalk-80 System</b>
<a href="https://web.archive.org/web/20170620095511/http://www.global-webnet.com/Adventures/Files/DescriptionOfMvcUi-KrasnerPope.pdf">https://web.archive.org/web/20170620095511/http://www.global-webnet.com/Adventures/Files/DescriptionOfMvcUi-KrasnerPope.pdf</a>
</li>

<li><b>Java SE Application Design With MVC</b>
   <a href="https://web.archive.org/web/20070309124616/http://java.sun.com/developer/technicalArticles/javase/mvc/">https://web.archive.org/web/20070309124616/http://java.sun.com/developer/technicalArticles/javase/mvc/</a>
</li>

<li><b>ARTICLE TITLE: You’ve got the model-view-controller</b>
   <a href="https://web.archive.org/web/20170620142643/http://cs.txstate.edu/~rp31/papers/Model-View-Controller.PDF">https://web.archive.org/web/20170620142643/http://cs.txstate.edu/~rp31/papers/Model-View-Controller.PDF</a>
</li>

<li><b>Model View Controller</b> <a href="http://wiki.c2.com?ModelViewController">http://wiki.c2.com?ModelViewController</a>
</li>

<li><b>Model-View-Controller paradigm; Observer pattern; Creating
Graphical User Interfaces in Java/Swing</b> -
<a href="https://drive.google.com/viewerng/viewer?url=http://faculty.washington.edu/stepp/courses/2005spring/tcss360/lectures/notes/08-gui_mvc_observer.ppt">https://drive.google.com/viewerng/viewer?url=http://faculty.washington.edu/stepp/courses/2005spring/tcss360/lectures/notes/08-gui_mvc_observer.ppt</a>
</li>

<li><b>Model-View-Controller Pattern</b> -
<a href="http://academic.regis.edu/dbahr/generalpages/softwareengineering/softwareengpart17.pdf">http://academic.regis.edu/dbahr/generalpages/softwareengineering/softwareengpart17.pdf</a>
</li>
</ul>

<p>
Apple's "MVC": 
</p>

<ul class="org-ul">
<li><b>Guides and Samples - Model-View-Controller</b>
   <a href="https://developer.apple.com/library/content/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html">https://developer.apple.com/library/content/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html</a>
</li>
</ul>


<ul class="org-ul">
<li><b>Looking at Model-View-Controller in Cocoa</b>
   <a href="https://www.cocoawithlove.com/blog/mvc-and-cocoa.html">https://www.cocoawithlove.com/blog/mvc-and-cocoa.html</a>
</li>
</ul>

<p>
Sample codes and examples:
</p>

<ul class="org-ul">
<li><b>Model-View-Controller (MVC) Structure</b>
   <a href="https://www.leepoint.net/GUI/structure/40mvc.html">https://www.leepoint.net/GUI/structure/40mvc.html</a>
</li>

<li><b>Lecture 6: Coupling and the MVC software architecture</b>
   <a href="https://web.archive.org/web/20170620171835/http://people.cs.ksu.edu/~schmidt/501s14/Lectures/Lecture06S.html">https://web.archive.org/web/20170620171835/http://people.cs.ksu.edu/~schmidt/501s14/Lectures/Lecture06S.html</a>
</li>

<li><b>Building Games Using the MVC Pattern – Tutorial and Introduction</b>
   <a href="https://www.javacodegeeks.com/2012/02/building-games-using-mvc-pattern.html">https://www.javacodegeeks.com/2012/02/building-games-using-mvc-pattern.html</a>
</li>

<li><b>Sliding Clock Using Java Swing</b> <a href="http://java-articles.info/articles/?p=885">http://java-articles.info/articles/?p=885</a>
</li>
</ul>


<p>
Java Swing: 
</p>

<ul class="org-ul">
<li><b>Java Programming Tutorial. Programming Graphical User Interface
(GUI) - Part 2</b> <a href="https://www3.ntu.edu.sg/home/ehchua/programming/java/J4a_GUI_2.html">https://www3.ntu.edu.sg/home/ehchua/programming/java/J4a_GUI_2.html</a>
</li>
</ul>

<p>
History: 
</p>

<ul class="org-ul">
<li><b>Next Step</b> <a href="http://wiki.c2.com?NextStep">http://wiki.c2.com?NextStep</a>
</li>

<li><b>Open Step</b> <a href="http://wiki.c2.com?OpenStep">http://wiki.c2.com?OpenStep</a>
</li>
</ul>
</div>
</li>

<li><a id="sec-1-15-3-6-2" name="sec-1-15-3-6-2"></a>Example<br  /><div class="outline-text-6" id="text-1-15-3-6-2">
<p>
This example shows a simple GUI application with MVC and Java Swing
toolkit using three views, one console view that prints the model
state and two Java swing GUI views.
</p>

<p>
File: <a href="src/mvcCounter.scala"><a href="src/mvcCounter.scala">src/mvcCounter.scala</a></a>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JPanel</span>, <span class="org-constant">JTextField</span>, <span class="org-constant">JButton</span>, <span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">-----------  Observer Pattern Interfaces ----------- //</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Observer interface </span>
<span class="org-keyword">trait</span> <span class="org-type">Observer</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Subject or Observable interface </span>
<span class="org-keyword">trait</span> <span class="org-type">Observable</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">observers</span><span class="org-keyword">:</span> <span class="org-type">Set</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Observer</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Set</span><span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Subscribe observer to subject updates </span>
  <span class="org-keyword">def</span> <span class="org-function-name">attach</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    observers += obs 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Remove/ unsubscribe observer from subject updates </span>
  <span class="org-keyword">def</span> <span class="org-function-name">detach</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    observers -= obs 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Notify all observers </span>
  <span class="org-keyword">def</span> <span class="org-function-name">notifyObservers</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-3">(</span>obs <span class="org-keyword">&lt;-</span> observers<span class="org-rainbow-delimiters-depth-3">)</span> obs.update<span class="org-rainbow-delimiters-depth-3">()</span> 
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">----------- Helpers to subscribe to events ------------- //</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">Register callback function</span>
<span class="org-comment-delimiter">///</span>
<span class="org-keyword">def</span> <span class="org-function-name">onClick</span><span class="org-rainbow-delimiters-depth-1">(</span>button<span class="org-keyword">:</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  button.addActionListener<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-4">{</span>
        handler<span class="org-rainbow-delimiters-depth-5">()</span>
      <span class="org-rainbow-delimiters-depth-4">}</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">onWindowExit</span><span class="org-rainbow-delimiters-depth-1">(</span>frame<span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  frame.addWindowListener<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">WindowAdapter</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">windowClosing</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">WindowEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-4">{</span>
        handler<span class="org-rainbow-delimiters-depth-5">()</span>
      <span class="org-rainbow-delimiters-depth-4">}</span>
  <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">showFrameSize</span><span class="org-rainbow-delimiters-depth-1">(</span>frame<span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">){</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span>frame.getSize<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">--------------- MVC Counter Demo -------------------- // </span>


<span class="org-keyword">class</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">(</span>init<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Observable</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> init

  <span class="org-keyword">def</span> <span class="org-function-name">getValue</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> counter

  <span class="org-keyword">def</span> <span class="org-function-name">increment</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span>   <span class="org-comment-delimiter">// </span><span class="org-comment">Every time the model state is changed,</span>
                            <span class="org-comment-delimiter">// </span><span class="org-comment">the observers must be notified.</span>

    <span class="org-keyword">this</span>.notifyObservers<span class="org-rainbow-delimiters-depth-3">()</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">the 'this' prefix is optional.</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">decrement</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    counter <span class="org-keyword">=</span> counter - <span class="org-constant">1</span>
    <span class="org-keyword">this</span>.notifyObservers<span class="org-rainbow-delimiters-depth-3">()</span>  
  <span class="org-rainbow-delimiters-depth-2">}</span> 
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">This view doesn't need a controller as this doesn't need an input.</span>
<span class="org-keyword">class</span> <span class="org-type">ConsoleView</span><span class="org-rainbow-delimiters-depth-1">(</span>counter<span class="org-keyword">:</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">{</span>
  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Register observer (this class)</span>
    counter.attach<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">updates the view </span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Counter value is = "</span> + counter.getValue<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">GuiView1</span><span class="org-rainbow-delimiters-depth-1">(</span>counter<span class="org-keyword">:</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">frame</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Counter MVC App"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">panel</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JPanel</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.awt.<span class="org-constant">FlowLayout</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">label</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JLabel</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Counter"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">display</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JTextField</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btnInc</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Increment"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btnDec</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Decrement"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btnExit</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Register observer (this class)</span>
    counter.attach<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span><span class="org-rainbow-delimiters-depth-3">)</span>

    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>label<span class="org-rainbow-delimiters-depth-3">)</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>display<span class="org-rainbow-delimiters-depth-3">)</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>btnInc<span class="org-rainbow-delimiters-depth-3">)</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>btnDec<span class="org-rainbow-delimiters-depth-3">)</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>btnExit<span class="org-rainbow-delimiters-depth-3">)</span>

    display.setEditable<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-3">)</span>
    frame.add<span class="org-rainbow-delimiters-depth-3">(</span>panel<span class="org-rainbow-delimiters-depth-3">)</span>
    frame.setSize<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">600</span>, <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-3">)</span>
    frame.show<span class="org-rainbow-delimiters-depth-3">()</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Exit application if user closes window.</span>
    frame.setDefaultCloseOperation<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">JFrame</span>.<span class="org-constant">EXIT_ON_CLOSE</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-keyword">this</span>.update<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">updates the view </span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    display.setText<span class="org-rainbow-delimiters-depth-3">(</span>counter.getValue<span class="org-rainbow-delimiters-depth-4">()</span>.toString<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onIncrement</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    onClick<span class="org-rainbow-delimiters-depth-3">(</span>btnInc<span class="org-rainbow-delimiters-depth-3">)(</span>handler<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onDecrement</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    onClick<span class="org-rainbow-delimiters-depth-3">(</span>btnDec<span class="org-rainbow-delimiters-depth-3">)(</span>handler<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onExit</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    onClick<span class="org-rainbow-delimiters-depth-3">(</span>btnExit<span class="org-rainbow-delimiters-depth-3">)(</span>handler<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    frame.show<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">GuiView1Controller</span><span class="org-rainbow-delimiters-depth-1">(</span>viewp<span class="org-keyword">:</span> <span class="org-type">GuiView1</span>, modelp<span class="org-keyword">:</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">view</span>  <span class="org-keyword">=</span> viewp
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">model</span> <span class="org-keyword">=</span> modelp
  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">---&gt; Model Manipulation </span>
    view.onIncrement<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>.increment<span class="org-rainbow-delimiters-depth-3">)</span>
    view.onDecrement<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>.decrement<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">---&gt; GUI manipulation </span>
    view.onExit<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">System</span>.exit<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">increment</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    model.increment<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">decrement</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    model.decrement<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">View without input that only displays the model.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">This view doesn't need a controller as it doesn't</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">have any user input.</span>
<span class="org-comment-delimiter">//</span>
<span class="org-keyword">class</span> <span class="org-type">GuiView2</span><span class="org-rainbow-delimiters-depth-1">(</span>counter<span class="org-keyword">:</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">frame</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Counter App - Display only view"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">panel</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JPanel</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">display</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JLabel</span><span class="org-rainbow-delimiters-depth-2">()</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    counter.attach<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span><span class="org-rainbow-delimiters-depth-3">)</span>

    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>display<span class="org-rainbow-delimiters-depth-3">)</span>
    frame.setSize<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">354</span>, <span class="org-constant">54</span><span class="org-rainbow-delimiters-depth-3">)</span>
    frame.add<span class="org-rainbow-delimiters-depth-3">(</span>panel<span class="org-rainbow-delimiters-depth-3">)</span>
    frame.setDefaultCloseOperation<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">JFrame</span>.<span class="org-constant">EXIT_ON_CLOSE</span><span class="org-rainbow-delimiters-depth-3">)</span>
    frame.show<span class="org-rainbow-delimiters-depth-3">()</span>
    update<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Method required by Observer interface </span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    display.setText<span class="org-rainbow-delimiters-depth-3">(</span>counter.getValue<span class="org-rainbow-delimiters-depth-4">()</span>.toString<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">showFrameSize(frame)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">val</span> <span class="org-variable-name">counterModel</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">consoleView</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ConsoleView</span><span class="org-rainbow-delimiters-depth-1">(</span>counterModel<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">guiView1</span>           <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">GuiView1</span><span class="org-rainbow-delimiters-depth-1">(</span>counterModel<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">guiView1Controller</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">GuiView1Controller</span><span class="org-rainbow-delimiters-depth-1">(</span>guiView1, counterModel<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">guiView2</span>           <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">GuiView2</span><span class="org-rainbow-delimiters-depth-1">(</span>counterModel<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">

<pre class="src src-text">$ scala mvcCounter.scala 
warning: there were three deprecation warnings; re-run with -deprecation for details
one warning found
Counter value is = 1
Counter value is = 2
Counter value is = 3
Counter value is = 4
... ...
</pre>
</div>


<div class="figure">
<p><a href="images/counterMvcExample.png"><img src="images/counterMvcExample.png" alt="counterMvcExample.png" /></a>
</p>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-15-3-7" class="outline-5">
<h5 id="sec-1-15-3-7"><span class="section-number-5">1.15.3.7</span> Model View Presenter with Passive View - MVP</h5>
<div class="outline-text-5" id="text-1-15-3-7">
</div><ol class="org-ol"><li><a id="sec-1-15-3-7-1" name="sec-1-15-3-7-1"></a>Overview<br  /><div class="outline-text-6" id="text-1-15-3-7-1">
<p>
The MVP - Model-View-Presenter is variation of MVC
Model-View-Controller which the model doesn't communicate directly
with the view and it is made passive. This pattern is often designated
as MVC.
</p>

<div class="org-src-container">

<pre class="src src-text">         View event triggered
         by user.

         +.....-&gt;&gt;&gt;-.......+            +........&lt;&lt;&lt;&lt;..........+
        /  (User action)    \          /   Model notification   \ 
       /                     \        /    event                 \   
    View                     Presenter                          Model
      \                      /       \                           /
       \   View update      /         \     Model update        /
        +----&lt;&lt;&lt;-----------/           +---&gt;&gt;&gt;------&gt;&gt;&gt;--------+

Legend: 

 ...... - Event or notification
 ------ - Method call or action.
</pre>
</div>


<ul class="org-ul">
<li><span class="underline">Model</span>

<ul class="org-ul">
<li>The model is responsible for the business logic or domain logic
and application state.
</li>

<li>As in the MVC, the model must have no knowledge about the view or
presenter.
</li>

<li>Unlike the MVC, the model must not communicate directly with the
view, instead it must notify the presenter that it has
changed. It can be done using the observer pattern with the model
playing the role of observable or observer and the presenter
acting as observer.
</li>
</ul>
</li>

<li><span class="underline">View</span>

<ul class="org-ul">
<li>The view role is display the model.
</li>

<li>Passive view:

<ul class="org-ul">
<li>The view must not have any knowledge about the model and not
access it directly.
</li>

<li>The view doesn't update itself from the model. It is updated by
the presenter.
</li>

<li>The view delegates use input events to the presenter.
</li>
</ul>
</li>
</ul>
</li>

<li><span class="underline">Presenter</span>

<ul class="org-ul">
<li>The presenter role is to handle the presentation logic and
mediate the communication between the model and view updating the
view with the model data and also handling view events and model
notifications. 
</li>

<li>Presenter - View communication:

<ul class="org-ul">
<li>The presenter handles events received from the view
and manipulates the view or the model.
</li>
</ul>
</li>

<li>Presenter - Model communication:

<ul class="org-ul">
<li>The presenter receives notifications from the model and updates
the view with model data in suitable format to the view. 
</li>
</ul>
</li>
</ul>
</li>
</ul>


<p>
References and Bookmarks: 
</p>

<ul class="org-ul">
<li>Martin Fowler. <b>Pasive View</b> <a href="https://martinfowler.com/eaaDev/PassiveScreen.html">https://martinfowler.com/eaaDev/PassiveScreen.html</a>
</li>

<li>Andy Bower and Blair McGlashan. <b>The evolution of the Dolphin
Smalltalk MVP application framework.</b>
<a href="https://web.archive.org/web/20170622165759/http://www.object-arts.com/downloads/papers/TwistingTheTriad.PDF">https://web.archive.org/web/20170622165759/http://www.object-arts.com/downloads/papers/TwistingTheTriad.PDF</a>
</li>

<li><b>Tutorial 5: MVC Patterns</b>
<a href="http://griffon-framework.org/tutorials/5_mvc_patterns.html">http://griffon-framework.org/tutorials/5_mvc_patterns.html</a> or
<a href="https://web.archive.org/web/20170622172050/http://griffon-framework.org/tutorials/5_mvc_patterns.html">https://web.archive.org/web/20170622172050/http://griffon-framework.org/tutorials/5_mvc_patterns.html</a>
</li>

<li>Yang Zhang and Yanjing Luo <b>An Architecture and Implement Model for
Model-View-Presenter Pattern</b>
<a href="https://web.archive.org/web/20170622174219/http://www.meeting.edu.cn/meeting/UploadPapers/1282707447171.pdf">https://web.archive.org/web/20170622174219/http://www.meeting.edu.cn/meeting/UploadPapers/1282707447171.pdf</a>
</li>

<li><b>Model-View-Presenter: Looking at Passive View</b> <a href="http://blogs.lessthandot.com/index.php/architect/designingsoftware/model-view-presenter-looking-at-passive/">http://blogs.lessthandot.com/index.php/architect/designingsoftware/model-view-presenter-looking-at-passive/</a>
</li>

<li>Aviad Ezra. <b>Twisting the MVC Triad - Model View Presenter (MVP)
Design Pattern</b>
<a href="http://aviadezra.blogspot.com.br/2007/07/twisting-mvp-triad-say-hello-to-mvpc.html">http://aviadezra.blogspot.com.br/2007/07/twisting-mvp-triad-say-hello-to-mvpc.html</a>
or <a href="https://web.archive.org/web/20170622180300/http://aviadezra.blogspot.com.br/2007/07/twisting-mvp-triad-say-hello-to-mvpc.html">https://web.archive.org/web/20170622180300/http://aviadezra.blogspot.com.br/2007/07/twisting-mvp-triad-say-hello-to-mvpc.html</a>
</li>

<li>Apple Inc. <b>Concepts in Objective-C Programming - Model-View-Controller</b>
   <a href="https://web.archive.org/web/20170622181821/https://developer.apple.com/library/content/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html">https://web.archive.org/web/20170622181821/https://developer.apple.com/library/content/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html</a>
</li>

<li><b>Model-View-Controller rationale, implementation, abstract model
widgets</b> <a href="https://web.archive.org/web/20170622183803/https://www.student.cs.uwaterloo.ca/~cs349/s14/files/04.mvc.3up.pdf">https://web.archive.org/web/20170622183803/https://www.student.cs.uwaterloo.ca/~cs349/s14/files/04.mvc.3up.pdf</a>
</li>
</ul>
</div>
</li>
<li><a id="sec-1-15-3-7-2" name="sec-1-15-3-7-2"></a>Example<br  /><div class="outline-text-6" id="text-1-15-3-7-2">
<p>
This example is similar to the MVC counter example.
</p>

<p>
File: <a href="src/mvpCounter.scala"><a href="src/mvpCounter.scala">src/mvpCounter.scala</a></a> 
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JPanel</span>, <span class="org-constant">JTextField</span>, <span class="org-constant">JButton</span>, <span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">-----------  Observer Pattern Interfaces ----------- //</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Observer interface </span>
<span class="org-keyword">trait</span> <span class="org-type">Observer</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-keyword">:</span> <span class="org-type">Unit</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Subject or Observable interface </span>
<span class="org-keyword">trait</span> <span class="org-type">Observable</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">observers</span><span class="org-keyword">:</span> <span class="org-type">Set</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Observer</span><span class="org-rainbow-delimiters-depth-2">]</span> <span class="org-keyword">=</span> <span class="org-constant">Set</span><span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Subscribe observer to subject updates </span>
  <span class="org-keyword">def</span> <span class="org-function-name">attach</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    observers += obs 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Remove/ unsubscribe observer from subject updates </span>
  <span class="org-keyword">def</span> <span class="org-function-name">detach</span><span class="org-rainbow-delimiters-depth-2">(</span>obs<span class="org-keyword">:</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    observers -= obs 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Notify all observers </span>
  <span class="org-keyword">def</span> <span class="org-function-name">notifyObservers</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-3">(</span>obs <span class="org-keyword">&lt;-</span> observers<span class="org-rainbow-delimiters-depth-3">)</span> obs.update<span class="org-rainbow-delimiters-depth-3">()</span> 
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">----------- Helpers to subscribe to events ------------- //</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">Register callback function</span>
<span class="org-comment-delimiter">///</span>
<span class="org-keyword">def</span> <span class="org-function-name">onClick</span><span class="org-rainbow-delimiters-depth-1">(</span>button<span class="org-keyword">:</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  button.addActionListener<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-4">{</span>
        handler<span class="org-rainbow-delimiters-depth-5">()</span>
      <span class="org-rainbow-delimiters-depth-4">}</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">onWindowExit</span><span class="org-rainbow-delimiters-depth-1">(</span>frame<span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  frame.addWindowListener<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">WindowAdapter</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">windowClosing</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">WindowEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-4">{</span>
        handler<span class="org-rainbow-delimiters-depth-5">()</span>
      <span class="org-rainbow-delimiters-depth-4">}</span>
  <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">--------------- MVP Counter Demo -------------------- //</span>



<span class="org-keyword">class</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">(</span>init<span class="org-keyword">:</span> <span class="org-type">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Observable</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">counter</span> <span class="org-keyword">=</span> init

  <span class="org-keyword">def</span> <span class="org-function-name">getValue</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> counter

  <span class="org-keyword">def</span> <span class="org-function-name">increment</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    counter <span class="org-keyword">=</span> counter + <span class="org-constant">1</span>   <span class="org-comment-delimiter">// </span><span class="org-comment">Every time the model state is changed,</span>
                            <span class="org-comment-delimiter">// </span><span class="org-comment">the observers must be notified.</span>

    <span class="org-keyword">this</span>.notifyObservers<span class="org-rainbow-delimiters-depth-3">()</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">the 'this' prefix is optional.</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">decrement</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    counter <span class="org-keyword">=</span> counter - <span class="org-constant">1</span>
    <span class="org-keyword">this</span>.notifyObservers<span class="org-rainbow-delimiters-depth-3">()</span>  
  <span class="org-rainbow-delimiters-depth-2">}</span> 
<span class="org-rainbow-delimiters-depth-1">}</span>



<span class="org-keyword">class</span> <span class="org-type">CounterView</span> <span class="org-keyword">extends</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">frame</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Counter MVC App"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">panel</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JPanel</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.awt.<span class="org-constant">FlowLayout</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">label</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JLabel</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Counter"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">display</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JTextField</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btnInc</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Increment"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btnDec</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Decrement"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">btnExit</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>label<span class="org-rainbow-delimiters-depth-3">)</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>display<span class="org-rainbow-delimiters-depth-3">)</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>btnInc<span class="org-rainbow-delimiters-depth-3">)</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>btnDec<span class="org-rainbow-delimiters-depth-3">)</span>
    panel.add<span class="org-rainbow-delimiters-depth-3">(</span>btnExit<span class="org-rainbow-delimiters-depth-3">)</span>

    display.setEditable<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-3">)</span>
    frame.add<span class="org-rainbow-delimiters-depth-3">(</span>panel<span class="org-rainbow-delimiters-depth-3">)</span>
    frame.setSize<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">600</span>, <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Exit application if user closes window.</span>
    frame.setDefaultCloseOperation<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">JFrame</span>.<span class="org-constant">EXIT_ON_CLOSE</span><span class="org-rainbow-delimiters-depth-3">)</span>   
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">updates the view </span>
  <span class="org-keyword">def</span> <span class="org-function-name">setDisplay</span><span class="org-rainbow-delimiters-depth-2">(</span>value<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    display.setText<span class="org-rainbow-delimiters-depth-3">(</span>value<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onIncrement</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    onClick<span class="org-rainbow-delimiters-depth-3">(</span>btnInc<span class="org-rainbow-delimiters-depth-3">)(</span>handler<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onDecrement</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    onClick<span class="org-rainbow-delimiters-depth-3">(</span>btnDec<span class="org-rainbow-delimiters-depth-3">)(</span>handler<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">onExit</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    onClick<span class="org-rainbow-delimiters-depth-3">(</span>btnExit<span class="org-rainbow-delimiters-depth-3">)(</span>handler<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    frame.show<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>



<span class="org-keyword">class</span> <span class="org-type">CounterPresenter</span><span class="org-rainbow-delimiters-depth-1">(</span>model<span class="org-keyword">:</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">extends</span> <span class="org-type">Observer</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">view</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">CounterView</span><span class="org-rainbow-delimiters-depth-2">()</span>

  init<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">init</span><span class="org-rainbow-delimiters-depth-2">(){</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Subscribe presenter to model updates </span>
    model.attach<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">---&gt; Model Manipulation </span>
    view.onIncrement<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>.increment<span class="org-rainbow-delimiters-depth-3">)</span>
    view.onDecrement<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>.decrement<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">---&gt; GUI manipulation </span>
    view.onExit<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">System</span>.exit<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Initial model display</span>
    <span class="org-keyword">this</span>.update<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">increment</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    model.increment<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">decrement</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    model.decrement<span class="org-rainbow-delimiters-depth-3">()</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Method required by Observer interface. It updates the view</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">when the model notifies the presenter that its state has</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">changed.</span>
  <span class="org-keyword">def</span> <span class="org-function-name">update</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    view.setDisplay<span class="org-rainbow-delimiters-depth-3">(</span>model.getValue<span class="org-rainbow-delimiters-depth-4">()</span>.toString<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span> view.show<span class="org-rainbow-delimiters-depth-2">()</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">val</span> <span class="org-variable-name">counterModel</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">CounterModel</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">presenter</span>    <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">CounterPresenter</span><span class="org-rainbow-delimiters-depth-1">(</span>counterModel<span class="org-rainbow-delimiters-depth-1">)</span>
presenter.show<span class="org-rainbow-delimiters-depth-1">()</span>
</pre>
</div>
</div>
</li></ol>
</div>
</div>
</div>
<div id="outline-container-sec-1-16" class="outline-3">
<h3 id="sec-1-16"><span class="section-number-3">1.16</span> Scala Implicit</h3>
<div class="outline-text-3" id="text-1-16">
</div><div id="outline-container-sec-1-16-1" class="outline-4">
<h4 id="sec-1-16-1"><span class="section-number-4">1.16.1</span> Use Cases</h4>
<div class="outline-text-4" id="text-1-16-1">
<p>
Use Cases: 
</p>

<ul class="org-ul">
<li>Implict type conversion. 
</li>

<li>Implicit conversions of Functions to Single-Method Interfaces
</li>

<li>Class Extension
</li>

<li>Type Classes
</li>
</ul>
</div>
</div>


<div id="outline-container-sec-1-16-2" class="outline-4">
<h4 id="sec-1-16-2"><span class="section-number-4">1.16.2</span> Implicit type conversion</h4>
<div class="outline-text-4" id="text-1-16-2">
</div><div id="outline-container-sec-1-16-2-1" class="outline-5">
<h5 id="sec-1-16-2-1"><span class="section-number-5">1.16.2.1</span> Overview</h5>
<div class="outline-text-5" id="text-1-16-2-1">
<p>
Allows the compiler to implict convert a type A to another B where the
type B is needed and a type A is supplied. Example: convert a integer
3 values tuple to Date object wherever is necessary a data object.
</p>
</div>
</div>

<div id="outline-container-sec-1-16-2-2" class="outline-5">
<h5 id="sec-1-16-2-2"><span class="section-number-5">1.16.2.2</span> Converting Tuple to LocalDate</h5>
<div class="outline-text-5" id="text-1-16-2-2">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">DateTuple</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">import</span> java.time.<span class="org-constant">LocalDate</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">def</span> <span class="org-function-name">tupleToDate</span><span class="org-rainbow-delimiters-depth-2">(</span>tpl<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">val</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">y</span>, <span class="org-variable-name">m</span>, <span class="org-variable-name">d</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> tpl
    <span class="org-constant">LocalDate</span>.of<span class="org-rainbow-delimiters-depth-3">(</span>y, m, d<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">---------- Before importing DateTuple object / module ---------- //</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">Java 8 Date API </span>
scala&gt; java.time.<span class="org-constant">LocalDate</span>.of<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res83</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span> <span class="org-keyword">=</span> <span class="org-constant">2010-10-01</span>


scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">12</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> <span class="org-keyword">type</span> mismatch;
 found   <span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span>
 required<span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span>
       ^

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>.getYear<span class="org-rainbow-delimiters-depth-1">()</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">12</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> value getYear is not a member of <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>.getYear<span class="org-rainbow-delimiters-depth-1">()</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">---------- After importing DateTuple object -----------------------//</span>

scala&gt; <span class="org-keyword">import</span> <span class="org-constant">DateTuple</span>.<span class="org-keyword">_</span>
<span class="org-keyword">import</span> <span class="org-constant">DateTuple</span>.<span class="org-keyword">_</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>,<span class="org-constant">10</span>,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Compiler converts triple tuple to local date </span>
scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span>
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span> <span class="org-keyword">=</span> <span class="org-constant">2010-10-01</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Compiler converts triple tuple to local date and invokes the method getYear.</span>
scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>.getYear
<span class="org-function-name">res10</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2010</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>.getMonth
<span class="org-function-name">res11</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">Month</span> <span class="org-keyword">=</span> <span class="org-constant">OCTOBER</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>.getDayOfMonth
<span class="org-function-name">res12</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">1</span>

scala&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>.getDayOfYear
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">274</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2010</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">1998</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2002</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> map <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.getYear<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2010</span>, <span class="org-constant">1998</span>, <span class="org-constant">2002</span><span class="org-rainbow-delimiters-depth-1">)</span>



scala&gt; <span class="org-keyword">import</span> java.time.<span class="org-constant">LocalDate</span> 
<span class="org-keyword">import</span> java.time.<span class="org-constant">LocalDate</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">d1</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2001</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-keyword">:</span> <span class="org-type">LocalDate</span>
<span class="org-function-name">d1</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span> <span class="org-keyword">=</span> <span class="org-constant">2001-10-01</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">d2</span> <span class="org-keyword">:</span> <span class="org-type">LocalDate</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2001</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">d2</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span> <span class="org-keyword">=</span> <span class="org-constant">2001-10-01</span>

scala&gt; d1.getYear<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2001</span>

scala&gt; d2.getYear<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">2001</span>

scala&gt; d1 == d2
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>


cala&gt; <span class="org-keyword">def</span> <span class="org-function-name">addDays</span><span class="org-rainbow-delimiters-depth-1">(</span>ndays<span class="org-keyword">:</span> <span class="org-type">Int</span>, d<span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> d.plusDays<span class="org-rainbow-delimiters-depth-1">(</span>ndays<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">addDays</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>ndays<span class="org-keyword">:</span> <span class="org-type">Int</span>, d<span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span><span class="org-rainbow-delimiters-depth-1">)</span>java.time.<span class="org-constant">LocalDate</span>

scala&gt; addDays<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, java.time.<span class="org-constant">LocalDate</span>.of<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2001</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res19</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span> <span class="org-keyword">=</span> <span class="org-constant">2001-10-11</span>

scala&gt; addDays<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2001</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res20</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span> <span class="org-keyword">=</span> <span class="org-constant">2001-10-11</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">t</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2001</span>, <span class="org-constant">10</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">t</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Int</span>, <span class="org-constant">Int</span>, <span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2001</span>,<span class="org-constant">10</span>,<span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; addDays<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span>, t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">java</span>.time.<span class="org-constant">LocalDate</span> <span class="org-keyword">=</span> <span class="org-constant">2001-10-11</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-16-3" class="outline-4">
<h4 id="sec-1-16-3"><span class="section-number-4">1.16.3</span> Implicit conversions of Functions to Single-Method Interfaces</h4>
<div class="outline-text-4" id="text-1-16-3">
</div><div id="outline-container-sec-1-16-3-1" class="outline-5">
<h5 id="sec-1-16-3-1"><span class="section-number-5">1.16.3.1</span> Overview</h5>
<div class="outline-text-5" id="text-1-16-3-1">
<p>
Java has many single method-interfaces such as ActionListener,
Runnable, Callable and etc which require a verbose instantiation of
anonymous classes of those interfaces.
</p>

<p>
Scala implicit type conversion can make the code shorter by
eliminating the need for instatiation of single-method interface
through implicit converting a function to an anonymous class which
implementing this single-method interface. For instance, it allows a
function be passed as an argument to a method that requires an
ActionListener or a Runnable interface.
</p>


<p>
As can be seen in the codes below all single-methods interfaces could
be replaced by functions. 
</p>

<p>
Runnable Interface: 
</p>

<div class="org-src-container">

<pre class="src src-java"><span class="org-keyword">interface</span> <span class="org-type">Runnable</span><span class="org-rainbow-delimiters-depth-1">{</span> 
    <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
ActionListener
</p>

<div class="org-src-container">

<pre class="src src-java"><span class="org-keyword">interface</span> <span class="org-type">ActionListener</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">ActionEvent</span> <span class="org-variable-name">e</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>



<div id="outline-container-sec-1-16-3-2" class="outline-5">
<h5 id="sec-1-16-3-2"><span class="section-number-5">1.16.3.2</span> Converting Functions to Java Swing Event Listener</h5>
<div class="outline-text-5" id="text-1-16-3-2">
<p>
In the code below, the object (module) FunctionToListener provides
functions that converts click event handler functions to
ActionListener required by the JButton method addActionListener.
</p>


<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">FunctionToListener</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">import</span> java.awt.event.<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-constant">ActionEvent</span>, <span class="org-constant">ActionListener</span><span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">def</span> <span class="org-function-name">funToActionListener1</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-type">ActionEvent</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">new</span> <span class="org-type">ActionListener</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">ActionEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> handler<span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">def</span> <span class="org-function-name">funToActionListener2</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">new</span> <span class="org-type">ActionListener</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">ActionEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> handler<span class="org-rainbow-delimiters-depth-4">()</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">def</span> <span class="org-function-name">funToActionListener3</span><span class="org-rainbow-delimiters-depth-2">(</span>handler<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">new</span> <span class="org-type">ActionListener</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">ActionEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> handler
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">//</span><span class="org-comment">------- End of object FunctionToListener ------- //</span>


<span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JButton</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">import</span> java.awt.event.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">ActionEvent</span>, <span class="org-constant">ActionListener</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">val</span> <span class="org-variable-name">btn</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Click me"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">400</span>, <span class="org-constant">500</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setLayout<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.awt.<span class="org-constant">FlowLayout</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.add<span class="org-rainbow-delimiters-depth-1">(</span>btn<span class="org-rainbow-delimiters-depth-1">)</span>
frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- Before importing FunctionToListener  --------- //</span>


scala&gt; btn.addActionListener <span class="org-keyword">_</span> 
<span class="org-function-name">res6</span><span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1404/<span class="org-constant">1838333871</span><span class="org-preprocessor">@a23b96b</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Error!</span>
scala&gt; btn.addActionListener<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I was clicked"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">14</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> <span class="org-keyword">type</span> mismatch;
 found   <span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>
 required<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span>
       btn.addActionListener<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I was clicked"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Error! </span>
scala&gt;  btn.addActionListener<span class="org-rainbow-delimiters-depth-1">{</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I was clicked"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">15</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> <span class="org-keyword">type</span> mismatch;
 found   <span class="org-keyword">:</span> <span class="org-type">Unit</span>
 required<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span>
        btn.addActionListener<span class="org-rainbow-delimiters-depth-1">{</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I was clicked"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">-------- After importing FunctionToListener  --------- //</span>

<span class="org-keyword">import</span> <span class="org-constant">FunctionToListener</span>.<span class="org-keyword">_</span>

btn.addActionListener<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Handler1: I was clicked"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

btn.addActionListener<span class="org-rainbow-delimiters-depth-1">{</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Handler2: I was clicked"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

btn.addActionListener<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-rainbow-delimiters-depth-2">(</span>evt<span class="org-keyword">:</span> <span class="org-type">ActionEvent</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span>
  println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Handler3: I was clicked "</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">User clicks at the button ...</span>
scala&gt; <span class="org-constant">Handler3</span><span class="org-keyword">:</span> <span class="org-type">I</span> was clicked 
<span class="org-function-name">Handler2</span><span class="org-keyword">:</span> <span class="org-type">I</span> was clicked
<span class="org-function-name">Handler1</span><span class="org-keyword">:</span> <span class="org-type">I</span> was clicked
<span class="org-function-name">Handler3</span><span class="org-keyword">:</span> <span class="org-type">I</span> was clicked 
<span class="org-function-name">Handler2</span><span class="org-keyword">:</span> <span class="org-type">I</span> was clicked
<span class="org-function-name">Handler1</span><span class="org-keyword">:</span> <span class="org-type">I</span> was clicked
<span class="org-function-name">Handler3</span><span class="org-keyword">:</span> <span class="org-type">I</span> was clicked 
<span class="org-function-name">Handler2</span><span class="org-keyword">:</span> <span class="org-type">I</span> was clicked
  ... ... ... ...


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">hnd</span><span class="org-keyword">:</span> <span class="org-type">ActionListener</span> <span class="org-keyword">=</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello Java"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">hnd</span><span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span> <span class="org-keyword">=</span> <span class="org-constant">FunctionToListener</span>$$anon$3<span class="org-keyword">@</span><span class="org-constant">28d</span>d03<span class="org-constant">8</span>f

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">hnd2</span><span class="org-keyword">:</span> <span class="org-type">ActionListener</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello Java"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">hnd2</span><span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span> <span class="org-keyword">=</span> <span class="org-constant">FunctionToListener</span>$$anon$2<span class="org-keyword">@</span><span class="org-constant">4</span>ca6f587
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-16-3-3" class="outline-5">
<h5 id="sec-1-16-3-3"><span class="section-number-5">1.16.3.3</span> Converting code block to Runnable</h5>
<div class="outline-text-5" id="text-1-16-3-3">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">BlockToRunnable</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-doc">/** Converts a code block to a Runnable instance */</span>
  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">def</span> <span class="org-function-name">funToRunnable</span><span class="org-rainbow-delimiters-depth-2">(</span>action<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">new</span> <span class="org-type">Runnable</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-keyword">=</span> action
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">--------- Before Import the Helper object -------------- //</span>
<span class="org-comment-delimiter">//</span>

<span class="org-keyword">val</span> <span class="org-variable-name">th</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Thread</span><span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">){</span>
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"I will run every 1 second"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-constant">Thread</span>.sleep<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">th</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Thread</span><span class="org-rainbow-delimiters-depth-1">(</span>
     |   <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">){</span>
     |     println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"I will run every 1 second"</span><span class="org-rainbow-delimiters-depth-3">)</span>
     |     <span class="org-constant">Thread</span>.sleep<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-3">)</span>
     | <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
&lt;console<span class="org-keyword">&gt;:</span><span class="org-constant">11</span><span class="org-keyword">:</span> <span class="org-type">error</span><span class="org-keyword">:</span> overloaded method constructor <span class="org-constant">Thread</span> <span class="org-keyword">with</span> <span class="org-type">alternatives</span><span class="org-keyword">:</span>
  <span class="org-rainbow-delimiters-depth-1">(</span>x$1<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Thread</span> &lt;and&gt;
  <span class="org-rainbow-delimiters-depth-1">(</span>x$1<span class="org-keyword">:</span> <span class="org-type">Runnable</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Thread</span>
 cannot be applied to <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-keyword">val</span> <span class="org-variable-name">th</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Thread</span><span class="org-rainbow-delimiters-depth-1">(</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">--------- After Import the Helper object -------------- //</span>
<span class="org-comment-delimiter">//</span>

scala&gt; <span class="org-keyword">import</span> <span class="org-constant">BlockToRunnable</span>.<span class="org-keyword">_</span>
<span class="org-keyword">import</span> <span class="org-constant">BlockToRunnable</span>.<span class="org-keyword">_</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Now it works!!         </span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">th</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Thread</span><span class="org-rainbow-delimiters-depth-2">(</span>
     |   <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-3">){</span>
     |     println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"I will run every 1 second"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     |     <span class="org-constant">Thread</span>.sleep<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-4">)</span>
     | <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">th</span><span class="org-keyword">:</span> <span class="org-type">Thread</span> <span class="org-keyword">=</span> <span class="org-constant">Thread</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">Thread</span>-4,<span class="org-constant">5</span>,main<span class="org-rainbow-delimiters-depth-2">]</span>


scala&gt; th.start<span class="org-rainbow-delimiters-depth-2">()</span>

scala&gt; <span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
  ... ... ... ...


<span class="org-comment-delimiter">// </span><span class="org-comment">A code block can be cast to runnable                  </span>
<span class="org-keyword">val</span> <span class="org-variable-name">block</span> <span class="org-keyword">:</span> <span class="org-type">Runnable</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-2">{</span>
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-3">){</span>
    println<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"I will run every 1 second"</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-constant">Thread</span>.sleep<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">1000</span><span class="org-rainbow-delimiters-depth-4">)</span>
  <span class="org-rainbow-delimiters-depth-3">}</span>
<span class="org-rainbow-delimiters-depth-2">}</span>

scala&gt; block.run <span class="org-keyword">_</span>
<span class="org-function-name">res0</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-keyword">=</span> $$Lambda$1311/<span class="org-constant">1798538641</span><span class="org-keyword">@</span><span class="org-constant">277474f</span>c

scala&gt; block.run<span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
<span class="org-constant">I</span> will run every <span class="org-constant">1</span> second
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-16-4" class="outline-4">
<h4 id="sec-1-16-4"><span class="section-number-4">1.16.4</span> Class Extension</h4>
<div class="outline-text-4" id="text-1-16-4">
</div><div id="outline-container-sec-1-16-4-1" class="outline-5">
<h5 id="sec-1-16-4-1"><span class="section-number-5">1.16.4.1</span> Overview</h5>
<div class="outline-text-5" id="text-1-16-4-1">
<p>
It is useful to add new functionality to code defined in libraries and
sources that cannot be modified in a type-safe way.
</p>
</div>
</div>

<div id="outline-container-sec-1-16-4-2" class="outline-5">
<h5 id="sec-1-16-4-2"><span class="section-number-5">1.16.4.2</span> String class extension to parse Dates</h5>
<div class="outline-text-5" id="text-1-16-4-2">
<p>
The String class extension, DateStr defines the methods toDate,
toDateMDY and toDateMDY that can parse date strings.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">DateParsers</span> <span class="org-rainbow-delimiters-depth-1">{</span> 

  <span class="org-comment-delimiter">// </span><span class="org-comment">International - ISO 8601 standard Date Format</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">dateFormatYMD</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.text.<span class="org-constant">SimpleDateFormat</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"yyyy-mm-dd"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">American Date Format </span>
  <span class="org-keyword">val</span> <span class="org-variable-name">dateFormatMDY</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.text.<span class="org-constant">SimpleDateFormat</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"mm-dd-yyyy"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">dateFormatDMY</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.text.<span class="org-constant">SimpleDateFormat</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dd-mm-yyyy"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">class</span> <span class="org-type">DateStr</span><span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-keyword">def</span> <span class="org-function-name">toDate</span><span class="org-rainbow-delimiters-depth-3">()</span>    <span class="org-keyword">=</span> dateFormatYMD.parse<span class="org-rainbow-delimiters-depth-3">(</span>s<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">def</span> <span class="org-function-name">toDateMDY</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=</span> dateFormatMDY.parse<span class="org-rainbow-delimiters-depth-3">(</span>s<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-keyword">def</span> <span class="org-function-name">toDateDMY</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=</span> dateFormatDMY.parse<span class="org-rainbow-delimiters-depth-3">(</span>s<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>


scala&gt; <span class="org-keyword">import</span> <span class="org-constant">DateParsers</span>.<span class="org-keyword">_</span>
<span class="org-keyword">import</span> <span class="org-constant">DateParsers</span>.<span class="org-keyword">_</span>


scala&gt; <span class="org-string">"2015-10-01"</span>.toDate
<span class="org-function-name">res58</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Date</span> <span class="org-keyword">=</span> <span class="org-constant">Thu</span> <span class="org-constant">Jan</span> <span class="org-constant">01</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">10</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">2015</span>

scala&gt; <span class="org-string">"10-01-2015"</span>.toDateMDY
<span class="org-function-name">res61</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Date</span> <span class="org-keyword">=</span> <span class="org-constant">Thu</span> <span class="org-constant">Jan</span> <span class="org-constant">01</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">10</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">2015</span>

scala&gt; <span class="org-string">"2015-10-01"</span>.toDate == <span class="org-string">"10-01-2015"</span>.toDateMDY
<span class="org-function-name">res62</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; <span class="org-string">"01-10-2015"</span>.toDateDMY == <span class="org-string">"10-01-2015"</span>.toDateMDY
<span class="org-function-name">res63</span><span class="org-keyword">:</span> <span class="org-type">Boolean</span> <span class="org-keyword">=</span> <span class="org-constant">true</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"01-01-1970"</span>, <span class="org-string">"02-03-2001"</span>, <span class="org-string">"10-10-2002"</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.toDate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res66</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span>java.util.<span class="org-constant">Date</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Mon</span> <span class="org-constant">May</span> <span class="org-constant">24</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">01</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">6</span>, <span class="org-constant">Fri</span> <span class="org-constant">Jun</span> <span class="org-constant">24</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">03</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">7</span>, <span class="org-constant">Tue</span> <span class="org-constant">Jun</span> <span class="org-constant">25</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">10</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">15</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"01-01-1970"</span>, <span class="org-string">"02-03-2001"</span>, <span class="org-string">"10-10-2002"</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.toDate<span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Mon</span> <span class="org-constant">May</span> <span class="org-constant">24</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">01</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">6</span>
<span class="org-constant">Fri</span> <span class="org-constant">Jun</span> <span class="org-constant">24</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">03</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">7</span>
<span class="org-constant">Tue</span> <span class="org-constant">Jun</span> <span class="org-constant">25</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">10</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">15</span>


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">s</span> <span class="org-keyword">:</span> <span class="org-type">DateStr</span> <span class="org-keyword">=</span> <span class="org-string">"2001-10-01"</span> 
<span class="org-function-name">s</span><span class="org-keyword">:</span> <span class="org-type">DateParsers</span>.<span class="org-constant">DateStr</span> <span class="org-keyword">=</span> <span class="org-constant">DateParsers</span>$DateStr<span class="org-keyword">@</span><span class="org-constant">32d</span>87fe1

scala&gt; s.toDate <span class="org-comment-delimiter">// </span><span class="org-comment">Type Tab to complete </span>
toDate   toDateDMY   toDateMDY

scala&gt; s.toDate
<span class="org-function-name">res68</span><span class="org-keyword">:</span> <span class="org-type">java</span>.util.<span class="org-constant">Date</span> <span class="org-keyword">=</span> <span class="org-constant">Mon</span> <span class="org-constant">Jan</span> <span class="org-constant">01</span> <span class="org-constant">00</span><span class="org-keyword">:</span><span class="org-constant">10</span><span class="org-keyword">:</span><span class="org-constant">00</span> <span class="org-constant">BRT</span> <span class="org-constant">2001</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-16-4-3" class="outline-5">
<h5 id="sec-1-16-4-3"><span class="section-number-5">1.16.4.3</span> Extension to print elements.</h5>
<div class="outline-text-5" id="text-1-16-4-3">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">PrintHelpers</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">class</span> <span class="org-type">Printable</span> <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Any</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">printn</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=</span> println<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">class</span> <span class="org-type">PrintSeq</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>seq<span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-keyword">def</span> <span class="org-function-name">printAll</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=</span> seq foreach println
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">class</span> <span class="org-type">PrintableArray</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>xs<span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-keyword">def</span> <span class="org-function-name">printAll</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=</span> xs foreach println
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">class</span> <span class="org-type">PrintableList</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>xs<span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-keyword">def</span> <span class="org-function-name">printAll</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=</span> xs foreach println
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-constant">100</span> printn<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">100</span>

scala&gt; <span class="org-string">"hello world"</span> printn<span class="org-rainbow-delimiters-depth-1">()</span>
hello world

scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span> printn<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>



scala&gt; <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>.printAll<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>

scala&gt; <span class="org-constant">Array</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span><span class="org-rainbow-delimiters-depth-1">)</span>.printAll<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">3</span>
<span class="org-constant">4</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">xs</span><span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">xs</span><span class="org-keyword">:</span> <span class="org-type">Seq</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Int</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">4</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; xs.printAll<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-constant">1</span>
<span class="org-constant">2</span>
<span class="org-constant">4</span>
<span class="org-constant">5</span>


scala&gt; <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-1">)</span>.listFiles<span class="org-rainbow-delimiters-depth-1">()</span>.printAll<span class="org-rainbow-delimiters-depth-1">()</span>
/home
/<span class="org-keyword">var</span>
/bin
/usr
/root
/<span class="org-constant">Applications</span>
... ...
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-16-4-4" class="outline-5">
<h5 id="sec-1-16-4-4"><span class="section-number-5">1.16.4.4</span> Reverse function application</h5>
<div class="outline-text-5" id="text-1-16-4-4">
<p>
The implicit class Apply allows the compiler convert any Scala object
to this class whenever the method <span class="underline">ap</span> is invoked. The class Apply can
be used to peform reverse function application like the F# and OCaml
operator (|&gt;).
</p>


<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">object</span> <span class="org-constant">ApplyHelper</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXimplicit">implicit</span> <span class="org-keyword">class</span> <span class="org-type">Apply</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-2">](</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-keyword">def</span> <span class="org-function-name">ap</span><span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">](</span>f<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">B</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">=</span> f<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">import</span> <span class="org-constant">ApplyHelper</span>.<span class="org-keyword">_</span>
<span class="org-keyword">import</span> <span class="org-constant">ApplyHelper</span>.<span class="org-keyword">_</span>

scala&gt; <span class="org-string">"hello world"</span> ap println
hello world


scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">s</span> <span class="org-keyword">=</span> <span class="org-string">"hello world"</span> <span class="org-keyword">:</span> <span class="org-type">Apply</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">s</span><span class="org-keyword">:</span> <span class="org-type">ApplyHelper</span>.<span class="org-constant">Apply</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">ApplyHelper</span>$Apply<span class="org-keyword">@</span><span class="org-constant">3f</span>a2c8e7

scala&gt; s.ap<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
hello world

scala&gt; s ap println
hello world


scala&gt; <span class="org-constant">1000.0</span> ap <span class="org-constant">Math</span>.log10
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span>

scala&gt; <span class="org-constant">1000.0</span> ap <span class="org-constant">Math</span>.log10 ap <span class="org-constant">Math</span>.exp
<span class="org-function-name">res26</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">20.085536923187668</span>

scala&gt; <span class="org-constant">1000.0</span> ap <span class="org-constant">Math</span>.log10 ap <span class="org-constant">Math</span>.exp ap <span class="org-constant">Math</span>.log
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.0</span>

scala&gt; <span class="org-constant">1000.0</span> ap <span class="org-constant">Math</span>.log10 ap <span class="org-constant">Math</span>.exp ap <span class="org-constant">Math</span>.log ap println
<span class="org-constant">3.0</span>

scala&gt; <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-1">)</span> ap <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.listFiles<span class="org-rainbow-delimiters-depth-1">)</span> ap<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">_</span>.foreach<span class="org-rainbow-delimiters-depth-2">(</span>println<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
/home
/<span class="org-keyword">var</span>
/bin
/usr
/root
/<span class="org-constant">Applications</span>
/proc
/boot
/dev
... .... ...
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-17" class="outline-3">
<h3 id="sec-1-17"><span class="section-number-3">1.17</span> C# Delegates in Scala</h3>
<div class="outline-text-3" id="text-1-17">
</div><div id="outline-container-sec-1-17-1" class="outline-4">
<h4 id="sec-1-17-1"><span class="section-number-4">1.17.1</span> Delegates in C#</h4>
<div class="outline-text-4" id="text-1-17-1">
<p>
C#'s delegate works in a similar way to C or C++ function pointers and
can hold reference instance method, static method or lambda function.
</p>

<p>
Use cases: 
</p>

<ul class="org-ul">
<li>Implement callbacks
</li>

<li>Decouple classes: A class can call directly a method or static of another
class without it implement any known interface. In addition to the
indirect method call, delegates also allow lambda functions to be
passed as arguments.
</li>
</ul>

<p>
<b>Examples in Mono (C# Shell):</b>
</p>

<ul class="org-ul">
<li>Point to static class method.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-csharp">$ csharp
Mono C# Shell, type <span class="org-string">"help;"</span> <span class="org-keyword">for</span> help

Enter statements below.
csharp&gt;

<span class="org-comment-delimiter">// </span><span class="org-comment">Create a function pointer which can point to</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">any function of type:</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">==&gt;  double =&gt; double</span>
<span class="org-comment-delimiter">//     </span><span class="org-comment">(input)     (output)</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------------------------</span>
csharp&gt; <span class="org-keyword">public</span> <span class="org-keyword">delegate</span> <span class="org-type">double</span> MathFunc(<span class="org-type">double</span> <span class="org-variable-name">x</span>);
csharp&gt;

csharp&gt; <span class="org-type">double</span> pi = 3.1415

<span class="org-comment-delimiter">// </span><span class="org-comment">Create an empty delegate initially set to null</span>
csharp&gt; MathFunc mfun;
csharp&gt;

<span class="org-comment-delimiter">// </span><span class="org-comment">========= Supposed to fail throwing Null exception =========== //</span>
<span class="org-comment-delimiter">//</span>
csharp&gt; mfun == <span class="org-constant">null</span>
<span class="org-constant">true</span>
csharp&gt;

csharp&gt; mfun(pi)
<span class="org-function-name">System.NullReferenceException</span>: Object reference not <span class="org-keyword">set</span> <span class="org-type">to</span> an instance of an <span class="org-type">object</span>
  <span class="org-constant">at</span> &lt;InteractiveExpressionClass&gt;.Host (System.Object&amp; $retval) [0x00000]
  ...
csharp&gt;

csharp&gt; mfun.Invoke(pi)
<span class="org-function-name">System.NullReferenceException</span>: Object reference not <span class="org-keyword">set</span> <span class="org-type">to</span> an instance of an <span class="org-type">object</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">========= Point to Math.Sin static method =========== //</span>
<span class="org-comment-delimiter">//</span>
csharp&gt; mfun = Math.Sin
csharp&gt;

csharp&gt; mfun == <span class="org-constant">null</span>
<span class="org-constant">false</span>
csharp&gt;

<span class="org-comment-delimiter">// </span><span class="org-comment">Ok - Supposed to return zero or very close to zero.</span>
csharp&gt; mfun(pi)
9.26535896604903E-05
csharp&gt;
csharp&gt; mfun.Invoke(pi)
9.26535896604903E-05
csharp&gt;

csharp&gt; mfun(pi/2.0)
0.999999998926914

csharp&gt; mfun.Invoke(pi/2.0)
0.999999998926914


<span class="org-comment-delimiter">// </span><span class="org-comment">========= Point to Math.Cos static method =========== //</span>
<span class="org-comment-delimiter">//</span>
csharp&gt; mfun = Math.Cos

<span class="org-comment-delimiter">// </span><span class="org-comment">cos(pi) = cos(180 degrees) =~ -1</span>
csharp&gt; mfun(pi)
-0.999999995707656

csharp&gt; mfun.Invoke(pi)
-0.999999995707656

<span class="org-comment-delimiter">// </span><span class="org-comment">cos(pi/2) = cos(90 degrees) =~ 0</span>
csharp&gt; mfun(pi/2)
4.63267948799578E-05
</pre>
</div>

<p>
Point to an instance's method.
</p>

<div class="org-src-container">

<pre class="src src-csharp"><span class="org-comment-delimiter">// </span><span class="org-comment">Linear Equation f(x) = a * x + b</span>
<span class="org-keyword">class</span> <span class="org-type">LinFun</span>{
        <span class="org-keyword">private</span> <span class="org-type">double</span> <span class="org-variable-name">_a</span> = 0.0;
        <span class="org-keyword">private</span> <span class="org-type">double</span> <span class="org-variable-name">_b</span> = 0.0;

        <span class="org-keyword">public</span> LinFun(<span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span>){
                _a = a;
                _b = b;
        }

        <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">SetA</span>(<span class="org-type">double</span> <span class="org-variable-name">a</span>){
                _a = a;
        }

        <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">SetB</span>(<span class="org-type">double</span> <span class="org-variable-name">b</span>){
                _b = b;
        }

        <span class="org-keyword">public</span> <span class="org-type">double</span> <span class="org-function-name">Compute</span>(<span class="org-type">double</span> <span class="org-variable-name">x</span>){
                <span class="org-keyword">return</span> _a * x + _b;
        }        
}

<span class="org-function-name">csharp</span>&gt; <span class="org-keyword">public</span> <span class="org-keyword">delegate</span> <span class="org-type">double</span> MathFunc(<span class="org-type">double</span> <span class="org-variable-name">x</span>);
csharp&gt;

csharp&gt; <span class="org-keyword">var</span> linFun = <span class="org-keyword">new</span> <span class="org-type">LinFun</span>(3.0, 4.0);
csharp&gt;

<span class="org-comment-delimiter">// </span><span class="org-comment">Compute equation f(x) = 3 * x + 4</span>
<span class="org-comment-delimiter">//</span>
csharp&gt; mfun = linFun.Compute ;
csharp&gt;

csharp&gt; mfun(0.0)
4
csharp&gt; mfun(1.0)
7
csharp&gt; mfun(2.0)
10
csharp&gt; mfun(3.0)
13
csharp&gt; mfun(4.0)
16
csharp&gt;


<span class="org-comment-delimiter">// </span><span class="org-comment">Compute y(x) = 2 * x + 0.0</span>
<span class="org-comment-delimiter">//</span>
csharp&gt; linFun.SetA(2.0)
csharp&gt; linFun.SetB(0.0)
csharp&gt;
csharp&gt; mfun(0.0)
0
csharp&gt; mfun(1.0)
2
csharp&gt; mfun(2.0)
4
csharp&gt; mfun(4.0)
8

csharp&gt; mfun.Invoke(1.0)
2
csharp&gt; mfun.Invoke(2.0)
4
csharp&gt; mfun.Invoke(3.0)
6
csharp&gt;
</pre>
</div>

<p>
Point static methods of a custom class:
</p>

<div class="org-src-container">

<pre class="src src-csharp"><span class="org-keyword">class</span> <span class="org-type">MathModule</span>{
        <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-type">double</span> <span class="org-function-name">Square</span>(<span class="org-type">double</span> <span class="org-variable-name">x</span>){
                <span class="org-keyword">return</span> x * x;
        }

        <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-type">double</span> <span class="org-function-name">Triple</span>(<span class="org-type">double</span> <span class="org-variable-name">x</span>){
                <span class="org-keyword">return</span> 3.0 * x;
        }
}

<span class="org-function-name">csharp</span>&gt; <span class="org-keyword">public</span> <span class="org-keyword">delegate</span> <span class="org-type">double</span> MathFunc(<span class="org-type">double</span> <span class="org-variable-name">x</span>);

csharp&gt; mfun = MathModule.Square 
csharp&gt; mfun.Invoke(3.0)
9
csharp&gt; mfun.Invoke(4.0)
16
csharp&gt; mfun.Invoke(5.0)
25
csharp&gt;

csharp&gt; mfun = MathModule.Triple
csharp&gt; mfun.Invoke(3.0)
9
csharp&gt; mfun.Invoke(4.0)
12
csharp&gt; mfun(5.0)
15
csharp&gt;
</pre>
</div>

<p>
Point to a lambda function (aka anonymous function): 
</p>

<div class="org-src-container">

<pre class="src src-csharp">csharp&gt; mfun = x =&gt; 5.0 * x + 10.0
csharp&gt; 

csharp&gt; mfun = x =&gt; 5.0 * x + 10.0
csharp&gt; 
csharp&gt; mfun(0.0)
10
csharp&gt; mfun(1.0)
15
csharp&gt; mfun(2.0)
20
csharp&gt; mfun(3.0)
25
csharp&gt;
</pre>
</div>

<p>
Decouple classes:
</p>

<div class="org-src-container">

<pre class="src src-csharp"><span class="org-keyword">class</span> <span class="org-type">TableBuilder</span>{
        <span class="org-keyword">private</span> <span class="org-type">double</span> <span class="org-variable-name">_xmin</span> = 0;
        <span class="org-keyword">private</span> <span class="org-type">double</span> <span class="org-variable-name">_xmax</span> = 10.0;
        <span class="org-keyword">private</span> <span class="org-type">double</span> <span class="org-variable-name">_step</span> = 1.0;

        <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">SetRange</span>(<span class="org-type">double</span> <span class="org-variable-name">xmin</span>, <span class="org-type">double</span> <span class="org-variable-name">xmax</span>, <span class="org-type">double</span> <span class="org-variable-name">step</span> = 0.1){
                _xmin = xmin;
                _xmax = xmax;
                _step = step;
                Console.WriteLine(<span class="org-string">"Set xmin = {0} xmax = {1} step = {2} "</span>, <span class="org-type">_xmin</span>, <span class="org-type">_xmax</span>, <span class="org-type">_step</span>);
        }

        <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">Show</span>(<span class="org-type">MathFunc</span> <span class="org-variable-name">fn</span>){
                <span class="org-keyword">for</span>(<span class="org-type">double</span> <span class="org-variable-name">x</span> = _xmin; x &lt; _xmax; x = x + _step){
                        Console.WriteLine(<span class="org-string">"x = {0:F3}\ty={1:F3}"</span>, <span class="org-type">x</span>, fn(<span class="org-type">x</span>));
                }
        }        
}


<span class="org-variable-name">csharp</span>&gt; <span class="org-keyword">var</span> linFunService = <span class="org-keyword">new</span> <span class="org-type">LinFun</span>(4.0, 5.0)

<span class="org-comment-delimiter">// </span><span class="org-comment">Compute table for y(x) = 4.0 * x + 5.0</span>
csharp&gt; tableBuilder.Show(linFunService.Compute)
x = 0.000   y=5.000
x = 1.000   y=9.000
x = 2.000   y=13.000
x = 3.000   y=17.000
x = 4.000   y=21.000
x = 5.000   y=25.000
x = 6.000   y=29.000
x = 7.000   y=33.000
x = 8.000   y=37.000
x = 9.000   y=41.000
csharp&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Compute table for y(x) = 3.0 * x + 4.0</span>
csharp&gt; linFunService.SetA(3.0)
csharp&gt; linFunService.SetB(0.0)
csharp&gt; 
csharp&gt; tableBuilder.Show(linFunService.Compute)
x = 0.000   y=0.000
x = 1.000   y=3.000
x = 2.000   y=6.000
x = 3.000   y=9.000
x = 4.000   y=12.000
x = 5.000   y=15.000
x = 6.000   y=18.000
x = 7.000   y=21.000
x = 8.000   y=24.000
x = 9.000   y=27.000
csharp&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Compute table for static method Sin of class Math.        </span>
csharp&gt; tableBuilder.Show(Math.Sin)
x = 0.000   y=0.000
x = 1.000   y=0.841
x = 2.000   y=0.909
x = 3.000   y=0.141
x = 4.000   y=-0.757
x = 5.000   y=-0.959
x = 6.000   y=-0.279
x = 7.000   y=0.657
x = 8.000   y=0.989
x = 9.000   y=0.412
csharp&gt;

<span class="org-comment-delimiter">// </span><span class="org-comment">Compute table using lambda function         </span>
csharp&gt; tableBuilder.Show(x =&gt; 2 * x + 3)
x = 0.000   y=3.000
x = 1.000   y=5.000
x = 2.000   y=7.000
x = 3.000   y=9.000
x = 4.000   y=11.000
x = 5.000   y=13.000
x = 6.000   y=15.000
x = 7.000   y=17.000
x = 8.000   y=19.000
x = 9.000   y=21.000
csharp&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-17-2" class="outline-4">
<h4 id="sec-1-17-2"><span class="section-number-4">1.17.2</span> Delegates in Scala</h4>
<div class="outline-text-4" id="text-1-17-2">
<p>
A delegate in Scala can be just a variable of function type. As in C#,
it can hold reference to instance methods, static methods and lambda
functions.
</p>

<p>
<b>Declare delegate type.</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">C#: public delegate double MathFunc(double x)</span>
<span class="org-keyword">type</span> <span class="org-constant">MathFunc</span> <span class="org-keyword">=</span> <span class="org-constant">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span>
</pre>
</div>

<p>
<b>Create delegate variable:</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Initialize with NULL -&gt; Null is evil, but it will be used for the sake of testing</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">and experimentation.</span>
<span class="org-comment-delimiter">//</span>
scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">mfun</span><span class="org-keyword">:</span> <span class="org-type">MathFunc</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>
<span class="org-function-name">mfun</span><span class="org-keyword">:</span> <span class="org-type">MathFunc</span> <span class="org-keyword">=</span> <span class="org-constant">null</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Approximate value of PI</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">pi</span> <span class="org-keyword">=</span> <span class="org-constant">3.1415</span>
<span class="org-function-name">pi</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">3.1415</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span>pi<span class="org-rainbow-delimiters-depth-1">)</span>
java.lang.<span class="org-constant">NullPointerException</span>
  ... <span class="org-constant">28</span> elided
</pre>
</div>

<p>
<b>Point to lambda function:</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">//</span><span class="org-comment">----- Point to Lambda Function ------------------------//</span>
<span class="org-comment-delimiter">//</span>
scala&gt; mfun <span class="org-keyword">=</span> x <span class="org-keyword">=&gt;</span> <span class="org-constant">3.0</span> * x + <span class="org-constant">5.0</span>
<span class="org-function-name">mfun</span><span class="org-keyword">:</span> <span class="org-type">MathFunc</span> <span class="org-keyword">=</span> $$Lambda$1097/<span class="org-constant">302990364</span><span class="org-keyword">@</span><span class="org-constant">2407f</span>1a8

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res13</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">5.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res14</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">8.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res15</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">11.0</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">someLambda</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=&gt;</span> x * x
<span class="org-function-name">someLambda</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Double</span> <span class="org-keyword">=</span> $$Lambda$1277/<span class="org-constant">1466120795</span><span class="org-keyword">@</span><span class="org-constant">6f</span>bd56da

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res36</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res37</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res38</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">25.0</span>
</pre>
</div>

<p>
<b>Point to static method:</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">//</span><span class="org-comment">----- Point to java.lang.Math.cos static method ----------//</span>
<span class="org-comment-delimiter">//</span>
scala&gt; mfun <span class="org-keyword">=</span> java.lang.<span class="org-constant">Math</span>.cos
<span class="org-function-name">mfun</span><span class="org-keyword">:</span> <span class="org-type">MathFunc</span> <span class="org-keyword">=</span> $$Lambda$1078/<span class="org-constant">2000449863</span><span class="org-keyword">@</span><span class="org-constant">5</span>abc5854

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span>pi<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">-0.9999999957076562</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.<span class="org-constant">PI</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">-1.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.<span class="org-constant">PI</span> / <span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">6.123233995736766E-17</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">------- Point to Math.log10 (Logarithm of base 10)  -------//</span>
<span class="org-comment-delimiter">//</span>
scala&gt; mfun <span class="org-keyword">=</span> <span class="org-constant">Math</span>.log10
<span class="org-function-name">mfun</span><span class="org-keyword">:</span> <span class="org-type">MathFunc</span> <span class="org-keyword">=</span> $$Lambda$1080/<span class="org-constant">61227510</span><span class="org-keyword">@</span><span class="org-constant">66487713</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res7</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res8</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">100.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res9</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.0</span>
</pre>
</div>

<p>
<b>Point to instance method:</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">LinFun</span><span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span>, b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_a</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> a
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_b</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> b

  <span class="org-keyword">def</span> <span class="org-function-name">setA</span><span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _a <span class="org-keyword">=</span> a

  <span class="org-keyword">def</span> <span class="org-function-name">setB</span><span class="org-rainbow-delimiters-depth-2">(</span>b<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _b <span class="org-keyword">=</span> b

  <span class="org-keyword">def</span> <span class="org-function-name">compute</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span>
    _a * x + _b
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Running:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">linFun</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">LinFun</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">linFun</span><span class="org-keyword">:</span> <span class="org-type">LinFun</span> <span class="org-keyword">=</span> <span class="org-constant">LinFun</span><span class="org-keyword">@</span><span class="org-constant">6f</span>45872b

scala&gt; linFun.compute<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res16</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; linFun.compute<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res17</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">7.0</span>

scala&gt; linFun.compute<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res18</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; mfun <span class="org-keyword">=</span> linFun.compute
<span class="org-function-name">mfun</span><span class="org-keyword">:</span> <span class="org-type">MathFunc</span> <span class="org-keyword">=</span> $$Lambda$1247/<span class="org-constant">485914296</span><span class="org-keyword">@</span><span class="org-constant">501904f</span>f

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res21</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">4.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res22</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">7.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res23</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Compute now 2 * x + 0</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------</span>
scala&gt; linFun.setA<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; linFun.setB<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res27</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res28</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.0</span>

scala&gt; mfun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res29</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>

scala&gt; mfun.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res30</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>

scala&gt; mfun.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res31</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">2.0</span>

scala&gt; mfun.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res32</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">6.0</span>
</pre>
</div>


<p>
<b>Decouple Classes</b>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">TableBuilder</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_xmin</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0</span>;
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_xmax</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">10.0</span>;
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_step</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">1.0</span>;

  <span class="org-keyword">def</span> <span class="org-function-name">setRange</span><span class="org-rainbow-delimiters-depth-2">(</span>xmin<span class="org-keyword">:</span> <span class="org-type">Double</span>, xmax<span class="org-keyword">:</span> <span class="org-type">Double</span>, step<span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.1</span><span class="org-rainbow-delimiters-depth-2">){</span>
    _xmin <span class="org-keyword">=</span> xmin;
    _xmax <span class="org-keyword">=</span> xmax;
    _step <span class="org-keyword">=</span> step;
    println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Set xmin = {0} xmax = {1} step = {2} "</span>, _xmin, _xmax, _step<span class="org-rainbow-delimiters-depth-3">)</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">def</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">MathFunc</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span>x <span class="org-keyword">&lt;-</span> _xmin to _xmax by _step<span class="org-rainbow-delimiters-depth-2">)</span>
      println<span class="org-rainbow-delimiters-depth-2">(</span>f<span class="org-string">"x = </span><span class="org-variable-name">$x</span><span class="org-string">%.3f</span><span class="org-string"><span class="org-constant">\t</span></span><span class="org-string"> y = </span><span class="org-variable-name">${fn(x)}</span><span class="org-string">%.3f"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<p>
Note: The class TableBuilder does not need to know anything about the class linFun. 
</p>

<ul class="org-ul">
<li>Pass static method as argument
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; tbl.show<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Math</span>.sin<span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">0.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">0.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">1.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">0.841</span>
x <span class="org-keyword">=</span> <span class="org-constant">2.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">0.909</span>
x <span class="org-keyword">=</span> <span class="org-constant">3.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">0.141</span>
x <span class="org-keyword">=</span> <span class="org-constant">4.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">-0.757</span>
x <span class="org-keyword">=</span> <span class="org-constant">5.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">-0.959</span>
x <span class="org-keyword">=</span> <span class="org-constant">6.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">-0.279</span>
x <span class="org-keyword">=</span> <span class="org-constant">7.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">0.657</span>
x <span class="org-keyword">=</span> <span class="org-constant">8.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">0.989</span>
x <span class="org-keyword">=</span> <span class="org-constant">9.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">0.412</span>
x <span class="org-keyword">=</span> <span class="org-constant">10.000</span>       y <span class="org-keyword">=</span> <span class="org-constant">-0.544</span>
</pre>
</div>

<ul class="org-ul">
<li>Pass instance method as argument 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">linFun</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">LinFun</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">4.0</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">linFun</span><span class="org-keyword">:</span> <span class="org-type">LinFun</span> <span class="org-keyword">=</span> <span class="org-constant">LinFun</span><span class="org-keyword">@</span><span class="org-constant">27</span>a65db7

<span class="org-comment-delimiter">// </span><span class="org-comment">Note: Class TableBuilder does not need to know anything about class LinFun</span>
scala&gt; tbl.show<span class="org-rainbow-delimiters-depth-1">(</span>linFun.compute<span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">0.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">4.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">1.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">7.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">2.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">3.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">13.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">4.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">16.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">5.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">19.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">6.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">22.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">7.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">25.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">8.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">28.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">9.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">31.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">10.000</span>       y <span class="org-keyword">=</span> <span class="org-constant">34.000</span>

scala&gt; linFun.setA<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">2.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; linFun.setB<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">0.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
scala&gt; tbl.show<span class="org-rainbow-delimiters-depth-1">(</span>linFun.compute<span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">0.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">0.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">1.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">2.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">2.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">4.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">3.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">6.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">4.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">8.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">5.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">6.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">12.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">7.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">14.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">8.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">16.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">9.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">18.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">10.000</span>       y <span class="org-keyword">=</span> <span class="org-constant">20.000</span>
</pre>
</div>

<ul class="org-ul">
<li>Pass lambda function as argument 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">// </span><span class="org-comment">Show constant function  </span>
scala&gt; tbl.show<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=&gt;</span> <span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">0.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">1.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">2.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">3.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">4.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">5.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">6.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">7.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">8.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">9.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">10.000</span>       y <span class="org-keyword">=</span> <span class="org-constant">10.000</span>
</pre>
</div>

<ul class="org-ul">
<li>Pass non compatible function as argument using lambda.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">def</span> <span class="org-function-name">binFun</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">5</span> * x + <span class="org-constant">4</span> * y - <span class="org-constant">10.0</span>
<span class="org-function-name">binFun</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Double</span>

scala&gt; tbl.show<span class="org-rainbow-delimiters-depth-1">(</span>a <span class="org-keyword">=&gt;</span> binFun<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">5.0</span>, a<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
x <span class="org-keyword">=</span> <span class="org-constant">0.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">15.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">1.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">19.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">2.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">23.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">3.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">27.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">4.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">31.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">5.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">35.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">6.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">39.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">7.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">43.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">8.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">47.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">9.000</span>        y <span class="org-keyword">=</span> <span class="org-constant">51.000</span>
x <span class="org-keyword">=</span> <span class="org-constant">10.000</span>       y <span class="org-keyword">=</span> <span class="org-constant">55.000</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-17-3" class="outline-4">
<h4 id="sec-1-17-3"><span class="section-number-4">1.17.3</span> Multicast Delegate</h4>
<div class="outline-text-4" id="text-1-17-3">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">MulticastDelegate</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">A</span><span class="org-rainbow-delimiters-depth-1">]{</span>
  <span class="org-keyword">import</span> scala.collection.mutable.<span class="org-constant">ListBuffer</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">val</span> <span class="org-variable-name">_lst</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">ListBuffer</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">]()</span>

  <span class="org-keyword">def</span> <span class="org-function-name">:=</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _lst.append<span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-keyword">:</span> <span class="org-type">A</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _lst.append<span class="org-rainbow-delimiters-depth-2">(</span>fn<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">apply</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span>fun <span class="org-keyword">&lt;-</span> _lst<span class="org-rainbow-delimiters-depth-2">)</span> fun<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Singleton: Class of a single instance</span>
<span class="org-keyword">object</span> <span class="org-constant">Operations</span><span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">def</span> <span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"add(x = </span><span class="org-variable-name">$x</span><span class="org-string">, y = </span><span class="org-variable-name">$y</span><span class="org-string">) = </span><span class="org-variable-name">${x + y}</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">def</span> <span class="org-function-name">mul</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-keyword">:</span> <span class="org-type">Double</span>, y<span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-string">"mul(x = </span><span class="org-variable-name">$x</span><span class="org-string">, y = </span><span class="org-variable-name">$y</span><span class="org-string">) = </span><span class="org-variable-name">${x * y}</span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">val</span> <span class="org-variable-name">mt</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">MulticastDelegate</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Acknowledgment: Thanks to the gits https://gist.github.com/jfrazee/6271143</span>
scala&gt; mt += <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Operations</span>.add <span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-1">)</span>.tupled

scala&gt; mt += <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Operations</span>.mul <span class="org-keyword">_</span><span class="org-rainbow-delimiters-depth-1">)</span>.tupled

scala&gt; mt += <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span>, <span class="org-variable-name">y</span><span class="org-keyword">:</span> <span class="org-type">Double</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"fn(x, y) = "</span> + <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">3</span> * x + <span class="org-constant">4</span> * y<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; mt<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
add<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">4.0</span>, y <span class="org-keyword">=</span> <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">9.0</span>
mul<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">4.0</span>, y <span class="org-keyword">=</span> <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">20.0</span>
fn<span class="org-rainbow-delimiters-depth-1">(</span>x, y<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">32.0</span>

scala&gt; mt.apply<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">3.0</span>, <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
add<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">3.0</span>, y <span class="org-keyword">=</span> <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">8.0</span>
mul<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">3.0</span>, y <span class="org-keyword">=</span> <span class="org-constant">5.0</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">15.0</span>
fn<span class="org-rainbow-delimiters-depth-1">(</span>x, y<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">29.0</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">t</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4.0</span>, <span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">t</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Double</span>, <span class="org-constant">Double</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">4.0</span>,<span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; mt<span class="org-rainbow-delimiters-depth-1">(</span>t<span class="org-rainbow-delimiters-depth-1">)</span>
add<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">4.0</span>, y <span class="org-keyword">=</span> <span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">14.0</span>
mul<span class="org-rainbow-delimiters-depth-1">(</span>x <span class="org-keyword">=</span> <span class="org-constant">4.0</span>, y <span class="org-keyword">=</span> <span class="org-constant">10.0</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">40.0</span>
fn<span class="org-rainbow-delimiters-depth-1">(</span>x, y<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-constant">52.0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-17-4" class="outline-4">
<h4 id="sec-1-17-4"><span class="section-number-4">1.17.4</span> References and further reading</h4>
<div class="outline-text-4" id="text-1-17-4">
<ul class="org-ul">
<li><b>Delegates (C# Programming Guide)</b> -
<a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/delegates/">https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/delegates/</a>
</li>

<li><b>A Delegate of simple numeric functions.</b> -
<a href="http://people.cs.aau.dk/~normark/oop-csharp/html/notes/more-operations-delegates1-note-program-1.html">http://people.cs.aau.dk/~normark/oop-csharp/html/notes/more-operations-delegates1-note-program-1.html</a>
</li>

<li><b>C# - Delegates</b> - <a href="https://www.tutorialspoint.com/csharp/csharp_delegates.htm">https://www.tutorialspoint.com/csharp/csharp_delegates.htm</a>
</li>

<li><b>Dotnet-Perls - Delegate</b> - <a href="https://www.dotnetperls.com/delegate">https://www.dotnetperls.com/delegate</a>
</li>

<li><b>Delegates and Events in C#/.NET</b> -
<a href="https://www.akadia.com/services/dotnet_delegates_and_events.html">https://www.akadia.com/services/dotnet_delegates_and_events.html</a>
</li>

<li><b>Microsft Developer - Delegates</b> -
<a href="http://kcshadow.net/wpdeveloper/?q=delegates">http://kcshadow.net/wpdeveloper/?q=delegates</a>
</li>

<li><b>When to Use Delegates Instead of Interfaces (C# Programming Guide)</b> 
<ul class="org-ul">
<li><a href="https://msdn.microsoft.com/en-us/library/ms173173.aspx">https://msdn.microsoft.com/en-us/library/ms173173.aspx</a> 
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Java Interoperability</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Show Java Properties</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<pre class="src src-scala">scala&gt;  <span class="org-constant">System</span>.getProperty <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.vm.vendor"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res2</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> <span class="org-constant">Oracle</span> <span class="org-constant">Corporation</span>

scala&gt;  <span class="org-constant">System</span>.getProperty <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.home"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span> /usr/lib/jvm/java-8-openjdk/jre

scala&gt;  <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.vm.vendor"</span>, <span class="org-string">"java.home"</span>, <span class="org-string">"java.runtime.name"</span>, <span class="org-string">"java.vm.name"</span><span class="org-rainbow-delimiters-depth-1">)</span>.map<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Oracle</span> <span class="org-constant">Corporation</span>, /usr/lib/jvm/java-8-openjdk/jre, <span class="org-constant">OpenJDK</span> <span class="org-constant">Runtime</span> <span class="org-constant">Environment</span>, <span class="org-constant">OpenJDK</span> <span class="org-constant">64</span>-<span class="org-constant">Bit</span> <span class="org-constant">Server</span> <span class="org-constant">VM</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;  <span class="org-keyword">val</span> <span class="org-variable-name">xs</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.vm.vendor"</span>, <span class="org-string">"java.home"</span>, <span class="org-string">"java.runtime.name"</span>, <span class="org-string">"java.vm.name"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">xs</span><span class="org-keyword">:</span> <span class="org-type">List</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">=</span> <span class="org-constant">List</span><span class="org-rainbow-delimiters-depth-1">(</span>java.vm.vendor, java.home, java.runtime.name, java.vm.name<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt;  xs.foreach<span class="org-rainbow-delimiters-depth-1">(</span>p <span class="org-keyword">=&gt;</span> println <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"%s</span><span class="org-string"><span class="org-constant">\t</span></span><span class="org-string">%s"</span>.format<span class="org-rainbow-delimiters-depth-3">(</span>p, <span class="org-constant">System</span>.getProperty<span class="org-rainbow-delimiters-depth-4">(</span>p<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
java.vm.vendor  <span class="org-constant">Oracle</span> <span class="org-constant">Corporation</span>
java.home   /usr/lib/jvm/java-8-openjdk/jre
java.runtime.name   <span class="org-constant">OpenJDK</span> <span class="org-constant">Runtime</span> <span class="org-constant">Environment</span>
java.vm.name    <span class="org-constant">OpenJDK</span> <span class="org-constant">64</span>-<span class="org-constant">Bit</span> <span class="org-constant">Server</span> <span class="org-constant">VM</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Java Reflection</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1"><span class="section-number-4">2.2.1</span> Show Class Method given a class name</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
See: <a href="http://gauss.ececs.uc.edu/Courses/c4003/java/Reflection/reflection0.html">Reflection</a>
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-constant">Class</span>.forName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.io.File"</span><span class="org-rainbow-delimiters-depth-1">)</span>.getDeclaredMethods<span class="org-rainbow-delimiters-depth-1">()</span>.take<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
public boolean java.io.<span class="org-constant">File</span>.equals<span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">Object</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.lang.<span class="org-constant">String</span> java.io.<span class="org-constant">File</span>.toString<span class="org-rainbow-delimiters-depth-1">()</span>
public int java.io.<span class="org-constant">File</span>.hashCode<span class="org-rainbow-delimiters-depth-1">()</span>
public int java.io.<span class="org-constant">File</span>.compareTo<span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">Object</span><span class="org-rainbow-delimiters-depth-1">)</span>
public int java.io.<span class="org-constant">File</span>.compareTo<span class="org-rainbow-delimiters-depth-1">(</span>java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.lang.<span class="org-constant">String</span> java.io.<span class="org-constant">File</span>.getName<span class="org-rainbow-delimiters-depth-1">()</span>
public long java.io.<span class="org-constant">File</span>.length<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.io.<span class="org-constant">File</span>.getParent<span class="org-rainbow-delimiters-depth-1">()</span>
public boolean java.io.<span class="org-constant">File</span>.isAbsolute<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.io.<span class="org-constant">File</span>.getCanonicalPath<span class="org-rainbow-delimiters-depth-1">()</span> throws java.io.<span class="org-constant">IOException</span>

<span class="org-keyword">def</span> <span class="org-function-name">show_class_methods</span> <span class="org-rainbow-delimiters-depth-1">(</span>classname<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">Class</span>
    .forName<span class="org-rainbow-delimiters-depth-2">(</span>classname<span class="org-rainbow-delimiters-depth-2">)</span>
    .getDeclaredMethods<span class="org-rainbow-delimiters-depth-2">()</span>
    .foreach<span class="org-rainbow-delimiters-depth-2">(</span>println<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">show_class_methods</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-1">(</span>classname<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-constant">Unit</span>

scala&gt; show_class_constructors<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"javax.swing.JFrame"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-scala-font-lockXprotected">protected</span> void javax.swing.<span class="org-constant">JFrame</span>.frameInit<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-scala-font-lockXprotected">protected</span> javax.swing.<span class="org-constant">JRootPane</span> javax.swing.<span class="org-constant">JFrame</span>.createRootPane<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-scala-font-lockXprotected">protected</span> void javax.swing.<span class="org-constant">JFrame</span>.processWindowEvent<span class="org-rainbow-delimiters-depth-1">(</span>java.awt.event.<span class="org-constant">WindowEvent</span><span class="org-rainbow-delimiters-depth-1">)</span>
public void javax.swing.<span class="org-constant">JFrame</span>.setDefaultCloseOperation<span class="org-rainbow-delimiters-depth-1">(</span>int<span class="org-rainbow-delimiters-depth-1">)</span>
public int javax.swing.<span class="org-constant">JFrame</span>.getDefaultCloseOperation<span class="org-rainbow-delimiters-depth-1">()</span>
public void javax.swing.<span class="org-constant">JFrame</span>.setTransferHandler<span class="org-rainbow-delimiters-depth-1">(</span>javax.swing.<span class="org-constant">TransferHandler</span><span class="org-rainbow-delimiters-depth-1">)</span>
public javax.swing.<span class="org-constant">TransferHandler</span> javax.swing.<span class="org-constant">JFrame</span>.getTransferHandler<span class="org-rainbow-delimiters-depth-1">()</span>
public void javax.swing.<span class="org-constant">JFrame</span>.setJMenuBar<span class="org-rainbow-delimiters-depth-1">(</span>javax.swing.<span class="org-constant">JMenuBar</span><span class="org-rainbow-delimiters-depth-1">)</span>
public javax.swing.<span class="org-constant">JMenuBar</span> javax.swing.<span class="org-constant">JFrame</span>.getJMenuBar<span class="org-rainbow-delimiters-depth-1">()</span>
...

<span class="org-keyword">def</span> <span class="org-function-name">show_class_constructors</span> <span class="org-rainbow-delimiters-depth-1">(</span>classname<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">Class</span>
    .forName<span class="org-rainbow-delimiters-depth-2">(</span>classname<span class="org-rainbow-delimiters-depth-2">)</span>
    .getDeclaredConstructors<span class="org-rainbow-delimiters-depth-2">()</span>
    .foreach<span class="org-rainbow-delimiters-depth-2">(</span>println<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; show_class_constructors<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.io.File"</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">String</span>,java.lang.<span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-scala-font-lockXprivate">private</span> java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">String</span>,java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">(</span>java.io.<span class="org-constant">File</span>,java.lang.<span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">(</span>java.net.<span class="org-constant">URI</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-scala-font-lockXprivate">private</span> java.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">String</span>,int<span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; <span class="org-constant">Class</span>.forName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"java.io.File"</span><span class="org-rainbow-delimiters-depth-1">)</span>.getDeclaredFields<span class="org-rainbow-delimiters-depth-1">()</span>.foreach<span class="org-rainbow-delimiters-depth-1">(</span>println<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-scala-font-lockXprivate">private</span> static <span class="org-scala-font-lockXfinal">final</span> java.io.<span class="org-constant">FileSystem</span> java.io.<span class="org-constant">File</span>.fs
<span class="org-scala-font-lockXprivate">private</span> <span class="org-scala-font-lockXfinal">final</span> java.lang.<span class="org-constant">String</span> java.io.<span class="org-constant">File</span>.path
<span class="org-scala-font-lockXprivate">private</span> transient java.io.<span class="org-constant">File</span>$PathStatus java.io.<span class="org-constant">File</span>.status
<span class="org-scala-font-lockXprivate">private</span> <span class="org-scala-font-lockXfinal">final</span> transient int java.io.<span class="org-constant">File</span>.prefixLength
public static <span class="org-scala-font-lockXfinal">final</span> char java.io.<span class="org-constant">File</span>.separatorChar
public static <span class="org-scala-font-lockXfinal">final</span> java.lang.<span class="org-constant">String</span> java.io.<span class="org-constant">File</span>.separator
public static <span class="org-scala-font-lockXfinal">final</span> char java.io.<span class="org-constant">File</span>.pathSeparatorChar
public static <span class="org-scala-font-lockXfinal">final</span> java.lang.<span class="org-constant">String</span> java.io.<span class="org-constant">File</span>.pathSeparator
<span class="org-scala-font-lockXprivate">private</span> static <span class="org-scala-font-lockXfinal">final</span> long java.io.<span class="org-constant">File</span>.<span class="org-constant">PATH_OFFSET</span>
<span class="org-scala-font-lockXprivate">private</span> static <span class="org-scala-font-lockXfinal">final</span> long java.io.<span class="org-constant">File</span>.<span class="org-constant">PREFIX_LENGTH_OFFSET</span>
<span class="org-scala-font-lockXprivate">private</span> static <span class="org-scala-font-lockXfinal">final</span> sun.misc.<span class="org-constant">Unsafe</span> java.io.<span class="org-constant">File</span>.<span class="org-constant">UNSAFE</span>
<span class="org-scala-font-lockXprivate">private</span> static <span class="org-scala-font-lockXfinal">final</span> long java.io.<span class="org-constant">File</span>.serialVersionUID
<span class="org-scala-font-lockXprivate">private</span> transient volatile java.nio.file.<span class="org-constant">Path</span> java.io.<span class="org-constant">File</span>.filePath
static <span class="org-scala-font-lockXfinal">final</span> boolean java.io.<span class="org-constant">File</span>.$assertionsDisabled
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2"><span class="section-number-4">2.2.2</span> Show Object Methods</h4>
<div class="outline-text-4" id="text-2-2-2">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">showObjectMethods</span><span class="org-rainbow-delimiters-depth-1">(</span>obj<span class="org-keyword">:</span> <span class="org-type">Any</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    obj.getClass<span class="org-rainbow-delimiters-depth-2">()</span>.getDeclaredMethods<span class="org-rainbow-delimiters-depth-2">()</span>.foreach<span class="org-rainbow-delimiters-depth-2">(</span>println<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Test:
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> scala.io.<span class="org-constant">Source</span>
<span class="org-keyword">import</span> scala.io.<span class="org-constant">Source</span>

scala&gt; <span class="org-keyword">import</span> java.net.<span class="org-constant">URL</span>
<span class="org-keyword">import</span> java.net.<span class="org-constant">URL</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">url</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">URL</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"http://www.httpbin.org/get"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">url</span><span class="org-keyword">:</span> <span class="org-type">java</span>.net.<span class="org-constant">URL</span> <span class="org-keyword">=</span> http<span class="org-keyword">:</span><span class="org-comment-delimiter">//</span><span class="org-comment">www.httpbin.org/get</span>


scala&gt; showObjectMethods<span class="org-rainbow-delimiters-depth-1">(</span>url<span class="org-rainbow-delimiters-depth-1">)</span>
public boolean java.net.<span class="org-constant">URL</span>.equals<span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">Object</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.toString<span class="org-rainbow-delimiters-depth-1">()</span>
public synchronized int java.net.<span class="org-constant">URL</span>.hashCode<span class="org-rainbow-delimiters-depth-1">()</span>
public <span class="org-scala-font-lockXfinal">final</span> java.io.<span class="org-constant">InputStream</span> java.net.<span class="org-constant">URL</span>.openStream<span class="org-rainbow-delimiters-depth-1">()</span> throws java.io.<span class="org-constant">IOException</span>
<span class="org-scala-font-lockXprivate">private</span> synchronized void java.net.<span class="org-constant">URL</span>.readObject<span class="org-rainbow-delimiters-depth-1">(</span>java.io.<span class="org-constant">ObjectInputStream</span><span class="org-rainbow-delimiters-depth-1">)</span> throws java.io.<span class="org-constant">IOException</span>,java.lang.<span class="org-constant">ClassNotFoundException</span>
<span class="org-scala-font-lockXprivate">private</span> synchronized void java.net.<span class="org-constant">URL</span>.writeObject<span class="org-rainbow-delimiters-depth-1">(</span>java.io.<span class="org-constant">ObjectOutputStream</span><span class="org-rainbow-delimiters-depth-1">)</span> throws java.io.<span class="org-constant">IOException</span>
void java.net.<span class="org-constant">URL</span>.set<span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">String</span>,java.lang.<span class="org-constant">String</span>,int,java.lang.<span class="org-constant">String</span>,java.lang.<span class="org-constant">String</span>,java.lang.<span class="org-constant">String</span>,java.lang.<span class="org-constant">String</span>,java.lang.<span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">)</span>
void java.net.<span class="org-constant">URL</span>.set<span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">String</span>,java.lang.<span class="org-constant">String</span>,int,java.lang.<span class="org-constant">String</span>,java.lang.<span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-scala-font-lockXprivate">private</span> java.lang.<span class="org-constant">Object</span> java.net.<span class="org-constant">URL</span>.readResolve<span class="org-rainbow-delimiters-depth-1">()</span> throws java.io.<span class="org-constant">ObjectStreamException</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getPath<span class="org-rainbow-delimiters-depth-1">()</span>
public java.net.<span class="org-constant">URI</span> java.net.<span class="org-constant">URL</span>.toURI<span class="org-rainbow-delimiters-depth-1">()</span> throws java.net.<span class="org-constant">URISyntaxException</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getAuthority<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getQuery<span class="org-rainbow-delimiters-depth-1">()</span>
public java.net.<span class="org-constant">URLConnection</span> java.net.<span class="org-constant">URL</span>.openConnection<span class="org-rainbow-delimiters-depth-1">(</span>java.net.<span class="org-constant">Proxy</span><span class="org-rainbow-delimiters-depth-1">)</span> throws java.io.<span class="org-constant">IOException</span>
public java.net.<span class="org-constant">URLConnection</span> java.net.<span class="org-constant">URL</span>.openConnection<span class="org-rainbow-delimiters-depth-1">()</span> throws java.io.<span class="org-constant">IOException</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getProtocol<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getFile<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getHost<span class="org-rainbow-delimiters-depth-1">()</span>
...
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-2-3" class="outline-4">
<h4 id="sec-2-2-3"><span class="section-number-4">2.2.3</span> Show Object Public Methods</h4>
<div class="outline-text-4" id="text-2-2-3">
<div class="org-src-container">

<pre class="src src-java"><span class="org-keyword">import</span> <span class="org-constant">java</span>.<span class="org-constant">lang</span>.<span class="org-constant">reflect</span>.<span class="org-type">Modifier</span>

<span class="org-type">def</span> <span class="org-function-name">showObjPublicMethods</span> <span class="org-rainbow-delimiters-depth-1">(</span>obj: Any<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">(</span>m &lt;- url.getClass<span class="org-rainbow-delimiters-depth-3">()</span>.getDeclaredMethods<span class="org-rainbow-delimiters-depth-3">()</span>
             <span class="org-keyword">if</span> Modifier.isPublic<span class="org-rainbow-delimiters-depth-3">(</span>m.getModifiers<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-2">)</span> println<span class="org-rainbow-delimiters-depth-2">(</span>m<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; <span class="org-keyword">import</span> java.net.<span class="org-constant">URL</span>
<span class="org-keyword">import</span> java.net.<span class="org-constant">URL</span>


scala&gt; showObjPublicMethods<span class="org-rainbow-delimiters-depth-1">(</span>url<span class="org-rainbow-delimiters-depth-1">)</span>

public boolean java.net.<span class="org-constant">URL</span>.equals<span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">Object</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.toString<span class="org-rainbow-delimiters-depth-1">()</span>
public synchronized int java.net.<span class="org-constant">URL</span>.hashCode<span class="org-rainbow-delimiters-depth-1">()</span>
public <span class="org-scala-font-lockXfinal">final</span> java.io.<span class="org-constant">InputStream</span> java.net.<span class="org-constant">URL</span>.openStream<span class="org-rainbow-delimiters-depth-1">()</span> throws java.io.<span class="org-constant">IOException</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getPath<span class="org-rainbow-delimiters-depth-1">()</span>
public java.net.<span class="org-constant">URI</span> java.net.<span class="org-constant">URL</span>.toURI<span class="org-rainbow-delimiters-depth-1">()</span> throws java.net.<span class="org-constant">URISyntaxException</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getAuthority<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getQuery<span class="org-rainbow-delimiters-depth-1">()</span>
public java.net.<span class="org-constant">URLConnection</span> java.net.<span class="org-constant">URL</span>.openConnection<span class="org-rainbow-delimiters-depth-1">(</span>java.net.<span class="org-constant">Proxy</span><span class="org-rainbow-delimiters-depth-1">)</span> throws java.io.<span class="org-constant">IOException</span>
public java.net.<span class="org-constant">URLConnection</span> java.net.<span class="org-constant">URL</span>.openConnection<span class="org-rainbow-delimiters-depth-1">()</span> throws java.io.<span class="org-constant">IOException</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getProtocol<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getFile<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getHost<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getUserInfo<span class="org-rainbow-delimiters-depth-1">()</span>
public int java.net.<span class="org-constant">URL</span>.getPort<span class="org-rainbow-delimiters-depth-1">()</span>
public int java.net.<span class="org-constant">URL</span>.getDefaultPort<span class="org-rainbow-delimiters-depth-1">()</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.getRef<span class="org-rainbow-delimiters-depth-1">()</span>
public boolean java.net.<span class="org-constant">URL</span>.sameFile<span class="org-rainbow-delimiters-depth-1">(</span>java.net.<span class="org-constant">URL</span><span class="org-rainbow-delimiters-depth-1">)</span>
public java.lang.<span class="org-constant">String</span> java.net.<span class="org-constant">URL</span>.toExternalForm<span class="org-rainbow-delimiters-depth-1">()</span>
public <span class="org-scala-font-lockXfinal">final</span> java.lang.<span class="org-constant">Object</span> java.net.<span class="org-constant">URL</span>.getContent<span class="org-rainbow-delimiters-depth-1">(</span>java.lang.<span class="org-constant">Class</span><span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">)</span> throws java.io.<span class="org-constant">IOException</span>
public <span class="org-scala-font-lockXfinal">final</span> java.lang.<span class="org-constant">Object</span> java.net.<span class="org-constant">URL</span>.getContent<span class="org-rainbow-delimiters-depth-1">()</span> throws java.io.<span class="org-constant">IOException</span>
public static void java.net.<span class="org-constant">URL</span>.setURLStreamHandlerFactory<span class="org-rainbow-delimiters-depth-1">(</span>java.net.<span class="org-constant">URLStreamHandlerFactory</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-2-4" class="outline-4">
<h4 id="sec-2-2-4"><span class="section-number-4">2.2.4</span> Show Object's Public Method Names</h4>
<div class="outline-text-4" id="text-2-2-4">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> java.lang.reflect.<span class="org-constant">Modifier</span>

<span class="org-keyword">def</span> <span class="org-function-name">showObjMethodNames</span> <span class="org-rainbow-delimiters-depth-1">(</span>obj<span class="org-keyword">:</span> <span class="org-type">Any</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">for</span> <span class="org-rainbow-delimiters-depth-2">(</span>m <span class="org-keyword">&lt;-</span> obj.getClass<span class="org-rainbow-delimiters-depth-3">()</span>.getDeclaredMethods<span class="org-rainbow-delimiters-depth-3">()</span>
       <span class="org-keyword">if</span> <span class="org-constant">Modifier</span>.isPublic<span class="org-rainbow-delimiters-depth-3">(</span>m.getModifiers<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">)</span> println<span class="org-rainbow-delimiters-depth-2">(</span>m.getName<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">

<pre class="src src-scala">scala&gt; showObjMethodNames<span class="org-rainbow-delimiters-depth-1">(</span>url<span class="org-rainbow-delimiters-depth-1">)</span>
equals
toString
hashCode
openStream
getPath
toURI
getAuthority
getQuery
openConnection
openConnection
getProtocol
getFile
getHost
...
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> GUI - Graphical User Interface (Java Swing)</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><a id="ID-5af1203e-51cc-4501-a2a6-a47673ebd8a8" name="ID-5af1203e-51cc-4501-a2a6-a47673ebd8a8"></a><span class="section-number-4">2.3.1</span> Messagebox</h4>
<div class="outline-text-4" id="text-2-3-1">

<ul class="org-ul">
<li>File: <a href="src/messageBox.scala"><a href="src/messageBox.scala">src/messageBox.scala</a></a> 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">messageBox</span> <span class="org-rainbow-delimiters-depth-1">(</span>title<span class="org-keyword">:</span> <span class="org-type">String</span>, content<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  javax.swing.<span class="org-constant">JOptionPane</span>.showMessageDialog <span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-constant">null</span>,
    content,
    title,
    javax.swing.<span class="org-constant">JOptionPane</span>.<span class="org-constant">PLAIN_MESSAGE</span>
  <span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-rainbow-delimiters-depth-1">}</span>

messageBox<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Information"</span>, <span class="org-string">"Download of file animation.jar completed"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<div class="figure">
<p><a href="images/messageBox1.png"><img src="images/messageBox1.png" alt="messageBox1.png" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-2" class="outline-4">
<h4 id="sec-2-3-2"><a id="ID-5a5958a5-88a7-4e65-88a8-0c117f2607fa" name="ID-5a5958a5-88a7-4e65-88a8-0c117f2607fa"></a><span class="section-number-4">2.3.2</span> Password Dialog</h4>
<div class="outline-text-4" id="text-2-3-2">

<ul class="org-ul">
<li>File: <a href="src/passwordGui.scala"><a href="src/passwordGui.scala">src/passwordGui.scala</a></a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> javax.swing.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">JFrame</span>, <span class="org-constant">JLabel</span>, <span class="org-constant">JButton</span>, <span class="org-constant">JPanel</span>, <span class="org-constant">JPasswordField</span><span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">getPassword</span><span class="org-rainbow-delimiters-depth-1">(</span>passwd<span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JPasswordField</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span>
  <span class="org-keyword">new</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">(</span>passwd.getPassword<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">/// </span><span class="org-comment">Register callback function</span>
<span class="org-comment-delimiter">///</span>
<span class="org-keyword">def</span> <span class="org-function-name">onClick</span><span class="org-rainbow-delimiters-depth-1">(</span>button<span class="org-keyword">:</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>handler<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  button.addActionListener<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionListener</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-keyword">def</span> <span class="org-function-name">actionPerformed</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">ActionEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-4">{</span>
        handler
      <span class="org-rainbow-delimiters-depth-4">}</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">onWindowExit</span><span class="org-rainbow-delimiters-depth-1">(</span>frame<span class="org-keyword">:</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>handler<span class="org-keyword">:</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  frame.addWindowListener<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-keyword">new</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">WindowAdapter</span><span class="org-rainbow-delimiters-depth-3">(){</span>
      <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">windowClosing</span><span class="org-rainbow-delimiters-depth-4">(</span>evt<span class="org-keyword">:</span> <span class="org-type">java</span>.awt.event.<span class="org-constant">WindowEvent</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-4">{</span>
        handler
      <span class="org-rainbow-delimiters-depth-4">}</span>
  <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Scala password entry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">400</span>, <span class="org-constant">200</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setLayout<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.awt.<span class="org-constant">GridLayout</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">2</span>, <span class="org-constant">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">frame.setLayout()</span>

<span class="org-keyword">val</span> <span class="org-variable-name">panel</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JPanel</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.awt.<span class="org-constant">FlowLayout</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">label</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JLabel</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Password"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">passwd</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JPasswordField</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">btn</span>    <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JButton</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Login"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">status</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">JLabel</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Safe closed"</span><span class="org-rainbow-delimiters-depth-1">)</span>
passwd.setEchoChar<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">'*'</span><span class="org-rainbow-delimiters-depth-1">)</span>


panel.add<span class="org-rainbow-delimiters-depth-1">(</span>label<span class="org-rainbow-delimiters-depth-1">)</span>
panel.add<span class="org-rainbow-delimiters-depth-1">(</span>passwd<span class="org-rainbow-delimiters-depth-1">)</span>
panel.add<span class="org-rainbow-delimiters-depth-1">(</span>btn<span class="org-rainbow-delimiters-depth-1">)</span>


frame.add<span class="org-rainbow-delimiters-depth-1">(</span>panel<span class="org-rainbow-delimiters-depth-1">)</span>
frame.add<span class="org-rainbow-delimiters-depth-1">(</span>status<span class="org-rainbow-delimiters-depth-1">)</span>

frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">--------- Event Handling ----------</span>

<span class="org-keyword">def</span> <span class="org-function-name">checkPassword</span><span class="org-rainbow-delimiters-depth-1">(</span>
  passwd<span class="org-keyword">:</span> <span class="org-type">String</span>,
  input<span class="org-keyword">:</span> <span class="org-type">String</span>,
  okHanlder<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span>,
  errHandler<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span> <span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>input == passwd<span class="org-rainbow-delimiters-depth-2">)</span>
    okHanlder<span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">else</span>
    errHandler<span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

onClick<span class="org-rainbow-delimiters-depth-1">(</span>btn<span class="org-rainbow-delimiters-depth-1">){</span> println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I was clicked"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

onClick<span class="org-rainbow-delimiters-depth-1">(</span>btn<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">pass</span> <span class="org-keyword">=</span> getPassword<span class="org-rainbow-delimiters-depth-2">(</span>passwd<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>pass == <span class="org-string">"thepassword"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Safe opened"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">else</span>
    println<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: Wrong password"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

onClick<span class="org-rainbow-delimiters-depth-1">(</span>btn<span class="org-rainbow-delimiters-depth-1">){</span>
  checkPassword<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-string">"thepassword"</span>
   ,getPassword<span class="org-rainbow-delimiters-depth-3">(</span>passwd<span class="org-rainbow-delimiters-depth-3">)</span>
   ,<span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> status.setText<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Safe opened. Ok"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   ,<span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">=&gt;</span> status.setText<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: Wrong password"</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>

onWindowExit<span class="org-rainbow-delimiters-depth-1">(</span>frame<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">System</span>.exit<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">0</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>



<div class="figure">
<p><a href="images/passwordGui1.png"><img src="images/passwordGui1.png" alt="passwordGui1.png" /></a>
</p>
</div>


<div class="figure">
<p><a href="images/passwordGui2.png"><img src="images/passwordGui2.png" alt="passwordGui2.png" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-3" class="outline-4">
<h4 id="sec-2-3-3"><span class="section-number-4">2.3.3</span> List View Dialog</h4>
<div class="outline-text-4" id="text-2-3-3">
<p>
The function listView is useful for data vizualization of lists,
files, numbers and son on.
</p>

<ul class="org-ul">
<li>File: <a href="src/listViewGui.scala"><a href="src/listViewGui.scala">src/listViewGui.scala</a></a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-comment-delimiter">/// </span><span class="org-comment">Function to visualize data in List View Mode</span>
<span class="org-comment-delimiter">///</span>
<span class="org-keyword">def</span> <span class="org-function-name">listView</span><span class="org-rainbow-delimiters-depth-1">(</span>elements<span class="org-keyword">:</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">frame</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"List Data View"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">model</span>  <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">DefaultListModel</span><span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">String</span><span class="org-rainbow-delimiters-depth-2">]()</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">list</span>   <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JList</span><span class="org-rainbow-delimiters-depth-2">(</span>model<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">scroll</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JScrollPane</span><span class="org-rainbow-delimiters-depth-2">(</span>list<span class="org-rainbow-delimiters-depth-2">)</span>
  frame.add<span class="org-rainbow-delimiters-depth-2">(</span>scroll<span class="org-rainbow-delimiters-depth-2">)</span>
  elements.foreach<span class="org-rainbow-delimiters-depth-2">(</span>model.addElement<span class="org-rainbow-delimiters-depth-2">)</span>
  frame.setSize<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">300</span>, <span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-2">)</span>
  frame.setVisible<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">def</span> <span class="org-function-name">listFiles</span><span class="org-rainbow-delimiters-depth-1">(</span>path<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-3">(</span>path<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    .listFiles<span class="org-rainbow-delimiters-depth-2">()</span>
    .map<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>.toString<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Show the files of directory <i>etc</i>
</p>

<div class="org-src-container">

<pre class="src src-scala">listView<span class="org-rainbow-delimiters-depth-1">(</span>listFiles<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/etc"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<div class="figure">
<p><a href="images/listViewFiles.png"><img src="images/listViewFiles.png" alt="listViewFiles.png" /></a>
</p>
</div>


<p>
Show java properties
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> scala.collection.<span class="org-constant">JavaConverters</span>.<span class="org-keyword">_</span>
<span class="org-keyword">val</span> <span class="org-variable-name">properties</span> <span class="org-keyword">=</span> <span class="org-constant">System</span>.getProperties<span class="org-rainbow-delimiters-depth-1">()</span>.asScala.toArray.map <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">case</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">k</span>, <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=&gt;</span> k + <span class="org-string">" = "</span> + v <span class="org-rainbow-delimiters-depth-1">}</span>
listView<span class="org-rainbow-delimiters-depth-1">(</span>properties<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<div class="figure">
<p><a href="images/listViewJavaProperties.png"><img src="images/listViewJavaProperties.png" alt="listViewJavaProperties.png" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-4" class="outline-4">
<h4 id="sec-2-3-4"><span class="section-number-4">2.3.4</span> Text View Dialog</h4>
<div class="outline-text-4" id="text-2-3-4">
<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">textView</span><span class="org-rainbow-delimiters-depth-1">(</span>file<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Text View App"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">textArea</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JTextArea</span><span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">scroll</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JScrollPane</span><span class="org-rainbow-delimiters-depth-2">(</span>textArea<span class="org-rainbow-delimiters-depth-2">)</span>
  textArea.setText<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span>
  frame.add<span class="org-rainbow-delimiters-depth-2">(</span>scroll<span class="org-rainbow-delimiters-depth-2">)</span>
  frame.setSize<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">300</span>, <span class="org-constant">400</span><span class="org-rainbow-delimiters-depth-2">)</span>
  frame.setVisible<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">text</span> <span class="org-keyword">=</span> scala.io.<span class="org-constant">Source</span>.fromFile<span class="org-rainbow-delimiters-depth-2">(</span>file<span class="org-rainbow-delimiters-depth-2">)</span>.mkString
  textArea.setText<span class="org-rainbow-delimiters-depth-2">(</span>text<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; textView<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/etc/protocols"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<div class="figure">
<p><a href="images/textView1.png"><img src="images/textView1.png" alt="textView1.png" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-5" class="outline-4">
<h4 id="sec-2-3-5"><a id="ID-76e4cb5a-86e7-481e-972f-b29e41288d7b" name="ID-76e4cb5a-86e7-481e-972f-b29e41288d7b"></a><span class="section-number-4">2.3.5</span> Clock Display</h4>
<div class="outline-text-4" id="text-2-3-5">

<ul class="org-ul">
<li>File: <a href="src/clockDisplayGui.scala"><a href="src/clockDisplayGui.scala">src/clockDisplayGui.scala</a></a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">runTimer</span><span class="org-rainbow-delimiters-depth-1">(</span>interval<span class="org-keyword">:</span> <span class="org-type">Int</span>, taskFn<span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> <span class="org-constant">Unit</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">task</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">TimerTask</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">def</span> <span class="org-function-name">run</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">{</span>
      taskFn<span class="org-rainbow-delimiters-depth-4">()</span>
    <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">timer</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.util.<span class="org-constant">Timer</span><span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Run the task every 1 second interval (or 1000 milli seconds)</span>
  timer.schedule<span class="org-rainbow-delimiters-depth-2">(</span>task, <span class="org-constant">1</span>, interval<span class="org-rainbow-delimiters-depth-2">)</span>
  timer
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">def</span> <span class="org-function-name">currentTime</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  java.time.<span class="org-constant">LocalDateTime</span>.now.toString
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Java Clock App"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">val</span> <span class="org-variable-name">label</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JLabel</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.add<span class="org-rainbow-delimiters-depth-1">(</span>label<span class="org-rainbow-delimiters-depth-1">)</span>
frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">375</span>, <span class="org-constant">76</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>


runTimer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">1000</span>, <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=&gt;</span> label.setText<span class="org-rainbow-delimiters-depth-2">(</span>currentTime<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>



<div class="figure">
<p><a href="images/clockDisplayGui.png"><img src="images/clockDisplayGui.png" alt="clockDisplayGui.png" /></a>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Http Get Request</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Java Code - <a href="https://www.mkyong.com/java/how-to-send-http-request-getpost-in-java/">https://www.mkyong.com/java/how-to-send-http-request-getpost-in-java/</a>
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">def</span> <span class="org-function-name">httpGetRead</span><span class="org-rainbow-delimiters-depth-1">(</span>url<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">obj</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.net.<span class="org-constant">URL</span><span class="org-rainbow-delimiters-depth-2">(</span>url<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">conn</span> <span class="org-keyword">=</span> obj.openConnection<span class="org-rainbow-delimiters-depth-2">()</span>.asInstanceOf<span class="org-rainbow-delimiters-depth-2">[</span>java.net.<span class="org-constant">HttpURLConnection</span><span class="org-rainbow-delimiters-depth-2">]</span>
  conn.setRequestMethod<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"GET"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  conn.setRequestProperty<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"User-Agent"</span>, <span class="org-string">"Scala browser"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">val</span> <span class="org-variable-name">respCode</span> <span class="org-keyword">=</span> conn.getResponseCode<span class="org-rainbow-delimiters-depth-2">()</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">bf</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">BufferedReader</span><span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">InputStreamReader</span><span class="org-rainbow-delimiters-depth-3">(</span>conn.getInputStream<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-keyword">val</span> <span class="org-variable-name">out</span> <span class="org-keyword">=</span> <span class="org-constant">Stream</span>.continually<span class="org-rainbow-delimiters-depth-2">(</span>bf.readLine<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
    .takeWhile<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">_</span>!=<span class="org-constant">null</span><span class="org-rainbow-delimiters-depth-2">)</span>
    .mkString<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"</span><span class="org-string"><span class="org-constant">\n</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  out
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; httpGetRead<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"http://www.httpbin.org/get"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">res24</span><span class="org-keyword">:</span> <span class="org-type">String</span> <span class="org-keyword">=</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-string">"args"</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">{}</span>,
  <span class="org-string">"headers"</span><span class="org-keyword">:</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-string">"Accept"</span><span class="org-keyword">:</span> <span class="org-string">"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"</span>,
    <span class="org-string">"Connection"</span><span class="org-keyword">:</span> <span class="org-string">"close"</span>,
    <span class="org-string">"Host"</span><span class="org-keyword">:</span> <span class="org-string">"www.httpbin.org"</span>,
    <span class="org-string">"User-Agent"</span><span class="org-keyword">:</span> <span class="org-string">"Scala browser"</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>,
  <span class="org-string">"origin"</span><span class="org-keyword">:</span> <span class="org-string">"186.212.135.2"</span>,
  <span class="org-string">"url"</span><span class="org-keyword">:</span> <span class="org-string">"http://www.httpbin.org/get"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><a id="ID-b1d9a671-2678-4147-9c5f-e3f090889b0a" name="ID-b1d9a671-2678-4147-9c5f-e3f090889b0a"></a><span class="section-number-3">2.5</span> Using a jar files or java library</h3>
<div class="outline-text-3" id="text-2-5">

<p>
Example: Using JFreeChart chart library. 
</p>

<ul class="org-ul">
<li>Official web site: <a href="http://www.jfree.org/jfreechart/">http://www.jfree.org/jfreechart/</a>
</li>

<li><a href="https://mvnrepository.com/artifact/jfree/jfreechart/1.0.13">https://mvnrepository.com/artifact/jfree/jfreechart/1.0.13</a>
</li>

<li>Download: <a href="http://repo1.maven.org/maven2/org/jfree/">http://repo1.maven.org/maven2/org/jfree/</a>
</li>

<li>Tutorial: <a href="http://web.archive.org/web/20130904182014/https://www.if.pw.edu.pl/~ertman/pojava/?download=jfreechart_tutorial.pdf">JFreeChart Tutorial</a>
</li>
</ul>


<ol class="org-ol">
<li>Download JFreeChart 
</li>
</ol>

<div class="org-src-container">

<pre class="src src-sh">$ mkdir ~/test &amp;&amp; <span class="org-builtin">cd</span> ~/test 
$ mkdir lib

<span class="org-comment-delimiter"># </span><span class="org-comment">Download jars </span>
$ curl -o <span class="org-keyword">lib/jfreechart.jar</span> -L http://repo1.maven.org/maven2/org/jfree/jfreechart/1.0.19/jfreechart-1.0.19.jar
$ curl -o <span class="org-keyword">lib/jcommon.jar</span> -L http://repo1.maven.org/maven2/org/jfree/jcommon/1.0.23/jcommon-1.0.23.jar

<span class="org-comment-delimiter"># </span><span class="org-comment">Download this file to check dependencies</span>
$ curl -O http://repo1.maven.org/maven2/org/jfree/jfreechart/1.0.19/jfreechart-1.0.19.pom
</pre>
</div>

<ol class="org-ol">
<li>Start Scala REPL with: 
</li>
</ol>

<div class="org-src-container">

<pre class="src src-sh">$ scala -cp lib/jcommon.jar:lib/jfreechart.jar
</pre>
</div>

<p>
or
</p>

<div class="org-src-container">

<pre class="src src-scala">$ scala
<span class="org-constant">Welcome</span> to <span class="org-constant">Scala</span> <span class="org-constant">2.11.8</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Java</span> <span class="org-constant">HotSpot</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">TM</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-constant">64</span>-<span class="org-constant">Bit</span> <span class="org-constant">Server</span> <span class="org-constant">VM</span>, <span class="org-constant">Java</span> <span class="org-constant">1.8.0</span>_20<span class="org-rainbow-delimiters-depth-1">)</span>.
<span class="org-constant">Type</span> in expressions <span class="org-keyword">for</span> evaluation. <span class="org-constant">Or</span> <span class="org-keyword">try</span> <span class="org-keyword">:</span><span class="org-type">help</span>.

scala&gt; <span class="org-keyword">:</span><span class="org-type">require</span> lib/jcommon.jar
<span class="org-constant">Added</span> <span class="org-string">'/</span>home/archbox/test/lib/jcommon.jar' to classpath.

scala&gt; <span class="org-keyword">:</span><span class="org-type">require</span> lib/jfreechart.jar
<span class="org-constant">Added</span> <span class="org-string">'/</span>home/archbox/test/lib/jfreechart.jar' to classpath.
</pre>
</div>


<ol class="org-ol">
<li>Plotting a pie chart. It was based on <a href="https://www.if.pw.edu.pl/~ertman/pojava/?download=jfreechart_tutorial.pdf">JFreeChart Tutorial</a>.
</li>
</ol>

<p>
File: <a href="src/jfreeChart1.scala"><a href="src/jfreeChart1.scala">src/jfreeChart1.scala</a></a> 
</p>

<p>
The lines below can be pasted in the Scala REPL and the user can and
manipulate the chart objects and modify it interactively.
</p>

<div class="org-src-container">

<pre class="src src-scala"><span class="org-keyword">import</span> org.jfree.chart.<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">ChartPanel</span>, <span class="org-constant">ChartFactory</span>, <span class="org-constant">JFreeChart</span>, <span class="org-constant">ChartUtilities</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">import</span> org.jfree.data.general.<span class="org-constant">DefaultPieDataset</span>

<span class="org-keyword">val</span> <span class="org-variable-name">dataset</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">DefaultPieDataset</span><span class="org-rainbow-delimiters-depth-1">()</span>

dataset.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"A"</span>, <span class="org-constant">75</span><span class="org-rainbow-delimiters-depth-1">)</span>
dataset.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"B"</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
dataset.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"C"</span>, <span class="org-constant">10</span><span class="org-rainbow-delimiters-depth-1">)</span>
dataset.setValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"D"</span>, <span class="org-constant">5</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">val</span> <span class="org-variable-name">chart</span> <span class="org-keyword">=</span> <span class="org-constant">ChartFactory</span>.createPieChart<span class="org-rainbow-delimiters-depth-1">(</span>
  <span class="org-string">"Sample Pie Chart"</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">Title</span>
  dataset,            <span class="org-comment-delimiter">// </span><span class="org-comment">Dataset </span>
  <span class="org-constant">true</span>,               <span class="org-comment-delimiter">// </span><span class="org-comment">Show legend</span>
  <span class="org-constant">true</span>,               <span class="org-comment-delimiter">// </span><span class="org-comment">Tooltips on</span>
  <span class="org-constant">false</span> 
<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Save chart to a png file </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">---------------------------</span>
<span class="org-constant">ChartUtilities</span>.saveChartAsPNG<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">java</span>.io.<span class="org-constant">File</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"mychart.png"</span><span class="org-rainbow-delimiters-depth-2">)</span>, chart, <span class="org-constant">500</span>, <span class="org-constant">500</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Show Chart in a Java Swing Frame</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------------</span>
<span class="org-keyword">val</span> <span class="org-variable-name">frame</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">javax</span>.swing.<span class="org-constant">JFrame</span><span class="org-rainbow-delimiters-depth-1">()</span>
frame.add<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">ChartPanel</span><span class="org-rainbow-delimiters-depth-2">(</span>chart<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setDefaultCloseOperation<span class="org-rainbow-delimiters-depth-1">(</span>javax.swing.<span class="org-constant">JFrame</span>.<span class="org-constant">EXIT_ON_CLOSE</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setSize<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">693</span>, <span class="org-constant">513</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setTitle<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Sample Pie Chart"</span><span class="org-rainbow-delimiters-depth-1">)</span>
frame.setVisible<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
It will display this chart: 
</p>


<div class="figure">
<p><a href="images/jfreeChart1.png"><img src="images/jfreeChart1.png" alt="jfreeChart1.png" /></a>
</p>
</div>


<ol class="org-ol">
<li>Running the file  <a href="src/jfreeChart1.scala"><a href="src/jfreeChart1.scala">src/jfreeChart1.scala</a></a> 
</li>
</ol>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">It will create the file jfreeChart1.jar </span>
$ scala -cp lib/jcommon.jar:lib/jfreechart.jar -save jfreeChart1.scala 

<span class="org-comment-delimiter"># </span><span class="org-comment">The second time this command is run, it will run the file</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">jfreeChart1.jar that is a faster than run jfreeChart1.scala.</span>
$ scala -cp lib/jcommon.jar:lib/jfreechart.jar -save jfreeChart1.scala 

<span class="org-comment-delimiter"># </span><span class="org-comment">The produced jar file can be run directly with Scala.</span>
$ scala -cp lib/jcommon.jar:lib/jfreechart.jar -save jfreeChart1.jar
</pre>
</div>

<ol class="org-ol">
<li>Building an uber jar or fat-jar for easier distribution and
deployment. A fat is a jar file bundled with all dependencies and
runt-time libraries which makes possible to run the jar-file
without Scala or JFree chart available at the deployment
machine. 
</li>
</ol>

<p>
This procedure uses the script: <a href="https://github.com/caiorss/build-fat-jar/blob/master/jar-tools.sh">jar-tools.sh</a>
</p>

<div class="org-src-container">

<pre class="src src-sh">$ jar-tools.sh -scala-build-jar out/jfreeChart1-fat.jar jfreeChart1.jar lib/*

At directory /home/archbox/test/out/temp
Extracting /home/archbox/test/lib/jcommon.jar
Extracting /home/archbox/test/lib/jfreechart.jar

Manifest Content META-INF/MANIFEST.MF

<span class="org-function-name">Manifest-Version</span>: 1.0
<span class="org-function-name">Scala-Compiler-Version</span>: 2.11.8
<span class="org-function-name">Main-Class</span>: Main

Building fat-jar file ...
added manifest
<span class="org-function-name">adding</span>: com/(<span class="org-keyword">in</span> = 0) (<span class="org-variable-name">out</span>= 0)(stored 0%)
<span class="org-function-name">adding</span>: com/keypoint/(<span class="org-keyword">in</span> = 0) (<span class="org-variable-name">out</span>= 0)(stored 0%)
<span class="org-function-name">adding</span>: com/keypoint/PngEncoder.class(<span class="org-keyword">in</span> = 9079) (<span class="org-variable-name">out</span>= 4645)(deflated 48%)
<span class="org-function-name">adding</span>: library.properties(<span class="org-keyword">in</span> = 187) (<span class="org-variable-name">out</span>= 135)(deflated 27%)
<span class="org-function-name">adding</span>: Main$<span class="org-variable-name">$anon</span>$<span class="org-variable-name">1</span>.class(<span class="org-keyword">in</span> = 1967) (<span class="org-variable-name">out</span>= 1031)(deflated 47%)
<span class="org-function-name">adding</span>: Main.class(<span class="org-keyword">in</span> = 556) (<span class="org-variable-name">out</span>= 469)(deflated 15%)
<span class="org-function-name">adding</span>: Main$.class(<span class="org-keyword">in</span> = 570) (<span class="org-variable-name">out</span>= 372)(deflated 34%)
ignoring entry META-INF/

... ... ... ... ... ... ... ... ... ... ... ... ... ...

<span class="org-function-name">adding</span>: scala/Predef$<span class="org-variable-name">StringFormat</span>$.class(<span class="org-keyword">in</span> = 2107) (<span class="org-variable-name">out</span>= 1010)(deflated 52%)
<span class="org-function-name">adding</span>: scala/Tuple5$.class(<span class="org-keyword">in</span> = 1805) (<span class="org-variable-name">out</span>= 768)(deflated 57%)
<span class="org-function-name">adding</span>: scala/Function2$<span class="org-variable-name">mcZJD</span>$<span class="org-variable-name">sp</span>.class(<span class="org-keyword">in</span> = 323) (<span class="org-variable-name">out</span>= 196)(deflated 39%)
<span class="org-function-name">adding</span>: scala/Char.class(<span class="org-keyword">in</span> = 6084) (<span class="org-variable-name">out</span>= 3604)(deflated 40%)
<span class="org-function-name">adding</span>: scala/Float.class(<span class="org-keyword">in</span> = 5382) (<span class="org-variable-name">out</span>= 3268)(deflated 39%)
<span class="org-function-name">adding</span>: scala/Enumeration$<span class="org-variable-name">ValueSet</span>$<span class="org-variable-name">$anon</span>$<span class="org-variable-name">2</span>.class(<span class="org-keyword">in</span> = 1673) (<span class="org-variable-name">out</span>= 668)(deflated 60%)
--------------------------------------

Built file: out/jfreeChart1-fat.jar Ok.
Run it with $ java -jar out/jfreeChart1-fat.jar
</pre>
</div>

<p>
The uber jar can be run by using the line below or by double clicking
at the jar file if the system is configured properly: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ java -jar out/jfreeChart1-fat.jar
</pre>
</div>

<p>
This jar-file can be turned into a Unix executable with: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ jar-tools.sh -jar-to-sh out/jfreeChart1-fat.jar out/jfreeChart1.sh
Build jar-executable out/jfreeChart1.sh
Run it with ./out/jfreeChart1.sh

$ file out/jfreeChart1.sh 
<span class="org-function-name">out/jfreeChart1.sh</span>: a /usr/bin/env sh  script executable (binary data)

$ head -n 3 out/jfreeChart1.sh 
<span class="org-comment-delimiter">#</span><span class="org-comment">!/usr/bin/env sh </span>
java -jar $<span class="org-variable-name">0</span>
<span class="org-keyword">exit</span> 0
</pre>
</div>

<p>
It can be executed with:
</p>

<div class="org-src-container">

<pre class="src src-sh">$ ./out/jfreeChart1.sh
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Bookmarks and Resources</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Scala API Documentation</h3>
<div class="outline-text-3" id="text-3-1">
<p>
<b>Scala API</b>
</p>

<ul class="org-ul">
<li>Scala API - Standard Library. <a href="http://www.scala-lang.org/api/current/">Scala Standard Library 2.12.2</a>
</li>
</ul>


<ul class="org-ul">
<li>Collections - <a href="http://www.scala-lang.org/api/current/scala/collection/index.html">http://www.scala-lang.org/api/current/scala/collection/index.html</a>
</li>
</ul>


<ul class="org-ul">
<li>Math - <a href="http://www.scala-lang.org/api/current/scala/math/index.html">http://www.scala-lang.org/api/current/scala/math/index.html</a>
</li>
</ul>


<p>
<b>Java API</b>
</p>

<ul class="org-ul">
<li><a href="https://docs.oracle.com/javase/8/docs/api/">Overview (Java Platform SE 8 )</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Learning Resources</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><b>A tour of Scala</b> - <a href="https://docs.scala-lang.org/tutorials/">https://docs.scala-lang.org/tutorials/</a>
</li>
</ul>


<ul class="org-ul">
<li><a href="https://www.scala-lang.org/">The Scala Programming Language</a> - <a href="https://www.scala-lang.org/">https://www.scala-lang.org/</a>
</li>
</ul>


<ul class="org-ul">
<li><a href="https://twitter.github.io/scala_school/">Scala School</a> - Twitter 
</li>
</ul>


<ul class="org-ul">
<li><a href="http://exercism.io/languages/scala/about">Scala - exercism.io</a>
</li>
</ul>


<ul class="org-ul">
<li><a href="http://alvinalexander.com/scala">scala | alvinalexander.com</a>
</li>
</ul>


<ul class="org-ul">
<li><a href="https://learnxinyminutes.com/docs/scala/">Learn Scala in Y Minutes</a>
</li>
</ul>


<ul class="org-ul">
<li><a href="http://www.tutorialspoint.com/scala/">http://www.tutorialspoint.com/scala/</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Java and Scala Libraries</h3>
<div class="outline-text-3" id="text-3-3">
</div><div id="outline-container-sec-3-3-1" class="outline-4">
<h4 id="sec-3-3-1"><span class="section-number-4">3.3.1</span> Scala Libraries</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
Selection of third party Scala libraries. 
</p>

<ul class="org-ul">
<li>Database

<ul class="org-ul">
<li><a href="http://slick.lightbend.com">Slick</a>
</li>

<li><a href="http://squeryl.org">Squerly</a> - "A Scala ORM and DSL for talking with Databases with
minimum verbosity and maximum type safety". 
</li>
</ul>
</li>

<li>Category Theory and Functional Programming

<ul class="org-ul">
<li><a href="https://typelevel.org/cats/">Cats</a> - Provides abstractions for functional programming such as
type clases, monads, monoids, functor and so on. 
</li>

<li><a href="https://github.com/scalaz/scalaz">Scalaz</a> - Extension of core Scala library for functional
programming based on Haskell with many category theory
abstractions such as functor, monad, monoid and etc.
</li>
</ul>
</li>

<li>Reactive Programming - (Event-driven programming)

<ul class="org-ul">
<li><a href="http://reactivex.io/rxscala/">RxScala</a> - Reactive Extensions for Scala. Based on .NET
</li>

<li><a href="https://github.com/lihaoyi/scala.rx">Rx.Scala</a> - "An experimental library for Functional Reactive
Programming in Scala" 
</li>
</ul>
</li>

<li>Actor Model

<ul class="org-ul">
<li><a href="http://doc.akka.io/docs/akka/2.0/scala/actors.html">Scala - Akka</a> - Actor model library for Scala based on Erlan's Actor
model implementation.
</li>
</ul>
</li>

<li>Testing

<ul class="org-ul">
<li><a href="http://etorreborre.github.io/specs2/">Spec2</a> - "Software specification for Scala"
</li>

<li><a href="http://www.scalacheck.org">ScalaCheck</a> - Propery-based testing for Scala based on Haskell's
QuickCheck. 
</li>
</ul>
</li>

<li>RPC  - Remote Procedure Call

<ul class="org-ul">
<li><a href="https://twitter.github.io/finagle/">Finagle</a> - "Finagle is an extensible RPC system for the JVM, used
to construct high-concurrency servers. Finagle implements uniform
client and server APIs for several protocols, and is designed for
high performance and concurrency. Most of Finagle’s code is
protocol agnostic, simplifying the implementation of new
protocols."
</li>
</ul>
</li>

<li>Web Framework - Libraries or Frameworks to build Web Sites, Web
applications or Web Servers. 

<ul class="org-ul">
<li><a href="https://www.playframework.com">Play Framework</a>
</li>

<li><a href="http://scalatra.org">http://scalatra.org</a>
</li>
</ul>
</li>

<li>Math

<ul class="org-ul">
<li><a href="https://github.com/non/spire">Spire</a> - "Powerful new number types and numeric abstractions for
Scala." - 
</li>
</ul>
</li>
</ul>


<p>
See also:
</p>

<ul class="org-ul">
<li><a href="https://github.com/lauris/awesome-scala">Awesome Scala</a> - "A community driven list of useful Scala libraries,
frameworks and software. This is not a catalog of all the
libraries, just a starting point for your explorations."
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-3-3-2" class="outline-4">
<h4 id="sec-3-3-2"><span class="section-number-4">3.3.2</span> Java Libraries</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
Selection of useful Java third party libraries.
</p>

<ul class="org-ul">
<li>Parsers 

<ul class="org-ul">
<li>HTML Parser

<ul class="org-ul">
<li><a href="https://jsoup.org/">Jsoup</a>
</li>
</ul>
</li>

<li>Json parser and serialization

<ul class="org-ul">
<li><a href="https://github.com/google/gson">Google-Gson</a>
</li>
</ul>
</li>
</ul>
</li>

<li>Http Client

<ul class="org-ul">
<li><a href="https://hc.apache.org/httpcomponents-client-ga">Apache HTTP Client</a>
</li>
</ul>
</li>

<li>Date and Time

<ul class="org-ul">
<li><a href="http://www.joda.org/joda-time/">Joda-Time</a> - Facilities for date and time manipulation. It is
already incorporated in Java 8.
</li>
</ul>
</li>

<li>Utilities 

<ul class="org-ul">
<li><a href="https://commons.apache.org/">Apache Commons</a> - Enhancements over Java Collections.
</li>

<li><a href="http://commons.apache.org/proper/commons-io/">Apache IO</a> - Library to perform stream and file operations.
</li>

<li>Logging

<ul class="org-ul">
<li><a href="http://www.slf4j.org/">http://www.slf4j.org/</a>
</li>

<li><a href="http://logging.apache.org/log4j/2.x/">http://logging.apache.org/log4j/2.x/</a>
</li>
</ul>
</li>

<li>Testing

<ul class="org-ul">
<li><a href="http://junit.org/junit5/">JUnit</a> 
</li>
</ul>
</li>
</ul>
</li>

<li>Chart 

<ul class="org-ul">
<li><a href="http://www.jfree.org/jfreechart/">JfreeChart</a> - Chart library to plot bar chart, line chart and so on. 
</li>
</ul>
</li>

<li>Math 

<ul class="org-ul">
<li><a href="http://commons.apache.org/proper/commons-math/">Apache Math</a> - "Commons Math is a library of lightweight,
self-contained mathematics and statistics components addressing
the most common problems not available in the Java programming
language or Commons Lang"
</li>

<li><a href="http://math.nist.gov/javanumerics/jama/">JAMA</a> - Java Matrix Package for linear algebra - 
</li>
</ul>
</li>
</ul>


<p>
See also: 
</p>

<ul class="org-ul">
<li><a href="http://blog.takipi.com/the-top-100-java-libraries-in-2016-after-analyzing-47251-dependencies/">Top 100 Java Libraries</a>
</li>

<li><a href="http://www.fromdev.com/2014/10/most-widely-used-java-libraries.html">45+ Most Useful Java Libraries</a>
</li>

<li><a href="https://github.com/akullpp/awesome-java">Awesome Java</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-3-3-3" class="outline-4">
<h4 id="sec-3-3-3"><span class="section-number-4">3.3.3</span> Sites to find Libraries</h4>
<div class="outline-text-4" id="text-3-3-3">
<ul class="org-ul">
<li><a href="https://search.maven.org/">https://search.maven.org/</a>
</li>

<li><a href="https://mvnrepository.com/">https://mvnrepository.com/</a> 
</li>

<li>Site for automated download of Java or Scala libraries.

<ul class="org-ul">
<li><a href="http://repo1.maven.org/">http://repo1.maven.org/</a>
</li>

<li>Java Library - commons-io/commons-io/2.5 

<ul class="org-ul">
<li><a href="http://repo1.maven.org/maven2/commons-io/commons-io/">http://repo1.maven.org/maven2/commons-io/commons-io/</a>
</li>

<li><a href="http://repo1.maven.org/maven2/commons-io/commons-io/2.5/">http://repo1.maven.org/maven2/commons-io/commons-io/2.5/</a>
</li>

<li><a href="http://repo1.maven.org/maven2/commons-io/commons-io/2.5/commons-io-2.5.jar">http://repo1.maven.org/maven2/commons-io/commons-io/2.5/commons-io-2.5.jar</a>
</li>

<li><a href="http://repo1.maven.org/maven2/commons-io/commons-io/2.5/commons-io-2.5.pom">http://repo1.maven.org/maven2/commons-io/commons-io/2.5/commons-io-2.5.pom</a>
</li>
</ul>
</li>

<li>Scalaz

<ul class="org-ul">
<li><a href="http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.12/">http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.12/</a>
</li>

<li><a href="http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.12/maven-metadata.xml">http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.12/maven-metadata.xml</a>
</li>

<li><a href="http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.12/7.2.9/scalaz-core_2.12-7.2.9.pom">http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.12/7.2.9/scalaz-core_2.12-7.2.9.pom</a>
</li>

<li><a href="http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.12/7.2.9/scalaz-core_2.12-7.2.9.jar">http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.12/7.2.9/scalaz-core_2.12-7.2.9.jar</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Community</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li><a href="https://users.scala-lang.org/">Scala Users</a> - Forum 
</li>

<li><a href="https://stackoverflow.com/questions/tagged/scala">https://stackoverflow.com/questions/tagged/scala</a>
</li>

<li><a href="https://www.reddit.com/r/scala/">https://www.reddit.com/r/scala/</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Reports</h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li><b>Refactoring a Complex GUI Application: A Case Study with the
Auckland Layout Editor</b> -
<a href="https://www.cs.auckland.ac.nz/~lutteroth/publications/theses/ALE-IreneZhang-2014.pdf">https://www.cs.auckland.ac.nz/~lutteroth/publications/theses/ALE-IreneZhang-2014.pdf</a>
</li>

<li><b>How Scala Improved Our Java</b>
   <a href="http://spot.colorado.edu/~reids/talks/how-scala-improved-our-java.pdf">http://spot.colorado.edu/~reids/talks/how-scala-improved-our-java.pdf</a>
</li>

<li><b>Scala in practice</b>
   <a href="https://www.slideshare.net/holograph/scala-in-practice-12803578">https://www.slideshare.net/holograph/scala-in-practice-12803578</a>
</li>

<li><b>6 Months with Scala - An Experience Report</b>
   <a href="https://jtcwang.me/scala-after-6-months">https://jtcwang.me/scala-after-6-months</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> Presentations</h3>
<div class="outline-text-3" id="text-3-6">
<ul class="org-ul">
<li>Martin Odersky. <b>A Scalable Language</b> <a href="https://www.slideshare.net/Odersky/fosdem-2009-1013261?qid=1f420201-9524-4f9f-9d9f-20c8cde0c52e&v=&b=&from_search=8">https://www.slideshare.net/Odersky/fosdem-2009-1013261?qid=1f420201-9524-4f9f-9d9f-20c8cde0c52e&v=&b=&from_search=8</a> 
</li>

<li><b>Scala - just good for java shops?</b> <a href="https://www.slideshare.net/snim2/scala-just-goodforjavashops">https://www.slideshare.net/snim2/scala-just-goodforjavashops</a>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: nobody</p>
<p class="date">Created: 2018-05-07 Mon 10:14</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
